<!DOCTYPE html> 
<html> 
<head> 
<style> 
body {
       background: linear-gradient(to right, #1e1e1e, #0a0a0a);
}
#player {
   position: absolute;
   left: 50px;
   top: 50px;
   width: 50px;
   height: 50px;
   background-color: rgb(200, 200, 237);
}
#projectile {
   position: absolute;
   width: 10px;
   height: 10px;
   background-color: white;
   display: none;
}
#enemy {
   position: absolute;
   width: 50px;
   height: 50px;
   background-color: red;
   display: none;
}
</style> 
</head> 
<body> 

<div id="player">Player</div> 
<div id="enemy">Enemy</div>
<div id="projectile"></div>

<script>
 // Get the player and projectile elements
var player = document.getElementById("player");
var projectile = document.getElementById("projectile");

// Get the player and enemy elements
var player = document.getElementById("player");
var enemy = document.getElementById("enemy");

// Initial position of the player
var playerX = 50;
var playerY = 50;

// Step size for moving the player
var step = 10;

// Listen for key presses
document.addEventListener("keydown", movePlayer);

// Function to move the player
function movePlayer(event) {
    // Check which key is pressed
    switch (event.code) {
        case "KeyW":
            playerY -= step;
            break;
        case "KeyA":
            playerX -= step;
            break;
        case "KeyS":
            playerY += step;
            break;
        case "KeyD":
            playerX += step;
            break;
    }
    // Update the position of the player
    player.style.left = playerX + "px";
    player.style.top = playerY + "px";
}

var playerWidth = 50;
var playerHeight = 50;
var bodyWidth = document.body.clientWidth;
var bodyHeight = document.body.clientHeight;

document.onkeydown = function(e) {
    // Move the player based on the key pressed
    switch (e.keyCode) {
        case 87: // W key
            playerY -= playerSpeed;
            break;
        case 83: // S key
            playerY += playerSpeed;
            break;
        case 65: // A key
            playerX -= playerSpeed;
            break;
        case 68: // D key
            playerX += playerSpeed;
            break;
    }
    // Check if the player is going off the screen
    if (playerX < 0) {
        playerX = 0;
    }
    if (playerX + playerWidth > bodyWidth) {
        playerX = bodyWidth - playerWidth;
    }
    if (playerY < 0) {
        playerY = 0;
    }
    if (playerY + playerHeight > bodyHeight) {
        playerY = bodyHeight - playerHeight;
    }
    // Update the position of the player element
    player.style.left = playerX + "px";
    player.style.top = playerY + "px";
};

var enemies = []; // array to store the enemies
var intervalId; // variable to store the interval ID for spawning enemies

// Listen for clicks on the body
document.body.addEventListener("click", shoot);

// Function to shoot the projectile
function shoot(event) {
    // Get the mouse coordinates
    var mouseX = event.clientX;
    var mouseY = event.clientY;

    // Set the initial position of the projectile
    projectile.style.left = playerX + 25 + "px";
    projectile.style.top = playerY + 25 + "px";
    projectile.style.display = "block";

    // Set the animation for the projectile
    projectile.animate([
        { transform: 'translate(' + (mouseX - (playerX + 25)) + 'px,' + (mouseY - (playerY + 25)) + 'px)' }
    ], { 
        duration: 1000,
        fill: "forwards"
    }).onfinish = function(){
      // Check for collision with the enemies
      for (var i = 0; i < enemies.length; i++) {
        if (collisionDetection(enemies[i])) {
            enemies[i].style.display = "none";
            enemies.splice(i, 1); // remove the enemy from the array
            break;
        }
      }
    }
}

// Function to check for collision between the projectile and the enemy
function collisionDetection(enemy) {
    // Get the coordinates of the projectile and the enemy
    var projectileX = parseInt(projectile.style.left);
    var projectileY = parseInt(projectile.style.top);
    var enemyX = parseInt(enemy.style.left);
    var enemyY = parseInt(enemy.style.top);

    // Check if the projectile and the enemy are overlapping
    if (projectileX > enemyX && projectileX < enemyX + 50 && projectileY > enemyY && projectileY < enemyY + 50) {
        return true;
    } else {
        return false;
    }
}

// Function to spawn the enemy
function spawnEnemy() {
    // Get the width and height of the body
    var bodyWidth = document.body.clientWidth;
    var bodyHeight = document.body.clientHeight;

    // Generate random coordinates for the enemy
    var enemyX = Math.floor(Math.random() * bodyWidth);
    var enemyY = Math.floor(Math.random() * bodyHeight);

    // Check if the enemy is spawning on top of the player
    if (Math.abs(enemyX - playerX) < 50 && Math.abs(enemyY - playerY) < 50) {
        spawnEnemy(); // If so, call the function again to generate new coordinates
    } else {
        // Create a new enemy element
        var newEnemy = document.createElement("div");
        newEnemy.style.position = "absolute";
        newEnemy.style.width = "50px";
        newEnemy.style.height = "50px";
        newEnemy.style.backgroundColor = "red";
        newEnemy.style.left = enemyX + "px";
        newEnemy.style.top = enemyY + "px";
        document.body.appendChild(newEnemy);

        enemies.push(newEnemy);
    }
}


intervalId = setInterval(spawnEnemy, 2000); // start spawning enemies every 2 seconds
var enemySpeed = 10; // speed of the enemies

function moveEnemies() {
    for (var i = 0; i < enemies.length; i++) {
        if (enemies[i].style.display !== "none") {
            var enemyX = parseInt(enemies[i].style.left);
            var enemyY = parseInt(enemies[i].style.top);
            var dx = playerX - enemyX;
            var dy = playerY - enemyY;
            var distance = Math.sqrt(dx * dx + dy * dy);

            // calculate the x and y velocity of the enemy
            var xVelocity = (dx / distance) * enemySpeed;
            var yVelocity = (dy / distance) * enemySpeed;

            // update the position of the enemy
            enemies[i].style.left = (enemyX + xVelocity) + "px";
            enemies[i].style.top = (enemyY + yVelocity) + "px";
        }
    }
}

setInterval(moveEnemies, 50); // call the moveEnemies function every 50 milliseconds


</script>
</body> 
</html> 
