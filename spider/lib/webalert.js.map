{"version":3,"file":"webalert.js","mappings":"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","sources":["webpack://webalert/./src/home/shell/Projects/webalert/src/util.ts","webpack://webalert/./src/home/shell/Projects/webalert/src/Dialog.ts","webpack://webalert/./src/home/shell/Projects/webalert/inlined.ts","webpack://webalert/./src/home/shell/Projects/webalert/src/AlertDialog.ts","webpack://webalert/./src/home/shell/Projects/webalert/src/block.ts","webpack://webalert/./src/home/shell/Projects/webalert/src/webalert.internal.ts","webpack://webalert/./src/home/shell/Projects/webalert/src/WindowDialog.ts","webpack://webalert/./src/home/shell/Projects/webalert/src/alert.ts","webpack://webalert/./src/home/shell/Projects/webalert/src/confirm.ts","webpack://webalert/./src/home/shell/Projects/webalert/src/prompt.ts","webpack://webalert/./src/home/shell/Projects/webalert/src/form.ts"],"sourcesContent":["export type undefined = nul;\nexport const undefined: nul = void 0;\n\nexport function fallback<E>(value: E | nul, def: E): E {\n\tif (value == null)\n\t\treturn def;\n\treturn value;\n}\n\nexport function keys(obj: object) {\n\treturn Object.keys(obj);\n}\n\nexport function get(obj: object, key: string) {\n\tconst desc = Object.getOwnPropertyDescriptor(obj, key);\n\tif (desc == null)\n\t\treturn null;\n\n\tconst get = desc.get;\n\tif (get != null)\n\t\treturn get();\n\n\treturn desc.value;\n}\n\nexport function set(obj: object, key: string, value?: any) {\n\tconst set = Object.getOwnPropertyDescriptor(obj, key)?.set;\n\tif (set != null)\n\t\tset(value);\n\telse define(obj, key, value);\n}\n\nexport function has(obj: object, key: string) {\n\treturn Object.getOwnPropertyDescriptor(obj, key) != null;\n}\n\ntype getter = () => any;\ntype setter = (v: any) => void;\ninterface PropertyAttributeInit {\n\treadonly writable?: bool;\n\treadonly configurable?: bool;\n\treadonly enumerable?: bool;\n\treadonly get?: getter;\n\treadonly set?: setter;\n}\n\nexport function remove(obj: object, key: string) {\n\tdelete (obj as any)[key];\n}\n\nexport function clean<T extends object>(obj: T): T {\n\tfor (let k of keys(obj)) {\n\t\tconst desc = Object.getOwnPropertyDescriptor(obj, k)!;\n\t\tif (desc.value === void 0) {\n\t\t\tremove(obj, k);\n\t\t}\n\t}\n\treturn obj;\n}\n\nexport function define(obj: object, key: string, value?: any, attr?: PropertyAttributeInit) {\n\tObject.defineProperty(obj, key, clean({ ...attr, value }));\n}\n\nexport function defineRo(obj: object, key: string, value?: any) {\n\tdefine(obj, key, value, {\n\t\twritable: false,\n\t\tconfigurable: false,\n\t\tenumerable: false\n\t});\n}\n\nexport function defineGet(obj: object, key: string, get?: getter) {\n\tdefine(obj, key, void 0, { get });\n}\n\nexport function defineSet(obj: object, key: string, set?: setter) {\n\tdefine(obj, key, void 0, { set });\n}\n\nexport function assign(to: object, from: object, attr?: PropertyAttributeInit) {\n\tconst init = fallback(attr, {});\n\tfor (let k of keys(from)) {\n\t\tconst desc = Object.getOwnPropertyDescriptor(from, k)!;\n\n\t\tdefine(to, k, desc.value, {\n\t\t\t...init,\n\t\t\tget: desc.get == null ? init.get : desc.get,\n\t\t\tset: desc.set == null ? init.set : desc.set\n\t\t})\n\t}\n}\n\nexport function clone<E extends object>(obj: E): E {\n\treturn Object.create(obj) as E;\n}\n\nexport function createReadonlyObject<E extends object>(baseObj: E): E {\n\tlet newObj = {};\n\tassign(newObj, baseObj, {\n\t\twritable: false,\n\t\tconfigurable: false,\n\t\tenumerable: false\n\t});\n\n\treturn newObj as E;\n}\n\nexport class Null {\n\tprotected readonly __defineGetter__ = void 0;\n\tprotected readonly __defineSetter__ = void 0;\n\tprotected readonly __lookupGetter__ = void 0;\n\tprotected readonly __lookupSetter__ = void 0;\n\tprotected readonly __proto__ = void 0;\n\tprotected readonly isPrototypeOf = void 0;\n\tprotected readonly propertyIsEnumerable = void 0;\n\tprotected readonly toLocaleString = void 0;\n\tprotected readonly toString = void 0;\n\tprotected readonly valueOf = void 0;\n\n\tprotected constructor() {\n\t\tassign(this, this, {\n\t\t\twritable: false,\n\t\t\tconfigurable: false,\n\t\t\tenumerable: false\n\t\t});\n\t\tdefine(this, \"constructor\", void 0, {\n\t\t\twritable: false,\n\t\t\tconfigurable: false,\n\t\t\tenumerable: false\n\t\t});\n\t}\n}\n\nexport class RawObject extends Null {\n\tconstructor(initObj?: object) {\n\t\tsuper();\n\t\tif (initObj != null)\n\t\t\tassign(this, initObj, {});\n\t}\n}\n","import { fallback, Null, RawObject } from \"./util\";\nimport { dialogDoc } from \"../inlined\";\n\nfunction waitForBody(): Promise<HTMLElement> {\n\treturn new Promise(resolve => {\n\t\tconst body = document.body;\n\t\tif (body == null) {\n\t\t\tdocument.addEventListener(\"DOMContentLoaded\", () => {\n\t\t\t\tresolve(document.body);\n\t\t\t}, { once: true, passive: true });\n\t\t} else resolve(body);\n\t});\n}\n\nfunction createFrame() {\n\tconst frame = document.createElement(\"iframe\");\n\tframe.setAttribute(\"type\", \"text/plain\");\n\tframe.setAttribute(\"width\", \"1024\");\n\tframe.setAttribute(\"height\", \"768\");\n\tframe.setAttribute(\"style\", \"position:absolute;display:block;width:100%;height:100%;top:0px;left:0px;right:0px;bottom:0px;border:none;\");\n\tframe.setAttribute(\"scrolling\", \"no\");\n\tframe.setAttribute(\"loading\", \"eager\");\n\tframe.setAttribute(\"allowfullscreen\", \"true\");\n\tframe.setAttribute(\"allowtransparency\", \"true\");\n\tframe.setAttribute(\"fetchpriority\", \"high\");\n\treturn frame;\n}\n\nfunction waitFor(element: HTMLElement): Promise<void> {\n\treturn new Promise(resolve => {\t\n\t\telement.addEventListener(\"load\", () => {\n\t\t\tresolve();\n\t\t}, { once: true, passive: true });\n\t});\n}\n\nexport default class Dialog extends RawObject implements globalThis.Dialog {\n\tdeclare readonly width: int | nul;\n\tdeclare readonly height: int | nul;\n\tdeclare readonly x: int | nul;\n\tdeclare readonly y: int | nul;\n\tdeclare readonly paddingX: int | nul;\n\tdeclare readonly paddingY: int | nul;\n\tdeclare readonly centered: bool | nul;\n\tdeclare readonly draggable: bool | nul;\n\tdeclare readonly resizable: bool | nul;\n\treadonly canceled: bool = false;\n\n\t// related elements\n\tprotected currentFrame: HTMLIFrameElement | nul;\n\tprotected frameWindow: Window | nul;\n\tprotected frameDocument: Document | nul;\n\tprotected dialogElement: HTMLElement | nul;\n\n\tconstructor(init?: DialogInit) {\n\t\tsuper(init);\n\t}\n\n\tprotected async loadDocument() {\n\t\tconst frame = createFrame();\n\t\tconst body = await waitForBody();\n\n\t\tframe.setAttribute(\"srcdoc\", dialogDoc);\n\t\tbody.scrollTo(0, 0);\n\t\tbody.style.overflow = \"hidden\";\n\t\tbody.appendChild(frame);\n\t\tawait waitFor(frame);\n\n\t\tconst win = frame.contentWindow!;\n\t\tconst doc = win.document;\n\n\t\tthis.frameWindow = win;\n\t\tthis.frameDocument = doc;\n\t\tthis.currentFrame = frame;\n\t\tthis.dialogElement = doc.getElementById(\"dialog\");\n\t}\n\n\tprotected async initializeDocument() {\n\t}\n\n\tprotected async measureDocument() {\n\t\tconst dialog = this.dialogElement!;\n\t\tconst frame = this.currentFrame!;\n\n\t\tconst width = this.width;\n\t\tif (width != null)\n\t\t\tdialog.style.width = width + \"px\";\n\n\t\tconst height = this.height;\n\t\tif (height != null)\n\t\t\tdialog.style.height = height + \"px\";\n\n\t\tconst paddingX = this.paddingX;\n\t\tif (paddingX != null) {\n\t\t\tdialog.style.paddingLeft = paddingX + \"px\";\n\t\t\tdialog.style.paddingRight = paddingX + \"px\";\n\t\t}\n\n\t\tconst paddingY = this.paddingY;\n\t\tif (paddingY != null) {\n\t\t\tdialog.style.paddingTop = paddingY + \"px\";\n\t\t\tdialog.style.paddingBottom = paddingY + \"px\";\n\t\t}\n\n\t\tif (fallback(this.centered, true)) {\n\t\t\tconst resize = async () => {\n\t\t\t\tconst dw = dialog.clientWidth + 2; // includes borders\n\t\t\t\tconst dh = dialog.clientHeight + 2;\n\n\t\t\t\tdialog.style.left = Math.floor((frame.clientWidth - dw) / 2) + \"px\";\n\t\t\t\tdialog.style.top = Math.floor((frame.clientHeight - dh) / 2) + \"px\";\n\t\t\t};\n\n\t\t\tawait resize();\n\t\t\tdialog.addEventListener(\"resize\", resize, true);\n\t\t\twindow.addEventListener(\"resize\", resize, true);\n\t\t} else {\n\t\t\tconst x = this.x;\n\t\t\tif (x != null)\n\t\t\t\tdialog.style.left = x + \"px\";\n\n\t\t\tconst y = this.y;\n\t\t\tif (y != null)\n\t\t\t\tdialog.style.top = y + \"px\";\n\n\t\t}\n\n\t\tif (fallback(this.resizable, false)) {\n\t\t\tdialog.style.resize = \"both\";\n\t\t\tdialog.style.overflow = \"auto\";\n\t\t}\n\t}\n\n\tasync show() {\n\t\tawait this.loadDocument();\n\t\tawait this.initializeDocument();\n\t\tawait this.measureDocument();\n\t}\n\n\tdismiss() {\n\t\tif (this.currentFrame != null) {\n\t\t\t// unlock scrolling\n\t\t\tdocument.body.style.overflow = \"\";\n\n\t\t\tthis.currentFrame.remove();\n\t\t\tthis.currentFrame = null;\n\t\t}\n\t}\n\n\tcancel() {\n\t\tthis.dismiss();\n\t\tObject.defineProperty(this, \"canceled\", {\n\t\t\tvalue: true,\n\t\t\twritable: false,\n\t\t\tconfigurable: false,\n\t\t\tenumerable: false\n\t\t});\n\t}\n\n\tclose() {\n\t\tthis.dismiss();\n\t}\n}\n","export const dialogDoc = \"<?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\" ?>\\n<!DOCTYPE html PUBLIC \\\"-//W3C//DTD XHTML 1.1//EN\\\" \\\"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd\\\">\\n<html xmlns=\\\"http://www.w3.org/1999/xhtml\\\">\\n\t<head>\\n\t\t<meta http-equiv=\\\"Content-Type\\\" content=\\\"text/html;charset=utf-8\\\" />\\n\t\t<meta http-equiv=\\\"Referrer-Policy\\\" content=\\\"no-referrer\\\" />\\n\t\t<meta name=\\\"referrer\\\" content=\\\"no-referrer\\\" />\\n\t\t<meta name=\\\"viewport\\\" content=\\\"width=device-width,initial-scale=1,minimum-scale=1\\\" />\\n\t\t<meta name=\\\"robots\\\" content=\\\"noindex,nofollow\\\" />\\n\t\t<base href=\\\"undefined://undefined/\\\" />\\n\t\t<title>Dialog0</title>\\n\t\t<style type=\\\"text/css\\\">\\n* {\\n\tmargin: 0px;\\n\tpadding: 0px;\\n}\\n\\n*:hover, *:active {\\n\t-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\\n}\\n\\ninput, select, textarea {\\n\tfont-size: inherit;\\n\tfont-family: inherit;\\n\tfont-weight: inherit;\\n\tfont-style: inherit;\\n\tcolor: inherit;\\n}\\n\\nbody {\\n\tposition: absolute;\\n\tdisplay: block;\\n\twidth: 100%;\\n\theight: 100%;\\n\tfont-size: 14px;\\n\tfont-weight: 500;\\n\tfont-family: \\\"Ubuntu\\\";\\n\tfont-style: normal;\\n\tcolor: #000000;\\n\tbackground-color: rgba(0, 0, 0, 0.5);\\n\toverflow: hidden;\\n}\\n\\n#dialog {\\n\tposition: absolute;\\n\tdisplay: block;\\n\twidth: 250px;\\n\theight: fit-content;\\n\tpadding: 10px;\\n\tcolor: #000000;\\n\tbackground-color: #ffffff;\\n\tborder-style: solid;\\n\tborder-width: 1px;\\n\tborder-color: #000000;\\n\tborder-radius: 10px;\\n}\\n\\n#element-container {\\n\tposition: relative;\\n\tdisplay: block;\\n\twidth: 100%;\\n\theight: fit-content;\\n\tmargin-bottom: 10px;\\n}\\n\\n.title {\\n\tposition: relative;\\n\tdisplay: block;\\n\twidth: 100%;\\n\theight: fit-content;\\n\tline-height: 40px;\\n\tfont-size: 18px;\\n\tfont-weight: 600;\\n\ttext-align: center;\\n}\\n\\n.message {\\n\tposition: relative;\\n\tdisplay: block;\\n\twidth: 100%;\\n\theight: fit-content;\\n\tline-height: 16px;\\n\ttext-align: start;\\n\toverflow-x: hidden;\\n\toverflow-wrap: break-word;\\n}\\n\\n.input {\\n\tposition: relative;\\n\tdisplay: block;\\n\twidth: calc(100% - 10px);\\n\theight: 16px;\\n\tline-height: 16px;\\n\tmargin-top: 10px;\\n\tmargin-bottom: 10px;\\n\tpadding: 5px;\\n\toutline: none;\\n\tborder-style: solid;\\n\tborder-width: 1px;\\n\tborder-color: #808080;\\n\tborder-radius: 10px;\\n}\\n\\n.input:focus {\\n\tborder-color: #303030;\\n}\\n\\n#button-bar {\\n\tposition: relative;\\n\tdisplay: flex;\\n\twidth: fit-content;\\n\theight: fit-content;\\n\tmargin: auto;\\n}\\n\\n.button {\\n\tposition: relative;\\n\tdisplay: block;\\n\twidth: fit-content;\\n\theight: fit-content;\\n\tpadding: 10px;\\n\tmargin-left: 5px;\\n\tmargin-right: 5px;\\n\tcolor: #ffffff;\\n\tbackground-color: #6060ff;\\n\tcursor: pointer;\\n\tuser-select: none;\\n\tborder-width: 1px;\\n\tborder-style: solid;\\n\tborder-radius: 10px;\\n\tborder-top-color: #ffffff;\\n\tborder-left-color: #ffffff;\\n\tborder-right-color: #000000;\\n\tborder-bottom-color: #000000;\\n}\\n\\n.button:active {\\n\tborder-top-color: #000000;\\n\tborder-left-color: #000000;\\n\tborder-right-color: #ffffff;\\n\tborder-bottom-color: #ffffff;\\n}\\n\\n.button[disabled=true] {\\n\tbackground-color: #808080;\\n}\\n\\n.button[disabled=true]:active {\\n\tborder-top-color: #ffffff;\\n\tborder-left-color: #ffffff;\\n\tborder-right-color: #000000;\\n\tborder-bottom-color: #000000;\\n}\\n\t\t</style>\\n\t</head>\\n\t<body>\\n\t\t<div id=\\\"dialog\\\"></div>\\n\t</body>\\n</html>\";\n","import Dialog from \"./Dialog\";\nimport { fallback } from \"./util\"\n\nfunction initButton(config: AlertDialogButtonInit | nul, element: HTMLElement) {\n\tif (config != null) {\n\t\telement.innerHTML = fallback(config.text, \"\");\n\t\tif (fallback(config.disabled, false))\n\t\t\telement.setAttribute(\"disabled\", \"true\");\n\t\telse element.onclick = config.onclick as any;\n\t} else element.remove();\n}\n\nexport default class AlertDialog extends Dialog implements globalThis.AlertDialog {\n\tdeclare readonly title: string | nul;\n\tdeclare readonly message: string | nul;\n\tdeclare readonly elements: DialogElements | nul;\n\tdeclare readonly positiveButton: AlertDialogButtonInit | nul;\n\tdeclare readonly negativeButton: AlertDialogButtonInit | nul;\n\tdeclare readonly neutralButton: AlertDialogButtonInit | nul;\n\n\tconstructor(init?: AlertDialogInit) {\n\t\tsuper(init);\n\t}\n\n\t/** @Override */\n\tprotected async initializeDocument() {\n\t\tthis.dialogElement!.innerHTML = \"<div id=\\\"element-container\\\"></div><div id=\\\"button-bar\\\"><div id=\\\"negative-button\\\" class=\\\"button\\\"></div><div id=\\\"neutral-button\\\" class=\\\"button\\\"></div><div id=\\\"positive-button\\\" class=\\\"button\\\"></div></div>\";\n\t\tconst doc = this.frameDocument!;\n\t\tconst ec = doc.getElementById(\"element-container\")!;\n\n\t\tconst title = this.title;\n\t\tif (title != null) {\n\t\t\tconst elem = doc.createElement(\"div\");\n\t\t\telem.className = \"title\";\n\t\t\telem.innerHTML = title;\n\t\t\tec.appendChild(elem);\n\t\t}\n\n\t\tconst message = this.message;\n\t\tif (message != null) {\n\t\t\tconst elem = doc.createElement(\"div\");\n\t\t\telem.className = \"message\";\n\t\t\telem.innerHTML = message;\n\t\t\tec.appendChild(elem);\n\t\t}\n\n\t\tconst elements = this.elements;\n\t\tif (elements != null) {\n\t\t\tfor (let element of elements) {\n\t\t\t\tif (element instanceof HTMLElement) {\n\t\t\t\t\tec.appendChild(element);\n\t\t\t\t} else {\n\t\t\t\t\tconst elem = doc.createElement(element.type);\n\t\t\t\t\telem.className = fallback(element.className, \"\");\n\t\t\t\t\telem.innerHTML = fallback(element.innerHTML, \"\");\n\t\t\t\t\tconst style = element.style;\n\t\t\t\t\tif (style != null)\n\t\t\t\t\t\telem.setAttribute(\"style\", style);\n\t\t\t\t\tfor (let attr of fallback(element.attributes, []))\n\t\t\t\t\t\telem.setAttribute(attr.name, attr.value);\n\t\t\t\t\tec.appendChild(elem);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tinitButton(this.positiveButton, doc.getElementById(\"positive-button\")!);\n\t\tinitButton(this.negativeButton, doc.getElementById(\"negative-button\")!);\n\t\tinitButton(this.neutralButton, doc.getElementById(\"neutral-button\")!);\n\t}\n}\n","import AlertDialog from \"./AlertDialog\";\n\nconst block = async (message?: string, title?: string) => {\n\tawait new AlertDialog({\n\t\tmessage: message,\n\t\ttitle: title\n\t}).show();\n};\n\nexport default block;\n","import Dialog from \"./Dialog\";\nimport AlertDialog from \"./AlertDialog\";\nimport WindowDialog from \"./WindowDialog\";\nimport alert from \"./alert\";\nimport confirm from \"./confirm\";\nimport prompt from \"./prompt\";\nimport block from \"./block\";\nimport form from \"./form\";\nimport { createReadonlyObject, defineRo } from \"./util\";\n\nconst webAlert: WebAlert = createReadonlyObject({\n\tDialog,\n\tAlertDialog,\n\tWindowDialog,\n\talert,\n\tconfirm,\n\tprompt,\n\tblock,\n\tform\n});\n\n// unchecked global cast\nconst __global = window as any;\ndefineRo(__global, \"webAlert\", webAlert);\n\n// preserve original functions\n__global.nativeAlert = __global.alert;\n__global.nativeConfirm = __global.confirm;\n__global.nativePrompt = __global.prompt;\n\n// force override global functions\n__global.alert = webAlert.alert;\n__global.confirm = webAlert.confirm;\n__global.prompt = webAlert.prompt;\n__global.block = webAlert.block;\n__global.form = webAlert.form;\n","import Dialog from \"./Dialog\";\n\nexport default class WindowDialog extends Dialog implements globalThis.WindowDialog {\n\tdeclare readonly title: string | nul | WindowDialogTitleBarInit;\n\tdeclare readonly frame: nul | WindowDialogFrameInit;\n\n\tconstructor(init?: WindowDialogInit) {\n\t\tsuper(init);\n\t}\n\n\tprotected async initializeDocument() {\n\t}\n}\n","import AlertDialog from \"./AlertDialog\";\n\nconst alert = async (message?: string, title?: string) => {\n\tconst dialog = new AlertDialog({\n\t\tmessage: message,\n\t\ttitle: title,\n\t\tpositiveButton: {\n\t\t\ttext: \"OK\",\n\t\t\tonclick: () => {\n\t\t\t\tdialog.dismiss();\n\t\t\t}\n\t\t}\n\t});\n\tawait dialog.show();\n};\n\nexport default alert;\n","import AlertDialog from \"./AlertDialog\";\n\nconst confirm = (message?: string, title?: string): Promise<boolean> => {\n\treturn new Promise(resolve => {\n\t\tconst dialog = new AlertDialog({\n\t\t\tmessage: message,\n\t\t\ttitle: title,\n\t\t\tpositiveButton: {\n\t\t\t\ttext: \"OK\",\n\t\t\t\tonclick: () => {\n\t\t\t\t\tdialog.dismiss();\n\t\t\t\t\tresolve(true);\n\t\t\t\t}\n\t\t\t},\n\t\t\tnegativeButton: {\n\t\t\t\ttext: \"Cancel\",\n\t\t\t\tonclick: () => {\n\t\t\t\t\tdialog.cancel();\n\t\t\t\t\tresolve(false);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tdialog.show();\n\t});\n};\n\nexport default confirm;\n","import AlertDialog from \"./AlertDialog\";\nimport { fallback } from \"./util\";\n\nconst prompt = (message?: string, defaultValue?: string, title?: string, placeholder?: string): Promise<string | null> => {\n\treturn new Promise(resolve => {\n\t\tconst inputElem = document.createElement(\"input\");\n\t\tinputElem.type = \"text\";\n\t\tinputElem.value = fallback(defaultValue, \"\");\n\t\tinputElem.placeholder = fallback(placeholder, \"\");\n\t\tinputElem.className = \"input\";\n\n\t\tconst dialog = new AlertDialog({\n\t\t\tmessage: message,\n\t\t\ttitle: title,\n\t\t\tpositiveButton: {\n\t\t\t\ttext: \"OK\",\n\t\t\t\tonclick: () => {\n\t\t\t\t\tdialog.dismiss();\n\t\t\t\t\tresolve(inputElem.value);\n\t\t\t\t}\n\t\t\t},\n\t\t\tnegativeButton: {\n\t\t\t\ttext: \"Cancel\",\n\t\t\t\tonclick: () => {\n\t\t\t\t\tdialog.cancel();\n\t\t\t\t\tresolve(null);\n\t\t\t\t}\n\t\t\t},\n\t\t\telements: [inputElem]\n\t\t});\n\n\t\tinputElem.onkeydown = (e) => {\n\t\t\tif (e.keyCode == 13) { // Enter\n\t\t\t\te.preventDefault();\n\t\t\t\tdialog.positiveButton!.onclick!();\n\t\t\t}\n\t\t};\n\n\t\tdialog.show();\n\t});\n};\n\nexport default prompt;\n","import AlertDialog from \"./AlertDialog\";\nimport { fallback } from \"./util\";\n\nconst form = (message?: string, title?: string, _elements?: FormElementInit[]): Promise<FormResults | null> => {\n\treturn new Promise(resolve => {\n\t\tconst elements = fallback(_elements, []);\n\t\tconst htmlElements: HTMLElement[] = [];\n\t\tfor (let element of elements) {\n\t\t\tconst label = element.label;\n\t\t\tif (label != null) {\n\t\t\t\tconst labelElem = document.createElement(\"div\");\n\t\t\t\tlabelElem.className = \"message\";\n\t\t\t\tlabelElem.innerHTML = label;\n\t\t\t\thtmlElements.push(labelElem);\n\t\t\t}\n\n\t\t\tlet input = element.input;\n\t\t\tif (input != null) {\n\t\t\t\tif (typeof input == \"string\")\n\t\t\t\t\tinput = { type: input };\n\n\t\t\t\tconst inputElem = document.createElement(\"input\");\n\t\t\t\tinputElem.className = \"input\";\n\t\t\t\tinputElem.type = fallback(input.type, \"text\");\n\t\t\t\tinputElem.value = fallback(input.value, \"\");\n\t\t\t\tinputElem.placeholder = fallback(input.placeholder, \"\");\n\t\t\t\tinputElem.checked = fallback(input.checked, false);\n\t\t\t\tinputElem.disabled = fallback(input.disabled, false);\n\n\t\t\t\tfor (let attr of fallback(input.attributes, []))\n\t\t\t\t\tinputElem.setAttribute(attr.name, attr.value);\n\n\t\t\t\thtmlElements.push(inputElem);\n\t\t\t\t(element as any)[\"\\ud801\"] = inputElem;\n\t\t\t}\n\t\t}\n\n\t\tconst dialog = new AlertDialog({\n\t\t\tmessage: message,\n\t\t\ttitle: title,\n\t\t\telements: htmlElements,\n\t\t\tpositiveButton: {\n\t\t\t\ttext: \"OK\",\n\t\t\t\tonclick: () => {\n\t\t\t\t\tdialog.dismiss();\n\t\t\t\t\tconst result: FormResults = [];\n\t\t\t\t\tfor (let element of elements) {\n\t\t\t\t\t\tconst inputElem: HTMLInputElement | undefined = (element as any)[\"\\ud801\"];\n\t\t\t\t\t\tconst res: any = { label: element.label };\n\t\t\t\t\t\tif (inputElem != null) {\n\t\t\t\t\t\t\tconst attr: ElementAttributeInit[] = [];\n\t\t\t\t\t\t\tfor (let i = 0; i < inputElem.attributes.length; i++) {\n\t\t\t\t\t\t\t\tconst it = inputElem.attributes.item(i)!;\n\t\t\t\t\t\t\t\tattr.push({\n\t\t\t\t\t\t\t\t\tname: it.name,\n\t\t\t\t\t\t\t\t\tvalue: it.value\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tres.value = inputElem.value;\n\t\t\t\t\t\t\tres.checked = inputElem.checked;\n\t\t\t\t\t\t\tres.attributes = attr;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tresult.push(res);\n\t\t\t\t\t}\n\t\t\t\t\tresolve(result);\n\t\t\t\t}\n\t\t\t},\n\t\t\tnegativeButton: {\n\t\t\t\ttext: \"Cancel\",\n\t\t\t\tonclick: () => {\n\t\t\t\t\tdialog.cancel();\n\t\t\t\t\tresolve(null);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tdialog.show();\n\t});\n};\n\nexport default form;\n"],"names":["fallback","value","def","keys","obj","Object","remove","key","attr","defineProperty","k","getOwnPropertyDescriptor","clean","to","from","init","desc","get","set","Null","__defineGetter__","__defineSetter__","__lookupGetter__","__lookupSetter__","__proto__","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf","this","writable","configurable","enumerable","RawObject","constructor","initObj","super","Dialog","canceled","loadDocument","frame","document","createElement","setAttribute","createFrame","body","Promise","resolve","addEventListener","once","passive","element","scrollTo","style","overflow","appendChild","win","contentWindow","doc","frameWindow","frameDocument","currentFrame","dialogElement","getElementById","initializeDocument","measureDocument","dialog","width","height","paddingX","paddingLeft","paddingRight","paddingY","paddingTop","paddingBottom","centered","resize","dw","clientWidth","dh","clientHeight","left","Math","floor","top","window","x","y","resizable","show","dismiss","cancel","close","initButton","config","innerHTML","text","disabled","onclick","AlertDialog","ec","title","elem","className","message","elements","HTMLElement","type","attributes","name","positiveButton","negativeButton","neutralButton","webAlert","baseObj","newObj","createReadonlyObject","WindowDialog","alert","confirm","prompt","defaultValue","placeholder","inputElem","onkeydown","e","keyCode","preventDefault","block","form","_elements","htmlElements","label","labelElem","push","input","checked","result","res","i","length","it","item","__global","nativeAlert","nativeConfirm","nativePrompt"],"sourceRoot":""}