(function(){/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
'use strict';var ca=this||self;function k(a,b){a=a.split(".");var c=ca;a[0]in c||"undefined"==typeof c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===b?c[d]&&c[d]!==Object.prototype[d]?c=c[d]:c=c[d]={}:c[d]=b};var l={},n=null;
function p(a){var b;void 0===b&&(b=0);if(!n){n={};for(var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),d=["+/=","+/","-_=","-_.","-_"],e=0;5>e;e++){var f=c.concat(d[e].split(""));l[e]=f;for(var g=0;g<f.length;g++){var h=f[g];void 0===n[h]&&(n[h]=g)}}}b=l[b];c=Array(Math.floor(a.length/3));d=b[64]||"";for(e=f=0;f<a.length-2;f+=3){var q=a[f],m=a[f+1];h=a[f+2];g=b[q>>2];q=b[(q&3)<<4|m>>4];m=b[(m&15)<<2|h>>6];h=b[h&63];c[e++]=g+q+m+h}g=0;h=d;switch(a.length-f){case 2:g=
a[f+1],h=b[(g&15)<<2]||d;case 1:a=a[f],c[e]=b[a>>2]+b[(a&3)<<4|g>>4]+h+d}return c.join("")};var r="undefined"!==typeof Uint8Array,t={};let u;var v=class{constructor(a){if(t!==t)throw Error("illegal external caller");this.B=a;if(null!=a&&0===a.length)throw Error("ByteString should be constructed with non-empty values");}};const w=Symbol(void 0);function x(a,b){Object.isFrozen(a)||(w?a[w]|=b:void 0!==a.l?a.l|=b:Object.defineProperties(a,{l:{value:b,configurable:!0,writable:!0,enumerable:!1}}))}function y(a){let b;w?b=a[w]:b=a.l;return null==b?0:b}function z(a,b){w?a[w]=b:void 0!==a.l?a.l=b:Object.defineProperties(a,{l:{value:b,configurable:!0,writable:!0,enumerable:!1}})}function A(a){x(a,1);return a}function da(a){x(a,17);return a}function B(a){return a?!!(y(a)&2):!1}function ea(a,b){z(b,(y(a)|18)&-33)};var C={};function D(a){return null!==a&&"object"===typeof a&&!Array.isArray(a)&&a.constructor===Object}var E=Object,fa=E.freeze,F=[];x(F,3);var G=fa.call(E,F);function H(a){if(B(a.h))throw Error("Cannot mutate an immutable Message");};function ha(a){switch(typeof a){case "number":return isFinite(a)?a:String(a);case "object":if(a&&!Array.isArray(a)){if(r&&null!=a&&a instanceof Uint8Array)return p(a);if(a instanceof v){const b=a.B;return null==b?"":"string"===typeof b?b:a.B=p(b)}}}return a};function I(a,b,c,d){if(null!=a){if(Array.isArray(a))a=J(a,b,c,void 0!==d);else if(D(a)){const e={};for(let f in a)e[f]=I(a[f],b,c,d);a=e}else a=b(a,d);return a}}function J(a,b,c,d){d=d?!!(y(a)&16):void 0;const e=Array.prototype.slice.call(a);c(a,e);for(a=0;a<e.length;a++)e[a]=I(e[a],b,c,d);return e}function ia(a){return a.v===C?a.toJSON():ha(a)}function ja(){};function K(a,b,c=!1){return-1===b?null:b>=a.u?a.j?a.j[b]:void 0:c&&a.j&&(c=a.j[b],null!=c)?c:a.h[b+a.s]}function L(a,b,c,d=!1,e=!1){e||H(a);a.g&&(a.g=void 0);b>=a.u||d?(a.j||(a.j=a.h[a.u+a.s]={}))[b]=c:(void 0!==a.j&&a.u>=a.h.length?(d=a.h.length-1,e=b+a.s,e>=d?(a.h[d]=void 0,a.h[e]=c,a.h.push(a.j)):a.h[e]=c):a.h[b+a.s]=c,void 0!==a.j&&b in a.j&&delete a.j[b])}function M(a,b){a=K(a,b);return null==a?a:!!a}function N(a,b,c,d){H(a);c!==d?L(a,b,c):L(a,b,void 0,!1)}
function O(a,b,c){var d=K(a,c,!1);{let f=!1;var e=null==d||"object"!==typeof d||(f=Array.isArray(d))||d.v!==C?f?new b(d):void 0:d}e!==d&&null!=e&&(L(a,c,e,!1,!0),x(e.h,y(a.h)&-33));b=e;if(null==b)return b;B(b.h)&&!B(a.h)&&(B(b.h)&&(d=P(b),d.g=b,b=d),L(a,c,b,!1));return b}
function Q(a,b,c,d){H(a);let e;if(null!=c){e=A([]);let f=!1;for(let g=0;g<c.length;g++)e[g]=c[g].h,f=f||B(e[g]);a.o||(a.o={});a.o[b]=c;c=e;f?Object.isExtensible(c)&&(w?c[w]&&(c[w]&=-9):void 0!==c.l&&(c.l&=-9)):x(c,8)}else a.o&&(a.o[b]=void 0),e=G;L(a,b,e,d)}function R(a,b){return null==a?b:a};function S(a){if(B(a)&&Object.isFrozen(a))return a;const b=Array.prototype.map.call(a,T,void 0);z(b,(y(a)|18)&-33);Object.freeze(b);return b}function U(a,b){if(null!=a){if(r&&a instanceof Uint8Array)return a.length?new v(new Uint8Array(a)):u||(u=new v(null));if(Array.isArray(a)){if(B(a))return a;b&&(b=y(a),b=!(b&32)&&(!!(b&16)||0===b));return b?(x(a,2),a):J(a,U,ea)}return a.v===C?T(a):a}}function T(a){if(B(a.h))return a;a=P(a);x(a.h,2);return a}
function P(a){const b=new a.constructor;a.A&&(b.A=a.A.slice());const c=a.h,d=!!(y(c)&16);for(let m=0;m<c.length;m++){var e=c[m];if(m===c.length-1&&D(e))for(const aa in e){var f=+aa;if(Number.isNaN(f))(b.j||(b.j=b.h[b.u+b.s]={}))[f]=e[f];else{var g=b,h=e[aa],q=d;const ba=a.o&&a.o[f];ba?Q(g,f,S(ba),!0):L(g,f,U(h,q),!0)}}else g=b,f=m-a.s,h=d,(q=a.o&&a.o[f])?Q(g,f,S(q),!1):L(g,f,U(e,h),!1)}return b};function ka(a,b){if(null==b||""==b)return new a;b=JSON.parse(b);if(!Array.isArray(b))throw Error(void 0);x(b,16);V=b;a=new a(b);V=null;return a}
var W=class{constructor(a,b,c){null==a&&(a=V);V=null;var d=this.constructor.g||0,e=0<d,f=this.constructor.i,g=!1;if(null==a){var h=f?[f]:[];x(h,48);a=h;h=!0}else{if(!Array.isArray(a))throw Error();if(h=!!(y(a)&16))g=y(a),z(a,g|32),g=!!(g&32)}e&&0<a.length&&D(a[a.length-1])&&"g"in a[a.length-1]&&(d=0);this.s=(f?0:-1)-d;this.o=void 0;this.h=a;a:{f=this.h.length;d=f-1;if(f&&(f=this.h[d],D(f))){this.j=f;b=Object.keys(f);0<b.length&&Array.prototype.every.call(b,isNaN,void 0)?this.u=Number.MAX_VALUE:this.u=
d-this.s;break a}void 0!==b&&-1<b?(this.u=Math.max(b,d+1-this.s),this.j=void 0):this.u=Number.MAX_VALUE}if(!e&&this.j&&"g"in this.j)throw Error('Unexpected "g" flag in sparse object of message that is not a group type.');if(c)for(e=h&&!g?da:A,b=0;b<c.length;b++)h=c[b],(g=K(this,h))?Array.isArray(g)&&e(g):L(this,h,G,!1,!0)}toJSON(){return J(this.h,ia,ja)}};W.prototype.v=C;W.prototype.toString=function(){return this.h.toString()};let V;var ma=class extends W{constructor(a){super(a,-1,la)}},la=[8];var oa=class extends W{constructor(a){super(a,-1,na)}},na=[17];var qa=class extends W{constructor(a){super(a,-1,pa)}},pa=[27];var ra=class extends W{constructor(a){super(a)}};var ta=class extends W{constructor(a){super(a,-1,sa)}},sa=[1,2,3,6];/*

 SPDX-License-Identifier: Apache-2.0
*/
function X(a,b){a=a.getElementsByTagName("META");for(let c=0;c<a.length;++c)if(a[c].getAttribute("name")===b)return a[c].getAttribute("content")||"";return""};function ua(a){if(!(0<a.g.length)){var b=X(a.body,"environment");for(const c of b.split("|"))c&&a.g.push(c)}}function Y(a,b){a=a.body;var c={detail:void 0};let d;"function"===typeof window.CustomEvent?d=new CustomEvent(b,c):(d=document.createEvent("CustomEvent"),d.initCustomEvent(b,!!c.bubbles,!!c.cancelable,c.detail));a.dispatchEvent(d)}
var va=class{constructor(a){this.body=a;this.g=[];X(a,"sampling_mod");var b=X(a,"namespace");if(!b){b="ns-"+(0,Math.random)().toString(36).substr(2,5);a:{var c=a.getElementsByTagName("META");for(let d=0;d<c.length;++d)if("namespace"===c[d].getAttribute("name")&&c[d].getAttribute("index")===(0).toString()){c[d].setAttribute("content",b);break a}c=a.querySelector("#mys-meta");c||(c=document.createElement("div"),c.id="mys-meta",c.style.position="absolute",c.style.display="none",a.appendChild(c));a=document.createElement("META");
a.setAttribute("name","namespace");a.setAttribute("content",b);a.setAttribute("index",(0).toString());c.appendChild(a)}}ua(this)}addEventListener(a,b){this.body.addEventListener(a,b)}};var wa=class extends W{constructor(){super()}};function xa(a){var b=document;a=String(a);"application/xhtml+xml"===b.contentType&&(a=a.toLowerCase());return b.createElement(a)};function ya(a){if(1>=a.i.offsetWidth||1>=a.i.offsetHeight)return!1;a.g.remove();Y(a.context,"spanReady");return!0}
var za=class{constructor(a,b){this.context=a;this.m=b;this.i=xa("SPAN");this.g=xa("DIV");this.i.style.fontSize="6px";this.i.textContent="go";this.g.style.position="absolute";this.g.style.top="100%";this.g.style.left="100%";this.g.style.width="1px";this.g.style.height="0";this.g.style.overflow="hidden";this.g.style.visibility="hidden";this.g.appendChild(this.i)}wait(){if(!R(M(this.m,1),!1)&&(Y(this.context,"spanStart"),this.context.body.appendChild(this.g),!ya(this)))return new Promise(a=>{const b=
setInterval(()=>{ya(this)&&(clearInterval(b),a())},R(K(this.m,3),0))})}};var Aa=class{constructor(a,b){this.context=a;this.i=O(b,qa,1)||new qa;this.g=O(b,ma,12)||new ma;O(this.i,oa,10)||new oa}};function Ba(a){a.m.length=0;a.i=!0}function Ca(a,b){a.g=!0;const c=()=>{a.i=!1;const d=a.m.shift();return void 0===d?(a.g=!1,Promise.resolve()):Ca(a,d())};return b?b.then(c,()=>{if(a.i)return c();a.g=!1;return Promise.reject()}):c()}function Da(a,b){for(const c of b)a.m.push(c);if(!a.g)return Ca(a)}var Ea=class{constructor(){this.i=this.g=!1;this.m=[]}};function Fa(a){var b=X(a.context.body,"render_config")||"[]";b=ka(ra,b);return new Aa(a.context,b)}
function Ga(a){Ba(a.m);return Da(a.m,[()=>{},()=>{var b=a.i||(a.i=Fa(a));var c=new wa;N(c,3,100,0);N(c,4,1E4,0);M(b.g,3)&&N(c,2,!0,!1);b=b.context;ua(b);0<=b.g.indexOf("amp")&&N(c,2,!0,!1);c=(new za(a.context,c)).wait();Y(a.context,"browserStart");Y(a.context,"browserStartEnd");a.g&=-31;a.g|=2;return c},()=>{Y(a.context,"browserReady");Y(a.context,"browserReadyEnd");a.g|=4;Y(a.context,"overallReady")},()=>{Y(a.context,"browserQuiet");Y(a.context,"browserQuietEnd");a.g|=8}])}
function Ha(a){ka(ta,X(a.context.body,"engine_msg")||"[]");return Ga(a)||Promise.resolve()}function Ia(){var a=Z;a.g&=-31;a.g|=1;let b=0;const c=a.context.body;c.addEventListener("browserRender",()=>{++b;if(1===b)Y(a.context,"overallStart"),Ha(a).then(()=>{Y(a.context,"overallQuiet")});else{var d=c.clientHeight;c.clientWidth&&d&&(a.i||(a.i=Fa(a)),Ha(a))}})}var Ja=class{constructor(a){this.m=new Ea;this.g=0;this.context=new va(a)}};let Z;k("mys.engine.init",(a,b)=>{Z=new Ja(b);Ia()});k("mys.engine.stage",()=>{let a;return(null==(a=Z)?void 0:a.g)||0});}).call(this);
