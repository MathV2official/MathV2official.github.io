/*!
 * bowser@2.11.0 (MIT)
 *   author: Dustin Diaz <dustin@dustindiaz.com> (http://dustindiaz.com)
 *   url: git+https://github.com/lancedikson/bowser.git
 *   contributors:
 *     Denis Demchenko (http://twitter.com/lancedikson)
 *
 *   Copyright 2015, Dustin Diaz (the "Original Author")
 *   All rights reserved.
 *
 *   MIT License
 *
 *   Permission is hereby granted, free of charge, to any person
 *   obtaining a copy of this software and associated documentation
 *   files (the "Software"), to deal in the Software without
 *   restriction, including without limitation the rights to use,
 *   copy, modify, merge, publish, distribute, sublicense, and/or sell
 *   copies of the Software, and to permit persons to whom the
 *   Software is furnished to do so, subject to the following
 *   conditions:
 *
 *   The above copyright notice and this permission notice shall be
 *   included in all copies or substantial portions of the Software.
 *
 *   Distributions of all or part of the Software intended to be used
 *   by the recipients as they would use the unmodified Software,
 *   containing modifications that substantially alter, remove, or
 *   disable functionality of the Software, outside of the documented
 *   configuration mechanisms provided by the Software, shall be
 *   modified such that the Original Author's bug reporting email
 *   addresses and urls are either replaced with the contact information
 *   of the parties responsible for the changes, or removed entirely.
 *
 *   THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 *   EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 *   OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 *   NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 *   HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 *   WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 *   FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 *   OTHER DEALINGS IN THE SOFTWARE.
 *
 *
 *   Except where noted, this license applies to any and all software
 *   programs and associated documentation files created by the
 *   Original Author, when distributed with the Software.
 *
 *
 *
 * core-js@3.22.5 (MIT)
 *   url: https://github.com/zloirock/core-js.git
 *
 *   Copyright (c) 2014-2022 Denis Pushkarev
 *
 *   Permission is hereby granted, free of charge, to any person obtaining a copy
 *   of this software and associated documentation files (the "Software"), to deal
 *   in the Software without restriction, including without limitation the rights
 *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 *   copies of the Software, and to permit persons to whom the Software is
 *   furnished to do so, subject to the following conditions:
 *
 *   The above copyright notice and this permission notice shall be included in
 *   all copies or substantial portions of the Software.
 *
 *   THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 *   THE SOFTWARE.
 *
 *
 *
 * detect-node@2.1.0 (MIT)
 *   author: Ilya Kantor
 *   url: https://github.com/iliakan/detect-node
 *
 *   MIT License
 *
 *   Copyright (c) 2017 Ilya Kantor
 *
 *   Permission is hereby granted, free of charge, to any person obtaining a copy
 *   of this software and associated documentation files (the "Software"), to deal
 *   in the Software without restriction, including without limitation the rights
 *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 *   copies of the Software, and to permit persons to whom the Software is
 *   furnished to do so, subject to the following conditions:
 *
 *   The above copyright notice and this permission notice shall be included in all
 *   copies or substantial portions of the Software.
 *
 *   THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 *   SOFTWARE.
 *
 *
 *
 * fast-copy@2.1.3 (MIT)
 *   author: tony_quetano@planttheidea.com
 *   url: git+https://github.com/planttheidea/fast-copy.git
 *   contributors:
 *     Dariusz Rzepka <rzepkadarek@gmail.com>
 *
 *   MIT License
 *
 *   Copyright (c) 2018 Tony Quetano
 *
 *   Permission is hereby granted, free of charge, to any person obtaining a copy
 *   of this software and associated documentation files (the "Software"), to deal
 *   in the Software without restriction, including without limitation the rights
 *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 *   copies of the Software, and to permit persons to whom the Software is
 *   furnished to do so, subject to the following conditions:
 *
 *   The above copyright notice and this permission notice shall be included in all
 *   copies or substantial portions of the Software.
 *
 *   THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 *   SOFTWARE.
 *
 *
 *
 * is-electron@2.2.1 (MIT)
 *   author: Cheton Wu <cheton@gmail.com>
 *   url: git@github.com:cheton/is-electron.git
 *
 *   The MIT License (MIT)
 *
 *   Copyright (c) 2016-2018 Cheton Wu
 *
 *   Permission is hereby granted, free of charge, to any person obtaining a copy
 *   of this software and associated documentation files (the "Software"), to deal
 *   in the Software without restriction, including without limitation the rights
 *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 *   copies of the Software, and to permit persons to whom the Software is
 *   furnished to do so, subject to the following conditions:
 *
 *   The above copyright notice and this permission notice shall be included in all
 *   copies or substantial portions of the Software.
 *
 *   THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 *   SOFTWARE.
 *
 *
 *
 * is-mobile@3.1.1 (MIT)
 *   author: Julian Gruber (http://juliangruber.com)
 *   url: git://github.com/juliangruber/is-mobile.git
 *
 *
 */
/*!
 * vrg@0.27.0
 * license:proprietary
 * (c) 2022 latel88 All rights reserved
*/(()=>{var e,t,n,a,i=[(e,t,n)=>{"use strict";n.d(t,{A:()=>u,a:()=>i,b:()=>s,c:()=>o,d:()=>r,e:()=>l,f:()=>h,g:()=>P,h:()=>_,i:()=>T,j:()=>E,k:()=>C,l:()=>S,m:()=>w,n:()=>b,o:()=>d,p:()=>g,q:()=>y,r:()=>v,s:()=>f,t:()=>x,u:()=>k,v:()=>O,w:()=>L,x:()=>A,y:()=>I,z:()=>c});n(1),n(2);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const i=2*Math.PI,o=Math.PI,s=Math.PI/2,r=Math.PI/4;class l{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;a(this,"x",void 0),a(this,"y",void 0),this.x=e,this.y=t}}class h{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;a(this,"x",void 0),a(this,"y",void 0),a(this,"z",void 0),this.x=e,this.y=t,this.z=n}}function c(e,t,n,a){return[e-n,t-a]}function u(e,t,n,a,i,o){return[e-a,t-i,n-o]}function p(e,t,n,a,i,o){return e*a+t*i+n*o}function d(e,t,n,a){const[i,o]=c(e,t,n,a);return Math.sqrt(function(e,t,n,a){return e*n+t*a}(i,o,i,o))}function g(e,t,n,a,i,o){const[s,r,l]=u(e,t,n,a,i,o);return Math.sqrt(p(s,r,l,s,r,l))}function m(e){return[Math.cos(x(e)),Math.sin(x(e))]}function f(e,t){const n=Math.sin(x(t)),a=Math.cos(x(t)),i=Math.sin(x(e)),o=Math.cos(x(e)),s=Math.abs(a);return[o*s,-n,i*s]}function y(e,t,n){let a=0,i=0;const[o,r]=m(e-s);a+=t*o,i+=t*r;const[l,h]=m(e);return a+=n*l,i+=n*h,[a,i]}function v(e,t,n,a,i){let o=0,r=0,l=0;const[h,c]=m(e-s);if(o+=n*h,l+=n*c,t>0){const[n,i,h]=f(e,t-s);o+=a*n,r+=a*i,l+=a*h}else{const[n,i,h]=f(e,t+s);o-=a*n,r-=a*i,l-=a*h}const[u,p,d]=f(e,t);return o+=i*u,r+=i*p,l+=i*d,[o,r,l]}function w(e,t,n,a){const[i,o]=c(e,t,n,a);return Math.atan2(o,i)}function b(e,t,n,a,i,o){const[s,r,l]=u(e,t,n,a,i,o);return[Math.atan2(l,s),-Math.atan2(r,Math.sqrt(s*s+l*l))]}function x(e){return(e%=i)<0&&(e+=i),6123233995736766e-32===e?0:e}function M(e,t,n){let a=e*e+t*t+n*n;return a>0&&(a=1/Math.sqrt(a)),[e*a,t*a,n*a]}function E(e,t){let n=(e=x(e))-(t=x(t));return n-=Math.floor(n/i)*i,n-=n>Math.PI?i:0,n}function _(e,t){return Math.abs(E(e,t))}function C(e,t,n,a){const i=E(e,n);return[i,E(Math.abs(i)<3*r?t:s*(t/Math.abs(t))-t+s*(t/Math.abs(t)),a)]}function T(e,t,n,a){const[i,o]=C(e,t,n,a);return[Math.abs(i),Math.abs(o)]}function S(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;const o=Math.cos(e),s=Math.sin(e),r=Math.cos(t),l=Math.sin(t),h=a-.5,c=i-.5,u=n,p=u*r+c*l;return M(p*o-h*s,c*r-u*l,h*o+p*s)}function k(e){const t=x(e+r);return t<=s?0:t<=2*s?1*s:t<=3*s?2*s:3*s}function O(e){const t=x(e+Math.PI/8);return t<=r?0:t<2*r?1*r:t<=3*r?2*r:t<4*r?3*r:t<=5*r?4*r:t<6*r?5*r:t<=7*r?6*r:7*r}function A(e,t,n){return e+(t-e)*Math.max(0,Math.min(1,n))}function L(e,t,n){return A(Math.abs(e-t)>s?e-i:e,t,n)}function P(e){return 90/e/(e/90*2)}function I(e,t,n){const[a,i]=y(-n,-t,0),[o,s]=y(-n,0,e);return[a+o,i+s]}},(e,t,n)=>{"use strict";var a=n(110),i=n(235),o=n(115),s=n(80),r=n(45).f,l=n(236),h=n(78),c=n(28),u="Array Iterator",p=s.set,d=s.getterFor(u);e.exports=l(Array,"Array",(function(e,t){p(this,{type:u,target:a(e),index:0,kind:t})}),(function(){var e=d(this),t=e.target,n=e.kind,a=e.index++;return!t||a>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:a,done:!1}:"values"==n?{value:t[a],done:!1}:{value:[a,t[a]],done:!1}}),"values");var g=o.Arguments=o.Array;if(i("keys"),i("values"),i("entries"),!h&&c&&"values"!==g.name)try{r(g,"name",{value:"values"})}catch(e){}},(e,t,n)=>{var a=n(3),i=n(239),o=n(240),s=n(1),r=n(55),l=n(21),h=l("iterator"),c=l("toStringTag"),u=s.values,p=function(e,t){if(e){if(e[h]!==u)try{r(e,h,u)}catch(t){e[h]=u}if(e[c]||r(e,c,t),i[t])for(var n in s)if(e[n]!==s[n])try{r(e,n,s[n])}catch(t){e[n]=s[n]}}};for(var d in i)p(a[d]&&a[d].prototype,d);p(o,"DOMTokenList")},(e,t,n)=>{var a=function(e){return e&&e.Math==Math&&e};e.exports=a("object"==typeof globalThis&&globalThis)||a("object"==typeof window&&window)||a("object"==typeof self&&self)||a("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},(e,t,n)=>{"use strict";n.d(t,{a:()=>o});n(1),n(2),n(18),n(181);var a=n(10),i=n(38);class o extends i.c{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i,o,s;super(a.a,...t),s={},(o="waitAsync")in(i=this)?Object.defineProperty(i,o,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[o]=s}beginAsync(e,t){return this.waitAsync[e.getID()]=(this.waitAsync[e.getID()]||0)+1,t.finally((()=>{this.waitAsync[e.getID()]=Math.max(0,(this.waitAsync[e.getID()]||0)-1)}))}hasWaitAsync(e){return(this.waitAsync[e.getID()]||0)>0}}},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>C,b:()=>x,c:()=>k,d:()=>E,e:()=>O,f:()=>b,g:()=>A,h:()=>M,i:()=>u,j:()=>y,k:()=>m,l:()=>d,m:()=>f,n:()=>g,o:()=>v,p:()=>p,q:()=>w,r:()=>R,s:()=>_,t:()=>S,u:()=>T,v:()=>I,w:()=>L,x:()=>P,y:()=>N});var i=n(501),o=n(380),s=n(251),r=n(301),l=n(388),h=n(502),c=e([o,r]);[o,r]=c.then?(await c)():c;new r.a("./asset/font.png"),new r.a("./asset/icon.png"),new r.a("./asset/key.png"),new r.a("./asset/horde_badge.png"),new r.a("./asset/title-prod.png"),new r.a("./asset/title-demo.png"),new r.a("./asset/how_to_play_keyboard.png"),new r.a("./asset/how_to_play_gamepad.png"),new r.a("./asset/memberscard/members.png"),new r.a("./asset/memberscard/silver.png"),new r.a("./asset/memberscard/gold.png"),new r.a("./asset/memberscard/platinum.png"),new r.a("./asset/memberscard/diamond.png"),new o.a("./asset/wall/metal.albedo.png","./asset/wall/metal.pbr.png","./asset/wall/metal.normal.png"),new o.a("./asset/wall/ruins.albedo.png","./asset/wall/ruins.pbr.png","./asset/wall/ruins.normal.png"),new o.a("./asset/hud/hand.albedo.png","./asset/hud/hand.pbr.png","./asset/hud/hand.normal.png"),new o.a("./asset/hud/foot.albedo.png","./asset/hud/foot.pbr.png","./asset/hud/foot.normal.png"),new o.a("./asset/hud/slowball.albedo.png","./asset/hud/slowball.pbr.png","./asset/hud/slowball.normal.png"),new o.a("./asset/hud/monocular.albedo.png","./asset/hud/monocular.pbr.png","./asset/hud/monocular.normal.png"),new o.a("./asset/hud/energyshield.albedo.png","./asset/hud/energyshield.pbr.png","./asset/hud/energyshield.normal.png"),new o.a("./asset/hud/combobooster.albedo.png","./asset/hud/combobooster.pbr.png","./asset/hud/combobooster.normal.png"),new o.a("./asset/hud/hookshot.albedo.png","./asset/hud/hookshot.pbr.png","./asset/hud/hookshot.normal.png"),new o.a("./asset/hud/pistol.albedo.png","./asset/hud/pistol.pbr.png","./asset/hud/pistol.normal.png"),new o.a("./asset/hud/handcannon.albedo.png","./asset/hud/handcannon.pbr.png","./asset/hud/handcannon.normal.png"),new o.a("./asset/hud/machingun.albedo.png","./asset/hud/machingun.pbr.png","./asset/hud/machingun.normal.png"),new o.a("./asset/hud/chainshotgun.albedo.png","./asset/hud/chainshotgun.pbr.png","./asset/hud/chainshotgun.normal.png"),new o.a("./asset/hud/shotgun.albedo.png","./asset/hud/shotgun.pbr.png","./asset/hud/shotgun.normal.png"),new o.a("./asset/hud/heavycannon.albedo.png","./asset/hud/heavycannon.pbr.png","./asset/hud/heavycannon.normal.png"),new o.a("./asset/hud/launcher.albedo.png","./asset/hud/launcher.pbr.png","./asset/hud/launcher.normal.png"),new o.a("./asset/hud/clusterbow.albedo.png","./asset/hud/clusterbow.pbr.png","./asset/hud/clusterbow.normal.png"),new o.a("./asset/hud/plasmagun.albedo.png","./asset/hud/plasmagun.pbr.png","./asset/hud/plasmagun.normal.png"),new o.a("./asset/hud/plasmasmg.albedo.png","./asset/hud/plasmasmg.pbr.png","./asset/hud/plasmasmg.normal.png"),new o.a("./asset/entity/debug.albedo.png","./asset/entity/debug.pbr.png","./asset/entity/debug.normal.png"),new o.a("./asset/entity/ui.albedo.png","./asset/entity/ui.pbr.png","./asset/entity/ui.normal.png"),new o.a("./asset/entity/bullet.albedo.png","./asset/entity/bullet.pbr.png","./asset/entity/bullet.normal.png"),new o.a("./asset/entity/blood.albedo.png","./asset/entity/blood.pbr.png","./asset/entity/blood.normal.png"),new o.a("./asset/entity/acid.albedo.png","./asset/entity/acid.pbr.png","./asset/entity/acid.normal.png"),new o.a("./asset/entity/gib.albedo.png","./asset/entity/gib.pbr.png","./asset/entity/gib.normal.png"),new o.a("./asset/entity/hit.albedo.png","./asset/entity/hit.pbr.png","./asset/entity/hit.normal.png"),new o.a("./asset/entity/ring.albedo.png","./asset/entity/ring.pbr.png","./asset/entity/ring.normal.png"),new o.a("./asset/entity/stuff.albedo.png","./asset/entity/stuff.pbr.png","./asset/entity/stuff.normal.png"),new o.a("./asset/entity/spark.albedo.png","./asset/entity/spark.pbr.png","./asset/entity/spark.normal.png"),new o.a("./asset/entity/explode.albedo.png","./asset/entity/explode.pbr.png","./asset/entity/explode.normal.png"),new o.a("./asset/entity/muzzleflash.albedo.png","./asset/entity/muzzleflash.pbr.png","./asset/entity/muzzleflash.normal.png"),new o.a("./asset/entity/flame.albedo.png","./asset/entity/flame.pbr.png","./asset/entity/flame.normal.png"),new o.a("./asset/entity/enemy-guy.albedo.png","./asset/entity/enemy-guy.pbr.png","./asset/entity/enemy-guy.normal.png"),new o.a("./asset/entity/helmet.albedo.png","./asset/entity/helmet.pbr.png","./asset/entity/helmet.normal.png"),new o.a("./asset/entity/enemy-armor.albedo.png","./asset/entity/enemy-armor.pbr.png","./asset/entity/enemy-armor.normal.png"),new o.a("./asset/entity/object.albedo.png","./asset/entity/object.pbr.png","./asset/entity/object.normal.png"),new o.a("./asset/entity/checkpoint.albedo.png","./asset/entity/checkpoint.pbr.png","./asset/entity/checkpoint.normal.png"),new o.a("./asset/entity/spawner.albedo.png","./asset/entity/spawner.pbr.png","./asset/entity/spawner.normal.png"),new o.a("./asset/entity/gauge.albedo.png","./asset/entity/gauge.pbr.png","./asset/entity/gauge.normal.png"),new o.a("./asset/entity/meat.albedo.png","./asset/entity/meat.pbr.png","./asset/entity/meat.normal.png"),new o.a("./asset/entity/health.albedo.png","./asset/entity/health.pbr.png","./asset/entity/health.normal.png"),new o.a("./asset/entity/armor.albedo.png","./asset/entity/armor.pbr.png","./asset/entity/armor.normal.png"),new o.a("./asset/entity/stamina.albedo.png","./asset/entity/stamina.pbr.png","./asset/entity/stamina.normal.png"),new o.a("./asset/entity/ammo.albedo.png","./asset/entity/ammo.pbr.png","./asset/entity/ammo.normal.png"),new o.a("./asset/entity/weapon.albedo.png","./asset/entity/weapon.pbr.png","./asset/entity/weapon.normal.png"),new o.a("./asset/entity/key.albedo.png","./asset/entity/key.pbr.png","./asset/entity/key.normal.png"),new l.a("./asset/sound/menu/press.mp3"),new l.a("./asset/sound/menu/cancel.mp3"),new l.a("./asset/sound/menu/scroll.mp3"),new l.a("./asset/sound/menu/move.mp3"),new l.a("./asset/sound/menu/buy.mp3"),new l.a("./asset/sound/effect/explode.mp3"),new l.a("./asset/sound/effect/corrosive.mp3"),new l.a("./asset/sound/effect/ice-explode.mp3"),new l.a("./asset/sound/effect/splash.mp3"),new l.a("./asset/sound/effect/ice-break-1.mp3"),new l.a("./asset/sound/effect/ice-break-2.mp3"),new l.a("./asset/sound/effect/ice-break-3.mp3"),new l.a("./asset/sound/effect/head-shot.mp3"),new l.a("./asset/sound/effect/bullet-wall-spark.mp3"),new l.a("./asset/sound/effect/mine-drop.mp3"),new l.a("./asset/sound/effect/damage-ammo.mp3"),new l.a("./asset/sound/effect/damage-melee.mp3"),new l.a("./asset/sound/effect/damage-magic.mp3"),new l.a("./asset/sound/effect/damage-slash.mp3"),new l.a("./asset/sound/effect/damage-flame.mp3"),new l.a("./asset/sound/effect/damage-corrosive1.mp3"),new l.a("./asset/sound/effect/damage-corrosive2.mp3"),new l.a("./asset/sound/weapon/punch-fire.mp3"),new l.a("./asset/sound/weapon/punch-fire-charge.mp3"),new l.a("./asset/sound/weapon/combobooster-fire.mp3"),new l.a("./asset/sound/weapon/combobooster-loop.mp3"),new l.a("./asset/sound/weapon/pistol-fire.mp3"),new l.a("./asset/sound/weapon/hook-fire.mp3"),new l.a("./asset/sound/weapon/hook-bullet.mp3"),new l.a("./asset/sound/weapon/machingun-fire.mp3"),new l.a("./asset/sound/weapon/chainshotgun-fire.mp3"),new l.a("./asset/sound/weapon/chainshotgun-start.mp3"),new l.a("./asset/sound/weapon/chainshotgun-loop.mp3"),new l.a("./asset/sound/weapon/chainshotgun-end.mp3"),new l.a("./asset/sound/weapon/heavycannon-fire.mp3"),new l.a("./asset/sound/weapon/heavycannon-fire-charge.mp3"),new l.a("./asset/sound/weapon/heavycannon-pump.mp3"),new l.a("./asset/sound/weapon/shotgun-fire.mp3"),new l.a("./asset/sound/weapon/shotgun-pump.mp3"),new l.a("./asset/sound/weapon/launcher-fire.mp3"),new l.a("./asset/sound/weapon/launcher-pump.mp3"),new l.a("./asset/sound/weapon/clusterbow-fire.mp3"),new l.a("./asset/sound/weapon/plasmagun-fire.mp3"),new l.a("./asset/sound/weapon/plasmasmg-fire.mp3"),new l.a("./asset/sound/weapon/out-of-ammo.mp3"),new l.a("./asset/sound/weapon/charge-loop.mp3"),new l.a("./asset/sound/weapon/charge-complete.mp3"),new l.a("./asset/sound/combo/up.mp3"),new l.a("./asset/sound/combo/down.mp3"),new l.a("./asset/sound/item/ammo.mp3"),new l.a("./asset/sound/item/weapon.mp3"),new l.a("./asset/sound/item/key.mp3"),new l.a("./asset/sound/item/meat-1.mp3"),new l.a("./asset/sound/item/meat-2.mp3"),new l.a("./asset/sound/item/meat-3.mp3"),new l.a("./asset/sound/item/ice-1.mp3"),new l.a("./asset/sound/item/ice-2.mp3"),new l.a("./asset/sound/item/ice-3.mp3"),new l.a("./asset/sound/item/meat-mute.mp3"),new l.a("./asset/sound/item/armor.mp3"),new l.a("./asset/sound/item/energy.mp3"),new l.a("./asset/sound/item/checkpoint.mp3"),new l.a("./asset/sound/item/spawn.mp3"),new l.a("./asset/sound/player/step-1.mp3"),new l.a("./asset/sound/player/step-2.mp3"),new l.a("./asset/sound/player/step-3.mp3"),new l.a("./asset/sound/player/step-4.mp3"),new l.a("./asset/sound/player/landing.mp3"),new l.a("./asset/sound/player/grab.mp3"),new l.a("./asset/sound/player/climb.mp3"),new l.a("./asset/sound/player/sliding.mp3"),new l.a("./asset/sound/player/wallrun.mp3"),new l.a("./asset/sound/player/open.mp3"),new l.a("./asset/sound/player/lock1.mp3"),new l.a("./asset/sound/player/lock2.mp3"),new l.a("./asset/sound/player/lock3.mp3"),new l.a("./asset/sound/enemy/no-damage.mp3"),new l.a("./asset/sound/enemy/find-pistol-1.mp3"),new l.a("./asset/sound/enemy/find-pistol-2.mp3"),new l.a("./asset/sound/enemy/find-pistol-3.mp3"),new l.a("./asset/sound/enemy/find-pistol-4.mp3"),new l.a("./asset/sound/enemy/find-shotgun-1.mp3"),new l.a("./asset/sound/enemy/find-shotgun-2.mp3"),new l.a("./asset/sound/enemy/find-shotgun-3.mp3"),new l.a("./asset/sound/enemy/find-shotgun-4.mp3"),new l.a("./asset/sound/enemy/find-shotgun-5.mp3"),new l.a("./asset/sound/enemy/find-machingun-1.mp3"),new l.a("./asset/sound/enemy/find-machingun-2.mp3"),new l.a("./asset/sound/enemy/find-machingun-3.mp3"),new l.a("./asset/sound/enemy/find-melee-1.mp3"),new l.a("./asset/sound/enemy/find-melee-2.mp3"),new l.a("./asset/sound/enemy/find-melee-3.mp3"),new l.a("./asset/sound/enemy/pain-pistol-1.mp3"),new l.a("./asset/sound/enemy/pain-pistol-2.mp3"),new l.a("./asset/sound/enemy/pain-shotgun-1.mp3"),new l.a("./asset/sound/enemy/pain-shotgun-2.mp3"),new l.a("./asset/sound/enemy/pain-machingun-1.mp3"),new l.a("./asset/sound/enemy/pain-machingun-2.mp3"),new l.a("./asset/sound/enemy/pain-melee-1.mp3"),new l.a("./asset/sound/enemy/pain-melee-2.mp3"),new l.a("./asset/sound/enemy/death-pistol-1.mp3"),new l.a("./asset/sound/enemy/death-shotgun-1.mp3"),new l.a("./asset/sound/enemy/death-machingun-1.mp3"),new l.a("./asset/sound/enemy/death-melee-1.mp3"),new l.a("./asset/sound/enemy/death-armor.mp3"),new l.a("./asset/sound/enemy/fire-melee.mp3"),new l.a("./asset/sound/enemy/fire-magic.mp3"),new l.a("./asset/sound/system/help.mp3");const u=["./asset/sound/item/ammo.mp3"],p=["./asset/sound/item/weapon.mp3"],d=["./asset/sound/item/key.mp3"],g=["./asset/sound/item/meat-1.mp3","./asset/sound/item/meat-2.mp3","./asset/sound/item/meat-3.mp3"],m=["./asset/sound/item/ice-1.mp3","./asset/sound/item/ice-2.mp3","./asset/sound/item/ice-3.mp3"],f=["./asset/sound/item/meat-mute.mp3"],y=["./asset/sound/item/armor.mp3"],v=["./asset/sound/item/energy.mp3"],w=["./asset/sound/effect/splash.mp3"],b=["./asset/sound/effect/ice-break-1.mp3","./asset/sound/effect/ice-break-2.mp3","./asset/sound/effect/ice-break-3.mp3"],x=["./asset/sound/player/lock1.mp3","./asset/sound/player/lock2.mp3","./asset/sound/player/lock3.mp3"],M={NONE:new i.a("./asset/wall/metal.albedo.png",1,0),METAL_DOOR_DEFAULT:new i.a("./asset/wall/metal.albedo.png",1,1),METAL_DOOR_RED:new i.a("./asset/wall/metal.albedo.png",1,2),METAL_DOOR_BLUE:new i.a("./asset/wall/metal.albedo.png",1,3),METAL_DOOR_YELLOW:new i.a("./asset/wall/metal.albedo.png",1,4),METAL_GOLE:new i.a("./asset/wall/metal.albedo.png",1,5),METAL_SECRET:new i.a("./asset/wall/metal.albedo.png",1,6),METAL_GRAB:new i.a("./asset/wall/metal.albedo.png",1,7),METAL_ASSIST_GRAB:new i.a("./asset/wall/metal.albedo.png",1,8),METAL_WALLRUN:new i.a("./asset/wall/metal.albedo.png",1,9),METAL_DOOR_SLIDING:new i.a("./asset/wall/metal.albedo.png",1,10),METAL_IMPORTANT:new i.a("./asset/wall/metal.albedo.png",1,11),METAL_EDIT_ZONE:new i.a("./asset/wall/metal.albedo.png",1,12),METAL_EDIT_BLOCK:new i.a("./asset/wall/metal.albedo.png",1,13),METAL_TILE1:new i.a("./asset/wall/metal.albedo.png",1,14),METAL_TILE2:new i.a("./asset/wall/metal.albedo.png",1,15),METAL_TILE3:new i.a("./asset/wall/metal.albedo.png",1,16),METAL_TILE4:new i.a("./asset/wall/metal.albedo.png",1,17),METAL_TILE5:new i.a("./asset/wall/metal.albedo.png",1,18),METAL_TILE6:new i.a("./asset/wall/metal.albedo.png",1,19),METAL_TILE7:new i.a("./asset/wall/metal.albedo.png",1,20),RUINS_DOOR_DEFAULT:new i.a("./asset/wall/ruins.albedo.png",1,1),RUINS_DOOR_RED:new i.a("./asset/wall/ruins.albedo.png",1,2),RUINS_DOOR_BLUE:new i.a("./asset/wall/ruins.albedo.png",1,3),RUINS_DOOR_YELLOW:new i.a("./asset/wall/ruins.albedo.png",1,4),RUINS_GOLE:new i.a("./asset/wall/ruins.albedo.png",1,5),RUINS_SECRET:new i.a("./asset/wall/ruins.albedo.png",1,6),RUINS_GRAB:new i.a("./asset/wall/ruins.albedo.png",1,7),RUINS_ASSIST_GRAB:new i.a("./asset/wall/ruins.albedo.png",1,8),RUINS_WALLRUN:new i.a("./asset/wall/ruins.albedo.png",1,9),RUINS_EDIT_ZONE:new i.a("./asset/wall/ruins.albedo.png",1,12),RUINS_EDIT_BLOCK:new i.a("./asset/wall/ruins.albedo.png",1,13),RUINS_TILE1:new i.a("./asset/wall/ruins.albedo.png",1,14),RUINS_TILE2:new i.a("./asset/wall/ruins.albedo.png",1,15),RUINS_TILE3:new i.a("./asset/wall/ruins.albedo.png",1,16),HUD_HAND_GRIP:new i.a("./asset/hud/hand.albedo.png",1,0),HUD_HAND_STILL:new i.a("./asset/hud/hand.albedo.png",1,1),HUD_HAND_FIRE:new i.a("./asset/hud/hand.albedo.png",1,2),HUD_HAND_JUMP:new i.a("./asset/hud/hand.albedo.png",1,3),HUD_HAND_SPRINT:new i.a("./asset/hud/hand.albedo.png",1,4),HUD_HAND_AIR:new i.a("./asset/hud/hand.albedo.png",1,5),HUD_HAND_CHARGE:new i.a("./asset/hud/hand.albedo.png",1,6),HUD_HAND_ATTACK:new i.a("./asset/hud/hand.albedo.png",1,7),HUD_FOOT_SLIDING:new i.a("./asset/hud/foot.albedo.png",1,0),HUD_FOOT_COIL_HAND:new i.a("./asset/hud/foot.albedo.png",1,1),HUD_FOOT_COIL_NO_HAND:new i.a("./asset/hud/foot.albedo.png",1,2),HUD_SLOWBALL_STILL:new i.a("./asset/hud/slowball.albedo.png",1,0),HUD_SLOWBALL_FIRE:new i.a("./asset/hud/slowball.albedo.png",1,1),HUD_BINOCULARS_STILL:new i.a("./asset/hud/monocular.albedo.png",1,0),HUD_ENERGYSHIELD_STILL:new i.a("./asset/hud/energyshield.albedo.png",1,0),HUD_ENERGYSHIELD_EMPTY:new i.a("./asset/hud/energyshield.albedo.png",1,1),HUD_ENERGYSHIELD_FIRE:new i.a("./asset/hud/energyshield.albedo.png",1,2),HUD_COMBO_BOOSTER_STILL:new i.a("./asset/hud/combobooster.albedo.png",1,0),HUD_COMBO_BOOSTER_FIRE:new i.a("./asset/hud/combobooster.albedo.png",1,1),HUD_HOOKSHOT_STILL:new i.a("./asset/hud/hookshot.albedo.png",1,0),HUD_PISTOL_STILL:new i.a("./asset/hud/pistol.albedo.png",1,0),HUD_PISTOL_COCKING:new i.a("./asset/hud/pistol.albedo.png",1,1),HUD_HANDCANNON_STILL:new i.a("./asset/hud/handcannon.albedo.png",1,0),HUD_HANDCANNON_COCKING:new i.a("./asset/hud/handcannon.albedo.png",1,1),HUD_MACHINGUN_STILL:new i.a("./asset/hud/machingun.albedo.png",1,0),HUD_MACHINGUN_COCKING:new i.a("./asset/hud/machingun.albedo.png",1,1),HUD_CHAINSHOTGUN_STILL:new i.a("./asset/hud/chainshotgun.albedo.png",1,0),HUD_CHAINSHOTGUN_COCKING:new i.a("./asset/hud/chainshotgun.albedo.png",1,1),HUD_SHOTGUN_STILL:new i.a("./asset/hud/shotgun.albedo.png",1,0),HUD_SHOTGUN_COCKING:new i.a("./asset/hud/shotgun.albedo.png",1,1),HUD_HEAVYCANNON_STILL:new i.a("./asset/hud/heavycannon.albedo.png",1,0),HUD_HEAVYCANNON_COCKING:new i.a("./asset/hud/heavycannon.albedo.png",1,1),HUD_LAUNCHER_STILL:new i.a("./asset/hud/launcher.albedo.png",1,0),HUD_LAUNCHER_COCKING:new i.a("./asset/hud/launcher.albedo.png",1,1),HUD_CLUSTERBOW_STILL:new i.a("./asset/hud/clusterbow.albedo.png",1,0),HUD_CLUSTERBOW_COCKING:new i.a("./asset/hud/clusterbow.albedo.png",1,1),HUD_PLASMAGUN_STILL:new i.a("./asset/hud/plasmagun.albedo.png",1,0),HUD_PLASMAGUN_COCKING:new i.a("./asset/hud/plasmagun.albedo.png",1,1),HUD_PLASMASMG_STILL:new i.a("./asset/hud/plasmasmg.albedo.png",1,0),HUD_PLASMASMG_COCKING:new i.a("./asset/hud/plasmasmg.albedo.png",1,1),DEGUB_TARGET:new i.a("./asset/entity/debug.albedo.png",1,0),UI_START_POINT:new i.a("./asset/entity/ui.albedo.png",1,0),UI_GOLE_POINT:new i.a("./asset/entity/ui.albedo.png",1,1),UI_SECRET_POINT:new i.a("./asset/entity/ui.albedo.png",1,2),UI_HELP_POINT:new i.a("./asset/entity/ui.albedo.png",1,3),UI_HORDE_GROUND_SPAWN_POINT:new i.a("./asset/entity/ui.albedo.png",1,4),UI_HORDE_SNIPER_SPAWN_POINT:new i.a("./asset/entity/ui.albedo.png",1,5),UI_HORDE_SKY_SPAWN_POINT:new i.a("./asset/entity/ui.albedo.png",1,6),UI_ANGLE:new i.a("./asset/entity/ui.albedo.png",1,7),EFFECT_BULLET_AMMO_TRAIL:new i.a("./asset/entity/bullet.albedo.png",.1,0),EFFECT_BULLET_PLASMA_BALL:new i.a("./asset/entity/bullet.albedo.png",.1,1),EFFECT_BULLET_HOOK_HEAD:new i.a("./asset/entity/bullet.albedo.png",.25,2),EFFECT_BULLET_HOOK_CHAIN:new i.a("./asset/entity/bullet.albedo.png",.1,3),EFFECT_BULLET_GRENADE:new i.a("./asset/entity/bullet.albedo.png",.1,3),EFFECT_BULLET_ARM_GRANADE:new i.a("./asset/entity/bullet.albedo.png",.375,4),EFFECT_BULLET_RAIL_TRAIL:new i.a("./asset/entity/bullet.albedo.png",.1,5),EFFECT_BULLET_LASER_TRAIL:new i.a("./asset/entity/bullet.albedo.png",.1,6),EFFECT_BULLET_PLASMA_TRAIL:new i.a("./asset/entity/bullet.albedo.png",.1,7),EFFECT_BULLET_MAGINC_MISSILE_TRAIL:new i.a("./asset/entity/bullet.albedo.png",.1,8),EFFECT_BULLET_DEATH_BOMB:new i.a("./asset/entity/bullet.albedo.png",.25,9),EFFECT_BLOOD_RED1:new i.a("./asset/entity/blood.albedo.png",.75,0),EFFECT_BLOOD_RED2:new i.a("./asset/entity/blood.albedo.png",.75,1),EFFECT_BLOOD_RED3:new i.a("./asset/entity/blood.albedo.png",.75,2),EFFECT_BLOOD_GREEN1:new i.a("./asset/entity/blood.albedo.png",.75,3),EFFECT_BLOOD_GREEN2:new i.a("./asset/entity/blood.albedo.png",.75,4),EFFECT_BLOOD_GREEN3:new i.a("./asset/entity/blood.albedo.png",.75,5),EFFECT_ACID_RED1:new i.a("./asset/entity/acid.albedo.png",.75,0),EFFECT_ACID_RED2:new i.a("./asset/entity/acid.albedo.png",.75,1),EFFECT_ACID_GREEN:new i.a("./asset/entity/acid.albedo.png",.75,2),EFFECT_ACID_BLUE:new i.a("./asset/entity/acid.albedo.png",.75,4),EFFECT_GIB1:new i.a("./asset/entity/gib.albedo.png",.25,0),EFFECT_GIB2:new i.a("./asset/entity/gib.albedo.png",.25,1),EFFECT_GIB3:new i.a("./asset/entity/gib.albedo.png",.25,2),EFFECT_GIB4:new i.a("./asset/entity/gib.albedo.png",.25,3),EFFECT_ICE_GIB1:new i.a("./asset/entity/gib.albedo.png",.25,4),EFFECT_ICE_GIB2:new i.a("./asset/entity/gib.albedo.png",.25,5),EFFECT_ICE_GIB3:new i.a("./asset/entity/gib.albedo.png",.25,6),EFFECT_ICE_GIB4:new i.a("./asset/entity/gib.albedo.png",.25,7),EFFECT_HIT_WALL1:new i.a("./asset/entity/hit.albedo.png",1,0),EFFECT_HIT_WALL2:new i.a("./asset/entity/hit.albedo.png",1,1),EFFECT_HIT_WALL3:new i.a("./asset/entity/hit.albedo.png",1,2),EFFECT_HIT_BLOOD1:new i.a("./asset/entity/hit.albedo.png",1,3),EFFECT_HIT_BLOOD2:new i.a("./asset/entity/hit.albedo.png",1,4),EFFECT_HIT_BLOOD3:new i.a("./asset/entity/hit.albedo.png",1,5),EFFECT_HEADSHOT1:new i.a("./asset/entity/ring.albedo.png",1,0),EFFECT_HEADSHOT2:new i.a("./asset/entity/ring.albedo.png",1,1),EFFECT_HEADSHOT3:new i.a("./asset/entity/ring.albedo.png",1,2),EFFECT_HEADSHOT4:new i.a("./asset/entity/ring.albedo.png",1,3),EFFECT_HEADSHOT5:new i.a("./asset/entity/ring.albedo.png",1,4),EFFECT_HEADSHOT6:new i.a("./asset/entity/ring.albedo.png",1,5),EFFECT_ARMORBREAK1:new i.a("./asset/entity/ring.albedo.png",1,6),EFFECT_ARMORBREAK2:new i.a("./asset/entity/ring.albedo.png",1,7),EFFECT_ARMORBREAK3:new i.a("./asset/entity/ring.albedo.png",1,8),EFFECT_ARMORBREAK4:new i.a("./asset/entity/ring.albedo.png",1,9),EFFECT_ARMORBREAK5:new i.a("./asset/entity/ring.albedo.png",1,10),EFFECT_ARMORBREAK6:new i.a("./asset/entity/ring.albedo.png",1,11),EFFECT_STUFF:new i.a("./asset/entity/stuff.albedo.png",1,0),EFFECT_SPARK_MISSILE1:new i.a("./asset/entity/spark.albedo.png",1,0),EFFECT_SPARK_MISSILE2:new i.a("./asset/entity/spark.albedo.png",1,1),EFFECT_SPARK_MISSILE3:new i.a("./asset/entity/spark.albedo.png",1,2),EFFECT_SPARK_MISSILE4:new i.a("./asset/entity/spark.albedo.png",1,3),EFFECT_DEFAULT_EXPLODE1:new i.a("./asset/entity/explode.albedo.png",1,0),EFFECT_DEFAULT_EXPLODE2:new i.a("./asset/entity/explode.albedo.png",1,1),EFFECT_DEFAULT_EXPLODE3:new i.a("./asset/entity/explode.albedo.png",1,2),EFFECT_DEFAULT_EXPLODE4:new i.a("./asset/entity/explode.albedo.png",1,3),EFFECT_DEFAULT_EXPLODE5:new i.a("./asset/entity/explode.albedo.png",1,4),EFFECT_DEFAULT_EXPLODE6:new i.a("./asset/entity/explode.albedo.png",1,5),EFFECT_DEFAULT_EXPLODE7:new i.a("./asset/entity/explode.albedo.png",1,6),EFFECT_DEFAULT_EXPLODE8:new i.a("./asset/entity/explode.albedo.png",1,7),EFFECT_DEFAULT_EXPLODE9:new i.a("./asset/entity/explode.albedo.png",1,8),EFFECT_DEFAULT_EXPLODE10:new i.a("./asset/entity/explode.albedo.png",1,9),EFFECT_DEFAULT_EXPLODE11:new i.a("./asset/entity/explode.albedo.png",1,10),EFFECT_DEFAULT_EXPLODE12:new i.a("./asset/entity/explode.albedo.png",1,11),EFFECT_DEFAULT_EXPLODE13:new i.a("./asset/entity/explode.albedo.png",1,12),EFFECT_DEFAULT_EXPLODE14:new i.a("./asset/entity/explode.albedo.png",1,13),EFFECT_CORROSIVE_EXPLODE1:new i.a("./asset/entity/explode.albedo.png",1,14),EFFECT_CORROSIVE_EXPLODE2:new i.a("./asset/entity/explode.albedo.png",1,15),EFFECT_CORROSIVE_EXPLODE3:new i.a("./asset/entity/explode.albedo.png",1,16),EFFECT_CORROSIVE_EXPLODE4:new i.a("./asset/entity/explode.albedo.png",1,17),EFFECT_CORROSIVE_EXPLODE5:new i.a("./asset/entity/explode.albedo.png",1,18),EFFECT_CORROSIVE_EXPLODE6:new i.a("./asset/entity/explode.albedo.png",1,19),EFFECT_CORROSIVE_EXPLODE7:new i.a("./asset/entity/explode.albedo.png",1,20),EFFECT_CORROSIVE_EXPLODE8:new i.a("./asset/entity/explode.albedo.png",1,21),EFFECT_CORROSIVE_EXPLODE9:new i.a("./asset/entity/explode.albedo.png",1,22),EFFECT_CORROSIVE_EXPLODE10:new i.a("./asset/entity/explode.albedo.png",1,23),EFFECT_CORROSIVE_EXPLODE11:new i.a("./asset/entity/explode.albedo.png",1,24),EFFECT_CORROSIVE_EXPLODE12:new i.a("./asset/entity/explode.albedo.png",1,25),EFFECT_CORROSIVE_EXPLODE13:new i.a("./asset/entity/explode.albedo.png",1,26),EFFECT_CORROSIVE_EXPLODE14:new i.a("./asset/entity/explode.albedo.png",1,27),EFFECT_FLAME1:new i.a("./asset/entity/flame.albedo.png",1,0),EFFECT_FLAME2:new i.a("./asset/entity/flame.albedo.png",1,1),EFFECT_FLAME3:new i.a("./asset/entity/flame.albedo.png",1,2),EFFECT_FLAME4:new i.a("./asset/entity/flame.albedo.png",1,3),EFFECT_FLAME5:new i.a("./asset/entity/flame.albedo.png",1,4),EFFECT_MUZZLE_FLASH_AMMO_1:new i.a("./asset/entity/muzzleflash.albedo.png",1,0),EFFECT_MUZZLE_FLASH_AMMO_2:new i.a("./asset/entity/muzzleflash.albedo.png",1,1),EFFECT_MUZZLE_FLASH_AMMO_3:new i.a("./asset/entity/muzzleflash.albedo.png",1,2),EFFECT_MUZZLE_FLASH_CELL_1:new i.a("./asset/entity/muzzleflash.albedo.png",1,3),EFFECT_MUZZLE_FLASH_CELL_2:new i.a("./asset/entity/muzzleflash.albedo.png",1,4),EFFECT_MUZZLE_FLASH_CELL_3:new i.a("./asset/entity/muzzleflash.albedo.png",1,5),EFFECT_MUZZLE_FLASH_HAVYCANNON1:new i.a("./asset/entity/muzzleflash.albedo.png",1,6),EFFECT_MUZZLE_FLASH_HAVYCANNON2:new i.a("./asset/entity/muzzleflash.albedo.png",1,7),EFFECT_MUZZLE_FLASH_HAVYCANNON3:new i.a("./asset/entity/muzzleflash.albedo.png",1,8),ENEMY_TARGET_STILL:new i.a("./asset/entity/enemy-guy.albedo.png",1,0),ENEMY_TARGET_PAIN:new i.a("./asset/entity/enemy-guy.albedo.png",1,2),ENEMY_TARGET_BLOW:new i.a("./asset/entity/enemy-guy.albedo.png",1,3),ENEMY_TARGET_DOWN:new i.a("./asset/entity/enemy-guy.albedo.png",1,4),ENEMY_TARGET_FREEZE:new i.a("./asset/entity/enemy-guy.albedo.png",1,5),ENEMY_GUY_PISTOL_STILL:new i.a("./asset/entity/enemy-guy.albedo.png",1,6),ENEMY_GUY_PISTOL_AIM:new i.a("./asset/entity/enemy-guy.albedo.png",1,7),ENEMY_GUY_PISTOL_PAIN:new i.a("./asset/entity/enemy-guy.albedo.png",1,8),ENEMY_GUY_PISTOL_BLOW:new i.a("./asset/entity/enemy-guy.albedo.png",1,9),ENEMY_GUY_PISTOL_DOWN:new i.a("./asset/entity/enemy-guy.albedo.png",1,10),ENEMY_GUY_PISTOL_FREEZE:new i.a("./asset/entity/enemy-guy.albedo.png",1,11),ENEMY_GUY_SHOTGUN_STILL:new i.a("./asset/entity/enemy-guy.albedo.png",1,12),ENEMY_GUY_SHOTGUN_AIM:new i.a("./asset/entity/enemy-guy.albedo.png",1,13),ENEMY_GUY_SHOTGUN_PAIN:new i.a("./asset/entity/enemy-guy.albedo.png",1,14),ENEMY_GUY_SHOTGUN_BLOW:new i.a("./asset/entity/enemy-guy.albedo.png",1,15),ENEMY_GUY_SHOTGUN_DOWN:new i.a("./asset/entity/enemy-guy.albedo.png",1,16),ENEMY_GUY_SHOTGUN_FREEZE:new i.a("./asset/entity/enemy-guy.albedo.png",1,17),ENEMY_GUY_MACHINGUN_STILL:new i.a("./asset/entity/enemy-guy.albedo.png",1,18),ENEMY_GUY_MACHINGUN_AIM:new i.a("./asset/entity/enemy-guy.albedo.png",1,19),ENEMY_GUY_MACHINGUN_PAIN:new i.a("./asset/entity/enemy-guy.albedo.png",1,20),ENEMY_GUY_MACHINGUN_BLOW:new i.a("./asset/entity/enemy-guy.albedo.png",1,21),ENEMY_GUY_MACHINGUN_DOWN:new i.a("./asset/entity/enemy-guy.albedo.png",1,22),ENEMY_GUY_MACHINGUN_FREEZE:new i.a("./asset/entity/enemy-guy.albedo.png",1,23),ENEMY_GUY_MELEE_STILL:new i.a("./asset/entity/enemy-guy.albedo.png",1,24),ENEMY_GUY_MELEE_AIM:new i.a("./asset/entity/enemy-guy.albedo.png",1,25),ENEMY_GUY_MELEE_PAIN:new i.a("./asset/entity/enemy-guy.albedo.png",1,26),ENEMY_GUY_MELEE_BLOW:new i.a("./asset/entity/enemy-guy.albedo.png",1,27),ENEMY_GUY_MELEE_DOWN:new i.a("./asset/entity/enemy-guy.albedo.png",1,28),ENEMY_GUY_MELEE_FREEZE:new i.a("./asset/entity/enemy-guy.albedo.png",1,29),ENEMY_GUY_PISTOL_ARMOR_STILL:new i.a("./asset/entity/enemy-guy.albedo.png",1,30),ENEMY_GUY_PISTOL_ARMOR_AIM:new i.a("./asset/entity/enemy-guy.albedo.png",1,31),ENEMY_GUY_PISTOL_ARMOR_PAIN:new i.a("./asset/entity/enemy-guy.albedo.png",1,32),ENEMY_GUY_PISTOL_ARMOR_FREEZE:new i.a("./asset/entity/enemy-guy.albedo.png",1,35),ENEMY_GUY_SHOTGUN_ARMOR_STILL:new i.a("./asset/entity/enemy-guy.albedo.png",1,36),ENEMY_GUY_SHOTGUN_ARMOR_AIM:new i.a("./asset/entity/enemy-guy.albedo.png",1,37),ENEMY_GUY_SHOTGUN_ARMOR_PAIN:new i.a("./asset/entity/enemy-guy.albedo.png",1,38),ENEMY_GUY_SHOTGUN_ARMOR_FREEZE:new i.a("./asset/entity/enemy-guy.albedo.png",1,41),ENEMY_GUY_MACHINGUN_ARMOR_STILL:new i.a("./asset/entity/enemy-guy.albedo.png",1,42),ENEMY_GUY_MACHINGUN_ARMOR_AIM:new i.a("./asset/entity/enemy-guy.albedo.png",1,43),ENEMY_GUY_MACHINGUN_ARMOR_PAIN:new i.a("./asset/entity/enemy-guy.albedo.png",1,44),ENEMY_GUY_MACHINGUN_ARMOR_FREEZE:new i.a("./asset/entity/enemy-guy.albedo.png",1,47),ENEMY_GUY_MELEE_ARMOR_STILL:new i.a("./asset/entity/enemy-guy.albedo.png",1,48),ENEMY_GUY_MELEE_ARMOR_AIM:new i.a("./asset/entity/enemy-guy.albedo.png",1,49),ENEMY_GUY_MELEE_ARMOR_PAIN:new i.a("./asset/entity/enemy-guy.albedo.png",1,50),ENEMY_GUY_MELEE_ARMOR_FREEZE:new i.a("./asset/entity/enemy-guy.albedo.png",1,53),ENEMY_GUY_MISSILE_STILL:new i.a("./asset/entity/enemy-guy.albedo.png",1,54),ENEMY_GUY_MISSILE_AIM:new i.a("./asset/entity/enemy-guy.albedo.png",1,55),ENEMY_GUY_MISSILE_PAIN:new i.a("./asset/entity/enemy-guy.albedo.png",1,56),ENEMY_GUY_MISSILE_FREEZE:new i.a("./asset/entity/enemy-guy.albedo.png",1,59),ENEMY_TANK_BALL_STILL:new i.a("./asset/entity/enemy-guy.albedo.png",1,60),ENEMY_TANK_BALL_AIM:new i.a("./asset/entity/enemy-guy.albedo.png",1,61),ENEMY_TANK_BALL_PAIN:new i.a("./asset/entity/enemy-guy.albedo.png",1,62),ENEMY_TANK_BALL_FREEZE:new i.a("./asset/entity/enemy-guy.albedo.png",1,65),ENEMY_GUY_HELMET_STILL:new i.a("./asset/entity/helmet.albedo.png",1,0),ENEMY_GUY_HELMET_PAIN:new i.a("./asset/entity/helmet.albedo.png",1,1),ENEMY_GUY_ARMOR_HELMET:new i.a("./asset/entity/enemy-armor.albedo.png",1,0),ENEMY_GUY_ARMOR_SHOULDER:new i.a("./asset/entity/enemy-armor.albedo.png",1,1),ENEMY_GUY_ARMOR_ARM:new i.a("./asset/entity/enemy-armor.albedo.png",1,2),ENEMY_GUY_ARMOR_BODY:new i.a("./asset/entity/enemy-armor.albedo.png",1,3),ENEMY_GUY_ARMOR_WAIST:new i.a("./asset/entity/enemy-armor.albedo.png",1,4),OBJECT_SHOP:new i.a("./asset/entity/object.albedo.png",1,0),OBJECT_SHOP_SALE:new i.a("./asset/entity/object.albedo.png",1,1),OBJECT_EDITOR:new i.a("./asset/entity/object.albedo.png",1,2),OBJECT_DRUM:new i.a("./asset/entity/object.albedo.png",1,3),OBJECT_CHECKPOINT_DISABLE:new i.a("./asset/entity/checkpoint.albedo.png",1,0),OBJECT_CHECKPOINT_ACTIVE:new i.a("./asset/entity/checkpoint.albedo.png",1,1),OBJECT_SPAWNER_HEALTH:new i.a("./asset/entity/spawner.albedo.png",1,0),OBJECT_SPAWNER_ARMOR:new i.a("./asset/entity/spawner.albedo.png",1,1),OBJECT_SPAWNER_AMMO:new i.a("./asset/entity/spawner.albedo.png",1,2),OBJECT_SPAWNER_OTHER:new i.a("./asset/entity/spawner.albedo.png",1,3),EFFECT_SPAWNER_GAUGE1:new i.a("./asset/entity/gauge.albedo.png",1,0),EFFECT_SPAWNER_GAUGE2:new i.a("./asset/entity/gauge.albedo.png",1,1),EFFECT_SPAWNER_GAUGE3:new i.a("./asset/entity/gauge.albedo.png",1,2),EFFECT_SPAWNER_GAUGE4:new i.a("./asset/entity/gauge.albedo.png",1,3),EFFECT_SPAWNER_GAUGE5:new i.a("./asset/entity/gauge.albedo.png",1,4),EFFECT_SPAWNER_GAUGE6:new i.a("./asset/entity/gauge.albedo.png",1,5),EFFECT_SPAWNER_GAUGE7:new i.a("./asset/entity/gauge.albedo.png",1,6),EFFECT_SPAWNER_GAUGE8:new i.a("./asset/entity/gauge.albedo.png",1,7),EFFECT_SPAWNER_GAUGE9:new i.a("./asset/entity/gauge.albedo.png",1,8),EFFECT_SPAWNER_GAUGE10:new i.a("./asset/entity/gauge.albedo.png",1,9),EFFECT_SPAWNER_GAUGE11:new i.a("./asset/entity/gauge.albedo.png",1,10),EFFECT_SPAWNER_GAUGE12:new i.a("./asset/entity/gauge.albedo.png",1,11),EFFECT_SPAWNER_GAUGE13:new i.a("./asset/entity/gauge.albedo.png",1,12),EFFECT_SPAWNER_GAUGE14:new i.a("./asset/entity/gauge.albedo.png",1,13),EFFECT_SPAWNER_GAUGE15:new i.a("./asset/entity/gauge.albedo.png",1,14),EFFECT_SPAWNER_GAUGE16:new i.a("./asset/entity/gauge.albedo.png",1,15),ITEM_MEAT_STIM:new i.a("./asset/entity/meat.albedo.png",1,0),ITEM_MEAT_MEDIKIT:new i.a("./asset/entity/meat.albedo.png",1,1),ITEM_MEAT_ELIXIR:new i.a("./asset/entity/meat.albedo.png",1,2),ITEM_HEALTH_ELIXIR:new i.a("./asset/entity/health.albedo.png",1,2),ITEM_ARMOR_ELIXIR:new i.a("./asset/entity/armor.albedo.png",1,0),ITEM_ENERGY_ELIXIR:new i.a("./asset/entity/stamina.albedo.png",1,0),ITEM_AMMO_CLIP:new i.a("./asset/entity/ammo.albedo.png",1,0),ITEM_AMMO_MAGAZINE:new i.a("./asset/entity/ammo.albedo.png",1,1),ITEM_AMMO_SHELL:new i.a("./asset/entity/ammo.albedo.png",1,2),ITEM_AMMO_ROCKET:new i.a("./asset/entity/ammo.albedo.png",1,3),ITEM_AMMO_CELL:new i.a("./asset/entity/ammo.albedo.png",1,4),ITEM_WEAPON_PUNCH:new i.a("./asset/entity/weapon.albedo.png",1,0),ITEM_WEAPON_SLOWBALL:new i.a("./asset/entity/weapon.albedo.png",1,6),ITEM_WEAPON_BINOCULARS:new i.a("./asset/entity/weapon.albedo.png",1,12),ITEM_WEAPON_ENERGYSHIELD:new i.a("./asset/entity/weapon.albedo.png",1,18),ITEM_WEAPON_COMBOBOOSTER:new i.a("./asset/entity/weapon.albedo.png",1,24),ITEM_WEAPON_FROZEN_GRENADE:new i.a("./asset/entity/weapon.albedo.png",1,30),ITEM_WEAPON_HOOKSHOT:new i.a("./asset/entity/weapon.albedo.png",1,36),ITEM_WEAPON_PISTOL:new i.a("./asset/entity/weapon.albedo.png",1,1),ITEM_WEAPON_HANDCANNON:new i.a("./asset/entity/weapon.albedo.png",1,7),ITEM_WEAPON_MACHINGUN:new i.a("./asset/entity/weapon.albedo.png",1,2),ITEM_WEAPON_CHAINSHOTGUN:new i.a("./asset/entity/weapon.albedo.png",1,8),ITEM_WEAPON_SHOTGUN:new i.a("./asset/entity/weapon.albedo.png",1,3),ITEM_WEAPON_HEAVYCANNON:new i.a("./asset/entity/weapon.albedo.png",1,9),ITEM_WEAPON_LAUNCHER:new i.a("./asset/entity/weapon.albedo.png",1,4),ITEM_WEAPON_CLUSTERBOW:new i.a("./asset/entity/weapon.albedo.png",1,10),ITEM_WEAPON_PLASMAGUN:new i.a("./asset/entity/weapon.albedo.png",1,5),ITEM_WEAPON_PLASMASMG:new i.a("./asset/entity/weapon.albedo.png",1,11),ITEM_KEY_RED:new i.a("./asset/entity/key.albedo.png",1,0),ITEM_KEY_BLUE:new i.a("./asset/entity/key.albedo.png",1,1),ITEM_KEY_YELLOW:new i.a("./asset/entity/key.albedo.png",1,2),ITEM_KEY_RANDOM:new i.a("./asset/entity/key.albedo.png",1,3)},E=[M.EFFECT_FLAME1,M.EFFECT_FLAME2,M.EFFECT_FLAME3,M.EFFECT_FLAME4,M.EFFECT_FLAME5],_={METAL:{NONE:M.NONE,DOOR_DEFAULT:M.METAL_DOOR_DEFAULT,DOOR_RED:M.METAL_DOOR_RED,DOOR_BLUE:M.METAL_DOOR_BLUE,DOOR_YELLOW:M.METAL_DOOR_YELLOW,GOLE:M.METAL_GOLE,SECRET:M.METAL_SECRET,GRAB:M.METAL_GRAB,ASSIST_GRAB:M.METAL_ASSIST_GRAB,WALLRUN:M.METAL_WALLRUN,DOOR_SLIDING:M.METAL_DOOR_SLIDING,IMPORTANT:M.METAL_IMPORTANT,EDIT_ZONE:M.METAL_EDIT_ZONE,EDIT_BLOCK:M.METAL_EDIT_BLOCK,FLOOR:M.METAL_TILE1,WALL:M.METAL_TILE2,CEIL:M.METAL_TILE3,TILE1:M.METAL_TILE4,TILE2:M.METAL_TILE5,TILE3:M.METAL_TILE6,TILE4:M.METAL_TILE7},RUINS:{NONE:M.NONE,DOOR_DEFAULT:M.RUINS_DOOR_DEFAULT,DOOR_RED:M.RUINS_DOOR_RED,DOOR_BLUE:M.RUINS_DOOR_BLUE,DOOR_YELLOW:M.RUINS_DOOR_YELLOW,GOLE:M.RUINS_GOLE,SECRET:M.RUINS_SECRET,GRAB:M.RUINS_GRAB,ASSIST_GRAB:M.RUINS_ASSIST_GRAB,WALLRUN:M.RUINS_WALLRUN,DOOR_SLIDING:M.NONE,IMPORTANT:M.NONE,EDIT_ZONE:M.RUINS_EDIT_ZONE,EDIT_BLOCK:M.RUINS_EDIT_BLOCK,FLOOR:M.RUINS_TILE1,WALL:M.RUINS_TILE2,CEIL:M.RUINS_TILE3,TILE1:M.NONE,TILE2:M.NONE,TILE3:M.NONE,TILE4:M.NONE}},C={DEFAULT:{theme:0,rise_up_color:[50/255,125/255,50/255],night_up_color:[50/255,125/255,50/255],rise_down_color:[100/255,125/255,50/255],night_down_color:[100/255,125/255,50/255],material_up:[1,.625,.075],material_down:[1,.625,0],noise_size:5,noise_length:2},GRASS:{theme:0,rise_up_color:[50/255,125/255,50/255],night_up_color:[50/255,125/255,50/255],rise_down_color:[100/255,125/255,50/255],night_down_color:[100/255,125/255,50/255],material_up:[1,.5,.25],material_down:[1,1,0],noise_size:5,noise_length:2},DESERT:{theme:0,rise_up_color:[152/255,107/255,64/255],night_up_color:[152/255,107/255,64/255],rise_down_color:[202/255,127/255,84/255],night_down_color:[202/255,127/255,84/255],material_up:[1,.5,.25],material_down:[1,1,0],noise_size:5,noise_length:2},SEA:{theme:1,rise_up_color:[50/255,50/255,84/255],night_up_color:[7.5/255,37.5/255,.25],rise_down_color:[50/255,50/255,84/255],night_down_color:[7.5/255,37.5/255,.25],material_up:[1,.1,.5],material_down:[1,.1,.5],noise_size:.25,noise_length:2},LAVA:{theme:1,rise_up_color:[1,0,0],night_up_color:[1,0,0],rise_down_color:[1,.5,0],night_down_color:[1,.5,0],material_up:[0,0,0],material_down:[0,0,0],noise_size:1,noise_length:2},BLOOD:{theme:1,rise_up_color:[200/255,50/255,50/255],night_up_color:[125/255,37.5/255,.15],rise_down_color:[200/255,50/255,50/255],night_down_color:[125/255,37.5/255,.15],material_up:[1,.1,.1],material_down:[1,.1,.1],noise_size:.5,noise_length:2},SECRET:{theme:1,rise_up_color:[200/255,50/255,250/255],night_up_color:[125/255,.1,.502],rise_down_color:[200/255,50/255,200/255],night_down_color:[125/255,.1,.502],material_up:[1,.1,.1],material_down:[1,.1,.1],noise_size:1,noise_length:2}},T=new s.a(.5,.5,.5,"NONE","NONE","NONE","NONE","NONE","NONE"),S={NONE:T,DEFAULT:new s.a(.5,.5,.5,"WALL","WALL","WALL","WALL","CEIL","FLOOR"),DOOR_DEFAULT:new s.a(.5,.5,.5,"DOOR_DEFAULT","DOOR_DEFAULT","DOOR_DEFAULT","DOOR_DEFAULT","DOOR_DEFAULT","DOOR_DEFAULT"),DOOR_RED:new s.a(.5,.5,.5,"DOOR_RED","DOOR_RED","DOOR_RED","DOOR_RED","DOOR_RED","DOOR_RED"),DOOR_BLUE:new s.a(.5,.5,.5,"DOOR_BLUE","DOOR_BLUE","DOOR_BLUE","DOOR_BLUE","DOOR_BLUE","DOOR_BLUE"),DOOR_YELLOW:new s.a(.5,.5,.5,"DOOR_YELLOW","DOOR_YELLOW","DOOR_YELLOW","DOOR_YELLOW","DOOR_YELLOW","DOOR_YELLOW"),EDIT_BLOCK:new s.a(.5,.5,.5,"EDIT_BLOCK","EDIT_BLOCK","EDIT_BLOCK","EDIT_BLOCK","EDIT_BLOCK","EDIT_BLOCK")},k=["DOOR_DEFAULT","DOOR_RED","DOOR_BLUE","DOOR_YELLOW"],O="abcdefghijklmnopqrstuvwxyz1234567890 .!?âˆž/()%',@+-:",A="0123456789+";function L(e){return"DOOR_DEFAULT"===e.front||"DOOR_DEFAULT"===e.back||"DOOR_DEFAULT"===e.left||"DOOR_DEFAULT"===e.right||"DOOR_DEFAULT"===e.top||"DOOR_DEFAULT"===e.bottom}function P(e){return"DOOR_RED"===e.front||"DOOR_RED"===e.back||"DOOR_RED"===e.left||"DOOR_RED"===e.right||"DOOR_RED"===e.top||"DOOR_RED"===e.bottom}function I(e){return"DOOR_BLUE"===e.front||"DOOR_BLUE"===e.back||"DOOR_BLUE"===e.left||"DOOR_BLUE"===e.right||"DOOR_BLUE"===e.top||"DOOR_BLUE"===e.bottom}function N(e){return"DOOR_YELLOW"===e.front||"DOOR_YELLOW"===e.back||"DOOR_YELLOW"===e.left||"DOOR_YELLOW"===e.right||"DOOR_YELLOW"===e.top||"DOOR_YELLOW"===e.bottom}const R={PROJEKT:new h.a([1,0,0]),MATCHA:new h.a([0,1,0]),NAKUKORONI:new h.a([0,0,1]),PIKAPIKA:new h.a([1,1,0]),TOTTOKO:new h.a([1,.5,0]),LATEL:new h.a([1,0,1])};a()}catch(W){a(W)}}))},(e,t,n)=>{"use strict";n.d(t,{a:()=>o});var a=n(0);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o{constructor(e,t){i(this,"init",!1),i(this,"enable",!0),i(this,"hit",{x:0,y:0,z:0,angle:{x:0,y:0}}),i(this,"old",new a.f(-1,-1,-1)),i(this,"size",void 0),this.size=new a.e(e,t)}}},(e,t,n)=>{"use strict";var a=n(19),i=n(141);a({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},(e,t,n)=>{"use strict";n.d(t,{a:()=>o,b:()=>i,c:()=>a,d:()=>r,e:()=>s});n(1),n(117),n(244),n(118),n(119),n(120),n(143);function a(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.floor;return isNaN(e)||e===1/0?t:-1===n?e:a(Math.abs(e)*n)/n*Math.sign(e)}function i(e,t,n){return isNaN(e)||isNaN(t)||isNaN(n)?0:e===1/0||t===1/0||n===1/0?1/0:e*(1-n)+t*n}function o(e,t,n){return Math.min(n,Math.max(t,e))}function s(e){return o(e,0,1)}function r(e){let t=e;t^=t<<13,t^=0,t^=t<<5;let n=123456789^t;t^=t<<13,t^=0,t^=t<<5;let a=362436069^t;t^=t<<13,t^=0,t^=t<<5;let i=521288629^t;t^=t<<13,t^=0,t^=t<<5;let o=88675123^t,s=n^n<<11;return n=a,a=i,i=o,o=(o^o>>>19^s^s>>>8)>>>0,o/4294967296}},(e,t,n)=>{"use strict";n.d(t,{a:()=>s,b:()=>r});var a=n(183),i=n(0);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class s{constructor(e,t){o(this,"position",void 0),o(this,"time",void 0),this.position=e,this.time=t}}class r extends a.a{constructor(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.25,n=arguments.length>2?arguments[2]:void 0;super(),o(this,"damages",new Array),o(this,"init",!1),o(this,"state","still"),o(this,"loading",!1),o(this,"time",0),o(this,"landingTime",-1),o(this,"landingForce",0),o(this,"isPause",!1),o(this,"isPressChange",!1),o(this,"isPressNext",!1),o(this,"isStartCombo",!1),o(this,"isStick",!1),o(this,"isAir",!1),o(this,"isWaitActive",!1),o(this,"isSlowMo",!1),o(this,"isHookShot",!1),o(this,"isHookAccel",!1),o(this,"isPick",!1),o(this,"isSprint",!1),o(this,"isSelectHandWeapon",!1),o(this,"isMenuOpen",!1),o(this,"isActiveMenuOpen",!1),o(this,"startTime",-1),o(this,"pickupTime",-1),o(this,"comboTime",-1),o(this,"respawnTime",-1),o(this,"deathTime",-1),o(this,"goleTime",-1),o(this,"hordeStartTime",0),o(this,"hordeBonusStartTime",-1),o(this,"hordeBonusTimeValue",0),o(this,"hordeBonusType",0),o(this,"intermissionTime",-1),o(this,"groundTime",-1),o(this,"grabTime",-1),o(this,"killTime",-1),o(this,"hitWaitStartTime",-1),o(this,"hitWaitTime",.25),o(this,"gole",-1),o(this,"secret",!1),o(this,"activeEntity",null),o(this,"wall",!1),o(this,"airForce",0),o(this,"jumpBuffer",!1),o(this,"jumpWaitTime",-1),o(this,"speed",1),o(this,"oldSpeed",-1),o(this,"oldDirX",-1),o(this,"reduceTime",-1),o(this,"pickMessage",null),o(this,"helpMessages",new Array),o(this,"hookPar",1),o(this,"axesPar",1),o(this,"readySlowMo",!1),o(this,"isZoomAnimation",!1),o(this,"zoomAnimationPar",0),o(this,"isFullscreen",!1),o(this,"isPointerLock",!1),o(this,"axesY",void 0),o(this,"airValue",void 0),o(this,"borderHealth",void 0),o(this,"healthReduceInterval",-1),o(this,"staminaReduceInterval",-1),o(this,"cmda",new i.e(0,0)),o(this,"itemLogs",new Array),o(this,"exitID",-1),this.axesY=e,this.airValue=t,this.borderHealth=n}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>s});n(1),n(2);var a=n(0),i=n(38);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class s extends i.a{constructor(){super(...arguments),o(this,"position",new a.f(0,0,0)),o(this,"direction",new a.f(0,0,0))}}},(e,t,n)=>{var a=n(71),i=Function.prototype,o=i.bind,s=i.call,r=a&&o.bind(s,s);e.exports=a?function(e){return e&&r(e)}:function(e){return e&&function(){return s.apply(e,arguments)}}},e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>o});var a=n(0);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;i(this,"value",new a.f(0,0,0)),i(this,"drift",void 0),i(this,"airDrift",void 0),i(this,"forceAir",!1),this.drift=new a.f(e,t,n),this.airDrift=o}}},(e,t,n)=>{var a=n(3),i=n(239),o=n(240),s=n(280),r=n(55),l=function(e){if(e&&e.forEach!==s)try{r(e,"forEach",s)}catch(t){e.forEach=s}};for(var h in i)i[h]&&l(a[h]&&a[h].prototype);l(o)},(e,t,n)=>{"use strict";var a=n(19),i=n(230).includes,o=n(12),s=n(235);a({target:"Array",proto:!0,forced:o((function(){return!Array(1).includes()}))},{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),s("includes")},(e,t,n)=>{"use strict";var a=n(19),i=n(11),o=n(283),s=n(86),r=n(43),l=n(284),h=i("".indexOf);a({target:"String",proto:!0,forced:!l("includes")},{includes:function(e){return!!~h(r(s(this)),r(o(e)),arguments.length>1?arguments[1]:void 0)}})},e=>{e.exports=function(e){return"function"==typeof e}},(e,t,n)=>{n(357),n(358),n(359),n(360),n(361),n(362)},(e,t,n)=>{var a=n(3),i=n(158).f,o=n(55),s=n(46),r=n(162),l=n(193),h=n(168);e.exports=function(e,t){var n,c,u,p,d,g=e.target,m=e.global,f=e.stat;if(n=m?a:f?a[g]||r(g,{}):(a[g]||{}).prototype)for(c in t){if(p=t[c],u=e.noTargetGet?(d=i(n,c))&&d.value:n[c],!h(m?c:g+(f?".":"#")+c,e.forced)&&void 0!==u){if(typeof p==typeof u)continue;l(p,u)}(e.sham||u&&u.sham)&&o(p,"sham",!0),s(n,c,p,e)}}},(e,t,n)=>{var a=n(71),i=Function.prototype.call;e.exports=a?i.bind(i):function(){return i.apply(i,arguments)}},(e,t,n)=>{var a=n(3),i=n(160),o=n(29),s=n(163),r=n(191),l=n(190),h=i("wks"),c=a.Symbol,u=c&&c.for,p=l?c:c&&c.withoutSetter||s;e.exports=function(e){if(!o(h,e)||!r&&"string"!=typeof h[e]){var t="Symbol."+e;r&&o(c,e)?h[e]=c[e]:h[e]=l&&u?u(t):p(t)}return h[e]}},(e,t,n)=>{"use strict";n.d(t,{a:()=>s,b:()=>c,c:()=>h,d:()=>u});n(1),n(2),n(15),n(16),n(18);var a=n(92);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const o=new WeakMap;class s{constructor(e,t){i(this,"type",void 0),i(this,"timestamp",void 0),i(this,"target",void 0),this.type=t,this.timestamp=performance.now(),this.target=e}on(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=o.get(this.target)||null;null===n&&o.set(this.target,n=new Map),n.has(this.type)||n.set(this.type,new Array);const a=n.get(this.type)||null;null!==a&&(t?a.unshift(e):a.push(e))}off(e){const t=o.get(this.target)||null;if(null===t||!t.has(this.type))return;const n=t.get(this.type)||null;null!==n&&n.includes(e)&&n.splice(n.indexOf(e),1)}trigger(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=o.get(this.target)||null,n=this.target["on".concat(this.type)],i=n instanceof Function;if(null===t&&!i)return;for(const t in e)this[t]=e[t];i&&n.call(this.target,this);const s=null!==t&&t.get(this.type)||null;if(null!==s){const e=(0,a.a)(s);for(let t=0,n=0|e.length;t<n;t=t+1|0)e[t].call(this.target,this)}}async triggerAsync(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=o.get(this.target)||null,n=this.target["on".concat(this.type)],i=n instanceof Function;if(null===t&&!i)return;for(const t in e)this[t]=e[t];if(i){const e=n.call(this.target,this);e instanceof Promise&&await e}const s=null!==t&&t.get(this.type)||null;if(null!==s){const e=(0,a.a)(s);for(let t=0,n=0|e.length;t<n;t=t+1|0){const n=e[t].call(this.target,this);n instanceof Promise&&await n}}}}const r=new WeakMap,l=new Array;function h(){for(;l.length>0;){const e=l.shift()||null;if(null===e)continue;const t=r.get(e)||new Array;for(;t.length>0;){const n=t.shift()||null;null!==n&&e.removeEventListener(n.type,n.handler)}r.delete(e)}}function c(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e.addEventListener(t,n,a);let i=r.get(e)||null;null===i&&r.set(e,i=new Array),i.some((e=>e.type===t&&e.handler===n))||i.push({type:t,handler:n})}function u(e,t,n){e.removeEventListener(t,n);const a=r.get(e)||null;if(null===a)return;const i=a.filter((e=>e.type===t&&e.handler===n));for(;i.length>0;){const e=i.shift()||null;null!==e&&a.splice(a.indexOf(e),1)}a.length<=0&&(r.delete(e),l.splice(l.indexOf(e),1))}},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>w,b:()=>b});n(1),n(2);var i=n(147),o=n(59),s=n(503),r=n(505),l=n(26),h=n(6),c=n(13),u=n(0),p=n(184),d=n(68),g=n(5),m=n(41),f=n(10),y=e([i,g]);function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}[i,g]=y.then?(await y)():y;class w extends f.a{constructor(e,t,n,a,l,h,c,u,p,m,f,y,w,b,x,M,E,_,C,T,S,k,O,A,L,P,I,N,R,W,z,D){let F=arguments.length>32&&void 0!==arguments[32]?arguments[32]:null,U=arguments.length>33&&void 0!==arguments[33]?arguments[33]:null,H=arguments.length>34?arguments[34]:void 0,B=arguments.length>35&&void 0!==arguments[35]?arguments[35]:new Array;for(var G=arguments.length,Y=new Array(G>36?G-36:0),V=36;V<G;V++)Y[V-36]=arguments[V];super("bullet".concat(e.length>0?" ".concat(e):""),new o.a(p,m,f,y,w,b,x,M,E,C,T,t,F,H,B),new i.a(n,a,l,u,S,k,O,A,R,z,D,L,P,I),...null===N||N===g.h.NONE||W<=0?[]:[new s.a(N,W,_),new r.a(!0,!0,!0,0)],new d.a,...Y),v(this,"attacker",void 0),v(this,"weapon",void 0),this.position.x=p,this.position.y=m,this.position.z=f,this.direction.x=x,this.direction.y=M,this.attacker=F,this.weapon=U}}class b extends f.a{constructor(e,t,n,a,f,y,w,b,x,M,E,_,C,T,S,k,O,A,L,P,I,N,R,W,z,D,F,U,H,B,G,Y){let V=arguments.length>32&&void 0!==arguments[32]?arguments[32]:null,j=arguments.length>33&&void 0!==arguments[33]?arguments[33]:null,K=arguments.length>34?arguments[34]:void 0,X=arguments.length>35&&void 0!==arguments[35]?arguments[35]:new Array,q=arguments.length>36&&void 0!==arguments[36]?arguments[36]:new Array;for(var J=arguments.length,Z=new Array(J>37?J-37:0),$=37;$<J;$++)Z[$-37]=arguments[$];if(super("bullet".concat(e.length>0?" ".concat(e):""),...w||L===1/0?[new o.a(x,M,E,_,C,T,S,k,O,L,!1,t,V,K,q)]:[new p.a(x,M,E,_,C,T,S,k,O,L,t,V,K,q),new m.a(I),new c.a(0,0,0,0),new l.a(O,O,X),new h.a(O,O)],new i.a(n,a,f,b,P,N,R,W,H,G,Y,z,D,F),...null===U||U===g.h.NONE||B<=0?[]:[new s.a(U,B,A),new r.a(!0,!0,!0,0)],new d.a,...Z),v(this,"attacker",void 0),v(this,"weapon",void 0),this.position.x=x,this.position.y=M,this.position.z=E,this.direction.x=S,this.direction.y=k,this.attacker=V,this.weapon=j,!this.hasComponent(o.a)){const e=this.getComponent(c.a),[t,n,a]=(0,u.r)(S,k,0,0,L);e.value.x=t,e.value.y=n,e.value.z=a}}}a()}catch(x){a(x)}}))},(e,t,n)=>{"use strict";n.d(t,{a:()=>y,b:()=>v,c:()=>f,d:()=>b});n(1),n(2),n(117),n(244),n(118),n(119),n(120);var a=function(e){return function(t,n,a){return e(t,n,a)*a}},i=function(e,t){if(e)throw Error("Invalid sort config: "+t)},o=function(e){var t=e||{},n=t.asc,o=t.desc,s=n?1:-1,r=n||o;return i(!r,"Expected `asc` or `desc` property"),i(n&&o,"Ambiguous object with `asc` and `desc` config properties"),{order:s,sortBy:r,comparer:e.comparer&&a(e.comparer)}};function s(e,t,n){if(void 0===e||!0===e)return function(e,a){return t(e,a,n)};if("string"==typeof e)return i(e.includes("."),"String syntax not allowed for nested properties."),function(a,i){return t(a[e],i[e],n)};if("function"==typeof e)return function(a,i){return t(e(a),e(i),n)};if(Array.isArray(e)){var a=function(e){return function t(n,a,i,s,r,l,h){var c,u;if("string"==typeof n)c=l[n],u=h[n];else{if("function"!=typeof n){var p=o(n);return t(p.sortBy,a,i,p.order,p.comparer||e,l,h)}c=n(l),u=n(h)}var d=r(c,u,s);return(0===d||null==c&&null==u)&&a.length>i?t(a[i],a,i+1,s,r,l,h):d}}(t);return function(i,o){return a(e[0],e,1,n,t,i,o)}}var r=o(e);return s(r.sortBy,r.comparer||t,r.order)}var r=function(e,t,n,a){return Array.isArray(t)?(Array.isArray(n)&&n.length<2&&(n=n[0]),t.sort(s(n,a,e))):t};function l(e){var t=a(e.comparer);return function(n){var a=Array.isArray(n)&&!e.inPlaceSorting?n.slice():n;return{asc:function(e){return r(1,a,e,t)},desc:function(e){return r(-1,a,e,t)},by:function(e){return r(1,a,e,t)}}}}var h=function(e,t,n){return null==e?n:null==t?-n:e<t?-1:e>t?1:0},c=(l({comparer:h}),l({comparer:h,inPlaceSorting:!0})),u=n(213);const p=self.navigator.userAgent.length>0?(0,u.getParser)(self.navigator.userAgent):null,d=(p&&p.isBrowser("chrome"),p&&p.getOS().name,p&&p.isBrowser("firefox"));p&&p.isBrowser("safari");function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class m{constructor(e){g(this,"sorter",null),this.sorter=c(e)}asc(e){this.sorter.asc(e)}desc(e){this.sorter.desc(e)}}function f(e){return new m(e)}function y(e){if(!(e.length<=0))if(d)for(;e.length>0;)e.pop();else e.length=0}function v(e){for(let t=e.length-1|0,n=0;t>n;t--){const n=Math.floor(Math.random()*(t+1)),a=e[t];e[t]=e[n],e[n]=a}}let w=new Uint8Array(512);function b(e){let t=-1,n=512,a=new Uint8Array(n);for(let i=0,o=0|e.length;i<o;i=i+1|0){const o=e.charCodeAt(i);o<=127?a[++t]=o:o<=2047?(a[++t]=192|o>>>6,a[++t]=128|63&o):o<=65535?(a[++t]=224|o>>>12,a[++t]=128|o>>>6&63,a[++t]=128|63&o):(a[++t]=240|o>>>18,a[++t]=128|o>>>12&63,a[++t]=128|o>>>6&63,a[++t]=128|63&o),n-t<=4&&(n*=2,w=new Uint8Array(n),w.set(a),a=w)}return a.subarray(0,++t)}},(e,t,n)=>{var a=n(3),i=n(42),o=a.String,s=a.TypeError;e.exports=function(e){if(i(e))return e;throw s(o(e)+" is not an object")}},(e,t,n)=>{"use strict";n.d(t,{a:()=>o});var a=n(0);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Array,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];i(this,"init",!1),i(this,"enable",!0),i(this,"isPush",!0),i(this,"old",new a.f(-1,-1,-1)),i(this,"targets",new Array),i(this,"size",void 0),i(this,"filter",void 0),i(this,"treeFix",void 0),this.size=new a.e(e,t),this.filter=n,this.treeFix=o}}},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>ht});n(7),n(106),n(121),n(18),n(1),n(2),n(249),n(15),n(16),n(14);var i=n(32),o=n(145),s=n(81),r=n(9),l=n(39),h=n(50),c=n(97),u=n(405),p=n(406),d=n(407),g=n(408),m=n(409),f=n(410),y=n(411),v=n(421),w=n(422),b=n(423),x=n(424),M=n(425),E=n(426),_=n(427),C=n(428),T=n(429),S=n(430),k=n(431),O=n(432),A=n(433),L=n(434),P=n(435),I=n(437),N=n(438),R=n(439),W=n(440),z=n(441),D=n(443),F=n(444),U=n(445),H=n(447),B=n(108),G=n(448),Y=n(449),V=n(450),j=n(451),K=n(452),X=n(453),q=n(454),J=n(455),Z=n(456),$=n(457),Q=n(458),ee=n(459),te=n(182),ne=n(5),ae=n(109),ie=n(10),oe=n(90),se=n(460),re=n(0),le=n(461),he=n(462),ce=n(463),ue=n(465),pe=n(466),de=n(122),ge=n(259),me=n(33),fe=n(335),ye=n(467),ve=n(468),we=n(469),be=n(470),xe=n(471),Me=n(472),Ee=n(187),_e=n(473),Ce=n(227),Te=n(24),Se=n(474),ke=n(475),Oe=n(34),Ae=n(107),Le=n(93),Pe=n(477),Ie=n(478),Ne=n(479),Re=n(156),We=n(253),ze=n(47),De=n(157),Fe=n(480),Ue=n(260),He=n(481),Be=n(482),Ge=n(483),Ye=n(484),Ve=n(324),je=n(485),Ke=n(486),Xe=n(54),qe=n(255),Je=n(225),Ze=n(487),$e=n(123),Qe=n(92),et=n(8),tt=n(330),nt=n(488),at=n(52),it=n(53),ot=n(322),st=n(321),rt=e([i,s,h,p,y,v,w,b,x,M,E,_,C,T,k,L,P,W,z,U,H,K,X,J,ne,ae,se,le,ce,ue,ve,we,be,xe,Me,_e,ke,Ne,We,ze,De,He,Ye,Ve,ot,st]);function lt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}[i,s,h,p,y,v,w,b,x,M,E,_,C,T,k,L,P,W,z,U,H,K,X,J,ne,ae,se,le,ce,ue,ve,we,be,xe,Me,_e,ke,Ne,We,ze,De,He,Ye,Ve,ot,st]=rt.then?(await rt)():rt;class ht extends i.a{constructor(e,t,n,a,i,r,h,c,te,ne,ae,ie){const oe=new tt.a("camera"),re=new o.a("sun"),de=new De.d(n);super(e,21,21,21,10,t,Je.a[Je.a.length-2],i,r,h,c,te,ne,ae,n,oe,re),lt(this,"setting",void 0),lt(this,"gamedata",void 0),lt(this,"isStaminaGageFadeIn",!1),lt(this,"staminaGageFadeInPar",0),lt(this,"staminaGageFadeInTime",-1),lt(this,"player",void 0),lt(this,"mapData",void 0),lt(this,"saveData",void 0),lt(this,"enemyLength",void 0),lt(this,"meatLength",void 0),lt(this,"killEnemy",void 0),this.addSystems(new s.b(de),new J.a,new O.a,new T.a,new le.a,new y.a(de,i,this.getControlManager()),new Me.a(de,i,this.getControlManager()),new he.a,new w.a,new nt.a,new S.a,new x.a,new k.a,new v.a,new f.a,new C.a,new M.a(de),new u.a,new d.a(.01),new xe.a,new ve.a,new L.a(de),new Q.a,new je.a,new N.a,new Ke.a,new R.a,new W.a,new z.a,new Ge.a,new Ye.a(de),new I.b,new I.a,new ee.a,new se.a(de),new ke.a,new Fe.a,new P.a,new H.a(de),new Z.a,new Be.a,new E.a,new g.a,new be.a,new q.a,new V.a,new X.a,new ue.a(de),new He.a(de),new F.a({"default|ammo|ball|magic|slash":{sounds:{"ammo|ball":["./asset/sound/effect/damage-ammo.mp3"],magic:["./asset/sound/effect/damage-magic.mp3"],slash:["./asset/sound/effect/damage-slash.mp3"]},exec:(e,t,n,a)=>{const i=(0,l.e)(e,"armor",0),o=(0,l.e)(e,"health",0);if("default"===t&&(a/=4),i>0){const t=Math.max(0===a?0:1,a/3*2);a=Math.max(0===a?0:1,a/3),(0,l.h)(e,"armor",0|Math.max(0,i-t))}return(0,l.h)(e,"health",0|Math.max(0,o-a)),o>0}},melee:{sounds:{melee:["./asset/sound/effect/damage-melee.mp3"]},exec:(e,t,n,a)=>{const i=(0,l.e)(e,"armor",0),o=(0,l.e)(e,"health",0);return(0,l.h)(e,"armor",0|Math.max(0,i-a)),o>0}},"plasma|corrode":{sounds:{plasma:["./asset/sound/effect/damage-magic.mp3"],corrode:["./asset/sound/effect/damage-corrosive1.mp3","./asset/sound/effect/damage-corrosive2.mp3"]},exec:(e,t,n,a)=>{const i=(0,l.e)(e,"armor",0),o=(0,l.e)(e,"health",0);if(i>0){const t=a;a=Math.max(0===a?0:1,a/3),(0,l.h)(e,"armor",0|Math.max(0,i-t))}return(0,l.h)(e,"health",0|Math.max(0,o-a)),o>0}},flame:{sounds:{flame:["./asset/sound/effect/damage-flame.mp3"]},exec:(e,t,n,a)=>{const i=(0,l.e)(e,"health",0);return(0,l.h)(e,"health",0|Math.max(0,i-a)),i>0}},explode:{exec:(e,t,n,a)=>{const i=(0,l.e)(e,"armor",0),o=(0,l.e)(e,"health",0);if(i>0){const t=Math.max(0===a?0:1,a);a=Math.max(0===a?0:1,a/3),(0,l.h)(e,"armor",0|Math.max(0,i-t))}else(0,l.h)(e,"health",0|Math.max(0,o-1.5*a));return o>0}},"freeze|hook":{sounds:{freeze:[]},exec:(e,t,n,a)=>{if(e.hasComponent(it.a)){const t=e.getComponent(it.a);return t.freezeTime=t.time+a,!0}return!1}}}),new B.a,new Pe.a,new Ie.a,new G.a,new Y.a,new j.a,new $.a,new D.a,new p.a,new m.a,new b.a,new _.a,new Ze.a,new A.a,new U.a(de),new K.a,new Se.a,new we.a,new Ne.a,new ce.a,new _e.a,new pe.a),this.gamedata={times:new Array,deaths:new Array,gameMode:Xe.a.CAMPAING,isContinue:!1,isPreview:!1,isSecret:!1,episodeNumber:-1,mapNumber:-1,secretIndex:-1},this.player=null,this.mapData=null,this.setting=de,this.saveData=ie,this.enemyLength=-1,this.meatLength=-1,this.killEnemy=0}getFramerate(){return this.setting.getFramerate()}getFOVToCamera(){const e=this.setting.getFOV();return(0,re.g)(e)}getGameMode(){return this.gamedata.gameMode}hasContinue(){return this.gamedata.isContinue}hasPreview(){return this.gamedata.isPreview}hasSecret(){return this.gamedata.isSecret}getEpisodeNumber(){return this.gamedata.episodeNumber}getMapNumber(){return this.gamedata.mapNumber}getSecretIndex(){return this.gamedata.secretIndex}getTimes(){return this.gamedata.times}getDeaths(){return this.gamedata.deaths}getPlayer(){return this.player}getMaxKillEnemy(){return ze.l}hasSaveData(){return!!this.saveData&&Object.keys(this.saveData).length>0&&this.saveData.version.replace(/\.[0-9]+$/,"")===fe.a.replace(/\.[0-9]+$/,"")}setPlayer(e){this.player=e}setActorPosition(e,t,n,a){super.setActorPosition(e,t,n,a)}sumGameTime(){return this.getTimes().reduce(((e,t)=>t+e),0)}countKillEnemy(){var e;const t=(null===(e=this.getPlayer())||void 0===e?void 0:e.getComponent(r.b))||null;-1===((null==t?void 0:t.goleTime)||-1)&&-1===((null==t?void 0:t.intermissionTime)||-1)&&(this.getGameMode()===Xe.a.CAMPAING||this.killEnemy<this.getMaxKillEnemy())&&this.killEnemy++}saveGame(){const e=this.getPlayer(),t=this.getSun(),n=(null==e?void 0:e.getComponent(h.a))||{right:"hand",left:"hand",prevWeapon:{right:"hand",left:"hand"}},a=this.saveData,i={version:fe.a,episodeNumber:this.getEpisodeNumber(),mapNumber:this.getMapNumber(),deaths:(0,Qe.a)(this.getDeaths()),times:(0,Qe.a)(this.getTimes()),secretIndex:this.getSecretIndex(),playerInventory:e&&e.hasComponent(l.a)?(0,Qe.a)(e.getComponent(l.a).value):{},playerWeapon:{right:n.right,left:n.left},playerPrevWeapon:{right:n.prevWeapon.right,left:n.prevWeapon.left},time:t?t.direction.y:0};for(const e in i)a[e]=i[e];(0,de.c)("saveData",!0)}async loadGame(){if(!this.hasSaveData())return;const{episodeNumber:e,mapNumber:t,deaths:n,times:a,secretIndex:i,playerInventory:o,playerWeapon:s,playerPrevWeapon:r,time:c}=this.saveData;(0,Te.a)(this.gamedata.deaths),(0,Te.a)(this.gamedata.times),this.gamedata.episodeNumber=e||1,this.gamedata.mapNumber=t||0,this.gamedata.deaths.push(...n||[]),this.gamedata.times.push(...a||[]),this.gamedata.secretIndex=i||-1,this.stop();try{this.gamedata.isContinue=!0,this.gamedata.isPreview=!1;const e=(await(0,oe.a)(this.hasSecret()?"./map/e".concat(this.getEpisodeNumber(),"ms.json"):"./map/e".concat(this.getEpisodeNumber(),"m").concat(this.getMapNumber(),".json"),"json")).source;this.mapData=e,this.gamedata.gameMode=Object.values(Xe.a)[Object.keys(Xe.a).indexOf(e.mode)],this.importLevel(e,!0,!1);const t=this.getPlayer();if(t){for(const e in o)(0,l.g)(t,e,o[e].value);if(t.hasComponent(h.a)){const e=t.getComponent(h.a);e.right=(null==s?void 0:s.right)||"hand",e.left=(null==s?void 0:s.left)||"hand",e.prevWeapon.right=(null==r?void 0:r.right)||"hand",e.prevWeapon.left=(null==r?void 0:r.left)||"hand"}}this.getSun().direction.y=c||0}finally{this.run()}}deleteSave(){for(const e in this.saveData)delete this.saveData[e];this.gamedata.isContinue=!1,(0,de.a)("saveData",!0)}async loadLevel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.gamedata.mapNumber=1,this.gamedata.secretIndex=-1;const n=this.getTimes(),a=this.getDeaths();(0,Te.a)(n),(0,Te.a)(a),this.stop(),a.push(0);const i=(await(0,oe.a)("./map/".concat(e,".json"),"json")).source;this.mapData=i,this.gamedata.episodeNumber=Number((e.match(/^e([0-9]+)m[0-9]+$/)||e.match(/^e([0-9]+)ms$/)||e.match(/^horde([0-9]+)$/)||["e1","1"])[1]),this.gamedata.gameMode=Object.values(Xe.a)[Object.keys(Xe.a).indexOf(t||i.mode)],this.gamedata.isContinue=!0,this.gamedata.isPreview=!1,this.importLevel(i,!0,!1),this.getGameMode()===Xe.a.CAMPAING&&this.saveGame(),this.run()}async reloadLevel(){if(this.hasSaveData()&&this.mapData){const{playerInventory:e,playerWeapon:t,playerPrevWeapon:n,time:a}=this.saveData;this.importLevel(this.mapData,!0,!1),this.gamedata.gameMode=Object.values(Xe.a)[Object.keys(Xe.a).indexOf(this.mapData.mode)],this.gamedata.isContinue=!0,this.gamedata.isPreview=!1;const i=this.getPlayer();if(i){for(const t in e)(0,l.g)(i,t,e[t].value);if(i.hasComponent(h.a)){const e=i.getComponent(h.a);e.right=(null==t?void 0:t.right)||"hand",e.left=(null==t?void 0:t.left)||"hand",e.prevWeapon.right=(null==n?void 0:n.right)||"hand",e.prevWeapon.left=(null==n?void 0:n.left)||"hand"}}this.getSun().direction.y=a||0}}async continueLevel(){const e=this.getDeaths();e[e.length-1]=e[e.length-1]+1;const t=this.getPlayer();if(this.stop(),this.gamedata.isContinue=!0,this.gamedata.isPreview=!1,!this.hasSaveData()&&this.mapData)this.importLevel(this.mapData,!0,!0);else{await this.reloadLevel();const e=this.getPlayer();null!==t&&null!==e&&((0,l.h)(e,"meat",(0,l.e)(t,"meat")),(0,l.h)(e,"sumscore",(0,l.e)(t,"sumscore")),(0,l.h)(e,"useshoppoint",(0,l.e)(t,"useshoppoint")))}this.saveGame(),this.run()}async nextLevel(e,t){const n=this.getPlayer();if(null===n)return;const a=n.getComponent(l.a),i=n.getComponent(h.a),o=(0,l.e)(n,"sumscore")+(0,l.e)(n,"score"),s=this.getGameMode()===Xe.a.TUTORIAL;e||s||this.gamedata.mapNumber++,this.stop();let r=null;try{const n=(await(0,oe.a)(e?"./map/e".concat(this.getEpisodeNumber(),"ms.json"):"./map/e".concat(this.getEpisodeNumber(),"m").concat(this.getMapNumber(),".json"),"json")).source,r=this.getDeaths();r.push(0),this.mapData=n,this.gamedata.gameMode=Object.values(Xe.a)[Object.keys(Xe.a).indexOf(n.mode)],this.gamedata.isContinue=!0,this.gamedata.isPreview=!1,this.gamedata.isSecret=e,this.gamedata.secretIndex=-1===this.gamedata.secretIndex&&e?r.length-1:this.getSecretIndex(),this.importLevel(n,!0,!0);const c=this.getPlayer();if(null!==c&&!s){if(c.hasComponent(l.a)){const e=c.getComponent(l.a);for(const n in a.value){const i=a.value[n];t&&ze.t.includes(n)||("gauge"!==n&&"combo"!==n&&"score"!==n&&"key-red"!==n&&"key-blue"!==n&&"key-yellow"!==n||(i.value=0),e.value[n]=i)}for(const t in e.value)a.value.hasOwnProperty(t)||delete e.value[t];(0,l.h)(c,"sumscore",o)}if(c.hasComponent(h.a)&&!t){const e=c.getComponent(h.a);e&&(e.right=i.right,e.left=i.left,e.prevWeapon.right=i.prevWeapon.right,e.prevWeapon.left=i.prevWeapon.left)}}this.saveGame()}catch(e){r=e}finally{this.run()}if(r)throw r}async previewLevel(e){this.gamedata.episodeNumber=1,this.gamedata.mapNumber=1,this.gamedata.isContinue=!1,this.gamedata.isPreview=!0,this.mapData=e,this.importLevel(e,!0,!1)}resetMap(){null!==this.mapData&&this.loadMap(this.mapData)}loadMap(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{tileset:n,background:a}=e;t&&this.clearMap(),this.setTileSet(ne.s[n]||null),this.setBackground(ne.a[a]||0),this.setWorldData(e)}loadEntitys(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];const{entitys:s}=e;let r;i&&this.clearTree(),n?(r=new ye.a("sun",25e-5,.001),a&&null!==t&&t instanceof ye.a?(r.direction.x=t.direction.x,r.direction.y=t.direction.y):(r.direction.x=1.2875*Math.PI,r.direction.y=Math.PI-.1*re.d)):(r=new o.a("sun"),r.direction.x=1.2875*Math.PI,r.direction.y=Math.PI-.0125*Math.PI+(Math.PI+.025*Math.PI)*((this.getMapNumber()-1)/4)),this.setSun(r),this.addEntitys(r),(0,Te.c)(s).asc((e=>"PLAYER"===e.id?0:1)),s.forEach((e=>{ae.a[e.id].spawn(e.position.x,e.position.y,e.position.z,e.direction.x,this)}))}importLevel(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.stop();const a=this.getEntitysOfName("sun")[0]||null;this.clear(),this.loadMap(e,!1),this.loadEntitys(e,a,t,n,!1),this.meatLength=-1,this.enemyLength=-1,this.killEnemy=0}getCheckPoint(){if(this.setting.hasCheckPoint()){const e=this.getEntitys().find((e=>{var t;return!(null===(t=e.getComponent(Ue.a))||void 0===t||!t.enable)}))||null;if(null!==e&&e instanceof ie.a)return e}return null}addGoleTime(e){const t=this.getTimes(),n=this.getDeaths();t.length<n.length&&t.push(e)}getEndIntermissionTime(){return 1e3+250*this.getTimes().length+600+1500}clear(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.player=null,e&&(this.gamedata.gameMode=Xe.a.CAMPAING,this.gamedata.isContinue=!1,this.gamedata.isPreview=!1),super.clear()}getCountKillEnemy(){return this.killEnemy}campaingStats(e){if(!e.hasComponent(r.b))return[];const t=e.getComponent(r.b),n=new Date(1e3*t.time+this.sumGameTime()),a=("0"+n.getUTCMinutes()).slice(-2),i=("0"+n.getUTCSeconds()).slice(-2),o=("0"+n.getUTCMilliseconds()).slice(-2);return this.hasPreview()||this.gamedata.gameMode!==Xe.a.CAMPAING?[]:[new te.b("campaing-log","./asset/font.png",5,5,ne.e,this.setting.hasDisplayPlayTime()?"".concat(a,":").concat(i,":").concat(o):this.hasSecret()?"SECRET":"E".concat(this.getEpisodeNumber(),"M").concat(this.getMapNumber()),0,-.8,2,0,0,1,[1,1,1])]}practiceStats(){return this.gamedata.gameMode,Xe.a.PRACTICE,[]}hordeStats(e){var t,n,a,i;const o=performance.now(),s=1e3*(0,l.e)(e,"hordetime",0),h=new Date(s),c=("0"+h.getUTCMinutes()).slice(-2),u=("0"+h.getUTCSeconds()).slice(-2),p=("0"+h.getUTCMilliseconds()).slice(-2),d=(o-((null===(t=e.getComponent(r.b))||void 0===t?void 0:t.hordeBonusStartTime)||0))/2e3,g=d<.75?Math.min(1,d/.125):1-(d-.75)/.25,m=s<3e4?s/3e4:1,f=ne.r[this.setting.getTheme()].getColor(),y=1*m;return this.gamedata.gameMode===Xe.a.HORDE?[new te.b("horde-time","./asset/font.png",5,5,ne.e,"".concat(c,":").concat(u,":").concat(p),0,-.8,2,0,1,1,[(0,et.b)(y,1,f[0]),(0,et.b)(y,1,f[1]),(0,et.b)(y,1,f[2])]),new te.b("horde-time","./asset/font.png",5,5,ne.e,"kill norma",-1,-.8,1,1,1,1,[1,1,1]),new te.b("horde-time","./asset/font.png",5,5,ne.e,"".concat((0,qe.b)(this.getCountKillEnemy()," ","".concat(this.getMaxKillEnemy()).length),"/").concat(this.getMaxKillEnemy()),-1,-.75,1,1,1,1,[1,1,1]),...g>0?[new te.b("badge-effect","./asset/horde_badge.png",64,64,"012","".concat((null===(n=e.getComponent(r.b))||void 0===n?void 0:n.hordeBonusType)||0),0,-.6,1*g,0,0,1*g),new te.b("badge-name","./asset/font.png",5,5,ne.e,"".concat(ze.i[(null===(a=e.getComponent(r.b))||void 0===a?void 0:a.hordeBonusType)||0]),0,-.45,1,0,0,1*g,[1,1,1]),new te.b("add-time-effect","./asset/font.png",5,5,ne.e,"+ ".concat((null===(i=e.getComponent(r.b))||void 0===i?void 0:i.hordeBonusTimeValue)||0," SEC"),.375,0,1,0,0,1*g,[1,1,0])]:[]]:[]}statsBar(e){var t,n,a;if(!e.hasComponent(h.a))return[];const i=e.getComponent(h.a),o=(0,l.e)(e,"health"),c=(0,l.e)(e,"armor"),u=(0,l.e)(e,"meat"),p=i.rightWeapon.data.ammoType||null,d=i.leftWeapon.data.ammoType||null,g=(0,l.e)(e,i.rightWeapon.data.ammoType||"",0)>=(0===i.rightWeapon.data.ammoReduceMin?i.rightWeapon.data.ammoReduceMax:i.rightWeapon.data.ammoReduceMin),m=(0,l.e)(e,i.leftWeapon.data.ammoType||"",0)>=(0===i.leftWeapon.data.ammoReduceMin?i.leftWeapon.data.ammoReduceMax:i.leftWeapon.data.ammoReduceMin),f=["energy","clip","magazine","shell","rocket","cell"],y=!(null===(t=e.getComponent(s.a))||void 0===t||!t.enable),v=ne.r[this.setting.getTheme()].getColor(),w=ne.r[this.setting.getTheme()].getInvertColor(),b=1-Math.min(1,o===1/0?1:o/50);return[...y?[]:[new te.b("health-value","./asset/font.png",5,5,ne.e,"".concat(o===1/0?"âˆž":Math.floor(o)),-.075,.9,2,-1,-1,1,o>100?w:[(0,et.b)(1,v[0],b),(0,et.b)(1,v[1],b),(0,et.b)(1,v[2],b)]),new te.b("health-icon","./asset/icon.png",5,5,ne.g,"0",-.075,.9,2,1,-1),...c>0?[new te.b("armor-value","./asset/font.png",5,5,ne.e,"".concat(c===1/0?"âˆž":Math.floor(c)),.075,.9,2,1,-1,1,[1,1,1]),new te.b("armor-icon","./asset/icon.png",5,5,ne.g,"1",.075,.9,2,-1,-1)]:[],null===p?null:new te.b("right-ammo-value","./asset/font.png",5,5,ne.e,"".concat((0,l.e)(e,p,0)===1/0?"âˆž":(0,l.e)(e,p,0)),.75,.9,2,-1,-1,1,g?[1,1,1]:[.5,.25,.25]),null===p?null:new te.b("right-ammo-icon","./asset/icon.png",5,5,ne.g,"".concat(f.indexOf(p)+2),.75,.9,2,1,-1),null===d?null:new te.b("left-ammo-value","./asset/font.png",5,5,ne.e,"".concat((0,l.e)(e,d,0)===1/0?"âˆž":(0,l.e)(e,d,0)),-.75,.9,2,1,-1,1,m?[1,1,1]:[.5,.25,.25]),null===d?null:new te.b("left-ammo-icon","./asset/icon.png",5,5,ne.g,"".concat(f.indexOf(d)+2),-.75,.9,2,-1,-1),(0,l.e)(e,"key-yellow")>0?new te.b("key-yellow","./asset/key.png",7,14,"012","2",.05,.8,1,1,-1):null,(0,l.e)(e,"key-blue")>0?new te.b("key-blue","./asset/key.png",7,14,"012","1",0,.8,1,0,-1):null,(0,l.e)(e,"key-red")>0?new te.b("key-red","./asset/key.png",7,14,"012","0",-.05,.8,1,-1,-1):null],...!y||null!==(n=e.getComponent(r.b).activeEntity)&&void 0!==n&&n.hasComponent(Re.a)?[new te.b("stamina-ammo-value","./asset/font.png",5,5,ne.e,"".concat((0,l.e)(e,"energy",0)===1/0?"âˆž":(0,qe.b)((0,l.e)(e,"energy")," ",3),"/").concat((0,qe.b)((0,l.d)(e,"energy")," ",3)),-.75,.425+(y?.2:0),1,1,0,1,[1,1,1]),new te.b("stamina-ammo-icon","./asset/icon.png",5,5,ne.g,"".concat(f.indexOf("energy")+2),-.75,.425+(y?.2:0),1,-1,0),new te.b("magazine-ammo-value","./asset/font.png",5,5,ne.e,"".concat((0,l.e)(e,"magazine",0)===1/0?"âˆž":(0,qe.b)((0,l.e)(e,"magazine")," ",3),"/").concat((0,qe.b)((0,l.d)(e,"magazine")," ",3)),-.75,.5+(y?.2:0),1,1,0,1,[1,1,1]),new te.b("magazine-ammo-icon","./asset/icon.png",5,5,ne.g,"".concat(f.indexOf("magazine")+2),-.75,.5+(y?.2:0),1,-1,0),new te.b("shell-ammo-value","./asset/font.png",5,5,ne.e,"".concat((0,l.e)(e,"shell",0)===1/0?"âˆž":(0,qe.b)((0,l.e)(e,"shell")," ",3),"/").concat((0,qe.b)((0,l.d)(e,"shell")," ",3)),-.75,.575+(y?.2:0),1,1,0,1,[1,1,1]),new te.b("shell-ammo-icon","./asset/icon.png",5,5,ne.g,"".concat(f.indexOf("shell")+2),-.75,.575+(y?.2:0),1,-1,0),new te.b("rocket-ammo-value","./asset/font.png",5,5,ne.e,"".concat((0,l.e)(e,"rocket",0)===1/0?"âˆž":(0,qe.b)((0,l.e)(e,"rocket")," ",3),"/").concat((0,qe.b)((0,l.d)(e,"rocket")," ",3)),-.75,.65+(y?.2:0),1,1,0,1,[1,1,1]),new te.b("rocket-ammo-icon","./asset/icon.png",5,5,ne.g,"".concat(f.indexOf("rocket")+2),-.75,.65+(y?.2:0),1,-1,0),new te.b("cell-ammo-value","./asset/font.png",5,5,ne.e,"".concat((0,l.e)(e,"cell",0)===1/0?"âˆž":(0,qe.b)((0,l.e)(e,"cell")," ",3),"/").concat((0,qe.b)((0,l.d)(e,"cell")," ",3)),-.75,.725+(y?.2:0),1,1,0,1,[1,1,1]),new te.b("cell-ammo-icon","./asset/icon.png",5,5,ne.g,"".concat(f.indexOf("cell")+2),-.75,.725+(y?.2:0),1,-1,0)]:[],...e.hasComponent(s.a)&&(!e.getComponent(s.a).enable||null!==(a=e.getComponent(r.b).activeEntity)&&void 0!==a&&a.hasComponent(Re.a))?[new te.b("meat-value","./asset/font.png",5,5,ne.e,"".concat((0,qe.a)(u,"0",4),"kg"),.75,.725+(y?.2:0),1,-1,0,1,[1,1,1])]:[]]}reticle(e){var t,n,a,i;if(!e.hasComponent(r.b)||!e.hasComponent(c.a)||!e.hasComponent(h.a))return[];const o=performance.now(),s=this.getCamera(),u=e.getComponent(h.a),p=e.getComponent(r.b),d=(0,l.e)(e,"gauge"),g=(0,l.e)(e,"combo"),m=e.getComponent(c.a),f=o%100<50?o%100/50:1-(o%100-50)/50,y=g>=m.start,v=Math.min(1,(g-m.start)/(m.max-m.start)),w=y?f*v:1,b=y?0:1,x=y?1-f:1,M="rgba(".concat(Math.floor(255*w),",").concat(Math.floor(255*b),",").concat(Math.floor(255*x),",").concat(p.isSlowMo?1:.75,")"),E="keyboard"===this.getControlManager().getInputType()?u.rightWeapon:u.leftWeapon,_=E!==u.leftWeapon?u.leftWeapon:u.rightWeapon,C=E.isChargeMax?E.data.spreadBulletMax:E.data.spreadBulletMin,T=_.isChargeMax?_.data.spreadBulletMax:_.data.spreadBulletMin,S=Math.max(E.data.isReticle&&(null==E?void 0:E.spread)||0,_.data.isReticle&&(null==_?void 0:_.spread)||0,0),k=u.rightWeapon.data.ammoType||null,O=u.leftWeapon.data.ammoType||null,A=E.spread,L=_.spread,P=E.data.isReticle&&_.data.isReticle,I=s.fov*s.zoom,N=null!==k&&0===(0,l.e)(e,k,0)||null!==O&&0===(0,l.e)(e,O,0)||!E.data.isReticle||!_.data.isReticle;(!this.isStaminaGageFadeIn&&(0,l.e)(e,"stamina")<(0,l.d)(e,"stamina")||this.isStaminaGageFadeIn&&(0,l.e)(e,"stamina")>=(0,l.d)(e,"stamina"))&&(this.isStaminaGageFadeIn=!this.isStaminaGageFadeIn,this.staminaGageFadeInTime=o),this.staminaGageFadeInPar=Math.abs((this.isStaminaGageFadeIn?0:1)-Math.min(1,(o-this.staminaGageFadeInTime)/250));const R=2*Math.max(0,1-(0,l.e)(e,"stamina")/(0,l.d)(e,"stamina")-.5),W=ne.r[this.setting.getTheme()].getColor(),z=200+Math.floor(55*R),D=200-Math.floor(200*R),F=u.rightWeapon.data.ammoReduceMax<=(0,l.e)(e,u.rightWeapon.data.ammoType||"",0),U=u.leftWeapon.data.ammoReduceMax<=(0,l.e)(e,u.leftWeapon.data.ammoType||"",0),H=(0,l.e)(e,"energy")/(0,l.d)(e,"energy");return[u.isCanShoot?[new te.a("reticle-center","rgb(255,255,255)",1,!0,1,0,0,.0025,0,re.a,!0,0,0),...!N&&P?[...E.data.isReticle?Math.floor(1e3*A)/1e3<=.025?[]:C?[new te.a("reticle-arc-background","rgb(155,155,155)",1,!1,1,0,0,A*I,Math.PI+re.b,re.a+re.b)]:[]:[],..._.data.isReticle?Math.floor(1e3*L)/1e3<=.025?[]:T?[new te.a("reticle-arc-background","rgb(155,155,155)",1,!1,1,0,0,L*I,re.b,Math.PI+re.b)]:[]:[],...E.data.isReticle?Math.floor(1e3*A)/1e3<=.025?[]:C?[new te.a("reticle-arc","rgb(255,255,255)",1,!1,1,0,0,A*I,re.b,Math.PI+re.b)]:[new te.d("reticle-top","rgb(255,255,255)",-A*I*2,-A*I*2,-A*I*2-.01,-A*I*2-.01,.0025),new te.d("reticle-bottom","rgb(255,255,255)",A*I*2,A*I*2,A*I*2+.01,A*I*2+.01,.0025),new te.d("reticle-left","rgb(255,255,255)",-A*I*2,A*I*2,-A*I*2-.01,A*I*2+.01,.0025),new te.d("reticle-bottom","rgb(255,255,255)",A*I*2,-A*I*2,A*I*2+.01,-A*I*2-.01,.0025)]:[],..._.data.isReticle?Math.floor(1e3*L)/1e3<=.025?[]:T?[new te.a("reticle-arc","rgb(255,255,255)",1,!1,1,0,0,L*I,Math.PI+re.b,re.a+re.b)]:[new te.e("reticle-top","rgb(255,255,255)",!0,1,0,-L*I*2.5-.01,.0025,.01,0,0),new te.e("reticle-bottom","rgb(255,255,255)",!0,1,0,L*I*2.5+.01,.0025,.01,0,0),new te.e("reticle-left","rgb(255,255,255)",!0,1,-L*I*2.5-.01,0,.01,.0025,0,0),new te.e("reticle-right","rgb(255,255,255)",!0,1,L*I*2.5+.01,0,.01,.0025,0,0)]:[]]:[...E.data.isReticle||_.data.isReticle?Math.floor(1e4*S)/1e3<=.025?[]:C||T?[new te.a("reticle-arc","rgb(255,255,255)",1,!1,1,0,0,S*I,0,re.a)]:[new te.e("reticle-top","rgb(255,255,255)",!0,1,0,-S*I*2.5-.01,.0025,.01,0,0),new te.e("reticle-bottom","rgb(255,255,255)",!0,1,0,S*I*2.5+.01,.0025,.01,0,0),new te.e("reticle-left","rgb(255,255,255)",!0,1,-S*I*2.5-.01,0,.01,.0025,0,0),new te.e("reticle-right","rgb(255,255,255)",!0,1,S*I*2.5+.01,0,.01,.0025,0,0)]:[]]]:[new te.d("reticle-top","rgba(".concat(Math.floor(255*W[0]),",").concat(Math.floor(255*W[1]),",").concat(Math.floor(255*W[2]),",1.0)"),-.025,.025,.025,-.025,.0025),new te.d("reticle-top","rgba(".concat(Math.floor(255*W[0]),",").concat(Math.floor(255*W[1]),",").concat(Math.floor(255*W[2]),",1.0)"),-.025,-.025,.025,.025,.0025)],...u.rightWeapon.isShootable&&0===u.rightWeapon.bullets.length&&(u.rightWeapon.isChargeMax?u.rightWeapon.data.chargeBulletType:u.rightWeapon.data.normalBulletType)===st.a||u.leftWeapon.isShootable&&0===u.leftWeapon.bullets.length&&(u.leftWeapon.isChargeMax?u.leftWeapon.data.chargeBulletType:u.leftWeapon.data.normalBulletType)===st.a?[new te.b("hook-icon","./asset/icon.png",5,5,ne.g,"+",0,.1,2,0,0,.75,null===E.shootableTarget?[1,1,1]:[1,0,0])]:[],...u.rightWeapon.isShootable&&F&&(null===(t=u.rightWeapon.isChargeMax?u.rightWeapon.data.chargeBulletType:u.rightWeapon.data.normalBulletType)||void 0===t?void 0:t.prototype)instanceof ot.b||u.leftWeapon.isShootable&&U&&(null===(n=u.leftWeapon.isChargeMax?u.leftWeapon.data.chargeBulletType:u.leftWeapon.data.normalBulletType)||void 0===n?void 0:n.prototype)instanceof ot.b?[new te.b("punch-icon","./asset/icon.png",5,5,ne.g,"9",0,.1,2,0,0,.75,[1,0,0])]:[],o-p.killTime<250?new te.b("kill-icon","./asset/icon.png",5,5,ne.g,"8",0,0,0+2*Math.min(1,(o-p.killTime)/100),0,0,1,W):[],new te.a("combo-arc",M,1,!1,1,0,0,.05,-re.b+re.a*d,-re.b),g>=m.start?new te.b("combo-text","./asset/font.png",5,5,ne.e,"".concat(ze.c[g-1]),0,.2,6-3*(-1===p.comboTime?1:Math.min(1,(p.time-p.comboTime)/.25)),0,0,p.isSlowMo?1:.75,[w,b,x]):null,...u.rightWeapon.data.chargeTime>0?[u.rightWeapon.data.chargeTime>0?new te.a("charge-arc-right-background","rgba(200,200,200,0.75)",1,!1,2,0,-.15,.225,re.b-Math.PI/8,re.b-Math.PI/6-Math.PI/8):null,u.rightWeapon.chargePar>0?new te.a("charge-arc-right-value","rgba(".concat(Math.floor(255*(0,et.b)(W[0],1,F?1:0)),",").concat(Math.floor(255*(0,et.b)(W[1],1,F?1:0)),",").concat(Math.floor(255*(0,et.b)(W[2],1,F?1:0)),",").concat(u.rightWeapon.chargePar>=1?1:.75,")"),1,!1,2,0,-.15,.225,re.b-Math.PI/8,re.b-Math.PI/6*u.rightWeapon.chargePar-Math.PI/8):null,u.rightWeapon.data.chargeTime>0?new te.b("chrage-text","./asset/font.png",5,5,ne.e,"HOLD",.125,.15,1,1,0,1,[(0,et.b)(W[0],1,1-(F?0:1)),(0,et.b)(W[1],1,1-(F?0:1)),(0,et.b)(W[2],1,1-(F?0:1))]):null]:[],...u.leftWeapon.data.chargeTime>0?[u.leftWeapon.data.chargeTime>0?new te.a("charge-arc-left-background","rgba(200,200,200,0.75)",1,!1,2,0,-.15,.225,re.b+Math.PI/6+Math.PI/8,re.b+Math.PI/8):null,u.leftWeapon.chargePar>0?new te.a("charge-arc-left-value","rgba(".concat(Math.floor(255*(0,et.b)(W[0],1,U?1:0)),",").concat(Math.floor(255*(0,et.b)(W[1],1,U?1:0)),",").concat(Math.floor(255*(0,et.b)(W[2],1,U?1:0)),",").concat(u.rightWeapon.chargePar>=1?1:.75,")"),1,!1,2,0,-.15,.225,re.b+Math.PI/8,re.b+Math.PI/6*u.leftWeapon.chargePar+Math.PI/8,!1):null,u.leftWeapon.data.chargeTime>0?new te.b("chrage-text","./asset/font.png",5,5,ne.e,"HOLD",-.125,.15,1,-1,0,1,[(0,et.b)(W[0],1,1-(U?0:1)),(0,et.b)(W[1],1,1-(U?0:1)),(0,et.b)(W[2],1,1-(U?0:1))]):null]:[],...u.rightWeapon.activeHold||u.leftWeapon.activeHold?[new te.b("center-energy-count","./asset/font.png",5,5,ne.e,"".concat((0,l.e)(e,"energy")),0,-.25,3,0,0,.5,[(0,et.b)(W[0],1,1),(0,et.b)(W[1],1,H),(0,et.b)(W[2],1,H)])]:[],this.staminaGageFadeInPar>0?new te.a("stamina-arc-background","rgba(".concat((0,et.b)(D,z,W[0]),",").concat((0,et.b)(D,z,W[1]),",").concat((0,et.b)(D,z,W[2]),",").concat(.75*this.staminaGageFadeInPar,")"),1,!1,2,0,0,.225,re.b+re.d,re.b-re.d):null,this.staminaGageFadeInPar>0?new te.a("stamina-arc","rgba(255,255,255,".concat(1*this.staminaGageFadeInPar,")"),1,!1,2,0,0,.225,re.b+re.d,re.b-re.d+re.b*(1-(0,l.e)(e,"stamina")/(0,l.d)(e,"stamina"))):null,p.isSprint||null!==(a=e.getComponent(Le.a))&&void 0!==a&&a.enableTacticalSprint?new te.b("sprint-text","./asset/font.png",5,5,ne.e,"".concat(null!==(i=e.getComponent(Le.a))&&void 0!==i&&i.enableTacticalSprint?"tac ":"","sprint"),0,.375,1,0,-1):null]}flash(e){if(!e.hasComponent(r.b))return[];const t=performance.now(),n=e.getComponent(r.b),a=((0,l.e)(e,"health"),(0,l.e)(e,"health")),i=ne.r[this.setting.getTheme()].getColor(),o=ne.r[this.setting.getTheme()].getInvertColor();return[new te.e("pickup-flash","rgba(".concat(Math.floor(255*o[0]),",").concat(Math.floor(255*o[1]),",").concat(Math.floor(255*o[2]),",").concat(.5*(-1===n.pickupTime?0:1-(t-n.pickupTime)/100),")"),!0,0,0,0,10,10,0,0),...a<50?[new te.a("blood-screen",["rgba(0,0,0,0.0)","rgba(".concat(Math.floor(255*i[0]),",").concat(Math.floor(255*i[1]),",").concat(Math.floor(255*i[2]),",").concat(1-Math.max(0,a-25)/50,")")],1,!0,0,0,0,1.125,0,re.a,!0,0,0)]:[]]}zoomAnimation(e){if(!e.hasComponent(h.a))return[];const t=e.getComponent(r.b);return[t.zoomAnimationPar>0?new te.a("zoom-fog",["rgba(0,0,0,0.0)","rgba(0,0,0,1.0)"],.5*t.zoomAnimationPar,!0,0,0,0,1.125,0,re.a,!0,0,0):new te.e("zoom-fog","rgb(0,0,0)",!0,0,0,0,10,10,0,0)]}shopHUD(e){var t,n,a;if(!e.hasComponent(h.a))return[];const i=e.getComponent(r.b),[o,s,l,c]=(0,We.b)(e);return[...((null===(t=i.activeEntity)||void 0===t||null===(n=t.getComponent(Re.a))||void 0===n?void 0:n.sale)||0)<1?[new te.e("sale-background","rgba(0,0,0,0.75)",!0,1,.65,-1,.275,.125,0,1),new te.b("sale-number","./asset/font.png",5,5,ne.e,"".concat(Math.round(100*(1-((null===(a=i.activeEntity)||void 0===a?void 0:a.getComponent(Re.a).sale)||0))),"%off"),.65,-.825,3,0,-1,1,[1,1,1])]:[],new te.e("buy-gauge-background","rgba(0,0,0,0.75)",!0,1,-.65,-1,.275,null===o?.075:.275,0,1),...0===c?[new te.e("buy-gauge-background","rgba(255,255,255,0.25)",!0,1,-.65,-.9,.25,.025,0,-1),new te.e("buy-gauge-value","rgba(255,255,255,0.5)",!0,1,-.9,-.9,.25,.025,1,-1)]:[new te.e("buy-gauge-background","rgba(255,255,255,0.25)",!0,1,-.65,-.9,.25,.025,0,-1),new te.e("buy-gauge-value","rgba(255,255,255,0.5)",!0,1,-.9,-.9,.25*s,.025,1,-1)],...0===c?[new te.b("buy-gauge-number","./asset/font.png",5,5,ne.e,"max rank!",-.65,-.875,1,0,0,1,[1,1,1])]:[new te.b("buy-gauge-number","./asset/font.png",5,5,ne.e,"".concat((0,qe.a)(l,"0",4),"kg/").concat((0,qe.a)(c,"0",4),"kg"),-.65,-.875,1,0,0,1,[1,1,1])],...null===o?[]:[new te.c("members-card",o,-.65,-.65,.75,.75)]]}wheelMenu(e){if(!e.hasComponent(s.a))return[];const t=this.getCamera(),n=e.getComponent(s.a),a=e.getComponent(r.b),i=this.getControlManager(),o=n.hasTrigger||-1===n.value?null:n.menus[n.value]&&n.menus[n.value].hasEnable()?n.menus[n.value]:null,c="keyboard"!==i.getInputType(),u="keyboard"===i.getInputType(),p=this.getGameMode()===Xe.a.HORDE,d=n.value;return[...n.enable?[new te.e("background","rgba(0,0,0,0.75)",!0,0,0,0,10,10,0,0)]:[],...a.isPause?[]:(0,s.d)(t.hasComponent(Ee.a)?t:e,this,this.setting,0,0,.45),...null!==a.activeEntity||p&&!a.isSelectHandWeapon||!n.enable||!e.hasComponent(h.a)?[]:[new te.b("equip-weapon-right","./asset/font.png",5,5,ne.e,"".concat((c&&0!==d||u&&0===d)&&null!==o?"string"==typeof o.name?o.name:o.name(!0):(0,l.c)(e,e.getComponent(h.a).right,null),"\n\n(").concat(this.getControlManager().getKey("fire-right"),")"),1,.8,2,0,-1,1,[1,1,1]),new te.b("equip-weapon-left","./asset/font.png",5,5,ne.e,"".concat((u&&0!==d||c&&0===d)&&null!==o?"string"==typeof o.name?o.name:o.name(!0):(0,l.c)(e,e.getComponent(h.a).left,null),"\n\n(").concat(this.getControlManager().getKey("fire-left"),")"),-1,.8,2,0,-1,1,[1,1,1])]]}intermission(e){if(!e.hasComponent(r.b))return[];const t=performance.now()-e.getComponent(r.b).intermissionTime,n=(0,l.e)(e,"sumscore")+(0,l.e)(e,"score"),a=new Date(this.sumGameTime()),i=this.getTimes();return[new te.e("intermission-background","rgb(0,0,0)",!0,0,0,0,10,10,0,0),new te.c("title","./asset/title-prod.png",0,-.625,1,1,null,null,null,null,0,0,Math.max(0,Math.min(1,(t-500)/250))),new te.b("intermission-episode","./asset/font.png",5,5,ne.e,"episode ".concat(this.getEpisodeNumber()),0,-.5,2,0,0,Math.max(0,Math.min(1,(t-500)/250)),[1,1,1]),...i.map(((e,n)=>{const a=new Date(e);return new te.b("intermission-result","./asset/font.png",5,5,ne.e,"".concat(-1!==this.getSecretIndex()?"".concat(n===this.getSecretIndex()?"SECRET":"MAP".concat(n+1+(n>this.getSecretIndex()?-1:0))):"MAP".concat(n+1)," TIME/").concat((0,qe.b)(a.getMinutes(),"0",2)," ").concat((0,qe.b)(a.getSeconds(),"0",2)," ").concat((0,qe.b)(a.getMilliseconds()/10|0,"0",2)," DEATH/").concat(this.getDeaths()[n]||0),0,.1*n-.25,1,0,-1,Math.max(0,Math.min(1,(t-(1e3+100*n))/250)),[1,1,1])})),new te.b("intermission-score","./asset/font.png",5,5,ne.e,"SCORE/".concat(n),0,.5,2,0,-1,Math.max(0,Math.min(1,(t-(1e3+250*this.getTimes().length+500))/100)),[1,1,1]),new te.b("intermission-score","./asset/font.png",5,5,ne.e,"TIME/".concat((0,qe.b)(a.getMinutes(),"0",2)," ").concat((0,qe.b)(a.getSeconds(),"0",2)," ").concat((0,qe.b)(a.getMilliseconds()/10|0,"0",2)),0,.6,2,0,-1,Math.max(0,Math.min(1,(t-(1e3+250*this.getTimes().length+500))/100)),[1,1,1]),new te.b("intermission-message","./asset/font.png",5,5,ne.e,"THANK YOU FOR PLAYING",0,.8,3,0,-1,Math.max(0,Math.min(1,(t-(1e3+250*this.getTimes().length+600+1e3))/500)),[1,1,0])]}gameOver(e){if(!e.hasComponent(r.b))return[];const t=performance.now(),n=e.getComponent(r.b);let a=0;a=t-n.deathTime>ze.f?Math.min(1,(t-n.deathTime-ze.f)/500):0;const i="rgba(0,0,0,".concat(a,")"),o=(0,l.e)(e,"score"),s=this.getGameMode()===Xe.a.HORDE;return[new te.e("gameover-background",i,!0,0,0,0,10,10,0,0),...this.flash(e),...s&&this.setting.hasCheckPoint()?this.hordeStats(e):[],new te.b("gameover-message","./asset/font.png",5,5,ne.e,"YOU DIED!",0,-.25,5,0,-1,1,[1,0,0]),...s&&this.setting.hasCheckPoint()?[]:[new te.b("gameover-score","./asset/font.png",5,5,ne.e,"MEAT MILEAGE ".concat((0,qe.a)(o,"0",4),"kg"),0,0,1,0,0,1,[1,1,1])],-1!==n.deathTime&&(s&&ze.n-Math.floor((t-n.deathTime)/1e3)>0||a>=1&&t%2e3>1e3)?new te.b("gameover-continue","./asset/font.png",5,5,ne.e,this.setting.hasPermaDeath()?"press ".concat("keyboard"!==this.getControlManager().getInputType()?"a":"mouse left"," return title"):this.setting.hasCheckPoint()?s&&(t-n.deathTime)/1e3<ze.n?"RESPAWN IN ".concat(ze.n-Math.floor((t-n.deathTime)/1e3)):"press ".concat("keyboard"!==this.getControlManager().getInputType()?"a":"mouse left"," respawn"):"press ".concat("keyboard"!==this.getControlManager().getInputType()?"a":"mouse left"," restart"),0,.5,2,0,0,1,[1,1,1]):null]}stageClear(e){if(!e.hasComponent(r.b))return[];const t=performance.now(),n=e.getComponent(r.b);let a=0;a=t-n.goleTime>ze.f?Math.min(1,(t-n.goleTime-ze.f)/500):0;const i="rgba(0,0,0,".concat(a,")"),o=(0,l.e)(e,"score",0),s=new Date(1e3*n.gole),h=new Array;let c="",u=0;switch(this.getGameMode()){case Xe.a.HORDE:const t=this.getCountKillEnemy(),n=Math.floor((0,l.e)(e,"hordetime",0)),a=t>=this.getMaxKillEnemy();h.push(...a||t>0?["KILL BONUS ".concat(t," / ").concat(this.getMaxKillEnemy()," X ").concat(ze.k)]:[],...a||n>0?["TIME BONUS ".concat(n," SEC X ").concat(ze.p)]:[],...a||o>0?["MEAT MILEAGE ".concat((0,qe.a)(o,"0",4),"kg")]:[]),u=t*ze.k+n*ze.p+o,c="TOTAL SCORE ".concat(u);break;case Xe.a.CAMPAING:const i=("0"+s.getUTCMinutes()).slice(-2),r=("0"+s.getUTCSeconds()).slice(-2),p=("0"+s.getUTCMilliseconds()).slice(-2);h.push("TIME ".concat(i,":").concat(r,":").concat(p),"MEAT MILEAGE ".concat((0,qe.a)(o,"0",4),"kg")),this.meatLength>0&&h.push("PICK PUT MEAT ".concat(this.meatLength-this.getEntitysOfName("meat").length,"/").concat(this.meatLength)),this.enemyLength>0&&h.push("KILL ENEMY ".concat(this.enemyLength-this.getEntitysOfName("enemy").filter((e=>!e.getNames().some((e=>"not-count"===e)))).length,"/").concat(this.enemyLength))}const p=this.getGameMode()===Xe.a.CAMPAING,d=this.getGameMode()===Xe.a.HORDE;return[...this.flash(e),new te.e("stageclear-background",i,!0,0,0,0,10,10,0,0),new te.b("stageclear-message","./asset/font.png",5,5,ne.e,d?"HORDE ENDED":"LEVEL COMPLETE",0,-.45,5,0,-1,1,[1,1,0]),...this.hasPreview()||!p&&!d?[]:[new te.b("stageclear-message","./asset/font.png",5,5,ne.e,d?"MAP HORDE".concat(this.getEpisodeNumber()):this.hasSecret()?"SECRET":"E".concat(this.getEpisodeNumber(),"M").concat(this.getMapNumber()),0,-.375,2,0,-1,1,[1,1,1])],...h.map(((e,t)=>new te.b("result-log","./asset/font.png",5,5,ne.e,e,0,.125*t-.25,1,0,0,1,[1,1,1]))),d?new te.b("horde-result-message","./asset/font.png",5,5,ne.e,c,0,.25,2,0,0,1,[1,1,1]):null,d?new te.b("horde-result-rank","./asset/font.png",5,5,ne.e,"".concat((0,Ve.b)(u)[0]),.75,.25,5,0,0,1,(0,Ve.b)(u)[1]):null,a>=1&&t%2e3>1e3?new te.b("stageclear-continue","./asset/font.png",5,5,ne.e,"press ".concat("keyboard"!==this.getControlManager().getInputType()?"a":"mouse left",d?" return title":" continue"),0,.5,2,0,0,1,[1,1,1]):null]}editorTerminal(e){const t=this.getCamera();return[new te.a("reticle-center","rgba(255,255,255,1.0)",1,!0,1,0,0,.005,0,re.a,!0,0,0),new te.b("editor-message-mode","./asset/font.png",5,5,ne.e,"mode change to (".concat(this.getControlManager().getKey("weapon-wheel"),")"),1,.9,1,-1,-1,1,[1,1,1]),new te.b("editor-message-exit","./asset/font.png",5,5,ne.e,"exit to (".concat(this.getControlManager().getKey("use",this.getControlManager().getInputType()),")"),-1,.9,1,1,-1,1,[1,1,1]),...(0,s.d)(t.hasComponent(Ee.a)?t:e,this,this.setting,0,0,.45)]}gamePlay(e){var t,n;if(!e.hasComponent(r.b))return[];const a=e.getComponent(r.b),i=new Array;if(null===(t=e.getComponent(s.a))||void 0===t||!t.enable){var o,c,u,p,d,g,m,f,y,v,w,b,x,M,E,_,C,T,S,k,O;const t=this.getControlManager();null!==(o=e.getComponent(ge.a))&&void 0!==o&&o.hasDoorMessage?i.push("press (".concat(t.getKey("use"),") open")):e.hasComponent(ge.a)&&a.isWaitActive&&null===((null===(c=e.getComponent(r.b))||void 0===c?void 0:c.activeEntity)||null)?i.push("press (".concat(t.getKey("use"),") active")):null!==a.pickMessage&&i.push(a.pickMessage),null!==(u=e.getComponent(me.a))&&void 0!==u&&u.canJump&&i.push("press (".concat(t.getKey("jump"),") to jump")),null!==(p=e.getComponent(me.a))&&void 0!==p&&p.canClimb&&i.push("press (".concat(t.getKey("jump"),") or (").concat(t.getKey("sprint"),") to climb")),null===(d=e.getComponent(me.a))||void 0===d||!d.exec||null!==(g=e.getComponent(me.a))&&void 0!==g&&g.climb||null!==(m=e.getComponent(me.a))&&void 0!==m&&m.canJump||null===(f=e.getComponent(me.a))||void 0===f||!f.canMove||i.push("".concat("gamepad"===t.getInputType()?"(left stick)":"(".concat(t.getKey("left","keyboard"),") or (").concat(t.getKey("right","keyboard"),")")," to move")),null===(y=e.getComponent(me.a))||void 0===y||!y.exec||null!==(v=e.getComponent(me.a))&&void 0!==v&&v.climb||i.push("press (".concat(t.getKey("cluch"),") to grab cancel")),null!==(w=e.getComponent(at.a))&&void 0!==w&&w.can&&i.push("(".concat(t.getKey("auto-lean"),") to auto lean")),!a.isWaitActive&&((null===(b=e.getComponent(h.a))||void 0===b?void 0:b.rightWeapon.data.shootType)!==ze.q.SPIN&&null!==(x=e.getComponent(h.a))&&void 0!==x&&x.rightWeapon.isChargeEnable&&(null===(M=e.getComponent(h.a))||void 0===M?void 0:M.rightWeapon.data.chargeTime)>0||(null===(E=e.getComponent(h.a))||void 0===E?void 0:E.leftWeapon.data.shootType)!==ze.q.SPIN&&null!==(_=e.getComponent(h.a))&&void 0!==_&&_.leftWeapon.isChargeEnable&&(null===(C=e.getComponent(h.a))||void 0===C?void 0:C.leftWeapon.data.chargeTime)>0)&&i.push("press (".concat(t.getKey("use"),") to charge cancel")),(null!==(T=e.getComponent(h.a))&&void 0!==T&&T.rightWeapon.isFireStart&&(null===(S=e.getComponent(h.a))||void 0===S?void 0:S.rightWeapon.data.shootType)===ze.q.HOOK||null!==(k=e.getComponent(h.a))&&void 0!==k&&k.leftWeapon.isFireStart&&(null===(O=e.getComponent(h.a))||void 0===O?void 0:O.leftWeapon.data.shootType)===ze.q.HOOK)&&i.push("press (".concat(t.getKey("jump"),") or (").concat(t.getKey("cluch"),") to hook cancel"))}const A=!e.hasComponent(s.a)||e.getComponent(s.a).enable,L=ne.r[this.setting.getTheme()].getColor();return[...a.isZoomAnimation?this.zoomAnimation(e):[],...!this.setting.hasHUD()||a.isPause?[]:this.flash(e),...!this.setting.hasHUD()||a.isPause||A?[]:this.campaingStats(e),...!this.setting.hasHUD()||a.isPause||A?[]:this.practiceStats(),...!this.setting.hasHUD()||a.isPause||A?[]:this.hordeStats(e),...!this.setting.hasHUD()||a.isPause||A?[]:this.reticle(e),...!this.setting.hasHUD()||a.isPause?[]:this.statsBar(e),...!this.setting.hasHUD()||a.isPause?[]:e instanceof ie.a?a.damages.map(((t,n)=>new te.a("damage-angle-".concat(n),"rgba(".concat(Math.floor(255*L[0]),",").concat(Math.floor(255*L[1]),",").concat(Math.floor(255*L[2]),",").concat(1*(-1===t.time?0:1-(a.time-t.time)/1),")"),1,!1,2,0,0,.25,(0,re.m)(t.position.x,t.position.z,e.position.x,e.position.z)-e.direction.x+Math.PI/8-re.b,(0,re.m)(t.position.x,t.position.z,e.position.x,e.position.z)-e.direction.x-Math.PI/8-re.b,!0,0,0))):[],...a.helpMessages.map(((e,t)=>new te.b("help-message-".concat(t),"./asset/font.png",5,5,ne.e,e,0,.05*t-.375,1,0,0,1,[1,1,1]))),...!this.setting.hasHUD()||a.isPause?[]:i.map(((e,t)=>new te.b("info-messages-".concat(t),"./asset/font.png",5,5,ne.e,e,0,.525+.05*t,1,0,0,1,[1,1,1]))),...this.wheelMenu(e),...this.getGameMode()!==Xe.a.TUTORIAL&&null!==(n=a.activeEntity)&&void 0!==n&&n.hasComponent(Re.a)&&(0,l.e)(e,"useshoppoint",0)>0?this.shopHUD(e):[]]}selectHandWeapon(e){return[...this.wheelMenu(e),new te.b("select-hand-weapon-message","./asset/font.png",5,5,ne.e,"choise hand weapon",0,-.875,2,0,0,1,[1,1,1])]}hordeCountdown(e){if(!e.hasComponent(r.b))return[];const t=e.getComponent(r.b);return[new te.b("horde-countdown","./asset/font.png",5,5,ne.e,"".concat(Math.ceil(ze.o-Math.min(ze.o,t.hordeStartTime))),0,0,5,0,0,1,[1,1,1])]}respawn(e){if(!e.hasComponent(r.b))return[];const t=e.getComponent(r.b);return[new te.e("respawn-fog","rgb(0,0,0)",!0,0,0,0,10,10,0,0),...!this.setting.hasHUD()||t.isPause?[]:this.hordeStats(e)]}createTransferUIData(e){if(!e)return[];const t=this.getPlayer();if(null!=t&&t.hasComponent(r.b)){var n;const e=t.getComponent(r.b);return-1!==e.intermissionTime?this.intermission(t):-1!==e.deathTime?this.gameOver(t):-1!==e.goleTime?this.stageClear(t):-1!==e.respawnTime?this.respawn(t):this.getGameMode()===Xe.a.HORDE&&e.hordeStartTime<ze.o?e.isSelectHandWeapon?this.hordeCountdown(t):this.selectHandWeapon(t):null!==(n=e.activeEntity)&&void 0!==n&&n.hasComponent(Ce.a)?this.editorTerminal(t):this.gamePlay(t)}return[]}onupdate(e){super.onupdate(e),-1===this.meatLength&&(this.meatLength=this.getEntitysOfName("meat").length),-1===this.enemyLength&&(this.enemyLength=this.getEntitysOfName("enemy").filter((e=>!e.getNames().some((e=>"not-count"===e)))).length)}async onactive(e){"keyboard"===this.getControlManager().getInputType()&&await(0,Ae.c)(),!(0,Oe.a)()&&this.setting.hasBrowserFullscreen()&&await(0,$e.d)()}}a()}catch(ct){a(ct)}}))},(e,t,n)=>{var a=n(12);e.exports=!a((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},(e,t,n)=>{var a=n(11),i=n(79),o=a({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return o(i(e),t)}},(e,t,n)=>{"use strict";n.d(t,{a:()=>o});var a=n(0);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o{constructor(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];i(this,"size",void 0),i(this,"treeFix",void 0),this.size=new a.e(e,t),this.treeFix=n}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>o});var a=n(0);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;i(this,"move",new a.f(0,0,0)),i(this,"look",new a.e(0,0)),i(this,"force",1),i(this,"limit",!0),i(this,"speed",void 0),this.speed=e}}},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>A,b:()=>O});n(1),n(2),n(15),n(16);var i=n(365),o=n(374),s=n(10),r=n(246),l=n(105),h=n(56),c=n(0),u=n(26),p=n(30),d=n(300),g=n(5),m=n(44),f=n(252),y=n(8),v=n(24),w=n(389),b=n(503),x=n(505),M=n(6),E=n(13),_=n(31),C=n(92),T=e([g]);function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}g=(T.then?(await T)():T)[0];const k=[[1,0],[0,1],[-1,0],[0,-1]];function O(e,t){return e.top===t.top&&e.bottom===t.bottom&&e.right===t.right&&e.left===t.left&&e.front===t.front&&e.back===t.back}class A extends f.a{constructor(e,t,n,a,l,h,g,f,y,v,b,x,M,E,_,C,T){super(e,f,y,v,b,x),S(this,"margin",void 0),S(this,"isForceUpdate",!1),S(this,"materials",void 0),S(this,"voxels",void 0),S(this,"tileSet",null),S(this,"background",null),S(this,"mats",{}),S(this,"camera",void 0),S(this,"sun",void 0),S(this,"lateTime",0),S(this,"starttime",0),S(this,"map",void 0),S(this,"offset",void 0),S(this,"trees",{range:new o.a((e=>e instanceof s.a&&e.hasComponent(r.a)),(e=>{if(!(e instanceof s.a))return[-1,-1,-1,-1,-1];const t=e.getComponent(r.a),n=t.treeFix&&e.hasComponent(m.a)?e.getComponent(m.a).position:new c.f(0,0,0);return[e.position.x+n.x,e.position.y+n.y,e.position.z+n.z,t.size.x,t.size.y]})),hitbox:new o.a((e=>e instanceof s.a&&e.hasComponent(p.a)),(e=>{if(!(e instanceof s.a))return[-1,-1,-1,-1,-1];const t=e.getComponent(p.a),n=t.treeFix&&e.hasComponent(m.a)?e.getComponent(m.a).position:new c.f(0,0,0);return[e.position.x+n.x,e.position.y+n.y,e.position.z+n.z,t.size.x,t.size.y]})),collision:new o.a((e=>e instanceof s.a&&e.hasComponent(u.a)),(e=>{if(!(e instanceof s.a))return[-1,-1,-1,-1,-1];const t=e.getComponent(u.a),n=t.treeFix&&e.hasComponent(m.a)?e.getComponent(m.a).position:new c.f(0,0,0);return[e.position.x+n.x,e.position.y+n.y,e.position.z+n.z,t.size.x,t.size.y]}))}),S(this,"maxFramerate",void 0),S(this,"finder",new d.a),S(this,"transferDataBuilder",void 0),S(this,"renderEntitys",new Array),this.margin=l,this.materials=M,this.voxels=E,this.camera=C,this.sun=T,this.addEntitys(C,T),this.maxFramerate=g,this.transferDataBuilder=new w.a(_,h,1/0),this.offset={top:l,bottom:l,front:l,back:l,right:l,left:l},this.map=new i.a(t,n,a,"int32",1,0)}initTrees(e){for(const t in this.trees){const n=this.trees[t];n.hasEntity(e)&&n.initOldPosition(e)}}addEntitys(){for(let e=0,t=0|arguments.length;e<t;e=e+1|0){const t=e<0||arguments.length<=e?void 0:arguments[e];for(const e in this.trees){this.trees[e].add(t)}}super.addEntitys(...arguments)}getMaterialManager(){return this.materials}getVoxelManager(){return this.voxels}getMap(){return this.map}getWorldDistance(){return this.map.getWorldDistance()}getWorldSize(){return this.map.getSize()}getCamera(){return this.camera}getSun(){return this.sun}getMargin(){return this.margin}getOffset(){return this.offset}getVoxel(e,t,n){return this.getVoxelManager().getVoxel(this.getVoxelField(e,t,n))}getVoxelField(e,t,n){return this.map.get(0,e,t,n,this.map.getVoxelField(),this.map.getSize())}getDistanceField(e,t,n){return this.map.get(0,e,t,n,this.map.getDistanceField(),this.map.getSize())}getMortonField(e,t,n){return this.map.get(0,e,t,n,this.map.getMortonField(),this.map.getSize())}getMaterials(){return this.mats}getTileSet(){return this.tileSet}getBackground(){return this.background||{theme:0,rise_up_color:[50/255,125/255,50/255],night_up_color:[50/255,125/255,50/255],rise_down_color:[100/255,125/255,50/255],night_down_color:[100/255,125/255,50/255],material_up:[1,.625,.075],material_down:[1,.625,0],noise_size:5,noise_length:2}}getLateTime(){return this.lateTime}getTree(e){return this.trees[e]||null}setWorldSize(e,t,n,a,i,o,s,r,l){this.map.setSize(e,t,n),this.offset.top=a,this.offset.bottom=i,this.offset.front=o,this.offset.back=s,this.offset.right=r,this.offset.left=l}setWorldData(e){const{voxels:t,map:n,offset:a}=e;this.setWorldSize(n.size.width,n.size.height,n.size.depth,a.top,a.bottom,a.front,a.back,a.right,a.left);this.getVoxelManager().initData(t),this.map.initData(n.voxel_field,n.distance_field,n.morton_field,(0,C.a)(n.voxel_inserts),(0,C.a)(n.distance_inserts),(0,C.a)(n.morton_inserts))}setActorPosition(e,t,n,a){if(e.position.x=t,e.position.y=n,e.position.z=a,e.hasComponent(M.a)){const i=e.getComponent(M.a);i.old.x=t,i.old.y=n,i.old.z=a}if(e.hasComponent(u.a)){const i=e.getComponent(u.a);i.old.x=t,i.old.y=n,i.old.z=a}if(e.hasComponent(E.a)){const t=e.getComponent(E.a);t.value.x=0,t.value.y=0,t.value.z=0}if(e.hasComponent(_.a)){const t=e.getComponent(_.a);t.move.x=0,t.move.y=0,t.move.z=0,t.look.x=0,t.look.y=0}this.initTrees(e)}setCamera(e){this.camera=e}setSun(e){this.sun=e}setTileSet(e){this.tileSet!==e&&(this.isForceUpdate=!0),this.tileSet=e}setBackground(e){this.background=e}setMaterials(e){for(const t in e)this.mats[t]=e[t]}setVoxel(e,t,n,a){var i;let o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const r=this.getVoxelManager(),l=r.getVoxels(),h=this.map.get(0,e,t,n),c=r.getVoxel(h);h>0&&((null===(i=this.map.getVoxelInsertData(h))||void 0===i?void 0:i.count)||0)<=0&&r.removeVoxels(c);const u=O(a,g.u);let p=!1,d=null;if(u)p=!0,d=g.u;else for(let e=0,t=0|l.length;e<t;e=e+1|0){const t=l[e]||null;if(null!==t&&O(t,a)){p=!0,d=t;break}}if(p||(d=a,r.addVoxels(a)),null!==d){const a=u?0:l.indexOf(d);this.setVoxelField(e,t,n,a,o)}s&&(u?this.reductionPosition():this.expandPosition())}setVoxelField(e,t,n,a){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.map.set(0,e,t,n,a,i,this.map.getVoxelField()),!i&&a<=0&&this.setDistanceField(e,t,n,1)}setDistanceField(e,t,n,a){this.map.set(0,e,t,n,a,!1,this.map.getDistanceField())}setMortonField(e,t,n,a){this.map.set(0,e,t,n,a,!1,this.map.getMortonField())}hasOutOfWorld(e,t,n){return(0,h.d)(this.map,e,t,n)}clearMap(){const e=this.getMap();this.getVoxelManager();e.clear()}clearTree(){for(const e in this.trees){this.trees[e].clear()}}clearControl(){this.getControlManager().clear()}clear(){this.clearMap(),this.clearTree(),this.clearControl(),this.lateTime=0,super.clear()}getEntitysOfRange(e,t,n,a,i,o){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:new Array;const r=new Array,u=this.trees[e],p=e=>s.includes(e),d=(0,h.c)(t,n-o/2,a,i,o);for(let e=0,s=0|d.length;e<s;e=e+3|0){const s=d[e],h=d[e+1],g=d[e+2],m=u.getPointCell(s,h,g);for(let e=0,s=0|m.length;e<s;e=e+1|0){const s=m[e],h=this.getEntityOfID(s);if(null===h||!h.hasLive()||p(s)||h.getNames().some(p))continue;const[d,g,f,v,w]=u.getEntityProperty(h);if(-1===d&&-1===g&&-1===f)continue;let[b,x,M,E,_]=u.getOldEntityProperty(h);b=-1===b?d:b,x=-1===x?g:x,M=-1===M?f:M,E=-1===E?v:E,_=-1===_?w:_;const C=d-b,T=g-x,S=f-M,[k,O]=(0,c.n)(C,T,S,0,0,0),[A,L,P]=(0,c.r)(k,O,0,0,1),I=Math.min((0,c.p)(C,T,S,0,0,0),this.getWorldDistance()),N=Math.min(I,Math.max(Math.min(v,w),Math.min(E,_))/2,.5);let R=0;for(;;){const e=b+R*A,s=x+R*L,c=M+R*P,u=(0,y.c)((0,y.e)(R/I),0),p=E+(v-E)*u,d=_+(w-_)*u;if((0,l.e)(t,n-o/2,a,i,o,e,s,c,p,d)){r.push(h);break}if(R>=I)break;if(R=(0,y.a)((0,y.c)(R+N,I,1e5,Math.ceil),0,I),R<=0)break}}}return r}hitScan(e,t,n,a,i,o,s){let r=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[];const u=new Array,p=this.trees[e],d=e=>r.includes(e);let m=!1;const[f,w,b,x]=(0,h.l)(t,n,a,i,o,s,this.getWorldSize(),((e,t,n)=>!O(this.getVoxel(e,t,n),g.u)),((e,s,r,h,g,f,v,w,b,x,M,E,_,C,T,S,k,O)=>{const A=p.getPointCell(e,s,r);for(let e=0,s=0|A.length;e<s;e=e+1|0){const s=A[e],r=this.getEntityOfID(s);if(null===r||!r.hasLive()||d(s)||r.getNames().some(d))continue;const[v,w,b,x,M]=p.getEntityProperty(r);if(-1===v&&-1===w&&-1===b)continue;let[E,_,C,T,S]=p.getOldEntityProperty(r);E=-1===E?v:E,_=-1===_?w:_,C=-1===C?b:C,T=T?x:T,S=S?M:S;const k=v-E,O=w-_,L=b-C,[P,I]=(0,c.n)(k,O,L,0,0,0),[N,R,W]=(0,c.r)(P,I,0,0,1),z=Math.min((0,c.p)(k,O,L,0,0,0),this.getWorldDistance()),D=Math.min(z,Math.max(Math.min(x,M),Math.min(T,S))/2,.5);let F=0;for(;;){const e=E+F*N,s=_+F*R,p=C+F*W,d=(0,y.c)((0,y.e)(F/z),0),v=T+(x-T)*d,w=S+(M-S)*d;if((a<h?a<e+v/2:h<e+v/2)&&(i<g?i<s+w:g<s+w)&&(o<f?o<p+v/2:f<p+v/2)&&(a>h?a>e-v/2:h>e-v/2)&&(i>g?i>s:g>s)&&(o>f?o>p-v/2:f>p-v/2)){const[h,d,g]=(0,l.a)(a,i,o,t,n,e,s,p,e,s+w,p,v);if(-1!==h&&-1!==d&&-1!==g){const e=(0,c.p)(h,d,g,a,i,o);u.push([h,d,g,e,r]),m=!0;break}}if(F>=z)break;if(F=(0,y.a)((0,y.c)(F+D,z,1e5,Math.ceil),0,z),F<=0)break}}return m}));return-1!==f&&-1!==f&&-1!==b&&u.push([f,w,b,x,null]),u.length>1&&(0,v.c)(u).asc((e=>e[3])),u[0]||[-1,-1,-1,-1,null]}hitScanVoxel(e,t,n,a,i,o){return(0,h.k)(e,t,n,a,i,o,this.getWorldSize(),((e,t,n)=>this.getDistanceField(e,t,n)))}hitScanActor(e,t,n,a,i,o,s){let r=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[];const u=new Array,p=this.trees[e],d=e=>r.includes(e);let m=!1;return(0,h.l)(t,n,a,i,o,s,this.getWorldSize(),((e,t,n)=>!O(this.getVoxel(e,t,n),g.u)),((e,s,r,h,g,f,v,w,b,x,M,E,_,C,T,S,k,O)=>{const A=p.getPointCell(e,s,r);for(let e=0,s=0|A.length;e<s;e=e+1|0){const s=A[e],r=this.getEntityOfID(s);if(null===r||!r.hasLive()||d(s)||r.getNames().some(d))continue;const[v,w,b,x,M]=p.getEntityProperty(r);if(-1===v&&-1===w&&-1===b)continue;let[E,_,C,T,S]=p.getOldEntityProperty(r);E=-1===E?v:E,_=-1===_?w:_,C=-1===C?b:C,T=T?x:T,S=S?M:S;const k=v-E,O=w-_,L=b-C,[P,I]=(0,c.n)(k,O,L,0,0,0),[N,R,W]=(0,c.r)(P,I,0,0,1),z=Math.min((0,c.p)(k,O,L,0,0,0),this.getWorldDistance()),D=Math.min(z,Math.max(Math.min(x,M),Math.min(T,S))/2,.5);let F=0;for(;;){const e=E+F*N,s=_+F*R,p=C+F*W,d=(0,y.c)((0,y.e)(F/z),0),v=T+(x-T)*d,w=S+(M-S)*d;if((a<h?a<e+v/2:h<e+v/2)&&(i<g?i<s+w:g<s+w)&&(o<f?o<p+v/2:f<p+v/2)&&(a>h?a>e-v/2:h>e-v/2)&&(i>g?i>s:g>s)&&(o>f?o>p-v/2:f>p-v/2)){const[h,d,g]=(0,l.a)(a,i,o,t,n,e,s,p,e,s+w,p,v);if(-1!==h&&-1!==d&&-1!==g){const e=(0,c.p)(h,d,g,a,i,o);return u.push([h,d,g,e,r]),m=!0,!0}}if(F>=z)break;if(F=(0,y.a)((0,y.c)(F+D,z,1e5,Math.ceil),0,z),F<=0)break}}return m})),u[0]||[-1,-1,-1,-1,null]}hitScanBold(e,t,n,a,i,o,s,r){let u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[];const p=new Array,d=e=>u.includes(e),g=this.trees[e],[m,f,w]=this.getWorldSize(),b=(0,c.p)(m,f,w,0,0,0);let[x,M,E,_]=this.hitScanVoxelBoldFindMin(t,n,a,i,o,s,b);const C=Math.min(r,_,(0,c.p)(m,f,w,0,0,0)),[T,S,k]=(0,c.r)(t,n,0,0,C),O=Math.min((0,c.p)(T,S,k,0,0,0),this.getWorldDistance());-1!==x&&-1!==M&&-1!==E&&p.push([x,M,E,_,null]);const[A,L]=(0,c.n)(T,S,k,0,0,0),[P,I,N]=(0,c.r)(A,L,0,0,1),R=Math.min(O,s/2,.5);Math.max(...this.getWorldSize());let W=0,z=!1;for(;;){const e=a+W*P,t=i+W*I,n=o+W*N,r=(0,h.c)(e,t-s/2,n,s,s);for(let h=0,u=0|r.length;h<u;h=h+3|0){const u=r[h+0],m=r[h+1],f=r[h+2],v=g.getPointCell(u,m,f);for(let r=0,h=0|v.length;r<h;r=r+1|0){const h=v[r],u=this.getEntityOfID(h);if(null===u||!u.hasLive()||d(h)||u.getNames().some(d))continue;const[m,f,w,b,x]=g.getEntityProperty(u);if(-1===m&&-1===f&&-1===w)continue;let[M,E,_,T,S]=g.getOldEntityProperty(u);M=-1===M?m:M,E=-1===E?f:E,_=-1===_?w:_,T=T?b:T,S=S?x:S;const k=m-M,O=f-E,A=w-_,[L,P]=(0,c.n)(k,O,A,0,0,0),[I,N,R]=(0,c.r)(L,P,0,0,1),W=Math.min((0,c.p)(k,O,A,0,0,0),this.getWorldDistance()),D=Math.min(W,Math.max(Math.min(b,x),Math.min(T,S))/2,.5);let F=0;for(;;){const r=M+F*I,h=E+F*N,d=_+F*R,g=(0,y.c)((0,y.e)(F/W),0),m=T+(b-T)*g,f=S+(x-S)*g;if((0,l.e)(e,t-s/2,n,s,s,r,h,d,m,f)){const s=(0,c.p)(e,t,n,a,i,o);if(s<C){p.push([e,t,n,s,u]),z=!0;break}}if(F>=W)break;if(F=(0,y.a)((0,y.c)(F+D,W,1e5,Math.ceil),0,W),F<=0)break}}}if(z||W>=O)break;W=(0,y.a)((0,y.c)(W+R,O,1e5,Math.ceil),0,O)}return p.length>1&&(0,v.c)(p).asc((e=>e[3])),p.length>0?p[0]:[-1,-1,-1,-1,null]}hitScanBoldFind(e,t,n,a,i,o,s,r){let u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[];const p=new Array,d=e=>u.includes(e),g=this.trees[e],[m,f,w]=this.getWorldSize(),b=(0,c.p)(m,f,w,0,0,0),[x,M,E,_]=this.hitScanVoxelBoldFindMax(t,n,a,i,o,s,b),C=Math.min(r,_,(0,c.p)(m,f,w,0,0,0)),[T,S,k]=(0,c.r)(t,n,0,0,C),O=Math.min((0,c.p)(T,S,k,0,0,0),this.getWorldDistance()),[A,L,P,I]=this.hitScanVoxelBoldFindMin(t,n,a,i,o,s,r);if(-1!==A&&-1!==L&&-1!==P&&p.push([A,L,P,I,null]),-1!==x&&-1!==M&&-1!==E){const[e,t]=(0,c.n)(T,S,k,0,0,0),[n,r,u]=(0,c.r)(e,t,0,0,1),m=Math.min(O,s/2,.5);Math.max(...this.getWorldSize());let f=0,v=!1;for(;;){const e=a+f*n,t=i+f*r,w=o+f*u,b=(0,h.c)(e,t-s/2,w,s,s);for(let n=0,r=0|b.length;n<r;n=n+3|0){const r=b[n+0],h=b[n+1],u=b[n+2],m=g.getPointCell(r,h,u);for(let n=0,r=0|m.length;n<r;n=n+1|0){const r=m[n],h=this.getEntityOfID(r);if(null===h||!h.hasLive()||d(r)||h.getNames().some(d))continue;const[u,f,b,x,M]=g.getEntityProperty(h);if(-1===u&&-1===f&&-1===b)continue;let[E,_,T,S,k]=g.getOldEntityProperty(h);E=-1===E?u:E,_=-1===_?f:_,T=-1===T?b:T,S=S?x:S,k=k?M:k;const O=u-E,A=f-_,L=b-T,[P,I]=(0,c.n)(O,A,L,0,0,0),[N,R,W]=(0,c.r)(P,I,0,0,1),z=Math.min((0,c.p)(O,A,L,0,0,0),this.getWorldDistance()),D=Math.min(z,Math.max(Math.min(x,M),Math.min(S,k))/2,.5);let F=0;for(;;){const n=E+F*N,r=_+F*R,u=T+F*W,d=(0,y.c)((0,y.e)(F/z),0),g=S+(x-S)*d,m=k+(M-k)*d;if((0,l.e)(e,t-s/2,w,s,s,n,r,u,g,m)){const n=(0,c.p)(e,t,w,a,i,o);if(n<C){p.push([e,t,w,n,h]),v=!0;break}}if(F>=z)break;if(F=(0,y.a)((0,y.c)(F+D,z,1e5,Math.ceil),0,z),F<=0)break}}}if(v||f>=O)break;f=(0,y.a)((0,y.c)(f+m,O,1e5,Math.ceil),0,O)}}return p.length>1&&(0,v.c)(p).asc((e=>e[3])),p.length>0?p[0]:[-1,-1,-1,-1,null]}hitScanVoxelBoldFindMin(e,t,n,a,i,o){let s=-1,r=-1,l=-1,h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1/0;const u=o/2;let p=!1;for(let o=0,d=0|k.length;o<d;o=o+1|0){const d=(0,c.m)(k[o][0],k[o][1],0,0),g=Math.cos(d)*u,m=Math.sin(d)*u,[f,y,v]=(0,c.r)(e,t,g,m,0),[w,b,x,M]=this.hitScanVoxel(e,t,n+f,a+y,i+v,h);-1!==w&&-1!==b&&-1!==x&&M<h&&(s=w-f,r=b-y,l=x-v,h=M,p=!0)}return[s,r,l,p?h:-1]}hitScanVoxelBoldFindMax(e,t,n,a,i,o){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1/0,r=-1,l=-1,h=-1,u=0;const p=o/2;let d=!1;for(let o=0,g=0|k.length;o<g;o=o+1|0){const g=(0,c.m)(k[o][0],k[o][1],0,0),m=Math.cos(g)*p,f=Math.sin(g)*p,[y,v,w]=(0,c.r)(e,t,m,f,0),[b,x,M,E]=this.hitScanVoxel(e,t,n+y,a+v,i+w,s);-1!==b&&-1!==x&&-1!==M&&E>u&&(r=b-y,l=x-v,h=M-w,u=E,d=!0)}return[r,l,h,d?u:-1]}hitScanVoxelBold(e,t,n,a,i,o,s){const r=new Array,[l,u,p]=this.getWorldSize(),d=Math.min(s,(0,c.p)(l,u,p,0,0,0)),[g,m,f]=(0,c.r)(e,t,0,0,d),[w,b]=(0,c.n)(g,m,f,0,0,0),[x,M,E]=(0,c.r)(w,b,0,0,1),_=Math.min(d,o/2,.5);let C=0;const T=this.getMap();for(;;){const s=n+C*x,g=a+C*M,m=i+C*E,f=(0,h.c)(s,g-o/2,m,o,o);for(let o=0,h=0|f.length;o<h;o=o+3|0){const h=f[o+0],d=f[o+1],y=f[o+2];if(0>h||l<=h||0>d||u<=d||0>y||p<=y||T.get(0,h,d,y)>0){const[o,l]=(0,c.n)(h+.5,d+.5,y+.5,s,g,m),u=(0,c.p)(h+.5,d+.5,y+.5,s,g,m),p=Math.cos(o)+Math.sin(o),f=Math.sin(l)+Math.cos(l),[v,w,b]=(0,c.r)(e,t,0,0,u-Math.sqrt(Math.max(p*p,f*f))+(0,c.p)(s,g,m,n,a,i));r.push([v+n,w+a,b+i,(0,c.p)(v+n,w+a,b+i,n,a,i),null]);break}}if(C>=d)break;if(C=(0,y.a)((0,y.c)(C+_,d,1e5,Math.ceil),0,d),C<=0)break}return r.length>1&&(0,v.c)(r).asc((e=>e[3])),r[0]||[-1,-1,-1,-1,null]}hitScanBoldActor(e,t,n,a,i,o,s,r){let u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[];const p=new Array,d=e=>u.includes(e),g=this.trees[e],[m,f,w]=this.getWorldSize(),b=(Math.max(...this.getWorldSize()),Math.min(r,(0,c.p)(m,f,w,0,0,0))),[x,M,E]=(0,c.r)(t,n,0,0,b),[_,C]=(0,c.n)(x,M,E,0,0,0),[T,S,k]=(0,c.r)(_,C,0,0,1),O=Math.min(b,s/2,.5);let A=0,L=!1;for(;;){const e=a+A*T,t=i+A*S,n=o+A*k,r=(0,h.c)(e,t-s/2,n,s,s);for(let h=0,u=0|r.length;h<u;h=h+3|0){const u=r[h+0],m=r[h+1],f=r[h+2],v=g.getPointCell(u,m,f);for(let r=0,h=0|v.length;r<h;r=r+1|0){const h=v[r],u=this.getEntityOfID(h);if(null===u||!u.hasLive()||d(h)||u.getNames().some(d))continue;const[m,f,w,b,x]=g.getEntityProperty(u);if(-1===m&&-1===f&&-1===w)continue;let[M,E,_,C,T]=g.getOldEntityProperty(u);M=-1===M?m:M,E=-1===E?f:E,_=-1===_?w:_,C=C?b:C,T=T?x:T;const S=m-M,k=f-E,O=w-_,[A,P]=(0,c.n)(S,k,O,0,0,0),[I,N,R]=(0,c.r)(A,P,0,0,1),W=Math.min((0,c.p)(S,k,O,0,0,0),this.getWorldDistance()),z=Math.min(W,Math.max(Math.min(b,x),Math.min(C,T))/2,.5);let D=0;for(;;){const r=M+D*I,h=E+D*N,d=_+D*R,g=(0,y.c)((0,y.e)(D/W),0),m=C+(b-C)*g,f=T+(x-T)*g;if((0,l.e)(e,t-s/2,n,s,s,r,h,d,m,f)){const s=(0,c.p)(e,t,n,a,i,o);p.push([e,t,n,s,u]),L=!0;break}if(D>=W)break;if(D=(0,y.a)((0,y.c)(D+z,W,1e5,Math.ceil),0,W),D<=0)break}}}if(L||A>=b)break;A=(0,y.a)((0,y.c)(A+O,b,1e5,Math.ceil),0,b)}return p.length>1&&(0,v.c)(p).asc((e=>e[3])),p[0]||[-1,-1,-1,-1,null]}hasBlockScale(e,t,n,a,i,o){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:new Array;if(this.hasBlockScaleVoxel(t,n,a,i,o))return!0;const r=this.trees[e],u=e=>s.includes(e),p=(0,h.c)(t,n,a,i,o);for(let e=0,s=0|p.length;e<s;e=e+3|0){const s=p[e],h=p[e+1],d=p[e+2],g=r.getPointCell(s,h,d);for(let e=0,s=0|g.length;e<s;e=e+1|0){const s=g[e],h=this.getEntityOfID(s);if(null===h||!h.hasLive()||u(s)||h.getNames().some(u))continue;const[p,d,m,f,v]=r.getEntityProperty(h);if(-1===p&&-1===d&&-1===m)continue;let[w,b,x,M,E]=r.getOldEntityProperty(h);w=-1===w?p:w,b=-1===b?d:b,x=-1===x?m:x,M=M?f:M,E=E?v:E;const _=p-w,C=d-b,T=m-x,[S,k]=(0,c.n)(_,C,T,0,0,0),[O,A,L]=(0,c.r)(S,k,0,0,1),P=Math.min((0,c.p)(_,C,T,0,0,0),this.getWorldDistance()),I=Math.min(P,Math.max(Math.min(f,v),Math.min(M,E))/2,.5);let N=0;for(;;){const e=w+N*O,s=b+N*A,r=x+N*L,h=(0,y.c)((0,y.e)(N/P),0),c=M+(f-M)*h,u=E+(v-E)*h;if((0,l.e)(t,n,a,i,o,e,s,r,c,u))return!0;if(N>=P)break;if(N=(0,y.a)((0,y.c)(N+I,P,1e5,Math.ceil),0,P),N<=0)break}}}return!1}hasBlockScaleVoxel(e,t,n,a,i){const o=this.getMap();return(0,l.d)(e,t,n,a,i,((e,t,n,a)=>o.get(0,t,n,a)>0))}hasHitScanVoxel(e,t,n,a,i,o){return(0,h.e)(e,t,n,a,i,o,this.getWorldSize(),((e,t,n)=>this.getDistanceField(e,t,n)))}hasHitScan(e,t,n,a,i,o,s){let r=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[];const u=this.trees[e],p=e=>r.includes(e);let d=!1;return(0,h.f)(t,n,a,i,o,s,this.getWorldSize(),((e,t,n)=>!O(this.getVoxel(e,t,n),g.u)),((e,s,r,h,g,m,f,v,w,b,x,M,E,_,C,T,S,k)=>{const O=u.getPointCell(e,s,r);for(let e=0,s=0|O.length;e<s;e=e+1|0){const s=O[e],r=this.getEntityOfID(s);if(null===r||!r.hasLive()||p(s)||r.getNames().some(p))continue;const[f,v,w,b,x]=u.getEntityProperty(r);if(-1===f&&-1===v&&-1===w)continue;let[M,E,_,C,T]=u.getOldEntityProperty(r);M=-1===M?f:M,E=-1===E?v:E,_=-1===_?w:_,C=C?b:C,T=T?x:T;const S=f-M,k=v-E,A=w-_,[L,P]=(0,c.n)(S,k,A,0,0,0),[I,N,R]=(0,c.r)(L,P,0,0,1),W=Math.min((0,c.p)(S,k,A,0,0,0),this.getWorldDistance()),z=Math.min(W,Math.max(Math.min(b,x),Math.min(C,T))/2,.5);let D=0;for(;;){const e=M+D*I,s=E+D*N,r=_+D*R,c=(0,y.c)((0,y.e)(D/W),0),u=C+(b-C)*c,p=T+(x-T)*c;if((a<h?a<e+u/2:h<e+u/2)&&(i<g?i<s+p:g<s+p)&&(o<m?o<r+u/2:m<r+u/2)&&(a>h?a>e-u/2:h>e-u/2)&&(i>g?i>s:g>s)&&(o>m?o>r-u/2:m>r-u/2)){const[h,c,g]=(0,l.a)(a,i,o,t,n,e,s,r,e,s+p,r,u);if(-1!==h&&-1!==c&&-1!==g)return d=!0,!0}if(D>=W)break;if(D=(0,y.a)((0,y.c)(D+z,W,1e5,Math.ceil),0,W),D<=0)break}}return!1}))||d}hasHitScanActor(e,t,n,a,i,o,s){let r=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[];const u=this.trees[e],p=e=>r.includes(e);let d=!1;return(0,h.f)(t,n,a,i,o,s,this.getWorldSize(),((e,t,n)=>!O(this.getVoxel(e,t,n),g.u)),((e,s,r,h,g,m,f,v,w,b,x,M,E,_,C,T,S,k)=>{const O=u.getPointCell(e,s,r);for(let e=0,s=0|O.length;e<s;e=e+1|0){const s=O[e],r=this.getEntityOfID(s);if(null===r||!r.hasLive()||p(s)||r.getNames().some(p))continue;const[f,v,w,b,x]=u.getEntityProperty(r);if(-1===f&&-1===v&&-1===w)continue;let[M,E,_,C,T]=u.getOldEntityProperty(r);M=-1===M?f:M,E=-1===E?v:E,_=-1===_?w:_,C=C?b:C,T=T?x:T;const S=f-M,k=v-E,A=w-_,[L,P]=(0,c.n)(S,k,A,0,0,0),[I,N,R]=(0,c.r)(L,P,0,0,1),W=Math.min((0,c.p)(S,k,A,0,0,0),this.getWorldDistance()),z=Math.min(W,Math.max(Math.min(b,x),Math.min(C,T))/2,.5);let D=0;for(;;){const e=M+D*I,s=E+D*N,r=_+D*R,c=(0,y.c)((0,y.e)(D/W),0),u=C+(b-C)*c,p=T+(x-T)*c;if((a<h?a<e+u/2:h<e+u/2)&&(i<g?i<s+p:g<s+p)&&(o<m?o<r+u/2:m<r+u/2)&&(a>h?a>e-u/2:h>e-u/2)&&(i>g?i>s:g>s)&&(o>m?o>r-u/2:m>r-u/2)){const[h,c,g]=(0,l.a)(a,i,o,t,n,e,s,r,e,s+p,r,u);if(-1!==h&&-1!==c&&-1!==g)return d=!0,!0}if(D>=W)break;if(D=(0,y.a)((0,y.c)(D+z,W,1e5,Math.ceil),0,W),D<=0)break}}return!1})),d}hasHitScanBold(e,t,n,a,i,o,s){let r=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1/0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:new Array;const p=e=>u.includes(e),d=this.trees[e],[g,m,f]=this.getWorldSize(),v=(0,c.p)(g,m,f,0,0,0);let[w,b,x,M]=this.hitScanVoxelBoldFindMin(t,n,a,i,o,s,v);const E=Math.min(r,M,(0,c.p)(g,m,f,0,0,0)),[_,C,T]=(0,c.r)(t,n,0,0,E),S=Math.min((0,c.p)(_,C,T,0,0,0),this.getWorldDistance());if(-1!==w&&-1!==b&&-1!==x){const[e,t]=(0,c.n)(_,C,T,0,0,0),[n,r,u]=(0,c.r)(e,t,0,0,1),g=Math.min(S,s/2,.5);Math.max(...this.getWorldSize());let m=0,f=!1;for(;;){const e=a+m*n,t=i+m*r,v=o+m*u,w=(0,h.c)(e,t-s/2,v,s,s);for(let n=0,r=0|w.length;n<r;n=n+3|0){const r=w[n+0],h=w[n+1],u=w[n+2],g=d.getPointCell(r,h,u);for(let n=0,r=0|g.length;n<r;n=n+1|0){const r=g[n],h=this.getEntityOfID(r);if(null===h||!h.hasLive()||p(r)||h.getNames().some(p))continue;const[u,m,f,w,b]=d.getEntityProperty(h);if(-1===u&&-1===m&&-1===f)continue;let[x,M,_,C,T]=d.getOldEntityProperty(h);x=-1===x?u:x,M=-1===M?m:M,_=-1===_?f:_,C=C?w:C,T=T?b:T;const S=u-x,k=m-M,O=f-_,[A,L]=(0,c.n)(S,k,O,0,0,0),[P,I,N]=(0,c.r)(A,L,0,0,1),R=Math.min((0,c.p)(S,k,O,0,0,0),this.getWorldDistance()),W=Math.min(R,Math.max(Math.min(w,b),Math.min(C,T))/2,.5);let z=0;for(;;){const n=x+z*P,r=M+z*I,h=_+z*N,u=(0,y.c)((0,y.e)(z/R),0),p=C+(w-C)*u,d=T+(b-T)*u;if((0,l.e)(e,t-s/2,v,s,s,n,r,h,p,d)){if((0,c.p)(e,t,v,a,i,o)<E)return!0}if(z>=R)break;if(z=(0,y.a)((0,y.c)(z+W,R,1e5,Math.ceil),0,R),z<=0)break}}}if(f||m>=S)break;m=(0,y.a)((0,y.c)(m+g,S,1e5,Math.ceil),0,S)}}return-1!==M&&M<=S}hasHitScanVoxelBold(e,t,n,a,i,o){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1/0;const[r,l,u]=this.getWorldSize(),p=Math.min(s,(0,c.p)(r,l,u,0,0,0)),[d,m,f]=(0,c.r)(e,t,0,0,p),[v,w]=(Math.max(...this.getWorldSize()),(0,c.n)(d,m,f,0,0,0)),[b,x,M]=(0,c.r)(v,w,0,0,1),E=Math.min(p,o/2,.5);let _=0;for(;;){const e=n+_*b,t=a+_*x,s=i+_*M,c=(0,h.c)(e,t-o/2,s,o,o);for(let e=0,t=0|c.length;e<t;e=e+3|0){const t=c[e+0],n=c[e+1],a=c[e+2];if(0>t||r<=t||0>n||l<=n||0>a||u<=a||!O(this.getVoxel(t,n,a),g.u))return!0}if(_>=p)break;if(_=(0,y.a)((0,y.c)(_+E,p,1e5,Math.ceil),0,p),_<=0)break}return!1}hasHitScanBoldActor(e,t,n,a,i,o,s,r){let u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[];const p=this.trees[e],d=e=>u.includes(e),[g,m,f]=this.getWorldSize(),v=Math.min(r,(0,c.p)(g,m,f,0,0,0)),[w,b,x]=(0,c.r)(t,n,0,0,v),[M,E]=(Math.max(...this.getWorldSize()),(0,c.n)(w,b,x,0,0,0)),[_,C,T]=(0,c.r)(M,E,0,0,1),S=Math.min(v,s/2,.5);let k=0;for(;;){const e=a+k*_,t=i+k*C,n=o+k*T,r=(0,h.c)(e,t-s/2,n,s,s);for(let a=0,i=0|r.length;a<i;a=a+3|0){const i=r[a+0],o=r[a+1],h=r[a+2],u=p.getPointCell(i,o,h);for(let a=0,i=0|u.length;a<i;a=a+1|0){const i=u[a],o=this.getEntityOfID(i);if(null===o||!o.hasLive()||d(i)||o.getNames().some(d))continue;const[r,h,g,m,f]=p.getEntityProperty(o);if(-1===r&&-1===h&&-1===g)continue;let[v,w,b,x,M]=p.getOldEntityProperty(o);v=-1===v?r:v,w=-1===w?h:w,b=-1===b?g:b,x=x?m:x,M=M?f:M;const E=r-v,_=h-w,C=g-b,[T,S]=(0,c.n)(E,_,C,0,0,0),[k,O,A]=(0,c.r)(T,S,0,0,1),L=Math.min((0,c.p)(E,_,C,0,0,0),this.getWorldDistance()),P=Math.min(L,Math.max(Math.min(m,f),Math.min(x,M))/2,.5);let I=0;for(;;){const a=v+I*k,i=w+I*O,o=b+I*A,r=(0,y.c)((0,y.e)(I/L),0),h=x+(m-x)*r,c=M+(f-M)*r;if((0,l.e)(e,t-s/2,n,s,s,a,i,o,h,c))return!0;if(I>=L)break;if(I=(0,y.a)((0,y.c)(I+P,L,1e5,Math.ceil),0,L),I<=0)break}}}if(k>=v)break;if(k=(0,y.a)((0,y.c)(k+S,v,1e5,Math.ceil),0,v),k<=0)break}return!1}expandPosition(){const[e,t,n]=this.getWorldSize(),a=this.getMargin();let i=0,o=0,r=0,l=e-1,h=t-1,c=n-1;const u=this.getMap();e:for(;i<e;){for(let e=0;e<n;e=e+1|0)for(let n=0;n<t;n=n+1|0){if(u.get(0,i,n,e)>0)break e}i+=1}e:for(;l>=0;){for(let e=0;e<n;e=e+1|0)for(let n=0;n<t;n=n+1|0){if(u.get(0,l,n,e)>0)break e}l+=-1}e:for(;o<t;){for(let t=0;t<e;t=t+1|0)for(let e=0;e<n;e=e+1|0){if(u.get(0,t,o,e)>0)break e}o+=1}e:for(;h>=0;){for(let t=0;t<e;t=t+1|0)for(let e=0;e<n;e=e+1|0){if(u.get(0,t,h,e)>0)break e}h+=-1}e:for(;r<n;){for(let n=0;n<e;n=n+1|0)for(let e=0;e<t;e=e+1|0){if(u.get(0,n,e,r)>0)break e}r+=1}e:for(;c>=0;){for(let n=0;n<e;n=n+1|0)for(let e=0;e<t;e=e+1|0){if(u.get(0,n,e,c)>0)break e}c+=-1}let p=0,d=0,g=0;this.offset.left=a,p+=Math.min(0,i-a),this.offset.right=l+a,p+=Math.max(0,l+a-(e-1)),this.offset.bottom=a,d+=Math.min(0,o-a),this.offset.top=h+a,d+=Math.max(0,h+a-(t-1)),this.offset.back=a,g+=Math.min(0,r-a),this.offset.front=c+a,g+=Math.max(0,c+a-(n-1)),this.map.expand(p,d,g);const m=this.getEntitys(),f=Math.abs(p<0?p:0),y=Math.abs(d<0?d:0),v=Math.abs(g<0?g:0);for(let e=0,t=0|m.length;e<t;e=e+1|0){const t=m[e];if(!(t instanceof s.a))continue;const{position:n}=t;n.x+=f,n.y+=y,n.z+=v}}reductionPosition(){const[e,t,n]=this.getWorldSize(),a=this.getMargin();let i=0,o=0,r=0,l=e-1,h=t-1,c=n-1;const u=this.getMap();e:for(;i<e;){for(let e=0;e<n;e=e+1|0)for(let n=0;n<t;n=n+1|0){if(u.get(0,i,n,e)>0)break e}i+=1}e:for(;l>=0;){for(let e=0;e<n;e=e+1|0)for(let n=0;n<t;n=n+1|0){if(u.get(0,l,n,e)>0)break e}l+=-1}e:for(;o<t;){for(let t=0;t<e;t=t+1|0)for(let e=0;e<n;e=e+1|0){if(u.get(0,t,o,e)>0)break e}o+=1}e:for(;h>=0;){for(let t=0;t<e;t=t+1|0)for(let e=0;e<n;e=e+1|0){if(u.get(0,t,h,e)>0)break e}h+=-1}e:for(;r<n;){for(let n=0;n<e;n=n+1|0)for(let e=0;e<t;e=e+1|0){if(u.get(0,n,e,r)>0)break e}r+=1}e:for(;c>=0;){for(let n=0;n<e;n=n+1|0)for(let e=0;e<t;e=e+1|0){if(u.get(0,n,e,c)>0)break e}c+=-1}let p=0,d=0,g=0;this.offset.left=a,p+=Math.min(0,a-i),this.offset.right=l+a,p+=Math.max(0,e-1-(l+a)),this.offset.bottom=a,d+=Math.min(0,a-o),this.offset.top=h+a,d+=Math.max(0,t-1-(h+a)),this.offset.back=a,g+=Math.min(0,a-r),this.offset.front=c+a,g+=Math.max(0,n-1-(c+a)),this.map.reduction(p,d,g);const m=this.getEntitys(),f=Math.abs(p<0?p:0),y=Math.abs(d<0?d:0),v=Math.abs(g<0?g:0);for(let e=0,t=0|m.length;e<t;e=e+1|0){const t=m[e];if(!(t instanceof s.a))continue;const{position:n}=t;n.x-=f,n.y-=y,n.z-=v}}findPath(e,t,n,a){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:(e,t)=>{t.block=!0},o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e=>!0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e=>e.step,r=arguments.length>7&&void 0!==arguments[7]?arguments[7]:()=>!0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:()=>0;return this.finder.find(e,t,n,a,i,o,s,r,l)}createTransferVoxelData(e,t,n){return n=n||this.isForceUpdate,this.isForceUpdate=!1,this.transferDataBuilder.createData(e,this.renderEntitys,t,n)}onecsend(e){const[t,n,a]=this.getWorldSize();for(const e in this.trees){this.trees[e].update(t,n,a)}}onsyncentity(e){const{entitys:t}=e;for(let e=0,n=0|t.length;e<n;e=e+1|0){const n=t[e];n instanceof s.a&&(!this.renderEntitys.includes(n)||n.hasComponent(b.a)&&n.hasComponent(x.a)?n.hasComponent(b.a)&&n.hasComponent(x.a)&&!this.renderEntitys.includes(n)&&this.renderEntitys.push(n):this.renderEntitys.splice(this.renderEntitys.indexOf(n),1))}}onremoveentity(e){const{entitys:t}=e;for(let e=0,n=0|t.length;e<n;e=e+1|0){const n=t[e];for(const e in this.trees){this.trees[e].remove(n)}}for(let e=0,n=0|t.length;e<n;e=e+1|0){const n=t[e];n instanceof s.a&&(this.renderEntitys.includes(n)&&this.renderEntitys.splice(this.renderEntitys.indexOf(n),1))}}onupdatebegin(e){this.starttime=performance.now(),super.onupdatebegin(e),this.finder.begin()}onupdate(e){super.onupdate(e);const{time:t,framerate:n}=e;this.lateTime+=t,this.finder.update(t*(1e3/60),this.starttime,n,this.maxFramerate)}}a()}catch(L){a(L)}}))},(e,t,n)=>{"use strict";n.d(t,{a:()=>o});var a=n(0);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;i(this,"enable",!0),i(this,"exec",!1),i(this,"through",!1),i(this,"value",0),i(this,"press",!1),i(this,"angle",0),i(this,"move",!1),i(this,"blockPositionTop",-1),i(this,"time",0),i(this,"flip",null),i(this,"standJump",!1),i(this,"canJump",!1),i(this,"canClimb",!1),i(this,"canThroug",!1),i(this,"canMove",!1),i(this,"hasJump",!1),i(this,"climb",!1),i(this,"oldHit",!1),i(this,"start",new a.f(0,0,0)),i(this,"end",new a.f(0,0,0)),i(this,"last",new a.f(0,0,0)),i(this,"oldPosition",new a.f(-1,-1,-1)),i(this,"grabPosition",new a.f(-1,-1,-1)),i(this,"height",void 0),i(this,"clumbSpeed",void 0),i(this,"grabSpeed",void 0),this.height=e,this.clumbSpeed=t,this.grabSpeed=n}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>m,b:()=>g});var a=n(311),i=n.n(a),o=n(312),s=n.n(o),r=n(224),l=n(91),h=n(22);const c={electron:i()(),mobile:!1,steam:!1,steam_overlay:!1};function u(e,t){!!c[t]!==e&&(c[t]=e,l.f.postMessage({method:"change",type:t,value:e}))}let p=g()?0:-1;function d(){p=setTimeout(d,0),u(s()(),"mobile"),u(i()(),"electron"),u("electron"in self&&self.electron.hasSteam(),"steam"),u("electron"in self&&self.electron.hasOpenSteamOverlay(),"steam_overlay")}function g(){if(!g.init){let e=self;try{e=scope}catch(e){}g.isWorker="postMessage"in e&&e.postMessage instanceof Function&&"importScripts"in e&&e.importScripts instanceof Function}return g.init=!0,!!g.isWorker}function m(){return!!c.electron}g()?(0,h.b)(l.f,"message",(e=>{const{data:t}=e;if(t instanceof Object&&"change"===t.method)c[t.type]=!!t.value})):(0,r.a)((function(){-1===p&&(p=setTimeout(d,0))}))},(e,t,n)=>{"use strict";n.d(t,{a:()=>ee,b:()=>ne,c:()=>ie,d:()=>Q,e:()=>te,f:()=>ae});n(375),n(15),n(16),n(376),n(1),n(2),n(14),n(18),n(7),n(106);Promise.resolve(!1);var a=Promise.resolve(!0),i=Promise.resolve();function o(e,t){return e||(e=0),new Promise((function(n){return setTimeout((function(){return n(t)}),e)}))}function s(){return Math.random().toString(36).substring(2)}var r=0,l=0;function h(){var e=(new Date).getTime();return e===r?1e3*e+ ++l:(r=e,l=0,1e3*e)}var c="[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0);const u={create:function(e){var t={messagesCallback:null,bc:new BroadcastChannel(e),subFns:[]};return t.bc.onmessage=function(e){t.messagesCallback&&t.messagesCallback(e.data)},t},close:function(e){e.bc.close(),e.subFns=[]},onMessage:function(e,t){e.messagesCallback=t},postMessage:function(e,t){try{return e.bc.postMessage(t,!1),i}catch(e){return Promise.reject(e)}},canBeUsed:function(){if(c&&"undefined"==typeof window)return!1;if("function"==typeof BroadcastChannel){if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0}return!1},type:"native",averageResponseTime:function(){return 150},microSeconds:h};var p=function(){function e(e){this.ttl=e,this.map=new Map,this._to=!1}return e.prototype.has=function(e){return this.map.has(e)},e.prototype.add=function(e){var t=this;this.map.set(e,d()),this._to||(this._to=!0,setTimeout((function(){t._to=!1,function(e){var t=d()-e.ttl,n=e.map[Symbol.iterator]();for(;;){var a=n.next().value;if(!a)return;var i=a[0];if(!(a[1]<t))return;e.map.delete(i)}}(t)}),0))},e.prototype.clear=function(){this.map.clear()},e}();function d(){return(new Date).getTime()}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=JSON.parse(JSON.stringify(e));return void 0===t.webWorkerSupport&&(t.webWorkerSupport=!0),t.idb||(t.idb={}),t.idb.ttl||(t.idb.ttl=45e3),t.idb.fallbackInterval||(t.idb.fallbackInterval=150),e.idb&&"function"==typeof e.idb.onclose&&(t.idb.onclose=e.idb.onclose),t.localstorage||(t.localstorage={}),t.localstorage.removeTimeout||(t.localstorage.removeTimeout=6e4),e.methods&&(t.methods=e.methods),t.node||(t.node={}),t.node.ttl||(t.node.ttl=12e4),t.node.maxParallelWrites||(t.node.maxParallelWrites=2048),void 0===t.node.useFastPath&&(t.node.useFastPath=!0),t}var m="messages",f={durability:"relaxed"};function y(){if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof window){if(void 0!==window.mozIndexedDB)return window.mozIndexedDB;if(void 0!==window.webkitIndexedDB)return window.webkitIndexedDB;if(void 0!==window.msIndexedDB)return window.msIndexedDB}return!1}function v(e){e.commit&&e.commit()}function w(e,t){var n=e.transaction(m,"readonly",f),a=n.objectStore(m),i=[],o=IDBKeyRange.bound(t+1,1/0);if(a.getAll){var s=a.getAll(o);return new Promise((function(e,t){s.onerror=function(e){return t(e)},s.onsuccess=function(t){e(t.target.result)}}))}return new Promise((function(e,s){var r=function(){try{return o=IDBKeyRange.bound(t+1,1/0),a.openCursor(o)}catch(e){return a.openCursor()}}();r.onerror=function(e){return s(e)},r.onsuccess=function(a){var o=a.target.result;o?o.value.id<t+1?o.continue(t+1):(i.push(o.value),o.continue()):(v(n),e(i))}}))}function b(e,t){return function(e,t){var n=(new Date).getTime()-t,a=e.transaction(m,"readonly",f),i=a.objectStore(m),o=[];return new Promise((function(e){i.openCursor().onsuccess=function(t){var i=t.target.result;if(i){var s=i.value;if(!(s.time<n))return v(a),void e(o);o.push(s),i.continue()}else e(o)}}))}(e,t).then((function(t){return function(e,t){var n=e.transaction([m],"readwrite",f).objectStore(m);return Promise.all(t.map((function(e){var t=n.delete(e);return new Promise((function(e){t.onsuccess=function(){return e()}}))})))}(e,t.map((function(e){return e.id})))}))}function x(e){e.closed||M(e).then((function(){return o(e.options.idb.fallbackInterval)})).then((function(){return x(e)}))}function M(e){return e.closed?i:e.messagesCallback?w(e.db,e.lastCursorId).then((function(t){var n=t.filter((function(e){return!!e})).map((function(t){return t.id>e.lastCursorId&&(e.lastCursorId=t.id),t})).filter((function(t){return function(e,t){return!(e.uuid===t.uuid||t.eMIs.has(e.id)||e.data.time<t.messagesCallbackTime)}(t,e)})).sort((function(e,t){return e.time-t.time}));return n.forEach((function(t){e.messagesCallback&&(e.eMIs.add(t.id),e.messagesCallback(t.data))})),i})):i}const E={create:function(e,t){return t=g(t),function(e){var t="pubkey.broadcast-channel-0-"+e,n=y().open(t);return n.onupgradeneeded=function(e){e.target.result.createObjectStore(m,{keyPath:"id",autoIncrement:!0})},new Promise((function(e,t){n.onerror=function(e){return t(e)},n.onsuccess=function(){e(n.result)}}))}(e).then((function(n){var a={closed:!1,lastCursorId:0,channelName:e,options:t,uuid:s(),eMIs:new p(2*t.idb.ttl),writeBlockPromise:i,messagesCallback:null,readQueuePromises:[],db:n};return n.onclose=function(){a.closed=!0,t.idb.onclose&&t.idb.onclose()},x(a),a}))},close:function(e){e.closed=!0,e.db.close()},onMessage:function(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t,M(e)},postMessage:function(e,t){return e.writeBlockPromise=e.writeBlockPromise.then((function(){return function(e,t,n){var a={uuid:t,time:(new Date).getTime(),data:n},i=e.transaction([m],"readwrite",f);return new Promise((function(e,t){i.oncomplete=function(){return e()},i.onerror=function(e){return t(e)},i.objectStore(m).add(a),v(i)}))}(e.db,e.uuid,t)})).then((function(){var t,n;0===(t=0,n=10,Math.floor(Math.random()*(n-t+1)+t))&&b(e.db,e.options.idb.ttl)})),e.writeBlockPromise},canBeUsed:function(){return!c&&!!y()},type:"idb",averageResponseTime:function(e){return 2*e.idb.fallbackInterval},microSeconds:h};function _(){var e;if("undefined"==typeof window)return null;try{e=window.localStorage,e=window["ie8-eventlistener/storage"]||window.localStorage}catch(e){}return e}function C(e){return"pubkey.broadcastChannel-"+e}function T(){if(c)return!1;var e=_();if(!e)return!1;try{var t="__broadcastchannel_check";e.setItem(t,"works"),e.removeItem(t)}catch(e){return!1}return!0}const S={create:function(e,t){if(t=g(t),!T())throw new Error("BroadcastChannel: localstorage cannot be used");var n=s(),a=new p(t.localstorage.removeTimeout),i={channelName:e,uuid:n,eMIs:a};return i.listener=function(e,t){var n=C(e),a=function(e){e.key===n&&t(JSON.parse(e.newValue))};return window.addEventListener("storage",a),a}(e,(function(e){i.messagesCallback&&e.uuid!==n&&e.token&&!a.has(e.token)&&(e.data.time&&e.data.time<i.messagesCallbackTime||(a.add(e.token),i.messagesCallback(e.data)))})),i},close:function(e){var t;t=e.listener,window.removeEventListener("storage",t)},onMessage:function(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t},postMessage:function(e,t){return new Promise((function(n){o().then((function(){var a=C(e.channelName),i={token:s(),time:(new Date).getTime(),data:t,uuid:e.uuid},o=JSON.stringify(i);_().setItem(a,o);var r=document.createEvent("Event");r.initEvent("storage",!0,!0),r.key=a,r.newValue=o,window.dispatchEvent(r),n()}))}))},canBeUsed:T,type:"localstorage",averageResponseTime:function(){var e=navigator.userAgent.toLowerCase();return e.includes("safari")&&!e.includes("chrome")?240:120},microSeconds:h};var k=h,O=new Set;const A={create:function(e){var t={name:e,messagesCallback:null};return O.add(t),t},close:function(e){O.delete(e)},onMessage:function(e,t){e.messagesCallback=t},postMessage:function(e,t){return new Promise((function(n){return setTimeout((function(){Array.from(O).filter((function(t){return t.name===e.name})).filter((function(t){return t!==e})).filter((function(e){return!!e.messagesCallback})).forEach((function(e){return e.messagesCallback(t)})),n()}),5)}))},canBeUsed:function(){return!0},type:"simulate",averageResponseTime:function(){return 5},microSeconds:k};var L=[u,E,S];var P,I=new Set,N=0,R=function(e,t){var n,a,i;this.id=N++,I.add(this),this.name=e,P&&(t=P),this.options=g(t),this.method=function(e){var t=[].concat(e.methods,L).filter(Boolean);if(e.type){if("simulate"===e.type)return A;var n=t.find((function(t){return t.type===e.type}));if(n)return n;throw new Error("method-type "+e.type+" not found")}e.webWorkerSupport||c||(t=t.filter((function(e){return"idb"!==e.type})));var a=t.find((function(e){return e.canBeUsed()}));if(a)return a;throw new Error("No useable method found in "+JSON.stringify(L.map((function(e){return e.type}))))}(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._uMP=new Set,this._befC=[],this._prepP=null,a=(n=this).method.create(n.name,n.options),(i=a)&&"function"==typeof i.then?(n._prepP=a,a.then((function(e){n._state=e}))):n._state=a};function W(e,t,n){var a={time:e.method.microSeconds(),type:t,data:n};return(e._prepP?e._prepP:i).then((function(){var t=e.method.postMessage(e._state,a);return e._uMP.add(t),t.catch().then((function(){return e._uMP.delete(t)})),t}))}function z(e){return e._addEL.message.length>0||e._addEL.internal.length>0}function D(e,t,n){e._addEL[t].push(n),function(e){if(!e._iL&&z(e)){var t=function(t){e._addEL[t.type].forEach((function(e){var n=1e5,a=e.time-n;t.time>=a&&e.fn(t.data)}))},n=e.method.microSeconds();e._prepP?e._prepP.then((function(){e._iL=!0,e.method.onMessage(e._state,t,n)})):(e._iL=!0,e.method.onMessage(e._state,t,n))}}(e)}function F(e,t,n){e._addEL[t]=e._addEL[t].filter((function(e){return e!==n})),function(e){if(e._iL&&!z(e)){e._iL=!1;var t=e.method.microSeconds();e.method.onMessage(e._state,null,t)}}(e)}R._pubkey=!0,R.prototype={postMessage:function(e){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed "+JSON.stringify(e));return W(this,"message",e)},postInternal:function(e){return W(this,"internal",e)},set onmessage(e){var t={time:this.method.microSeconds(),fn:e};F(this,"message",this._onML),e&&"function"==typeof e?(this._onML=t,D(this,"message",t)):this._onML=null},addEventListener:function(e,t){D(this,e,{time:this.method.microSeconds(),fn:t})},removeEventListener:function(e,t){F(this,e,this._addEL[e].find((function(e){return e.fn===t})))},close:function(){var e=this;if(!this.closed){I.delete(this),this.closed=!0;var t=this._prepP?this._prepP:i;return this._onML=null,this._addEL.message=[],t.then((function(){return Promise.all(Array.from(e._uMP))})).then((function(){return Promise.all(e._befC.map((function(e){return e()})))})).then((function(){return e.method.close(e._state)}))}},get type(){return this.method.type},get isClosed(){return this.closed}};var U=n(299),H=n.n(U);const B={add:function(e){if("function"==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope);else{if("function"!=typeof window.addEventListener)return;window.addEventListener("beforeunload",(function(){e()}),!0),window.addEventListener("unload",(function(){e()}),!0)}}};var G=n(379),Y=n.n(G),V=H()?Y():B,j=new Set,K=!1;function X(e){if(K||(K=!0,V.add(q)),"function"!=typeof e)throw new Error("Listener is no function");return j.add(e),{remove:function(){return j.delete(e)},run:function(){return j.delete(e),e()}}}function q(){var e=[];return j.forEach((function(t){e.push(t()),j.delete(t)})),Promise.all(e)}var J=function(e,t){var n=this;this.broadcastChannel=e,this._options=t,this.isLeader=!1,this.hasLeader=!1,this.isDead=!1,this.token=s(),this._aplQ=i,this._aplQC=0,this._unl=[],this._lstns=[],this._dpL=function(){},this._dpLC=!1;var a=function(e){"leader"===e.context&&("death"===e.action&&(n.hasLeader=!1),"tell"===e.action&&(n.hasLeader=!0))};this.broadcastChannel.addEventListener("internal",a),this._lstns.push(a)};function Z(e,t){var n={context:"leader",action:t,token:e.token};return e.broadcastChannel.postInternal(n)}J.prototype={applyOnce:function(e){var t=this;if(this.isLeader)return o(0,!0);if(this.isDead)return o(0,!1);if(this._aplQC>1)return this._aplQ;var n=function(){if(t.isLeader)return a;var n,i=!1,s=new Promise((function(e){n=function(){i=!0,e()}})),r=[],l=function(e){"leader"===e.context&&e.token!=t.token&&(r.push(e),"apply"===e.action&&e.token>t.token&&n(),"tell"===e.action&&(n(),t.hasLeader=!0))};t.broadcastChannel.addEventListener("internal",l);var h=e?4*t._options.responseTime:t._options.responseTime;return Z(t,"apply").then((function(){return Promise.race([o(h),s.then((function(){return Promise.reject(new Error)}))])})).then((function(){return Z(t,"apply")})).then((function(){return Promise.race([o(h),s.then((function(){return Promise.reject(new Error)}))])})).catch((function(){})).then((function(){return t.broadcastChannel.removeEventListener("internal",l),!i&&function(e){e.isLeader=!0,e.hasLeader=!0;var t=X((function(){return e.die()}));e._unl.push(t);var n=function(t){"leader"===t.context&&"apply"===t.action&&Z(e,"tell"),"leader"!==t.context||"tell"!==t.action||e._dpLC||(e._dpLC=!0,e._dpL(),Z(e,"tell"))};return e.broadcastChannel.addEventListener("internal",n),e._lstns.push(n),Z(e,"tell")}(t).then((function(){return!0}))}))};return this._aplQC=this._aplQC+1,this._aplQ=this._aplQ.then((function(){return n()})).then((function(){t._aplQC=t._aplQC-1})),this._aplQ.then((function(){return t.isLeader}))},awaitLeadership:function(){return this._aLP||(this._aLP=function(e){if(e.isLeader)return i;return new Promise((function(t){var n=!1;function a(){n||(n=!0,e.broadcastChannel.removeEventListener("internal",i),t(!0))}e.applyOnce().then((function(){e.isLeader&&a()})),function t(){return o(e._options.fallbackInterval).then((function(){if(!e.isDead&&!n)return e.isLeader?void a():e.applyOnce(!0).then((function(){e.isLeader?a():t()}))}))}();var i=function(t){"leader"===t.context&&"death"===t.action&&(e.hasLeader=!1,e.applyOnce().then((function(){e.isLeader&&a()})))};e.broadcastChannel.addEventListener("internal",i),e._lstns.push(i)}))}(this)),this._aLP},set onduplicate(e){this._dpL=e},die:function(){var e=this;return this._lstns.forEach((function(t){return e.broadcastChannel.removeEventListener("internal",t)})),this._lstns=[],this._unl.forEach((function(e){return e.remove()})),this._unl=[],this.isLeader&&(this.hasLeader=!1,this.isLeader=!1),this.isDead=!0,Z(this,"death")}};n(22);new Array,new Array;new Array,new Array;let $=null;function Q(){if(null===$)try{$=scope}catch(e){$=self}return $}const ee="BroadcastChannel"in self?self.BroadcastChannel:class extends R{addEventListener(e,t){super.addEventListener(e,(n=>{t(new MessageEvent(e,{data:n}))}))}};function te(e){return"requestAnimationFrame"in self?self.requestAnimationFrame(e):setTimeout(e,0)}function ne(e){"cancelAnimationFrame"in self?self.cancelAnimationFrame(e):clearTimeout(e)}function ae(e){return setTimeout(e,0)}function ie(e){clearTimeout(e)}},e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},(e,t,n)=>{var a=n(3),i=n(273),o=n(17),s=n(98),r=n(21)("toStringTag"),l=a.Object,h="Arguments"==s(function(){return arguments}());e.exports=i?s:function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=l(e),r))?n:h?s(t):"Object"==(a=s(t))&&o(t.callee)?"Arguments":a}},(e,t,n)=>{"use strict";n.d(t,{a:()=>l,b:()=>c,c:()=>h});n(1),n(2),n(7),n(175),n(15),n(16),n(14);var a=n(85),i=n(22),o=n(297);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const r=new WeakMap;class l{constructor(e){s(this,"id",(0,a.a)()),s(this,"names",void 0),s(this,"components",new WeakMap),s(this,"live",!0),s(this,"isUpdate",!0);for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.setComponents(...n),this.names="".concat(e.length>0?"".concat(e," "):"").concat(this.id).split(" ")}getID(){return this.id}getNames(){return[...this.names]}addNames(){for(let e=0,t=0|arguments.length;e<t;e=e+1|0){const t=e<0||arguments.length<=e?void 0:arguments[e];this.names.includes(t)||(this.names.push(t),this.isUpdate=!0)}}removeNames(){for(let e=0,t=0|arguments.length;e<t;e=e+1|0){const t=e<0||arguments.length<=e?void 0:arguments[e];this.names.includes(t)&&(this.names.splice(this.names.indexOf(t),1),this.isUpdate=!0)}}setComponents(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach((e=>{if(!e)return;let t=e;do{this.components.set(t.constructor,e)}while(null!==(t=t.constructor.prototype.__proto__));this.isUpdate=!0}))}getComponent(e){return this.components.get(e)}hasComponent(e){return this.components.has(e)}removeComponent(e){this.components.has(e)&&(this.components.delete(e),this.isUpdate=!0)}checkUpdate(){const{isUpdate:e}=this;return this.isUpdate=!1,e}hasUpdate(){return this.isUpdate}hasLive(){return this.live}remove(){this.live=!1}destroy(){}}class h{constructor(e){s(this,"id",(0,a.a)()),s(this,"entity",void 0),s(this,"components",new Array),this.entity=e;for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.components.push(...n)}hasEntity(e){return e instanceof this.entity&&!this.components.some((t=>!e.hasComponent(t)))}additional(e,t,n){}movable(e,t,n){}physical(e,t,n){}offset(e,t,n){}preadditional(e,t){}premovable(e,t){}prephysical(e,t){}preoffset(e,t){}ended(e,t){}preended(e){}rendering(e,t){}destructor(e,t){}}class c extends o.a{constructor(){super(...arguments),s(this,"id",(0,a.a)()),s(this,"additionals",new Array),s(this,"movables",new Array),s(this,"physicals",new Array),s(this,"offsets",new Array),s(this,"preadditionals",new Array),s(this,"premovables",new Array),s(this,"prephysicals",new Array),s(this,"preoffsets",new Array),s(this,"preendeds",new Array),s(this,"endeds",new Array),s(this,"renderings",new Array),s(this,"destructors",new Array),s(this,"heapSystem",new WeakMap),s(this,"entitys",new Array),s(this,"stands",new Array),s(this,"entitysID",{}),s(this,"entitysName",{})}getID(){return this.id}addSystems(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach((e=>{e.additional!==h.prototype.additional&&this.additionals.push(e),e.movable!==h.prototype.movable&&this.movables.push(e),e.physical!==h.prototype.physical&&this.physicals.push(e),e.offset!==h.prototype.offset&&this.offsets.push(e),e.preadditional!==h.prototype.preadditional&&this.preadditionals.push(e),e.premovable!==h.prototype.premovable&&this.premovables.push(e),e.prephysical!==h.prototype.prephysical&&this.prephysicals.push(e),e.preoffset!==h.prototype.preoffset&&this.preoffsets.push(e),e.ended!==h.prototype.ended&&this.endeds.push(e),e.preended!==h.prototype.preended&&this.preendeds.push(e),e.rendering!==h.prototype.rendering&&this.renderings.push(e),e.destructor!==h.prototype.destructor&&this.destructors.push(e)}))}checkEntitys(){for(;this.stands.length>0;){const e=this.stands.shift()||null;null!==e&&(this.entitys.push(e),this.entitysID[e.getID()]=e)}}syncEntitys(){const e=[...this.additionals,...this.movables,...this.physicals,...this.offsets,...this.renderings,...this.destructors];for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];for(let t=0,a=0|n.length;t<a;t=t+1|0){const a=n[t],i=a.getNames();for(let e=0,t=0|i.length;e<t;e=e+1|0){const t=i[e];this.entitysName.hasOwnProperty(t)||(this.entitysName[t]=new Array);const n=this.entitysName[t]||null;null===n||n.includes(a)||n.push(a)}const o=r.get(a)||[];for(let e=0,t=0|o.length;e<t;e=e+1|0){const t=o[e],n=this.entitysName[t]||null;null!==n&&n.includes(a)&&(n.splice(n.indexOf(a),1),0===n.length&&delete this.entitysName[t])}r.set(a,i);for(let t=0,n=0|e.length;t<n;t=t+1|0){const n=e[t];this.heapSystem.has(n)||this.heapSystem.set(n,new Array);const i=this.heapSystem.get(n)||[];n.hasEntity(a)?i.includes(a)||i.push(a):i.includes(a)&&i.splice(i.indexOf(a),1)}}new i.a(this,"syncentity").trigger({entitys:n})}addEntitys(){for(let e=0,t=0|arguments.length;e<t;e=e+1|0){const t=e<0||arguments.length<=e?void 0:arguments[e];this.entitys.includes(t)||this.stands.includes(t)||this.stands.push(t)}}removeEntitys(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const a=[...this.additionals,...this.movables,...this.physicals,...this.offsets];for(let e=0,n=0|this.destructors.length;e<n;e=e+1|0){const n=this.destructors[e],a=(this.heapSystem.get(n)||[]).slice().filter((e=>t.includes(e)));for(let e=0,t=0|a.length;e<t;e=e+1|0){const t=a[e];(!t.hasUpdate()||n.hasEntity(t))&&n.destructor(t,this)}}for(let e=0,n=0|t.length;e<n;e=e+1|0){const n=t[e];this.entitys.splice(this.entitys.indexOf(n),1),delete this.entitysID[n.getID()];const i=n.getNames();for(let e=0,t=0|i.length;e<t;e=e+1|0){const t=i[e],a=this.entitysName[t]||null;null!==a&&a.includes(n)&&(a.splice(a.indexOf(n),1),0===a.length&&delete this.entitysName[t])}n.destroy();for(let e=0,t=0|a.length;e<t;e=e+1|0){const t=a[e],i=this.heapSystem.get(t)||[];i.includes(n)&&i.splice(i.indexOf(n),1)}}new i.a(this,"removeentity").trigger({entitys:t})}hasEntity(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.some((e=>e.hasLive()&&-1!==Object.keys(this.entitys).indexOf(e.getID())))}getEntitys(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e=>!0;return this.entitys.filter((t=>t.hasLive()&&e(t)))}getEntityOfID(e){if(!this.entitysID.hasOwnProperty(e))return null;const t=this.entitysID[e];return t.hasLive()?t:null}getEntitysOfName(){const e=new Array;for(let t=0,n=0|arguments.length;t<n;t=t+1|0){const n=t<0||arguments.length<=t?void 0:arguments[t];this.entitysName.hasOwnProperty(n)&&e.push(...this.entitysName[n].filter((t=>t.hasLive()&&!e.includes(t))))}return e}clear(){for(let e=0,t=0|this.stands.length;e<t;e=e+1|0)this.stands[e].remove();for(let e=0,t=0|this.entitys.length;e<t;e=e+1|0)this.entitys[e].remove();super.clear()}onupdate(e){const{time:t,now:n,framerate:a,fps:o}=e;new i.a(this,"ecsbegin").trigger({time:t,now:n,framerate:a,fps:o});const s=new Array,r=new Array;for(let e=0,t=0|this.entitys.length;e<t;e=e+1|0){const t=this.entitys[e];if(t.hasLive()){if(!t.checkUpdate())continue;s.push(t)}else r.push(t)}s.length>0&&this.syncEntitys(...s),r.length>0&&this.removeEntitys(...r);for(let e=0,n=0|this.preadditionals.length;e<n;e=e+1|0){this.preadditionals[e].preadditional(t,this)}for(let e=0,n=0|this.additionals.length;e<n;e=e+1|0){const n=this.additionals[e],a=(this.heapSystem.get(n)||[]).slice();for(let e=0,i=0|a.length;e<i;e=e+1|0){const i=a[e];i.hasLive()&&(!i.hasUpdate()||n.hasEntity(i))&&n.additional(t,i,this)}}for(let e=0,n=0|this.premovables.length;e<n;e=e+1|0){this.premovables[e].premovable(t,this)}for(let e=0,n=0|this.movables.length;e<n;e=e+1|0){const n=this.movables[e],a=(this.heapSystem.get(n)||[]).slice();for(let e=0,i=0|a.length;e<i;e=e+1|0){const i=a[e];i.hasLive()&&(!i.hasUpdate()||n.hasEntity(i))&&n.movable(t,i,this)}}for(let e=0,n=0|this.prephysicals.length;e<n;e=e+1|0){this.prephysicals[e].prephysical(t,this)}for(let e=0,n=0|this.physicals.length;e<n;e=e+1|0){const n=this.physicals[e],a=(this.heapSystem.get(n)||[]).slice();for(let e=0,i=0|a.length;e<i;e=e+1|0){const i=a[e];i.hasLive()&&(!i.hasUpdate()||n.hasEntity(i))&&n.physical(t,i,this)}}for(let e=0,n=0|this.preoffsets.length;e<n;e=e+1|0){this.preoffsets[e].preoffset(t,this)}for(let e=0,n=0|this.offsets.length;e<n;e=e+1|0){const n=this.offsets[e],a=(this.heapSystem.get(n)||[]).slice();for(let e=0,i=0|a.length;e<i;e=e+1|0){const i=a[e];i.hasLive()&&(!i.hasUpdate()||n.hasEntity(i))&&n.offset(t,i,this)}}for(let e=0,t=0|this.preendeds.length;e<t;e=e+1|0){this.preendeds[e].preended(this)}for(let e=0,t=0|this.endeds.length;e<t;e=e+1|0){const t=this.endeds[e],n=(this.heapSystem.get(t)||[]).slice();for(let e=0,a=0|n.length;e<a;e=e+1|0){const a=n[e];a.hasLive()&&(!a.hasUpdate()||t.hasEntity(a))&&t.ended(a,this)}}this.checkEntitys(),new i.a(this,"ecsend").trigger({time:t,now:n,framerate:a,fps:o})}onpaint(e){for(let e=0,t=0|this.renderings.length;e<t;e=e+1|0){const t=this.renderings[e],n=(this.heapSystem.get(t)||[]).slice();for(let e=0,a=0|n.length;e<a;e=e+1|0){const a=n[e];a.hasLive()&&(!a.hasUpdate()||t.hasEntity(a))&&t.rendering(a,this)}}}}},(e,t,n)=>{"use strict";function a(e,t,n){if(e.hasComponent(c)){const a=e.getComponent(c);if(!a.value.hasOwnProperty(t))return;const i=a.value[t];"number"==typeof i.value&&(i.value+=n)}}function i(e,t,n){if(e.hasComponent(c)){const a=e.getComponent(c);if(!a.value.hasOwnProperty(t))return;a.value[t].value=n}}function o(e,t,n){if(e.hasComponent(c)){const a=e.getComponent(c);if(!a.value.hasOwnProperty(t))return;const i=a.value[t];"number"==typeof i.value&&(((null==i?void 0:i.max)||1/0)<n&&(n=(null==i?void 0:i.max)||1/0),i.value=n)}}function s(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(e.hasComponent(c)){const a=e.getComponent(c);return a.value.hasOwnProperty(t)?a.value[t].value:n}return n}function r(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(e.hasComponent(c)){const a=e.getComponent(c);if(!a.value.hasOwnProperty(t))return n;const i=a.value[t].value;return"number"==typeof i?i:n}return n}function l(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(e.hasComponent(c)){const a=e.getComponent(c);if(!a.value.hasOwnProperty(t))return n;const i=a.value[t].value;return"string"==typeof i?i:n}return n}function h(e,t){if(e.hasComponent(c)){const n=e.getComponent(c).value[t]||null;return null!==n&&void 0!==(null==n?void 0:n.max)&&(null==n?void 0:n.max)||0}return 0}n.d(t,{a:()=>c,b:()=>a,c:()=>s,d:()=>h,e:()=>r,f:()=>l,g:()=>i,h:()=>o});class c{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t,n,a;a={},(n="value")in(t=this)?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a;for(const t in e)this.value[t]=e[t]}}},(e,t,n)=>{"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{a:()=>i});class i{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};a(this,"isDeath",!1),a(this,"deathAngle",0),a(this,"attacker",null),a(this,"recoveryStartTime",0),a(this,"recoveryWait",void 0),a(this,"recoveryTime",void 0),a(this,"recoveryValue",void 0),a(this,"multiples",void 0),a(this,"value",new Array),a(this,"removes",new Array),this.recoveryWait=e,this.recoveryTime=t,this.recoveryValue=n,this.multiples=i}}},(e,t,n)=>{"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{a:()=>i});class i{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-.325;a(this,"init",!1),a(this,"fall",1),a(this,"isFall",!1),a(this,"value",void 0),a(this,"gravity",void 0),a(this,"flex",void 0),a(this,"max",void 0),this.value=e,this.gravity=t,this.flex=n,this.max=i}}},(e,t,n)=>{var a=n(17);e.exports=function(e){return"object"==typeof e?null!==e:a(e)}},(e,t,n)=>{var a=n(3),i=n(37),o=a.String;e.exports=function(e){if("Symbol"===i(e))throw TypeError("Cannot convert a Symbol value to a string");return o(e)}},(e,t,n)=>{"use strict";n.d(t,{a:()=>i});var a=n(0);class i{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;var i,o,s;s=void 0,(o="position")in(i=this)?Object.defineProperty(i,o,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[o]=s,this.position=new a.f(e,t,n)}}},(e,t,n)=>{var a=n(3),i=n(28),o=n(228),s=n(229),r=n(25),l=n(128),h=a.TypeError,c=Object.defineProperty,u=Object.getOwnPropertyDescriptor,p="enumerable",d="configurable",g="writable";t.f=i?s?function(e,t,n){if(r(e),t=l(t),r(n),"function"==typeof e&&"prototype"===t&&"value"in n&&g in n&&!n.writable){var a=u(e,t);a&&a.writable&&(e[t]=n.value,n={configurable:d in n?n.configurable:a.configurable,enumerable:p in n?n.enumerable:a.enumerable,writable:!1})}return c(e,t,n)}:c:function(e,t,n){if(r(e),t=l(t),r(n),o)try{return c(e,t,n)}catch(e){}if("get"in n||"set"in n)throw h("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},(e,t,n)=>{var a=n(3),i=n(17),o=n(55),s=n(192),r=n(162);e.exports=function(e,t,n,l){var h=!!l&&!!l.unsafe,c=!!l&&!!l.enumerable,u=!!l&&!!l.noTargetGet,p=l&&void 0!==l.name?l.name:t;return i(n)&&s(n,p,l),e===a?(c?e[t]=n:r(t,n),e):(h?!u&&e[t]&&(c=!0):delete e[t],c?e[t]=n:o(e,t,n),e)}},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>V,b:()=>B,c:()=>x,d:()=>H,e:()=>F,f:()=>_,g:()=>S,h:()=>k,i:()=>D,j:()=>T,k:()=>O,l:()=>M,m:()=>L,n:()=>C,o:()=>E,p:()=>A,q:()=>U,r:()=>P,s:()=>G,t:()=>Y,u:()=>j});var i=n(146),o=n(5),s=n(394),r=n(395),l=n(396),h=n(397),c=n(398),u=n(399),p=n(401),d=n(402),g=n(321),m=n(253),f=n(322),y=n(324),v=n(0),w=n(404),b=e([i,o,s,r,l,h,c,u,p,d,g,m,f,y,w]);[i,o,s,r,l,h,c,u,p,d,g,m,f,y,w]=b.then?(await b)():b;const x=["D","C","B","A","S","SS","SSS"],M=150,E=5,_=1e3,C=5,T=2.5,S=5,k=10,O=1e3,A=2500,L=[new y.a(0,"D",[1,1,1]),new y.a(1e5,"C",[0,1,0]),new y.a(375e3,"B",[0,0,1]),new y.a(75e4,"A",[1,0,1]),new y.a(1e6,"S",[1,1,0]),new y.a(11e5,"SS",[1,1,0]),new y.a(12e5,"SSS",[1,1,0])],P=[new m.a("./asset/memberscard/members.png",0,1),new m.a("./asset/memberscard/silver.png",1e4,.95),new m.a("./asset/memberscard/gold.png",25e3,.9),new m.a("./asset/memberscard/platinum.png",75e3,.75),new m.a("./asset/memberscard/diamond.png",15e4,.5)],I=[o.h.EFFECT_MUZZLE_FLASH_AMMO_1,o.h.EFFECT_MUZZLE_FLASH_AMMO_2,o.h.EFFECT_MUZZLE_FLASH_AMMO_3],N=[o.h.EFFECT_MUZZLE_FLASH_AMMO_1,o.h.EFFECT_MUZZLE_FLASH_AMMO_3],R=[o.h.EFFECT_MUZZLE_FLASH_CELL_1,o.h.EFFECT_MUZZLE_FLASH_CELL_2,o.h.EFFECT_MUZZLE_FLASH_CELL_3],W=[o.h.EFFECT_MUZZLE_FLASH_CELL_1,o.h.EFFECT_MUZZLE_FLASH_CELL_3],z=[o.h.EFFECT_MUZZLE_FLASH_HAVYCANNON1,o.h.EFFECT_MUZZLE_FLASH_HAVYCANNON2,o.h.EFFECT_MUZZLE_FLASH_HAVYCANNON3],D=["HEAD SHOT","SHOOT DOWN","ARMOR BREAK"],F={NONE:-1,PUNCH:0,SHATTER:1,SHIELD:2,GRENADE_SHORT:3,GRENADE_LONG:4,HOOK:5,RECOIL:6,CANNON:7,SPIN:8,LAUNCHER:9,ARROW:10,HEAVYCANNON:11,PUMP:12,PULL:13,HOLD:14,BOOSTER:15},U={NONE:-1,SEMIAUTO:0,AUTO:1,SPIN:2,SLOW:3,ZOOM:4,SHIELD:5,COMBO:6,HOOK:7},H={NONE:-1,ALL:0,VOXEL:1,ENTITY:2},B={NONE:-1,DEFAULT:0,FLOAT:1,INT:2,ROLL:3},G={NONE:-1,RUNNING:0,ALL_RUNNING:1,ONEHAND_LIGHT:2,ONEHAND_MIDIUM:3,ONEHAND_HAVY:4,TWOHAND_LIGHT:5,TWOHAND_MIDIUM:6,TWOHAND_HAVY:7,TACTICAL_LIGHT:8,TACTICAL_MIDIUM:9,TACTICAL_HAVY:10},Y=["hand","sidearm","machingun","shotgun","launcher","plasmagun"],V=["energy","clip","magazine","shell","rocket","cell"],j={none:new i.a(o.h.NONE,o.h.HUD_HAND_STILL,o.h.HUD_HAND_STILL,o.h.HUD_HAND_JUMP,o.h.HUD_HAND_AIR,o.h.HUD_HAND_SPRINT,o.h.HUD_HAND_STILL,o.h.NONE,o.h.HUD_HAND_JUMP,o.h.HUD_HAND_SPRINT,o.h.HUD_HAND_STILL,o.h.HUD_HAND_STILL,o.h.HUD_HAND_FIRE,o.h.HUD_HAND_FIRE,o.h.HUD_HAND_FIRE,o.h.HUD_HAND_GRIP,o.h.HUD_HAND_STILL,[o.h.NONE],!0,!0,!0,!1,!1,!1,U.NONE,!1,F.NONE,F.NONE,G.RUNNING,G.RUNNING,B.DEFAULT,0,0,0,0,null,null,0,0,0,0,"none","none",0,0,0,0,0,0,1,1,0,0,0,0,0,0,!1,!1,0,0,0,0,0,0,0,0,.5,.25,.025,2.5,.05,0,null,0,0,!1,!0,null,null,!1,!1,!1,!0,!1,!1,!1,!1,H.NONE,H.NONE),punch:new i.a(o.h.ITEM_WEAPON_PUNCH,o.h.HUD_HAND_STILL,o.h.HUD_HAND_STILL,o.h.HUD_HAND_JUMP,o.h.HUD_HAND_AIR,o.h.HUD_HAND_SPRINT,o.h.HUD_HAND_STILL,o.h.NONE,o.h.HUD_HAND_JUMP,o.h.HUD_HAND_SPRINT,o.h.HUD_HAND_CHARGE,o.h.HUD_HAND_STILL,o.h.HUD_HAND_FIRE,o.h.HUD_HAND_ATTACK,o.h.HUD_HAND_FIRE,o.h.HUD_HAND_GRIP,o.h.HUD_HAND_STILL,[o.h.NONE],!0,!0,!0,!1,!0,!1,U.SEMIAUTO,!1,F.PUNCH,F.SHATTER,G.RUNNING,G.RUNNING,B.DEFAULT,0,.25,.1,.1,l.a,f.a,0,100,1,.5,"melee","melee",1,1,1/0,1/0,2.5,7.5,1,1,1,1,0,0,0,0,!1,!1,0,0,0,0,0,0,0,0,.5,.25,.025,2.5,.05,-.25,"energy",0,50,!1,!1,"./asset/sound/weapon/punch-fire.mp3","./asset/sound/weapon/punch-fire-charge.mp3",!1,!1,!0,!0,!1,!1,!0,!0,H.NONE,H.ENTITY),slowball:new i.a(o.h.ITEM_WEAPON_SLOWBALL,o.h.HUD_SLOWBALL_STILL,o.h.HUD_SLOWBALL_STILL,o.h.HUD_SLOWBALL_STILL,o.h.HUD_SLOWBALL_STILL,o.h.HUD_SLOWBALL_STILL,o.h.HUD_SLOWBALL_STILL,o.h.NONE,o.h.HUD_HAND_JUMP,o.h.HUD_SLOWBALL_STILL,o.h.HUD_SLOWBALL_STILL,o.h.HUD_SLOWBALL_STILL,o.h.HUD_SLOWBALL_FIRE,o.h.HUD_SLOWBALL_FIRE,o.h.HUD_SLOWBALL_FIRE,o.h.HUD_HAND_GRIP,o.h.HUD_SLOWBALL_STILL,[o.h.NONE],!0,!0,!0,!1,!0,!1,U.SLOW,!0,F.HOLD,F.HOLD,G.RUNNING,G.RUNNING,B.DEFAULT,1.075,.03,.03,.03,null,null,.25,.25,0,0,"none","none",0,0,0,0,0,0,0,0,0,0,0,0,0,0,!1,!1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"energy",1,1,!1,!1,null,null,!1,!1,!1,!0,!1,!1,!1,!1,H.NONE,H.NONE),monocular:new i.a(o.h.ITEM_WEAPON_BINOCULARS,o.h.HUD_BINOCULARS_STILL,o.h.HUD_BINOCULARS_STILL,o.h.HUD_BINOCULARS_STILL,o.h.HUD_BINOCULARS_STILL,o.h.HUD_BINOCULARS_STILL,o.h.HUD_BINOCULARS_STILL,o.h.NONE,o.h.HUD_HAND_JUMP,o.h.HUD_BINOCULARS_STILL,o.h.HUD_BINOCULARS_STILL,o.h.HUD_BINOCULARS_STILL,o.h.HUD_BINOCULARS_STILL,o.h.HUD_BINOCULARS_STILL,o.h.HUD_BINOCULARS_STILL,o.h.HUD_HAND_GRIP,o.h.HUD_BINOCULARS_STILL,[o.h.NONE],!0,!0,!0,!1,!0,!1,U.ZOOM,!0,F.HOLD,F.HOLD,G.RUNNING,G.RUNNING,B.DEFAULT,0,.1,.1,.1,null,null,2.5,2.5,0,0,"none","none",0,.25,.25,0,0,0,0,0,0,0,0,0,0,0,!1,!1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"energy",1,1,!1,!1,null,null,!1,!1,!1,!0,!1,!1,!1,!1,H.NONE,H.NONE),energyshield:new i.a(o.h.ITEM_WEAPON_ENERGYSHIELD,o.h.HUD_ENERGYSHIELD_STILL,o.h.HUD_ENERGYSHIELD_STILL,o.h.HUD_ENERGYSHIELD_STILL,o.h.HUD_ENERGYSHIELD_STILL,o.h.HUD_ENERGYSHIELD_STILL,o.h.HUD_ENERGYSHIELD_STILL,o.h.NONE,o.h.HUD_HAND_JUMP,o.h.HUD_ENERGYSHIELD_STILL,o.h.HUD_ENERGYSHIELD_STILL,o.h.HUD_ENERGYSHIELD_STILL,o.h.HUD_ENERGYSHIELD_FIRE,o.h.HUD_ENERGYSHIELD_FIRE,o.h.HUD_ENERGYSHIELD_EMPTY,o.h.HUD_HAND_GRIP,o.h.HUD_ENERGYSHIELD_STILL,[o.h.NONE],!0,!1,!0,!1,!1,!1,U.SHIELD,!0,F.SHIELD,F.SHIELD,G.RUNNING,G.RUNNING,B.DEFAULT,0,.03,.03,.03,null,null,.25,.25,0,0,"none","none",0,0,0,0,0,0,0,0,0,0,0,0,0,0,!1,!1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"energy",0,0,!1,!1,null,null,!1,!1,!1,!0,!1,!1,!1,!1,H.NONE,H.NONE),combobooster:new i.a(o.h.ITEM_WEAPON_COMBOBOOSTER,o.h.HUD_COMBO_BOOSTER_STILL,o.h.HUD_COMBO_BOOSTER_STILL,o.h.HUD_COMBO_BOOSTER_STILL,o.h.HUD_COMBO_BOOSTER_STILL,o.h.HUD_COMBO_BOOSTER_STILL,o.h.HUD_COMBO_BOOSTER_STILL,o.h.NONE,o.h.HUD_HAND_JUMP,o.h.HUD_COMBO_BOOSTER_STILL,o.h.HUD_COMBO_BOOSTER_STILL,o.h.HUD_COMBO_BOOSTER_STILL,o.h.HUD_COMBO_BOOSTER_FIRE,o.h.HUD_COMBO_BOOSTER_FIRE,o.h.HUD_COMBO_BOOSTER_STILL,o.h.HUD_HAND_GRIP,o.h.HUD_COMBO_BOOSTER_STILL,[o.h.NONE],!0,!0,!0,!1,!0,!0,U.COMBO,!1,F.BOOSTER,F.BOOSTER,G.RUNNING,G.RUNNING,B.DEFAULT,1.25,1,1,1,null,null,7,7,0,0,"none","none",0,0,0,0,0,0,1,1,0,0,0,0,0,0,!1,!1,0,0,0,0,0,0,0,0,.5,.25,.025,2.5,.05,0,"energy",75,75,!1,!1,null,null,!1,!1,!1,!0,!0,!1,!1,!1,H.NONE,H.NONE),freezegrenade:new i.a(o.h.ITEM_WEAPON_FROZEN_GRENADE,o.h.HUD_HAND_STILL,o.h.HUD_HAND_STILL,o.h.HUD_HAND_JUMP,o.h.HUD_HAND_AIR,o.h.HUD_HAND_SPRINT,o.h.HUD_HAND_STILL,o.h.NONE,o.h.HUD_HAND_JUMP,o.h.HUD_HAND_SPRINT,o.h.HUD_HAND_CHARGE,o.h.HUD_HAND_FIRE,o.h.HUD_HAND_ATTACK,o.h.HUD_HAND_ATTACK,o.h.HUD_HAND_STILL,o.h.HUD_HAND_GRIP,o.h.HUD_HAND_CHARGE,[o.h.NONE],!0,!0,!0,!1,!0,!1,U.SEMIAUTO,!1,F.GRENADE_SHORT,F.GRENADE_LONG,G.RUNNING,G.RUNNING,B.DEFAULT,0,.5,.5,.5,d.a,d.a,5,5,3,.5,"freeze","freeze",1,1,.1875,.375,1/0,1/0,1,1,.25,.25,0,0,0,0,!1,!1,0,0,0,0,0,0,0,.5,.5,.25,.025,2.5,.05,.25,"energy",75,75,!1,!1,null,null,!1,!1,!1,!0,!0,!1,!1,!1,H.NONE,H.NONE),hookshot:new i.a(o.h.ITEM_WEAPON_HOOKSHOT,o.h.HUD_HAND_STILL,o.h.HUD_HAND_STILL,o.h.HUD_HAND_JUMP,o.h.HUD_HAND_AIR,o.h.HUD_HAND_SPRINT,o.h.HUD_HAND_STILL,o.h.NONE,o.h.HUD_HAND_JUMP,o.h.HUD_HAND_SPRINT,o.h.HUD_HOOKSHOT_STILL,o.h.HUD_HOOKSHOT_STILL,o.h.HUD_HOOKSHOT_STILL,o.h.HUD_HOOKSHOT_STILL,o.h.HUD_HOOKSHOT_STILL,o.h.HUD_HAND_GRIP,o.h.HUD_HAND_STILL,[o.h.NONE],!0,!0,!0,!1,!0,!1,U.HOOK,!1,F.HOOK,F.HOOK,G.RUNNING,G.RUNNING,B.DEFAULT,0,.0175,0,0,g.a,g.a,5,5,1,0,"hook","hook",1,1,1/0,1/0,12.5,12.5,1,1,0,0,0,0,0,0,!1,!1,.025,.025,.025,.025,.375,.5,1,.5,.5,.25,.0125,2.5,.1,.05,"energy",0,0,!1,!1,"./asset/sound/weapon/hook-fire.mp3",null,!1,!0,!0,!0,!1,!0,!1,!1,H.ALL,H.ALL),pistol:new i.a(o.h.ITEM_WEAPON_PISTOL,o.h.HUD_PISTOL_STILL,o.h.HUD_PISTOL_STILL,o.h.HUD_PISTOL_STILL,o.h.HUD_PISTOL_STILL,o.h.HUD_PISTOL_STILL,o.h.HUD_PISTOL_STILL,o.h.NONE,o.h.HUD_HAND_JUMP,o.h.HUD_PISTOL_STILL,o.h.HUD_PISTOL_STILL,o.h.HUD_PISTOL_STILL,o.h.HUD_PISTOL_STILL,o.h.HUD_PISTOL_STILL,o.h.HUD_PISTOL_COCKING,o.h.HUD_HAND_GRIP,o.h.HUD_PISTOL_COCKING,I,!0,!1,!0,!1,!1,!1,U.SEMIAUTO,!1,F.RECOIL,F.RECOIL,G.TACTICAL_LIGHT,G.ONEHAND_HAVY,B.FLOAT,1.125,.125,.1,.1,s.a,s.a,5,5,3,1,"ammo","ammo",1,1,1,1,1/0,1/0,1,3,.125,.125,.0275*v.b,0,0,0,!1,!1,.1,.025,.1,.025,.375,.5,.5,.5,.5,.25,.0325,2.5,.065,.2,"clip",1,1,!0,!1,"./asset/sound/weapon/pistol-fire.mp3",null,!0,!1,!1,!0,!0,!0,!1,!1,H.NONE,H.NONE),handcannon:new i.a(o.h.ITEM_WEAPON_HANDCANNON,o.h.HUD_HANDCANNON_STILL,o.h.HUD_HANDCANNON_STILL,o.h.HUD_HANDCANNON_STILL,o.h.HUD_HANDCANNON_STILL,o.h.HUD_HANDCANNON_STILL,o.h.HUD_HANDCANNON_STILL,o.h.NONE,o.h.HUD_HAND_JUMP,o.h.HUD_HANDCANNON_STILL,o.h.HUD_HANDCANNON_STILL,o.h.HUD_HANDCANNON_STILL,o.h.HUD_HANDCANNON_STILL,o.h.HUD_HANDCANNON_STILL,o.h.HUD_HANDCANNON_COCKING,o.h.HUD_HAND_GRIP,o.h.HUD_HANDCANNON_COCKING,W,!0,!1,!0,!1,!1,!1,U.SEMIAUTO,!1,F.CANNON,F.CANNON,G.TACTICAL_LIGHT,G.ONEHAND_HAVY,B.FLOAT,1.125,.5,.25,.1,w.a,w.a,5,10,1,1,"plasma","plasma",7,7,1.5,1.5,1/0,1/0,1,1,.125,.125,0,0,.0575*v.b,.0575*v.b,!1,!0,.5,.175,.5,.175,.25,.5,.875,.5,.75,.25,.05,2.5,.25,.5,"clip",1,1,!0,!1,"./asset/sound/weapon/shotgun-fire.mp3","./asset/sound/weapon/heavycannon-fire.mp3",!0,!1,!1,!0,!0,!0,!1,!1,H.NONE,H.NONE),machingun:new i.a(o.h.ITEM_WEAPON_MACHINGUN,o.h.HUD_MACHINGUN_STILL,o.h.HUD_MACHINGUN_STILL,o.h.HUD_MACHINGUN_STILL,o.h.HUD_MACHINGUN_STILL,o.h.HUD_MACHINGUN_STILL,o.h.HUD_MACHINGUN_STILL,o.h.NONE,o.h.HUD_HAND_JUMP,o.h.HUD_MACHINGUN_STILL,o.h.HUD_MACHINGUN_STILL,o.h.HUD_MACHINGUN_STILL,o.h.HUD_MACHINGUN_STILL,o.h.HUD_MACHINGUN_STILL,o.h.HUD_MACHINGUN_COCKING,o.h.HUD_HAND_GRIP,o.h.HUD_MACHINGUN_COCKING,I,!1,!1,!0,!1,!1,!1,U.AUTO,!1,F.RECOIL,F.RECOIL,G.TACTICAL_MIDIUM,G.ONEHAND_MIDIUM,B.ROLL,1.125,.1,.1,.1,s.a,s.a,5,5,3,0,"ammo","ammo",1,1,1.25,1.25,1/0,1/0,1,1,.125,.125,.045*v.b,.02*v.b,.045*v.b,.02*v.b,!1,!1,.0625,.01,.0625,.01,.375,.5,.375,.5,.5,.25,.0325,2.5,.065,.25,"magazine",1,1,!0,!1,"./asset/sound/weapon/machingun-fire.mp3",null,!0,!1,!1,!0,!0,!0,!1,!1,H.NONE,H.NONE),chainshotgun:new i.a(o.h.ITEM_WEAPON_CHAINSHOTGUN,o.h.HUD_CHAINSHOTGUN_STILL,o.h.HUD_CHAINSHOTGUN_STILL,o.h.HUD_CHAINSHOTGUN_STILL,o.h.HUD_CHAINSHOTGUN_STILL,o.h.HUD_CHAINSHOTGUN_STILL,o.h.HUD_CHAINSHOTGUN_STILL,o.h.NONE,o.h.HUD_HAND_JUMP,o.h.HUD_CHAINSHOTGUN_STILL,o.h.HUD_CHAINSHOTGUN_STILL,o.h.HUD_CHAINSHOTGUN_STILL,o.h.HUD_CHAINSHOTGUN_STILL,o.h.HUD_CHAINSHOTGUN_STILL,o.h.HUD_CHAINSHOTGUN_COCKING,o.h.HUD_HAND_GRIP,o.h.HUD_CHAINSHOTGUN_STILL,N,!1,!1,!1,!1,!1,!1,U.SPIN,!1,F.SPIN,F.SPIN,G.TACTICAL_HAVY,G.TWOHAND_HAVY,B.DEFAULT,1.125,.25,.25,.25,c.a,c.a,6,6,1,.75,"ball","ball",15,15,1.25,1.25,1/0,1/0,1,1,.125,.125,.0575*v.b,.025*v.b,.0575*v.b,.025*v.b,!0,!0,.125,0,.125,0,.375,.5,.375,.5,.5,.25,.05,2.5,.05,1,"magazine",3,3,!0,!1,"./asset/sound/weapon/chainshotgun-fire.mp3",null,!0,!1,!1,!1,!0,!0,!1,!1,H.NONE,H.NONE),shotgun:new i.a(o.h.ITEM_WEAPON_SHOTGUN,o.h.HUD_SHOTGUN_STILL,o.h.HUD_SHOTGUN_STILL,o.h.HUD_SHOTGUN_STILL,o.h.HUD_SHOTGUN_STILL,o.h.HUD_SHOTGUN_STILL,o.h.HUD_SHOTGUN_STILL,o.h.NONE,o.h.HUD_HAND_JUMP,o.h.HUD_SHOTGUN_STILL,o.h.HUD_SHOTGUN_STILL,o.h.HUD_SHOTGUN_STILL,o.h.HUD_SHOTGUN_STILL,o.h.HUD_SHOTGUN_STILL,o.h.HUD_SHOTGUN_COCKING,o.h.HUD_HAND_GRIP,o.h.HUD_SHOTGUN_COCKING,N,!1,!1,!0,!1,!1,!1,U.SEMIAUTO,!1,F.PUMP,F.PUMP,G.TACTICAL_MIDIUM,G.TWOHAND_MIDIUM,B.DEFAULT,1.125,.625,.75,.1,c.a,c.a,5,5,3,1,"ball","ball",7,7,1,1,1/0,1/0,1,2,.125,.125,.0575*v.b,.025*v.b,.025*v.b,.025*v.b,!0,!0,.25,.05,.25,.05,.25,.5,.875,.5,.75,.25,.05,2.5,.25,.75,"shell",1,1,!0,!1,"./asset/sound/weapon/shotgun-fire.mp3","./asset/sound/weapon/shotgun-fire.mp3",!0,!1,!1,!0,!0,!0,!1,!1,H.NONE,H.NONE),heavycannon:new i.a(o.h.ITEM_WEAPON_HEAVYCANNON,o.h.HUD_HEAVYCANNON_STILL,o.h.HUD_HEAVYCANNON_STILL,o.h.HUD_HEAVYCANNON_STILL,o.h.HUD_HEAVYCANNON_STILL,o.h.HUD_HEAVYCANNON_STILL,o.h.HUD_HEAVYCANNON_STILL,o.h.NONE,o.h.HUD_HAND_JUMP,o.h.HUD_HEAVYCANNON_STILL,o.h.HUD_HEAVYCANNON_STILL,o.h.HUD_HEAVYCANNON_STILL,o.h.HUD_HEAVYCANNON_STILL,o.h.HUD_HEAVYCANNON_STILL,o.h.HUD_HEAVYCANNON_COCKING,o.h.HUD_HAND_GRIP,o.h.HUD_HEAVYCANNON_COCKING,z,!1,!1,!0,!1,!1,!1,U.SEMIAUTO,!1,F.HEAVYCANNON,F.HEAVYCANNON,G.TACTICAL_HAVY,G.TWOHAND_MIDIUM,B.DEFAULT,1.125,.625,.25,.1,s.a,s.a,45,45,1,1,"ammo","ammo",6,6,1.5,1.5,1/0,1/0,1,1,.125,.125,0,0,.0575*v.b,.0575*v.b,!1,!0,.175,.05,.5,.25,.375,.5,.5,.5,.5,.25,.05,2.5,.25,.75,"shell",3,3,!0,!1,"./asset/sound/weapon/heavycannon-fire.mp3","./asset/sound/weapon/heavycannon-fire-charge.mp3",!0,!1,!1,!0,!0,!0,!1,!1,H.NONE,H.NONE),launcher:new i.a(o.h.ITEM_WEAPON_LAUNCHER,o.h.HUD_LAUNCHER_STILL,o.h.HUD_LAUNCHER_STILL,o.h.HUD_LAUNCHER_STILL,o.h.HUD_LAUNCHER_STILL,o.h.HUD_LAUNCHER_STILL,o.h.HUD_LAUNCHER_STILL,o.h.NONE,o.h.HUD_HAND_JUMP,o.h.HUD_LAUNCHER_STILL,o.h.HUD_LAUNCHER_STILL,o.h.HUD_LAUNCHER_STILL,o.h.HUD_LAUNCHER_STILL,o.h.HUD_LAUNCHER_STILL,o.h.HUD_LAUNCHER_COCKING,o.h.HUD_HAND_GRIP,o.h.HUD_LAUNCHER_COCKING,N,!1,!1,!1,!1,!1,!1,U.SEMIAUTO,!1,F.LAUNCHER,F.LAUNCHER,G.TACTICAL_HAVY,G.TWOHAND_HAVY,B.DEFAULT,1.125,.5,.625,.1,r.a,r.a,5,5,8,1,"rocket","rocket",1,3,.75,.75,1/0,1/0,1,1,1,1,0,0,.0575*v.b,.0575*v.b,!1,!0,.125,0,.125,0,.375,.5,.1,.5,.5,.25,.025,2.5,.05,.1,"rocket",1,3,!0,!1,"./asset/sound/weapon/launcher-fire.mp3",null,!0,!1,!1,!0,!0,!0,!1,!1,H.NONE,H.NONE),clusterbow:new i.a(o.h.ITEM_WEAPON_CLUSTERBOW,o.h.HUD_CLUSTERBOW_STILL,o.h.HUD_CLUSTERBOW_STILL,o.h.HUD_CLUSTERBOW_STILL,o.h.HUD_CLUSTERBOW_STILL,o.h.HUD_CLUSTERBOW_STILL,o.h.HUD_CLUSTERBOW_STILL,o.h.NONE,o.h.HUD_HAND_JUMP,o.h.HUD_CLUSTERBOW_STILL,o.h.HUD_CLUSTERBOW_STILL,o.h.HUD_CLUSTERBOW_STILL,o.h.HUD_CLUSTERBOW_COCKING,o.h.HUD_CLUSTERBOW_COCKING,o.h.HUD_CLUSTERBOW_COCKING,o.h.HUD_HAND_GRIP,o.h.HUD_CLUSTERBOW_COCKING,[o.h.NONE],!0,!1,!0,!1,!1,!1,U.SEMIAUTO,!1,F.ARROW,F.ARROW,G.TACTICAL_MIDIUM,G.ONEHAND_MIDIUM,B.FLOAT,0,1,1,.1,u.a,u.a,0,0,0,1,"rocket","rocket",1,1,.25,.25,1/0,1/0,1,3,.025,.025,0,0,.0575*v.b,.0575*v.b,!1,!0,.125,0,.125,0,.375,.5,.1,.5,.5,.25,.05,2.5,.05,.05,"rocket",1,1,!0,!1,"./asset/sound/weapon/clusterbow-fire.mp3",null,!0,!1,!1,!0,!0,!0,!1,!1,H.NONE,H.NONE),plasmagun:new i.a(o.h.ITEM_WEAPON_PLASMAGUN,o.h.HUD_PLASMAGUN_STILL,o.h.HUD_PLASMAGUN_STILL,o.h.HUD_PLASMAGUN_STILL,o.h.HUD_PLASMAGUN_STILL,o.h.HUD_PLASMAGUN_STILL,o.h.HUD_PLASMAGUN_STILL,o.h.NONE,o.h.HUD_HAND_JUMP,o.h.HUD_PLASMAGUN_STILL,o.h.HUD_PLASMAGUN_STILL,o.h.HUD_PLASMAGUN_STILL,o.h.HUD_PLASMAGUN_STILL,o.h.HUD_PLASMAGUN_STILL,o.h.HUD_PLASMAGUN_COCKING,o.h.HUD_HAND_GRIP,o.h.HUD_PLASMAGUN_STILL,W,!1,!1,!0,!1,!1,!1,U.AUTO,!1,F.RECOIL,F.RECOIL,G.TACTICAL_MIDIUM,G.ONEHAND_MIDIUM,B.DEFAULT,1.125,.1,.1,.1,h.a,h.a,10,10,4,0,"plasma","plasma",1,1,.5,.5,1/0,1/0,1,1,.5,.5,0,0,0,0,!1,!1,0,0,0,0,.375,.5,.375,.5,.5,.25,.0325,2.5,.065,.25,"cell",1,1,!0,!1,"./asset/sound/weapon/plasmagun-fire.mp3",null,!0,!1,!1,!0,!0,!0,!1,!1,H.NONE,H.NONE),plasmasmg:new i.a(o.h.ITEM_WEAPON_PLASMASMG,o.h.HUD_PLASMASMG_STILL,o.h.HUD_PLASMASMG_STILL,o.h.HUD_PLASMASMG_STILL,o.h.HUD_PLASMASMG_STILL,o.h.HUD_PLASMASMG_STILL,o.h.HUD_PLASMASMG_STILL,o.h.NONE,o.h.HUD_HAND_JUMP,o.h.HUD_PLASMASMG_STILL,o.h.HUD_PLASMASMG_STILL,o.h.HUD_PLASMASMG_STILL,o.h.HUD_PLASMASMG_STILL,o.h.HUD_PLASMASMG_STILL,o.h.HUD_PLASMASMG_COCKING,o.h.HUD_HAND_GRIP,o.h.HUD_PLASMASMG_COCKING,R,!0,!1,!0,!1,!1,!1,U.AUTO,!1,F.RECOIL,F.RECOIL,G.TACTICAL_LIGHT,G.ONEHAND_HAVY,B.FLOAT,1.125,.075,.075,.075,p.a,p.a,5,5,1,0,"plasma","plasma",4,4,1.25,1.25,1/0,1/0,3,3,.0625,.0625,.045*v.b,.02*v.b,.045*v.b,.02*v.b,!0,!0,.0625,.0375,.0625,.0375,.375,.5,.375,.5,.5,.25,.0325,2.5,.065,.2,"cell",1,1,!0,!1,"./asset/sound/weapon/plasmasmg-fire.mp3",null,!0,!1,!1,!0,!0,!0,!1,!1,H.NONE,H.NONE)};a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.d(t,{a:()=>o});var a=n(0);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;i(this,"enable",!0),i(this,"exec",!1),i(this,"start",{position:new a.f(0,0,0),wallAngle4:-1,wallAngle8:-1,direction:0,hit:!1}),i(this,"through",!1),i(this,"value",0),i(this,"lock",!1),i(this,"side",0),i(this,"direction",0),i(this,"speed",0),i(this,"proplusion",0),i(this,"force",new a.f(0,0,0)),i(this,"oldPosition",new a.f(-1,-1,-1)),i(this,"walkSpeed",void 0),i(this,"staminaValue",void 0),this.walkSpeed=e,this.staminaValue=t}}},(e,t,n)=>{"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{a:()=>i});class i{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;a(this,"enableCluch",!1),a(this,"value",0),a(this,"block",!1),a(this,"oldFeet",0),a(this,"standSizeY",void 0),a(this,"cluchSizeY",void 0),a(this,"stretchSpeed",void 0),this.standSizeY=e,this.cluchSizeY=t,this.stretchSpeed=n}}},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>r});var i=n(47),o=e([i]);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}i=(o.then?(await o)():o)[0];class r{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"hand",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hand";s(this,"enable",!0),s(this,"time",0),s(this,"isCanShoot",!1),s(this,"isBlock",!1),s(this,"isAction",!1),s(this,"isLeftChange",!0),s(this,"isRightChange",!0),s(this,"leftChangeTime",0),s(this,"rightChangeTime",0),s(this,"leftBob",!0),s(this,"rightBob",!0),s(this,"toggleFireRight",!1),s(this,"toggleFireLeft",!1),s(this,"isFireRight",!1),s(this,"isFireLeft",!1),s(this,"isFireRightWait",!1),s(this,"isFireLeftWait",!1),s(this,"isHoldRight",!1),s(this,"isHoldLeft",!1),s(this,"left",void 0),s(this,"right",void 0),s(this,"leftOld",void 0),s(this,"rightOld",void 0),s(this,"swapWait",!1),s(this,"changeWait",-1),s(this,"isPrevSet",!1),s(this,"oldWeapon",{left:"hand",right:"hand"}),s(this,"prevWeapon",{left:"hand",right:"hand"}),s(this,"standPrevWeapon",{left:"hand",right:"hand"}),s(this,"leftWeapon",void 0),s(this,"rightWeapon",void 0),this.left=e,this.right=t,this.leftOld="hand",this.rightOld="hand",this.leftWeapon=i.u.none.create(),this.rightWeapon=i.u.none.create()}}a()}catch(l){a(l)}}))},(e,t,n)=>{"use strict";n.d(t,{a:()=>o});var a=n(0);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;i(this,"enable",!1),i(this,"exec",!1),i(this,"value",0),i(this,"dir",0),i(this,"nextDir",-1),i(this,"nowSpeed",0),i(this,"par",0),i(this,"oldPosition",new a.f(-1,-1,-1)),i(this,"targetNames",void 0),i(this,"time",void 0),i(this,"push",void 0),i(this,"speed",void 0),this.time=e,this.push=t,this.speed=n;for(var o=arguments.length,s=new Array(o>3?o-3:0),r=3;r<o;r++)s[r-3]=arguments[r];this.targetNames=s}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>o});var a=n(0);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o{constructor(e){i(this,"oldPosition",new a.f(-1,-1,-1)),i(this,"diffPosition",new a.f(-1,-1,-1)),i(this,"moveValue",new a.f(0,0,0)),i(this,"value",new a.e(0,0)),i(this,"movePar",0),i(this,"isGround",!1),i(this,"isHitStand",!1),i(this,"isHitCluch",!1),i(this,"can",!1),i(this,"startDir",-1),i(this,"exec",!1),i(this,"move",void 0),this.move=new a.e(e,0)}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>o});var a=n(0);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o{constructor(e,t,n,o,s,r,l,h,c,u,p,d,g,m,f,y,v){let w=arguments.length>17&&void 0!==arguments[17]&&arguments[17],b=arguments.length>18&&void 0!==arguments[18]&&arguments[18],x=arguments.length>19&&void 0!==arguments[19]?arguments[19]:new Array,M=arguments.length>20&&void 0!==arguments[20]?arguments[20]:new Array,E=arguments.length>21&&void 0!==arguments[21]?arguments[21]:new Array,_=arguments.length>22&&void 0!==arguments[22]?arguments[22]:null,C=arguments.length>23&&void 0!==arguments[23]?arguments[23]:new Array;i(this,"time",0),i(this,"see",!1),i(this,"findTime",0),i(this,"hide",!1),i(this,"aimStartTime",-1),i(this,"painStartTime",-1),i(this,"blowStartTime",-1),i(this,"freezeTime",-1),i(this,"isBlow",!1),i(this,"isDown",!1),i(this,"blowTime",-1),i(this,"isAir",!1),i(this,"isSee",!1),i(this,"nextFindTime",0),i(this,"angleRight",new a.e(0,0)),i(this,"angleLeft",new a.e(0,0)),i(this,"seePosition",void 0),i(this,"stillMaterial",void 0),i(this,"otherMaterials",void 0),i(this,"angleForce",void 0),i(this,"attackRadius",void 0),i(this,"attackRangeMin",void 0),i(this,"attackRangeMax",void 0),i(this,"aimTime",void 0),i(this,"isAimWait",void 0),i(this,"painTime",void 0),i(this,"stillHeight",void 0),i(this,"blowHeight",void 0),i(this,"findInterval",void 0),i(this,"findIntervalRandom",void 0),i(this,"air",void 0),i(this,"blow",void 0),i(this,"filters",void 0),i(this,"findVoices",void 0),i(this,"painVoices",void 0),i(this,"deathVoices",void 0),i(this,"child",void 0),i(this,"path",null),this.stillMaterial=e,this.otherMaterials=t,this.seePosition=new a.f(n,o,s),this.angleForce=r,this.attackRadius=l,this.attackRangeMin=h,this.attackRangeMax=c,this.aimTime=u,this.isAimWait=p,this.painTime=d,this.blowTime=g,this.findInterval=m,this.findIntervalRandom=f,this.stillHeight=y,this.blowHeight=v,this.air=w,this.blow=b,this.findVoices=x,this.painVoices=M,this.deathVoices=E,this.child=_,this.filters=C}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>a});const a={PRACTICE:0,TUTORIAL:1,CAMPAING:2,HORDE:3}},(e,t,n)=>{var a=n(28),i=n(45),o=n(36);e.exports=a?function(e,t,n){return i.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},(e,t,n)=>{"use strict";n.d(t,{a:()=>u,b:()=>p,c:()=>d,d:()=>h,e:()=>v,f:()=>y,g:()=>c,h:()=>s,i:()=>r,j:()=>l,k:()=>f,l:()=>m});n(1),n(2);var a=n(105),i=n(8),o=n(0);const s=[[1,0,0],[0,0,1],[-1,0,0],[0,0,-1]],r=[[1,0,0],[0,0,1],[-1,0,0],[0,0,-1],[1,0,1],[-1,0,-1],[1,0,-1],[-1,0,1]],l=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1],[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[0,1,1],[0,-1,1],[0,1,-1],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[1,-1,-1],[-1,1,1],[1,-1,1],[1,1,-1],[-1,-1,1],[1,-1,-1],[-1,1,-1],[-1,-1,-1],[1,1,1]];function h(e,t,n,a){const[i,o,s]=e.getSize();return t<=0||t>=i-1||n<=0||n>=o-1||a<=0||a>=s-1}function c(e,t,n,a,i,o,s,r){return((0|i)*s*o+(0|a)*o+(0|n))*e+t}function u(e,t){const n=t/2,a=Math.ceil(e-n),i=Math.ceil(e+n);if(!(a^i-1))return[a];const o=new Array;for(let t=0|a,s=0|i;t<s;t=t+1|0){const a=t+.5,i=Math.abs(a-e);Math.sqrt(i*i)>n||o.push(t)}return o}function p(e,t,n){const a=n/2,i=Math.floor(e-a),o=Math.floor(t-a),s=Math.ceil(e+a),r=Math.ceil(t+a);if(!(i^s-1|o^r-1))return[i,o];const l=new Array;for(let e=0|i,t=0|s;e<t;e=e+1|0)for(let t=0|o,n=0|r;t<n;t=t+1|0)l.push(e,t);return l}function d(e,t,n,i,o){const s=i/2,r=o,l=Math.floor(e-s),h=Math.floor(t),c=Math.floor(n-s),u=Math.ceil(e+s),p=Math.ceil(t+r),d=Math.ceil(n+s);if(!(l^u-1|h^p-1|c^d-1))return[l,h,c];const g=new Array;for(let s=0|l,r=0|u;s<r;s=s+1|0)for(let r=0|c,l=0|d;r<l;r=r+1|0)for(let l=0|h,c=0|p;l<c;l=l+1|0)(0,a.f)(s,l,r,e,t,n,i,o)&&g.push(s,l,r);return g}function g(e,t,n,a){switch(e){case 0:return t>0?0:1;case 1:return n<0?2:3;case 2:return a>0?4:5}return-1}function m(e,t,n,a,i,s,r,l,h){return function(e,t,n,a,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1/0,r=arguments.length>6?arguments[6]:void 0,l=arguments.length>7?arguments[7]:void 0,h=arguments.length>8?arguments[8]:void 0;const[c,u,p]=(0,o.l)(e,t);let d=1/c,m=1/u,f=1/p,y=Math.floor(n),v=Math.floor(a),w=Math.floor(i),b=0,x=0,M=0,E=0,_=0,C=0;d>0?(b=1,E=(y+1-n)*d):(d*=-1,b=-1,E=(n-y)*d),m>0?(x=1,_=(v+1-a)*m):(m*=-1,x=-1,_=(a-v)*m),f>0?(M=1,C=(w+1-i)*f):(f*=-1,M=-1,C=(i-w)*f);let T=E<_?E<C?E:C:_<C?_:C,S=E<_?E<C?0:2:_<C?1:2;do{const e=0>y||r[0]<=y||0>v||r[1]<=v||0>w||r[2]<=w||l(y,v,w,T,S,E,_,C,d,m,f,b,x,M);if(e){let t=n+T/d*b,o=a+T/m*x,s=i+T/f*M;switch(S){case 0:t=Math.round(t);break;case 1:o=Math.round(o);break;case 2:s=Math.round(s)}if(h&&h(y,v,w,t,o,s,e,T,S,E,_,C,d,m,f,b,x,M))break;return[t,o,s,T,g(S,b,x,M)]}{const e=E<_?E<C?E:C:_<C?_:C;let t=n+e/d*b,o=a+e/m*x,s=i+e/f*M;switch(E<_?E<C?0:2:_<C?1:2){case 0:t=Math.round(t);break;case 1:o=Math.round(o);break;case 2:s=Math.round(s)}if(h&&h(y,v,w,t,o,s,!1,T,S,E,_,C,d,m,f,b,x,M))break}E<_?E<C?(y+=b,T=E,E+=d,S=0):(w+=M,T=C,C+=f,S=2):_<C?(v+=x,T=_,_+=m,S=1):(w+=M,T=C,C+=f,S=2)}while(T<s);return[-1,-1,-1,-1,g(S,b,x,M)]}((0,o.t)(e),(0,o.t)(t),n,a,i,s,r,l,h)}function f(e,t,n,a,s,r,l,h){const c=(0,o.t)(e),u=(0,o.t)(t);return function(e,t,n,a,s){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1/0,l=arguments.length>6?arguments[6]:void 0,h=arguments.length>7?arguments[7]:void 0;const[c,u,p]=(0,o.l)(e,t),d=1/c,m=1/u,f=1/p,y=Math.sign(c),v=Math.sign(u),w=Math.sign(p),b=y*d,x=v*m,M=w*f,E=Math.abs(d),_=Math.abs(m),C=Math.abs(f);let T=Math.floor(n),S=Math.floor(a),k=Math.floor(s),O=1/c,A=1/u,L=1/p,P=0,I=0,N=0,R=0,W=0,z=0,D=-1;O>0?(P=1,R=(T+1-n)*O,D=0):(O*=-1,P=-1,R=(n-T)*O,D=1),A>0?(I=1,W=(S+1-a)*A,D=2):(A*=-1,I=-1,W=(a-S)*A,D=3),L>0?(N=1,z=(k+1-s)*L,D=4):(L*=-1,N=-1,z=(s-k)*L,D=5);let F=R<W?R<z?R:z:W<z?W:z,U=R<W?R<z?0:2:W<z?1:2;do{const e=0>T||l[0]<=T||0>S||l[1]<=S||0>k||l[2]<=k?0:h(T,S,k);if(e<=0){let e=n+F/O*P,t=a+F/A*I,i=s+F/L*N;switch(U){case 0:e=Math.round(e);break;case 1:t=Math.round(t);break;case 2:i=Math.round(i)}return[e,t,i,F,g(U,P,I,N)]}const t=Math.floor((0,i.c)(Math.max(0,e-1)/E,0)),o=Math.floor((0,i.c)(Math.max(0,e-1)/_,0)),r=Math.floor((0,i.c)(Math.max(0,e-1)/C,0));R+=t*b,W+=o*x,z+=r*M,T+=t*y,S+=o*v,k+=r*w,R<W?R<z?(T+=P,F=R,R+=O,U=0):(k+=N,F=z,z+=L,U=2):W<z?(S+=I,F=W,W+=A,U=1):(k+=N,F=z,z+=L,U=2)}while(F<r);return[-1,-1,-1,-1,g(U,P,I,N)]}(c<Number.EPSILON&&c>-Number.EPSILON?Number.EPSILON:c,u<Number.EPSILON&&u>-Number.EPSILON?-Number.EPSILON:u,n,a,s,r,l,h)}function y(e,t,n,a,i,s,r,l,h){return function(e,t,n,a,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1/0,r=arguments.length>6?arguments[6]:void 0,l=arguments.length>7?arguments[7]:void 0,h=arguments.length>8?arguments[8]:void 0;const[c,u,p]=(0,o.l)(e,t);let d=1/c,g=1/u,m=1/p,f=Math.floor(n),y=Math.floor(a),v=Math.floor(i),w=0,b=0,x=0,M=0,E=0,_=0;d>0?(w=1,M=(f+1-n)*d):(d*=-1,w=-1,M=(n-f)*d),g>0?(b=1,E=(y+1-a)*g):(g*=-1,b=-1,E=(a-y)*g),m>0?(x=1,_=(v+1-i)*m):(m*=-1,x=-1,_=(i-v)*m);let C=M<E?M<_?M:_:E<_?E:_,T=M<E?M<_?0:2:E<_?1:2;do{const e=0>f||r[0]<=f||0>y||r[1]<=y||0>v||r[2]<=v||l(f,y,v,C,T,M,E,_,d,g,m,w,b,x);if(e){let t=n+C/d*w,o=a+C/g*b,s=i+C/m*x;switch(T){case 0:t=Math.round(t);break;case 1:o=Math.round(o);break;case 2:s=Math.round(s)}if(h&&h(f,y,v,t,o,s,e,C,T,M,E,_,d,g,m,w,b,x))break;return!0}{const e=M<E?M<_?M:_:E<_?E:_;let t=n+e/d*w,o=a+e/g*b,s=i+e/m*x;switch(M<E?M<_?0:2:E<_?1:2){case 0:t=Math.round(t);break;case 1:o=Math.round(o);break;case 2:s=Math.round(s)}if(h&&h(f,y,v,t,o,s,!1,C,T,M,E,_,d,g,m,w,b,x))break}M<E?M<_?(f+=w,C=M,M+=d,T=0):(v+=x,C=_,_+=m,T=2):E<_?(y+=b,C=E,E+=g,T=1):(v+=x,C=_,_+=m,T=2)}while(C<s);return!1}((0,o.t)(e),(0,o.t)(t),n,a,i,s,r,l,h)}function v(e,t,n,a,s,r,l,h){const c=(0,o.t)(e),u=(0,o.t)(t);return function(e,t,n,a,s){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1/0,l=arguments.length>6?arguments[6]:void 0,h=arguments.length>7?arguments[7]:void 0;const[c,u,p]=(0,o.l)(e,t),d=1/c,g=1/u,m=1/p,f=Math.sign(c),y=Math.sign(u),v=Math.sign(p),w=f*d,b=y*g,x=v*m,M=Math.abs(d),E=Math.abs(g),_=Math.abs(m);let C=Math.floor(n),T=Math.floor(a),S=Math.floor(s),k=1/c,O=1/u,A=1/p,L=0,P=0,I=0,N=0,R=0,W=0;k>0?(L=1,N=(C+1-n)*k):(k*=-1,L=-1,N=(n-C)*k),O>0?(P=1,R=(T+1-a)*O):(O*=-1,P=-1,R=(a-T)*O),A>0?(I=1,W=(S+1-s)*A):(A*=-1,I=-1,W=(s-S)*A);let z=N<R?N<W?N:W:R<W?R:W,D=N<R?N<W?0:2:R<W?1:2;do{const e=0>C||l[0]<=C||0>T||l[1]<=T||0>S||l[2]<=S?0:h(C,T,S);if(e<=0)return!0;const t=Math.floor((0,i.c)(Math.max(0,e-1)/M,0)),n=Math.floor((0,i.c)(Math.max(0,e-1)/E,0)),a=Math.floor((0,i.c)(Math.max(0,e-1)/_,0));N+=t*w,R+=n*b,W+=a*x,C+=t*f,T+=n*y,S+=a*v,N<R?N<W?(C+=L,z=N,N+=k,D=0):(S+=I,z=W,W+=A,D=2):R<W?(T+=P,z=R,R+=O,D=1):(S+=I,z=W,W+=A,D=2)}while(z<r);return!1}(c<Number.EPSILON&&c>-Number.EPSILON?Number.EPSILON:c,u<Number.EPSILON&&u>-Number.EPSILON?-Number.EPSILON:u,n,a,s,r,l,h)}},(e,t,n)=>{"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{a:()=>i});class i{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;a(this,"value",0),a(this,"standValue",0),a(this,"cluchValue",0),a(this,"cameraValue",0),a(this,"leanValue",0),a(this,"length",void 0),this.length=e}}},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>h,b:()=>c});var i=n(9),o=n(47),s=n(27),r=n(54),l=e([o,s]);function h(e,t){let n=e.getSensibility();switch(t.getInputType()){case"keyboard":case"touchpad":n*=.0375;break;case"gamepad":n*=.00125}return n}function c(e,t){if(!e.hasComponent(i.b))return!1;const n=e.getComponent(i.b),a=t instanceof s.a&&t.getGameMode()===r.a.HORDE;return-1===n.respawnTime&&-1===n.deathTime&&-1===n.goleTime&&-1===n.intermissionTime&&(!a||n.hordeStartTime>o.o)}[o,s]=l.then?(await l)():l,a()}catch(u){a(u)}}))},(e,t,n)=>{"use strict";n.d(t,{a:()=>o});n(1),n(2);var a=n(0);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o{constructor(e,t,n,o,s,r,l,h,c,u,p){let d=arguments.length>11&&void 0!==arguments[11]?arguments[11]:1/0,g=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,m=arguments.length>13&&void 0!==arguments[13]?arguments[13]:"hitbox",f=arguments.length>14&&void 0!==arguments[14]?arguments[14]:[];i(this,"init",!1),i(this,"hit",!1),i(this,"over",!1),i(this,"time",0),i(this,"hitTime",-1),i(this,"hitPosition",new a.f(-1,-1,-1)),i(this,"behind",void 0),i(this,"target",null),i(this,"attacker",void 0),i(this,"start",void 0),i(this,"originStart",void 0),i(this,"originPosition",void 0),i(this,"originDirection",void 0),i(this,"filter",new Array),i(this,"hitDiff",new a.f(0,0,0)),i(this,"size",void 0),i(this,"speed",void 0),i(this,"findTarget",void 0),i(this,"distance",void 0),i(this,"tree",void 0),this.start=new a.f(e,t,n),this.originStart=new a.f(o,s,r),this.originPosition=new a.f(o,s,r),this.originDirection=new a.e(l,h),this.behind=e!==o||t!==s||n!==r,this.size=c,this.speed=u,this.findTarget=p,this.distance=d,this.attacker=g,this.tree=m,this.filter.push(...f)}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>l});n(1),n(2);var a=n(10),i=n(503),o=n(505),s=n(340);n(318);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class l extends a.a{constructor(e,t,n,a,l,h,c,u,p,d,g,m,f){for(var y=arguments.length,v=new Array(y>13?y-13:0),w=13;w<y;w++)v[w-13]=arguments[w];super("spark",new s.a,new i.a(e,c,u),new o.a(!0,d,!0,p),...v),r(this,"bullet",void 0),r(this,"target",void 0),r(this,"attacker",void 0),this.position.x=t,this.position.y=n,this.position.z=a,this.direction.x=l,this.direction.y=h,this.bullet=g,this.target=m,this.attacker=f}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>i});n(1),n(2);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class i{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"none",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"none",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new Array;a(this,"enable",!1),a(this,"time",0),a(this,"fireTick",-1),a(this,"fireStartTime",-1),a(this,"exec",!1),a(this,"damage",void 0),a(this,"random",void 0),a(this,"damageType",void 0),a(this,"attackType",void 0),a(this,"fireSpeed",void 0),a(this,"filter",new Array),this.damage=e,this.random=t,this.damageType=n,this.attackType=i,this.fireSpeed=o,this.filter.push(...s)}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>i});var a=n(0);class i{constructor(e,t,n){var i,o,s;s=void 0,(o="offset")in(i=this)?Object.defineProperty(i,o,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[o]=s,this.offset=new a.f(e,t,n)}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>o});var a=n(0);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o{constructor(e,t,n,o,s,r,l,h,c){i(this,"value",void 0),i(this,"type",void 0),i(this,"attacker",void 0),i(this,"direction",void 0),i(this,"position",void 0),i(this,"force",void 0),this.value=e,this.type=t,this.attacker=n,this.direction=new a.e(o,s),this.position=r,this.force=new a.f(l,h,c)}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>o});var a=n(0);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;i(this,"enable",!1),i(this,"exec",!1),i(this,"oldExec",!1),i(this,"can",!1),i(this,"angle",-1),i(this,"time",-1),i(this,"isAxes",!1),i(this,"wallrunWaitTime",-1),i(this,"force",void 0),i(this,"wallJumpStaminaValue",void 0),this.force=new a.e(e,t),this.wallJumpStaminaValue=n}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>o});var a=n(0);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],l=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];i(this,"time",0),i(this,"initTime",-1),i(this,"old",{position:new a.f(-1,-1,-1),fov:-1,rotate:-1}),i(this,"move",{position:new a.f(0,0,0),fov:0,rotate:0}),i(this,"swais",new Array),i(this,"scale",new a.f(0,0,0)),i(this,"rotate",void 0),i(this,"slide",void 0),i(this,"speed",void 0),i(this,"moveFix",void 0),i(this,"hard",void 0),i(this,"oldTime",0),this.scale.x=e,this.scale.y=t,this.rotate=n,this.slide=o,this.speed=s,this.moveFix=r,this.hard=l}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>o});var a=n(0);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o{constructor(e,t,n,o,s,r,l,h,c,u,p){i(this,"time",0),i(this,"timeStamp",-1),i(this,"init",!1),i(this,"sub",0),i(this,"length",0),i(this,"ropeLength",0),i(this,"lookPar",0),i(this,"oldDist",-1),i(this,"rigid",!1),i(this,"old",new a.f(-1,-1,-1)),i(this,"oldDee",new a.f(-1,-1,-1)),i(this,"theta",new a.e(0,0)),i(this,"omega",new a.e(0,0)),i(this,"alpha",new a.e(0,0)),i(this,"pullForce",new a.f(0,0,0)),i(this,"fixPosition",new a.f(0,0,0)),i(this,"isPull",!1),i(this,"minDistance",void 0),i(this,"spring",void 0),i(this,"ropeForce",void 0),i(this,"bending",void 0),i(this,"pullTime",void 0),i(this,"minShrinkForce",void 0),i(this,"maxShrinkForce",void 0),this.minDistance=e,this.spring=new a.f(t,n,o),this.ropeForce=new a.f(s,r,l),this.bending=h,this.pullTime=c,this.minShrinkForce=u,this.maxShrinkForce=p}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>o});var a=n(0),i=n(4);class o extends i.a{hasHitCamera(e){const{direction:t}=e.getCamera();return t.y<a.d}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>a});n(1),n(2);class a{constructor(){var e,t,n;e=this,t="value",n=new Array,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,this.value.push(...arguments)}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>o});var a=n(0);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.25;i(this,"init",!1),i(this,"initTime",-1),i(this,"position",new a.f(0,0,0)),i(this,"now",new a.f(0,0,0)),i(this,"speed",void 0),this.speed=e}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>o});n(1),n(2);var a=n(10);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o extends a.a{constructor(){super(...arguments),i(this,"zoom",1),i(this,"fov",1),i(this,"hudFov",1),i(this,"light",0)}}},(e,t,n)=>{var a=n(12);e.exports=!a((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},(e,t,n)=>{var a=n(3),i=n(11),o=n(12),s=n(98),r=a.Object,l=i("".split);e.exports=o((function(){return!r("z").propertyIsEnumerable(0)}))?function(e){return"String"==s(e)?l(e,""):r(e)}:r},(e,t,n)=>{var a,i,o=n(3),s=n(94),r=o.process,l=o.Deno,h=r&&r.versions||l&&l.version,c=h&&h.v8;c&&(i=(a=c.split("."))[0]>0&&a[0]<4?1:+(a[0]+a[1])),!i&&s&&(!(a=s.match(/Edge\/(\d+)/))||a[1]>=74)&&(a=s.match(/Chrome\/(\d+)/))&&(i=+a[1]),e.exports=i},(e,t,n)=>{var a=n(3),i=n(42),o=a.document,s=i(o)&&i(o.createElement);e.exports=function(e){return s?o.createElement(e):{}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>o});var a=n(0);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]&&arguments[5];i(this,"position",void 0),i(this,"fix",new a.f(0,0,0)),i(this,"scale",void 0),i(this,"rotate",void 0),i(this,"isFixRotate",void 0),this.position=new a.f(e,t,n),this.scale=o,this.rotate=s,this.isFixRotate=r}}},(e,t,n)=>{"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{a:()=>i});class i{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;a(this,"time",0),a(this,"speed",void 0),this.speed=e}}},(e,t,n)=>{var a=n(3),i=n(17),o=n(111),s=a.TypeError;e.exports=function(e){if(i(e))return e;throw s(o(e)+" is not a function")}},e=>{e.exports=!1},(e,t,n)=>{var a=n(3),i=n(86),o=a.Object;e.exports=function(e){return o(i(e))}},(e,t,n)=>{var a,i,o,s=n(269),r=n(3),l=n(11),h=n(42),c=n(55),u=n(29),p=n(161),d=n(164),g=n(165),m="Object already initialized",f=r.TypeError,y=r.WeakMap;if(s||p.state){var v=p.state||(p.state=new y),w=l(v.get),b=l(v.has),x=l(v.set);a=function(e,t){if(b(v,e))throw new f(m);return t.facade=e,x(v,e,t),t},i=function(e){return w(v,e)||{}},o=function(e){return b(v,e)}}else{var M=d("state");g[M]=!0,a=function(e,t){if(u(e,M))throw new f(m);return t.facade=e,c(e,M,t),t},i=function(e){return u(e,M)?e[M]:{}},o=function(e){return u(e,M)}}e.exports={set:a,get:i,has:o,enforce:function(e){return o(e)?i(e):a(e,{})},getterFor:function(e){return function(t){var n;if(!h(t)||(n=i(t)).type!==e)throw f("Incompatible receiver, "+e+" required");return n}}}},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>v,b:()=>w,c:()=>y,d:()=>b});n(1),n(2),n(7),n(14);var i=n(0),o=n(182),s=n(183),r=n(4),l=n(5),h=n(24),c=n(35),u=n(8),p=e([l]);function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(!e.hasComponent(v))return n;const a=e.getComponent(v),o=a.menus.length,s=i.a/o;if(Math.abs(t.x)>25e-5||Math.abs(t.y)>25e-5){const e=(0,i.t)((0,i.m)(0,0,-t.x,-t.y));for(let t=0,n=0|o;t<n;t=t+1|0){const n=(0,i.t)(s*t-i.b-s/2),a=(0,i.t)(s*(t+1)-i.b-s/2);if((0,i.j)(e,n)>=0&&(0,i.j)(e,a)<0)return t}}return n}function m(e,t){const n=e.getComponent(s.a);return"x"===e.getComponent(v).axisType&&"gamepad"===t.getControlManager().getInputType()?new i.e(-n.axes.x.x,-n.axes.x.y):n.keys["menu-touchpad-l"]>0?n.axes.z:n.axes.y}function f(e,t){const n=t.getWheelInnerDeadzone();return Math.max(Math.abs(e.x),Math.abs(e.y))>n}l=(p.then?(await p)():p)[0];class y{constructor(e,t,n,a,i,o){d(this,"name",void 0),d(this,"keys",void 0),d(this,"hasRelease",void 0),d(this,"hasEnable",void 0),d(this,"getMessage",void 0),d(this,"exec",void 0),this.name=e,this.keys=t,this.hasRelease=n,this.hasEnable=a,this.getMessage=i,this.exec=o}}class v{constructor(e){d(this,"enable",!1),d(this,"axisType","y"),d(this,"pressReadys",{}),d(this,"value",-1),d(this,"oldValue",-1),d(this,"hasTrigger",!1),d(this,"begin",!1),d(this,"isRender",!0),d(this,"lockTime",0),d(this,"themeColor",null),d(this,"lockLockWait",void 0),d(this,"menus",new Array),d(this,"renders",new Array),d(this,"olds",new Array),this.lockLockWait=e;for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];this.menus.push(...n)}}class w extends r.a{constructor(e){super(v,s.a),d(this,"setting",void 0),this.setting=e}additional(e,t,n){const a=t.getComponent(v),i=t.getComponent(s.a);if(a.enable){a.value!==a.oldValue&&(a.hasTrigger=!1),a.begin||(a.value=-1,a.oldValue=-1,a.begin=!0),a.oldValue=a.value;const o=m(t,n);if(f(o,this.setting)&&(a.value=g(t,o,a.value)),-1!==a.value&&a.menus[a.value]){const o=a.menus[a.value];o.keys.forEach((s=>{a.pressReadys[s]&&i.keys[s]>0&&i.keys[s]!==i.presss[s]?(!0===o.hasEnable()&&(0,c.f)((()=>o.exec(e,t,n,s))),a.hasTrigger=!0,a.pressReadys[s]=!1):(i.keys[s]||0)<=0&&(a.pressReadys[s]=!0)}))}}else if(a.begin){if(-1!==a.oldValue&&-1!==a.value&&!a.hasTrigger&&a.olds[a.value]&&a.olds[a.value].hasRelease){const i=a.olds[a.value];!0===i.hasEnable()&&i.exec(e,t,n,""),a.hasTrigger=!1}(0,h.a)(a.olds),a.begin=!1}a.enable||((0,h.a)(a.renders),a.isRender=!1),a.menus.length>0&&(a.isRender&&((0,h.a)(a.renders),a.renders.push(...a.menus),a.isRender=!1),(0,h.a)(a.olds),a.olds.push(...a.menus),(0,h.a)(a.menus))}}function b(e,t,n,a,r,h){var c;if(!e.hasComponent(s.a)||null===(c=e.getComponent(v))||void 0===c||!c.enable)return[];const p=e.getComponent(v),d=p.renders.length,g=i.a/d,y=new Array,w=p.value;for(let e=0,t=0|d;e<t;e=e+1|0){const t=p.renders[e],n=(0,i.t)(g*e-i.b-g/2);y.push(new o.a("weapon-wheel-parts-arc-".concat(e),!0==!t.hasEnable()?"rgba(0,0,0,0.5)":e===w?"rgba(255,255,255,0.75)":p.themeColor?"rgba(".concat(Math.floor((0,u.b)(55,155,p.themeColor[0])),",").concat(Math.floor((0,u.b)(55,155,p.themeColor[1])),",").concat(Math.floor((0,u.b)(55,155,p.themeColor[2])),",0.75)"):"rgba(125,125,125,0.75)",1,!1,72.5,a,r,.75*h,(0,i.t)(n+g)-.01,(0,i.t)(n)+.01));const[s,c]=(0,i.q)((0,i.t)(n+g/2),0,1.5*h);y.push(new o.b("weapon-wheel-parts-text-".concat(t.name),"./asset/font.png",5,5,l.e,t.name instanceof Function?t.name(!1):t.name,s,c,1,0,0,"low"===t.hasEnable()||t.hasEnable()?.75:.25,"low"===t.hasEnable()?[1,0,0]:t.hasEnable()&&e===w?[0,0,0]:[1,1,1]))}const b=m(e,t),x=f(b,n)?(0,i.m)(0,0,-b.x,-b.y):g*w-i.b,M=p.renders[w];return p.isRender=!0,[new o.a("weapon-wheel-background","rgba(0,0,0,0.75)",1,!0,1,a,r,h,0,i.a,!0,0,0),M?new o.a("weapon-wheel-background-line","rgba(255,255,255,1.0)",1,!1,3,a,r,.5*h-.025,(0,i.t)(x+g/2),(0,i.t)(x-g/2),!0,0,0):null,M&&!1!==M.hasEnable()?new o.b("weapon-wheel-parts-text-".concat(M.name),"./asset/font.png",5,5,l.e,M.name instanceof Function?M.name(!0):M.name,0,-h/2*.5,2,0,0,1,"low"===M.hasEnable()?[1,0,0]:[1,1,1]):null,M&&!1!==M.hasEnable()?new o.b("weapon-wheel-parts-text-".concat(M.name),"./asset/font.png",5,5,l.e,M.getMessage(),0,h/2*.5,2,0,0,1,"low"===M.hasEnable()?[1,0,0]:[1,1,1]):null,...y]}a()}catch(x){a(x)}}))},(e,t,n)=>{"use strict";var a=n(19),i=n(3),o=n(20),s=n(28),r=n(290),l=n(104),h=n(174),c=n(113),u=n(36),p=n(55),d=n(291),g=n(88),m=n(209),f=n(211),y=n(128),v=n(29),w=n(37),b=n(42),x=n(159),M=n(103),E=n(87),_=n(100),C=n(166).f,T=n(293),S=n(202).forEach,k=n(132),O=n(45),A=n(158),L=n(80),P=n(243),I=L.get,N=L.set,R=O.f,W=A.f,z=Math.round,D=i.RangeError,F=h.ArrayBuffer,U=F.prototype,H=h.DataView,B=l.NATIVE_ARRAY_BUFFER_VIEWS,G=l.TYPED_ARRAY_CONSTRUCTOR,Y=l.TYPED_ARRAY_TAG,V=l.TypedArray,j=l.TypedArrayPrototype,K=l.aTypedArrayConstructor,X=l.isTypedArray,q="BYTES_PER_ELEMENT",J="Wrong length",Z=function(e,t){K(e);for(var n=0,a=t.length,i=new e(a);a>n;)i[n]=t[n++];return i},$=function(e,t){R(e,t,{get:function(){return I(this)[t]}})},Q=function(e){var t;return E(U,e)||"ArrayBuffer"==(t=w(e))||"SharedArrayBuffer"==t},ee=function(e,t){return X(e)&&!x(t)&&t in e&&d(+t)&&t>=0},te=function(e,t){return t=y(t),ee(e,t)?u(2,e[t]):W(e,t)},ne=function(e,t,n){return t=y(t),!(ee(e,t)&&b(n)&&v(n,"value"))||v(n,"get")||v(n,"set")||n.configurable||v(n,"writable")&&!n.writable||v(n,"enumerable")&&!n.enumerable?R(e,t,n):(e[t]=n.value,e)};s?(B||(A.f=te,O.f=ne,$(j,"buffer"),$(j,"byteOffset"),$(j,"byteLength"),$(j,"length")),a({target:"Object",stat:!0,forced:!B},{getOwnPropertyDescriptor:te,defineProperty:ne}),e.exports=function(e,t,n){var s=e.match(/\d+$/)[0]/8,l=e+(n?"Clamped":"")+"Array",h="get"+e,u="set"+e,d=i[l],y=d,v=y&&y.prototype,w={},x=function(e,t){R(e,t,{get:function(){return function(e,t){var n=I(e);return n.view[h](t*s+n.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,a){var i=I(e);n&&(a=(a=z(a))<0?0:a>255?255:255&a),i.view[u](t*s+i.byteOffset,a,!0)}(this,t,e)},enumerable:!0})};B?r&&(y=t((function(e,t,n,a){return c(e,v),P(b(t)?Q(t)?void 0!==a?new d(t,f(n,s),a):void 0!==n?new d(t,f(n,s)):new d(t):X(t)?Z(y,t):o(T,y,t):new d(m(t)),e,y)})),_&&_(y,V),S(C(d),(function(e){e in y||p(y,e,d[e])})),y.prototype=v):(y=t((function(e,t,n,a){c(e,v);var i,r,l,h=0,u=0;if(b(t)){if(!Q(t))return X(t)?Z(y,t):o(T,y,t);i=t,u=f(n,s);var p=t.byteLength;if(void 0===a){if(p%s)throw D(J);if((r=p-u)<0)throw D(J)}else if((r=g(a)*s)+u>p)throw D(J);l=r/s}else l=m(t),i=new F(r=l*s);for(N(e,{buffer:i,byteOffset:u,byteLength:r,length:l,view:new H(i)});h<l;)x(e,h++)})),_&&_(y,V),v=y.prototype=M(j)),v.constructor!==y&&p(v,"constructor",y),p(v,G,y),Y&&p(v,Y,l);var E=y!=d;w[l]=y,a({global:!0,constructor:!0,forced:E,sham:!B},w),q in y||p(y,q,s),q in v||p(v,q,s),k(l)}):e.exports=function(){}},(e,t,n)=>{var a=n(3),i=n(17),o=function(e){return i(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?o(a[e]):a[e]&&a[e][t]}},(e,t,n)=>{var a=n(88);e.exports=function(e){return a(e.length)}},(e,t,n)=>{"use strict";n.d(t,{a:()=>a});n(7),n(175),n(180);function a(){const e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".split("");for(let t=0,n=0|e.length;t<n;t=t+1|0)switch(e[t]){case"x":e[t]=Math.floor(16*Math.random()).toString(16);break;case"y":e[t]=(Math.floor(4*Math.random())+8).toString(16)}return e.join("")}},(e,t,n)=>{var a=n(3).TypeError;e.exports=function(e){if(null==e)throw a("Can't call method on "+e);return e}},(e,t,n)=>{var a=n(11);e.exports=a({}.isPrototypeOf)},(e,t,n)=>{var a=n(95),i=Math.min;e.exports=function(e){return e>0?i(a(e),9007199254740991):0}},(e,t,n)=>{var a=n(11),i=n(77),o=n(71),s=a(a.bind);e.exports=function(e,t){return i(e),void 0===t?e:o?s(e,t):function(){return e.apply(t,arguments)}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>f,b:()=>m,c:()=>y,d:()=>v,e:()=>w});n(18),n(302),n(1),n(2),n(214),n(215),n(7),n(308),n(180),n(106);var a=n(223),i=n(310),o=n(34),s=n(85),r=n(91),l=n(22),h=n(35);let c=0;function u(e,t){switch(e.toLowerCase()){case"text":return t.text();case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json();case"xml":return t.text().then((e=>(new DOMParser).parseFromString(e,"text/xml")));case"html":return t.text().then((e=>(new DOMParser).parseFromString(e,"text/html")))}return null}async function p(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{method:"GET",mode:"cors",cache:"no-store",credentials:"same-origin"};const a=await(0,i.a)(e,n).then((async e=>e.ok?await u(t,e):null)).catch((e=>(console.error(e),null)));return a}async function d(e){let t=null;c++;try{const n=prompt(e);null!==n&&(t=await p(n,"text"))}catch(e){console.error(e)}finally{c--}return t}async function g(e,t,n,i,o){let s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const r=s?e:"".concat(prompt("enter file name")||e).concat(n?"."+n[0]:"");switch(c++,i){case"text":o="data:".concat(t?t[0]:"",";charset=utf-8;base64,").concat((0,a.a)(o));break;case"blob":o=URL.createObjectURL(new Blob([o],{type:t[0]}))}const u=document.createElement("a");u.href=o,u.download=r,document.body.appendChild(u),u.click(),u.remove(),"blob"===i&&URL.revokeObjectURL(o),await new Promise((e=>{const t=()=>{(0,l.d)((0,h.d)(),"focus",t),e(null)};(0,l.b)((0,h.d)(),"focus",t)})),c--}function m(){return c>0}async function f(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text",n=arguments.length>2?arguments[2]:void 0,a=e;if(/^(data|blob):/.test(e)||new RegExp("^".concat(location.origin)).test(e))a=e;else if("file:"!==location.protocol){const t=/^http:\/\/[^\/]+\/$|^file:\/\/[^\/]+\/$|^http:\/\/$|^file:\/\/$/.test(location.origin)?location.origin.substring(0,location.origin.length-1):location.origin,n=(/^http:\/\/|^file:\/\//.test(location.pathname)||0===location.pathname.length?"/":location.pathname).replace(/\/[^\/]+$/,"/");a="".concat(t).concat(n).concat(e.replace(/^\.\/|^\//,""))}const i=await p(a,t,n);if(null===i)throw new Error("Not found file is ".concat(e));return{source:i,src:a}}async function y(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{method:"HEAD",mode:"cors",cache:"no-store",credentials:"same-origin"},n=!0;return await(0,i.a)(e,t).then((e=>!!e.ok||(n=!1))).catch((()=>n=!1)),n}async function v(e,t,n){return(0,o.b)()?await new Promise((a=>{const i=(0,s.a)(),o=e=>{const{data:t}=e;if(t instanceof Object&&i===t.key&&"return"===t.method)(0,l.d)(r.b,"message",o),t.value&&a(t.value)};(0,l.b)(r.b,"message",o),r.b.postMessage({method:"open",description:e,mimeTypes:t,extensions:n,key:i})})):"showOpenFilePicker"in window&&self.isSecureContext?await async function(e,t,n){let a=null;c++;try{if("electron"in self)a=await self.electron.openFile(e,n);else{const i=(await showOpenFilePicker({types:[{description:e,accept:(()=>{const e={};return e[t[0]]=n.map((e=>".".concat(e))),e})()}]}))[0];if("granted"===await i.requestPermission({mode:"read"})){const e=await i.getFile();a=await e.text()}else d(e)}}catch(e){console.error(e.message)}finally{c--}return a}(e,t,n):d(e)}async function w(e,t,n,a,i){(0,o.b)()?await new Promise((o=>{const h=(0,s.a)(),c=e=>{const{data:t}=e;if(t instanceof Object&&h===t.key&&"return"===t.method)(0,l.d)(r.b,"message",c),o(null)};(0,l.b)(r.b,"message",c),r.b.postMessage({method:"save",description:e,mimeTypes:t,extensions:n,type:a,text:i,key:h})})):"showSaveFilePicker"in self&&self.isSecureContext?await async function(e,t,n,a,i){let o="boxengine-file".concat(n?"."+n[0]:""),s=null;c++;try{if("electron"in self)await self.electron.saveFile(i,e,n);else{const a=await self.showSaveFilePicker({excludeAcceptAllOption:!1,types:[{description:e,accept:(()=>{const e={};return e[t[0]]=n.map((e=>".".concat(e))),e})()}]});if(o=a.name,"granted"!==await a.requestPermission({mode:"readwrite"}))throw"can't save file.";s=await a.createWritable(),await s.write(i)}}catch(e){console.error(e),await g(o,t,n,a,i instanceof Function?i():i,!0)}finally{c--,null!==s&&await s.close()}}(e,t,n,a,i):g("boxengine-file",t,n,a,i instanceof Function?i():i)}(0,o.b)()||(0,l.b)(r.b,"message",(async e=>{const{data:t}=e;if(!(t instanceof Object))return;let n=null;switch(t.method){case"open":n=await v(t.description,t.mimeTypes,t.extensions);break;case"save":await w(t.description,t.mimeTypes,t.extensions,t.type,t.text)}r.b.postMessage({method:"return",value:n,key:t.key})}))},(e,t,n)=>{"use strict";n.d(t,{a:()=>u,b:()=>s,c:()=>o,d:()=>c,e:()=>i,f:()=>p,g:()=>l,h:()=>h,i:()=>r});var a=n(35);const i=new a.a("main"),o=new a.a("http"),s=new a.a("file"),r=new a.a("stylesheet"),l=new a.a("pointer-lock"),h=new a.a("screen"),c=new a.a("local-storage"),u=new a.a("device"),p=new a.a("platform")},(e,t,n)=>{"use strict";n.d(t,{a:()=>o});var a=n(265),i=n.n(a);function o(e){return i()(e)}},(e,t,n)=>{"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{a:()=>i});class i{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;a(this,"enableSprint",!1),a(this,"enableTacticalSprint",!1),a(this,"pressSprint",-1),a(this,"isSprint",!1),a(this,"isTacticalSprint",!1),a(this,"value",0),a(this,"walkSpeed",void 0),a(this,"cluchSpeed",void 0),a(this,"sprintSpeed",void 0),a(this,"tacticalSprintSpeed",void 0),a(this,"tacticalSprintStaminaValue",void 0),this.walkSpeed=e,this.cluchSpeed=t,this.sprintSpeed=n,this.tacticalSprintSpeed=i,this.tacticalSprintStaminaValue=o}}},(e,t,n)=>{var a=n(83);e.exports=a("navigator","userAgent")||""},e=>{var t=Math.ceil,n=Math.floor;e.exports=function(e){var a=+e;return a!=a||0===a?0:(a>0?n:t)(a)}},(e,t,n)=>{"use strict";n.d(t,{a:()=>i});n(1),n(2);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class i{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Array,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];a(this,"time",0),a(this,"frame",0),a(this,"name",null),a(this,"oldName",null),a(this,"frames",new Array),a(this,"speed",void 0),a(this,"loop",void 0),this.frames.push(...e),this.speed=t,this.loop=n}}},(e,t,n)=>{"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{a:()=>i});class i{constructor(e,t,n,i){a(this,"start",void 0),a(this,"max",void 0),a(this,"oldCount",0),a(this,"timeLow",void 0),a(this,"timeHigh",void 0),this.start=e,this.max=t,this.timeLow=n,this.timeHigh=i}}},(e,t,n)=>{var a=n(11),i=a({}.toString),o=a("".slice);e.exports=function(e){return o(i(e),8,-1)}},(e,t,n)=>{var a=n(77);e.exports=function(e,t){var n=e[t];return null==n?void 0:a(n)}},(e,t,n)=>{var a=n(11),i=n(25),o=n(272);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=a(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(e){}return function(n,a){return i(n),o(a),t?e(n,a):n.__proto__=a,n}}():void 0)},(e,t,n)=>{var a=n(45).f,i=n(29),o=n(21)("toStringTag");e.exports=function(e,t,n){e&&!n&&(e=e.prototype),e&&!i(e,o)&&a(e,o,{configurable:!0,value:t})}},(e,t,n)=>{var a=n(3);e.exports=a.Promise},(e,t,n)=>{var a,i=n(25),o=n(364),s=n(167),r=n(165),l=n(196),h=n(74),c=n(164),u=c("IE_PROTO"),p=function(){},d=function(e){return"<script>"+e+"</"+"script>"},g=function(e){e.write(d("")),e.close();var t=e.parentWindow.Object;return e=null,t},m=function(){try{a=new ActiveXObject("htmlfile")}catch(e){}var e,t;m="undefined"!=typeof document?document.domain&&a?g(a):((t=h("iframe")).style.display="none",l.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(d("document.F=Object")),e.close(),e.F):g(a);for(var n=s.length;n--;)delete m.prototype[s[n]];return m()};r[u]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(p.prototype=i(e),n=new p,p.prototype=null,n[u]=e):n=m(),void 0===t?n:o.f(n,t)}},(e,t,n)=>{"use strict";var a,i,o,s=n(207),r=n(28),l=n(3),h=n(17),c=n(42),u=n(29),p=n(37),d=n(111),g=n(55),m=n(46),f=n(45).f,y=n(87),v=n(139),w=n(100),b=n(21),x=n(163),M=l.Int8Array,E=M&&M.prototype,_=l.Uint8ClampedArray,C=_&&_.prototype,T=M&&v(M),S=E&&v(E),k=Object.prototype,O=l.TypeError,A=b("toStringTag"),L=x("TYPED_ARRAY_TAG"),P=x("TYPED_ARRAY_CONSTRUCTOR"),I=s&&!!w&&"Opera"!==p(l.opera),N=!1,R={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},W={BigInt64Array:8,BigUint64Array:8},z=function(e){if(!c(e))return!1;var t=p(e);return u(R,t)||u(W,t)};for(a in R)(o=(i=l[a])&&i.prototype)?g(o,P,i):I=!1;for(a in W)(o=(i=l[a])&&i.prototype)&&g(o,P,i);if((!I||!h(T)||T===Function.prototype)&&(T=function(){throw O("Incorrect invocation")},I))for(a in R)l[a]&&w(l[a],T);if((!I||!S||S===k)&&(S=T.prototype,I))for(a in R)l[a]&&w(l[a].prototype,S);if(I&&v(C)!==S&&w(C,S),r&&!u(S,A))for(a in N=!0,f(S,A,{get:function(){return c(this)?this[L]:void 0}}),R)l[a]&&g(l[a],L,a);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:I,TYPED_ARRAY_CONSTRUCTOR:P,TYPED_ARRAY_TAG:N&&L,aTypedArray:function(e){if(z(e))return e;throw O("Target is not a typed array")},aTypedArrayConstructor:function(e){if(h(e)&&(!w||y(T,e)))return e;throw O(d(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n,a){if(r){if(n)for(var i in R){var o=l[i];if(o&&u(o.prototype,e))try{delete o.prototype[e]}catch(n){try{o.prototype[e]=t}catch(e){}}}S[e]&&!n||m(S,e,n?t:I&&E[e]||t,a)}},exportTypedArrayStaticMethod:function(e,t,n){var a,i;if(r){if(w){if(n)for(a in R)if((i=l[a])&&u(i,e))try{delete i[e]}catch(e){}if(T[e]&&!n)return;try{return m(T,e,n?t:I&&T[e]||t)}catch(e){}}for(a in R)!(i=l[a])||i[e]&&!n||m(i,e,t)}},isView:function(e){if(!c(e))return!1;var t=p(e);return"DataView"===t||u(R,t)||u(W,t)},isTypedArray:z,TypedArray:T,TypedArrayPrototype:S}},(e,t,n)=>{"use strict";n.d(t,{a:()=>m,b:()=>c,c:()=>r,d:()=>u,e:()=>h,f:()=>l});n(1),n(2);var a=n(56),i=n(0);function o(e,t,n,a,o,s,r){const l=(0,i.m)(e,t,n,a),h=(0,i.m)(e,t,o,s),c=(0,i.m)(n,a,o,s);if((0,i.h)(l,h)>i.b&&(0,i.h)(l,c)>i.b)return 0;const u=(0,i.o)(e,t,o,s),p=(0,i.o)(e,t,n,a),d=(0,i.o)(o,s,n,a),g=Math.sqrt((p+d+u)*(p-d+u)*(-p+d+u)*(p+d-u)/(4*p*p)),m=Math.sqrt(r/2);return Math.max(0,m-g)}function s(e,t,n,a,o,s){let[r,l]=(0,i.z)(e,t,a,o),h=Math.sqrt(r*r+l*l);const c=n/2+s/2-h;return c<=0?[0,0]:(h>0&&(h=1/h),r*=h,l*=h,[-r*c,-l*c])}function r(e,t,n,a,i,r,l,h,c){const u=0|e,p=0|t,d=0|n;let g=0,m=0,f=!0;if(i+h>p&&i<p+1){const t=u,i=d,h=u+1,y=d,v=u,w=d+1,b=u+1,x=d+1;if(d<=r&&d+1>r){const n=o(h,y,b,x,a,r,l)-o(t,i,v,w,a,r,l);n>0?g=Math.round(a+n-l/2)+l/2-a:n<0&&(g=Math.round(a+n+l/2)-l/2-a),g=e+.5>a?-Math.abs(g):Math.abs(g),f=!1}if(u<=a&&u+1>a){const e=o(v,w,b,x,a,r,l)-o(t,i,h,y,a,r,l);e>0?m=Math.round(r+e-l/2)+l/2-r:e<0&&(m=Math.round(r+e+l/2)-l/2-r),m=n+.5>r?-Math.abs(m):Math.abs(m),f=!1}f&&(!c(t-1,p,i)&&!c(t,p,i-1)&&!c(t-1,p,i-1)&&u>a&&d>r?[g,m]=s(t,i,0,a,r,l):!c(t+1,p,i)&&!c(t,p,i-1)&&!c(t+1,p,i-1)&&u+1<a&&d>r?[g,m]=s(h,y,0,a,r,l):!c(t-1,p,i)&&!c(t,p,i+1)&&!c(t-1,p,i+1)&&u>a&&d+1<r?[g,m]=s(v,w,0,a,r,l):!c(t+1,p,i)&&!c(t,p,i+1)&&!c(t+1,p,i+1)&&u+1<a&&d+1<r&&([g,m]=s(b,x,0,a,r,l)))}return[g,0,m,f]}function l(e,t,n,a,o,s,r,l){if(e|=0,n|=0,o+l>(t|=0)&&o<t+1){const t=r/2;if((a+t>e||a-t<e+1)&&(s+t>n||s-t<n+1)){const o=e,r=n,l=e+1,h=n,c=e,u=n+1,p=e+1,d=n+1;return a<o&&s<r?(0,i.o)(a,s,o,r)<t:a>l&&s<h?(0,i.o)(a,s,l,h)<t:a<c&&s>u?(0,i.o)(a,s,c,u)<t:!(a>p&&s>d)||(0,i.o)(a,s,p,d)<t}}return!1}function h(e,t,n,a,i,o,s,r,l,h){const[u,p,d,g,m,f]=c(e,t,n,a,i,o,s,r,l,h);return 0!==u||0!==p||0!==d||0!==g||0!==m||0!==f}function c(e,t,n,a,o,s,r,l,h,c){if(t<r+c&&t+o>r||r<t+o&&r+c>t){const[u,p,d,g]=function(e,t,n,a,o,s){let[r,l]=(0,i.z)(e,t,a,o),h=Math.sqrt(r*r+l*l),c=n/2+s/2-h;return c<=0?[0,0,0,0]:(h>0&&(h=1/h),r*=h,l*=h,c/=2,[r*c,l*c,-r*c,-l*c])}(e,n,a,s,l,h),m=0!==u||0!==p||0!==d||0!==g?r-t>c/.5?t-(r+c):r-(t+o):0;return[u,m/2,p,d,-m/2,g]}return[0,0,0,0,0,0]}function u(e,t,n,i,o){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:()=>!1;const r=(0,a.c)(e,t,n,i,o);for(let e=0,t=0|r.length;e<t;e=e+3|0){if(s("type",r[e],r[e+1],r[e+2]))return!0}return!1}function p(e,t,n,a,i,o,s,r,l){return(e-a)*(s-a)+(t-i)*(r-i)+(n-o)*(l-o)}function d(e,t,n,a,o,s,r,l,h,c){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:new i.f(0,0,0),p=arguments.length>11&&void 0!==arguments[11]?arguments[11]:new i.f(0,0,0);const d=a*a+o*o+s*s,g=a*(r-=e)+o*(l-=t)+s*(h-=n),m=r*r+l*l+h*h-c*c;if(0===d)return!1;let f=g*g-d*m;if(f<0)return!1;f=Math.sqrt(f);const y=(g-f)/d,v=(g+f)/d;return!(y<0||v<0)&&(u.x=e+y*a,u.y=t+y*o,u.z=n+y*s,p.x=e+v*a,p.y=t+v*o,p.z=n+v*s,!0)}function g(e,t,n,a,o,s,r,l,h,c,u,p,d){let g=arguments.length>13&&void 0!==arguments[13]?arguments[13]:new i.f(0,0,0),m=arguments.length>14&&void 0!==arguments[14]?arguments[14]:new i.f(0,0,0);const f=r-e,y=l-t,v=h-n,w=(c-=e)-f,b=(u-=t)-y,x=(p-=n)-v,M=a*a+o*o+s*s,E=w*a+b*o+x*s,_=f*a+y*o+v*s,C=w*w+b*b+x*x,T=f*w+y*b+v*x,S=f*f+y*y+v*v,k=d*d;if(0===C)return!1;const O=M-E*E/C,A=_-T*E/C,L=S-T*T/C-k;if(0===O)return!1;let P=A*A-O*L;if(P<0)return!1;P=Math.sqrt(P);const I=(A-P)/O,N=(A+P)/O;return g.x=e+I*a,g.y=t+I*o,g.z=n+I*s,m.x=e+N*a,m.y=t+N*o,m.z=n+N*s,!0}function m(e,t,n,a,o,s,r,l,h,c,u,m){const[f,y,v]=(0,i.s)(a,o),w=new i.f(-1,-1,-1),b=new i.f(-1,-1,-1);c-=m/=2;let x=!1,M=!1,E=!1;if(!0===d(e,t,n,f,y,v,s,r+=m,l,m,w,b)&&p(h,c,u,s,r,l,w.x,w.y,w.z)<=0)x=!0;else if(!0===d(e,t,n,f,y,v,h,c,u,m,w,b)&&p(s,r,l,h,c,u,w.x,w.y,w.z)<=0)M=!0;else{if(!(!0===g(e,t,n,f,y,v,s,r,l,h,c,u,m,w,b)&&p(s,r,l,h,c,u,w.x,w.y,w.z)>0&&p(h,c,u,s,r,l,w.x,w.y,w.z)>0))return[-1,-1,-1,-1,-1,-1];E=!0}const _=new i.f(0,0,0);return x&&p(h,c,u,s,r,l,b.x,b.y,b.z)<=0||M&&p(s,r,l,h,c,u,b.x,b.y,b.z)<=0||E&&p(s,r,l,h,c,u,b.x,b.y,b.z)>0&&p(h,c,u,s,r,l,b.x,b.y,b.z)>0||!0===d(e,t,n,f,y,v,s,r,l,m,_,b)&&p(h,c,u,s,r,l,b.x,b.y,b.z)<=0||!0===d(e,t,n,f,y,v,h,c,u,m,_,b)&&p(s,r,l,h,c,u,b.x,b.y,b.z)<=0||g(e,t,n,f,y,v,s,r,l,h,c,u,m,_,b),[w.x,w.y,w.z,b.x,b.y,b.z]}},(e,t,n)=>{"use strict";var a=n(135),i=n(20),o=n(11),s=n(176),r=n(12),l=n(25),h=n(17),c=n(95),u=n(88),p=n(43),d=n(86),g=n(177),m=n(99),f=n(298),y=n(179),v=n(21)("replace"),w=Math.max,b=Math.min,x=o([].concat),M=o([].push),E=o("".indexOf),_=o("".slice),C="$0"==="a".replace(/./,"$0"),T=!!/./[v]&&""===/./[v]("a","$0");s("replace",(function(e,t,n){var o=T?"$":"$0";return[function(e,n){var a=d(this),o=null==e?void 0:m(e,v);return o?i(o,e,a,n):i(t,p(a),e,n)},function(e,i){var s=l(this),r=p(e);if("string"==typeof i&&-1===E(i,o)&&-1===E(i,"$<")){var d=n(t,s,r,i);if(d.done)return d.value}var m=h(i);m||(i=p(i));var v=s.global;if(v){var C=s.unicode;s.lastIndex=0}for(var T=[];;){var S=y(s,r);if(null===S)break;if(M(T,S),!v)break;""===p(S[0])&&(s.lastIndex=g(r,u(s.lastIndex),C))}for(var k,O="",A=0,L=0;L<T.length;L++){for(var P=p((S=T[L])[0]),I=w(b(c(S.index),r.length),0),N=[],R=1;R<S.length;R++)M(N,void 0===(k=S[R])?k:String(k));var W=S.groups;if(m){var z=x([P],N,I,r);void 0!==W&&M(z,W);var D=p(a(i,void 0,z))}else D=f(P,r,I,N,W,i);I>=A&&(O+=_(r,A,I)+D,A=I+P.length)}return O+_(r,A)}]}),!!r((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!C||T)},(e,t,n)=>{"use strict";n.d(t,{a:()=>f,b:()=>g,c:()=>m});n(18),n(15),n(16);var a=n(85),i=n(34),o=n(316),s=n(91),r=n(22),l=n(35);const h=new Array;let c=!1,u=!1,p=null,d=null;function g(){return(0,i.b)()?h.length>0?u:c:null!==document.pointerLockElement}async function m(){return new Promise(((e,t)=>{if((0,i.b)()){const n=(0,a.a)();function c(e){h.includes(e.key)&&h.splice(h.indexOf(e.key),1),(0,r.d)(s.g,"message",d)}function d(a){const{data:i}=a;if(i instanceof Object&&i.key===n)switch(i.method){case"success":c(i),e();break;case"error":c(i),t()}}u=!0,(0,r.b)(s.g,"message",d),s.g.postMessage({method:"exec",value:!0,key:n})}else!g()&&(0,o.a)()?new Promise((async e=>{function t(){return new Promise(((e,n)=>{function a(){(0,r.d)(document,"pointerlockchange",a),(0,r.d)(document,"pointerlockerror",a),e()}(0,r.b)(document,"pointerlockchange",a),(0,r.b)(document,"pointerlockerror",a);let i=!0;if(null!==document.body&&null!==p){i=!1;try{p.requestPointerLock()}catch(o){i=!1}}if(i){function s(){(0,r.d)((0,l.d)(),"DOMContentLoaded",s),t().then(e).catch(n)}(0,r.b)((0,l.d)(),"DOMContentLoaded",s)}}))}!function n(){t().then((()=>{s.g.postMessage({method:"exec",value:!0}),e(null)})).catch((()=>{setTimeout(n,1e3)}))}()})).then((()=>e())):e()}))}function f(){return d=performance.now(),new Promise((e=>{if((0,i.b)()){const t=(0,a.a)();function n(a){const{data:i}=a;if(i instanceof Object&&i.key===t&&"success"===i.method)h.includes(i.key)&&h.splice(h.indexOf(i.key),1),(0,r.d)(s.g,"message",n),e()}u=!1,h.push(t),(0,r.b)(s.g,"message",n),s.g.postMessage({method:"exec",value:!1,key:t})}else g()&&(document.exitPointerLock(),s.g.postMessage({method:"exec",value:!1})),e()}))}(0,i.b)()?(0,r.b)(s.g,"message",(e=>{const{data:t}=e;if(t instanceof Object&&"exec"===t.method)c=t.value})):((0,r.b)(s.g,"message",(async e=>{const{data:t}=e;if(t instanceof Object&&"exec"===t.method)await(t.value?m():f()).then((()=>{s.g.postMessage({method:"success",key:t.key})})).catch((()=>{s.g.postMessage({method:"error",key:t.key})}))})),(0,r.b)(document,"pointerlockchange",(()=>{s.g.postMessage({method:"exec",value:null!==document.pointerLockElement})})),(0,r.b)(document,"pointerlockerror",(()=>{s.g.postMessage({method:"exec",value:!1})})))},(e,t,n)=>{"use strict";n.d(t,{a:()=>h,b:()=>l});var a=n(4),i=n(97),o=n(39),s=n(9),r=n(8);function l(e){let t=0;if(e.hasComponent(i.a)){const n=e.getComponent(i.a);t=Math.max(0,Math.min(1,((0,o.e)(e,"combo",0)-n.start)/(n.max-n.start)))}return t}class h extends a.a{constructor(){super(i.a,s.b,o.a)}offset(e,t,n){const a=t.getComponent(i.a),l=t.getComponent(s.b),h=t.getComponent(o.a);if(!h.value.hasOwnProperty("combo")||!h.value.hasOwnProperty("gauge"))return;const c=(0,o.e)(t,"combo");if(a.start<=c&&a.oldCount!==c&&a.oldCount<c&&n.createSound("./asset/sound/combo/up.mp3",null,"combo").play(),a.oldCount!==c&&a.oldCount<a.start&&c>=a.start&&(0,o.h)(t,"gauge",(0,o.d)(t,"gauge")),"air"!==l.state&&null===l.activeEntity&&-1===l.respawnTime&&-1===l.deathTime&&-1===l.goleTime&&-1===l.intermissionTime&&c>=a.start&&(0,o.e)(t,"gauge")>0){(0,o.h)(t,"gauge",Math.max(0,(0,o.e)(t,"gauge")-(0,r.c)(e/(60*(a.timeLow-(a.timeLow-a.timeHigh)*Math.min(1,((0,o.e)(t,"combo")-a.start)/(a.max-a.start)))),0)));const i=(0,o.e)(t,"gauge"),s=(0,o.e)(t,"combo");i<=0&&(s>0&&(s>1&&(0,o.h)(t,"gauge",(0,o.d)(t,"gauge")),n.createSound("./asset/sound/combo/down.mp3",null,"combo").play()),(0,o.h)(t,"combo",Math.max(0,(0,o.e)(t,"combo")-1)))}a.oldCount=c}}},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>_e});var i=n(504),o=n(6),s=n(44),r=n(41),l=n(31),h=n(13),c=n(503),u=n(505),p=n(75),d=n(256),g=n(154),m=n(186),f=n(188),y=n(344),v=n(65),w=n(69),b=n(49),x=n(189),M=n(53),E=n(30),_=n(218),C=n(26),T=n(325),S=n(127),k=n(39),O=n(40),A=n(347),L=n(156),P=n(81),I=n(10),N=n(70),R=n(5),W=n(326),z=n(32),D=n(412),F=n(413),U=n(414),H=n(415),B=n(348),G=n(261),Y=n(227),V=n(187),j=n(226),K=n(246),X=n(327),q=n(416),J=n(27),Z=n(417),$=n(418),Q=n(419),ee=n(124),te=n(345),ne=n(346),ae=n(260),ie=n(262),oe=n(329),se=n(54),re=n(420),le=n(68),he=n(330),ce=n(0),ue=e([P,R,z,D,F,U,H,q,J,Z,$,Q,ee,re]);[P,R,z,D,F,U,H,q,J,Z,$,Q,ee,re]=ue.then?(await ue)():ue;const pe=["./asset/sound/enemy/find-pistol-1.mp3","./asset/sound/enemy/find-pistol-2.mp3","./asset/sound/enemy/find-pistol-3.mp3","./asset/sound/enemy/find-pistol-4.mp3"],de=["./asset/sound/enemy/find-shotgun-1.mp3","./asset/sound/enemy/find-shotgun-2.mp3","./asset/sound/enemy/find-shotgun-3.mp3","./asset/sound/enemy/find-shotgun-4.mp3","./asset/sound/enemy/find-shotgun-5.mp3"],ge=["./asset/sound/enemy/find-machingun-1.mp3","./asset/sound/enemy/find-machingun-2.mp3","./asset/sound/enemy/find-machingun-3.mp3"],me=["./asset/sound/enemy/find-melee-1.mp3","./asset/sound/enemy/find-melee-2.mp3","./asset/sound/enemy/find-melee-3.mp3"],fe=["./asset/sound/enemy/pain-pistol-1.mp3","./asset/sound/enemy/pain-pistol-2.mp3"],ye=["./asset/sound/enemy/pain-shotgun-1.mp3","./asset/sound/enemy/pain-shotgun-2.mp3"],ve=["./asset/sound/enemy/pain-machingun-1.mp3","./asset/sound/enemy/pain-machingun-2.mp3"],we=["./asset/sound/enemy/pain-melee-1.mp3","./asset/sound/enemy/pain-melee-2.mp3"],be=["./asset/sound/enemy/death-pistol-1.mp3"],xe=["./asset/sound/enemy/death-shotgun-1.mp3"],Me=["./asset/sound/enemy/death-machingun-1.mp3"],Ee=["./asset/sound/enemy/death-melee-1.mp3"],_e={PLAYER:new W.a(R.h.UI_START_POINT,1,!0,((e,t,n,a,o)=>{const r=new Z.a(e,t,n,a,o instanceof J.a?o.getGameMode():se.a.CAMPAING),l=new I.a("death-respawn-point");l.position.x=e,l.position.y=t,l.position.z=n;const h=new he.a("camera",new d.a,new w.a(.25),new v.a(.125,.125,.0125,.025*Math.PI,1.5),new x.a(1.5,.5),new i.a(r),new s.a(0,1.5,0));h.fov=o instanceof J.a?o.getFOVToCamera():1;const b=new re.a("hud hud-muzzle-flash-right",h),M=new I.a("hud hand-right",new p.a(-.25,-1.5,.025,1,0,!0),new g.a(.25),new m.a(.125,.125,.25*ce.b,1,0,ce.b,0,.25,!1,!0,!0),new f.a(b,!1),new c.a(R.h.NONE,1,0,!1,!1),new u.a(!0,!0,!0,0),new i.a(h)),E=new re.a("hud hud-muzzle-flash-right",h),_=new I.a("hud hand-left",new p.a(.25,-1.5,.025,1,0,!0),new g.a(.25),new m.a(.125,.125,.25*ce.b,1,.25,ce.b,0,.25,!0,!0,!0),new f.a(E,!0),new c.a(R.h.NONE,1,0,!1,!1),new u.a(!0,!0,!0,0),new i.a(h)),C=new I.a("hud foot",new p.a(0,-10,.05,1,0,!1),new g.a(.25),new y.a,new c.a(R.h.NONE,1,0,!1,!1),new u.a(!0,!0,!0,0),new i.a(h));return o.addEntitys(r,l,h,M,b,_,E,C),o instanceof z.a&&o.setCamera(h),o instanceof J.a&&o.setPlayer(r),r})),HELP_1:new W.a(R.h.UI_HELP_POINT,1,!1,((e,t,n,a,o)=>{const s=new I.a("help help-1",new c.a(R.h.UI_HELP_POINT,1),new u.a(!0,!1,!0,.5),new i.a(o instanceof J.a?o.getPlayer():null),new te.a(.25,1),new ne.a((()=>["Steps are climbed automatically"]),1,"./asset/sound/system/help.mp3",1));return s.position.x=e,s.position.y=t+.5,s.position.z=n,o.addEntitys(s),s})),HELP_2:new W.a(R.h.UI_HELP_POINT,1,!1,((e,t,n,a,o)=>{const s=o.getControlManager(),r=new I.a("help help-2",new c.a(R.h.UI_HELP_POINT,1),new u.a(!0,!1,!0,.5),new i.a(o instanceof J.a?o.getPlayer():null),new te.a(.25,1),new ne.a((()=>["Climb the wall by jumping with the (".concat(o instanceof J.a?s.getKey("jump"):"space",")")," and continuing to move forward"]),1,"./asset/sound/system/help.mp3",1));return r.position.x=e,r.position.y=t+.5,r.position.z=n,o.addEntitys(r),r})),HELP_3:new W.a(R.h.UI_HELP_POINT,1,!1,((e,t,n,a,o)=>{const s=new I.a("help help-3",new c.a(R.h.UI_HELP_POINT,1),new u.a(!0,!1,!0,.5),new i.a(o instanceof J.a?o.getPlayer():null),new te.a(.25,1),new ne.a((()=>["Jump towards the wall and wall run"]),1,"./asset/sound/system/help.mp3",1));return s.position.x=e,s.position.y=t+.5,s.position.z=n,o.addEntitys(s),s})),HELP_4:new W.a(R.h.UI_HELP_POINT,1,!1,((e,t,n,a,o)=>{const s=o.getControlManager(),r=new I.a("help help-4",new c.a(R.h.UI_HELP_POINT,1),new u.a(!0,!1,!0,.5),new i.a(o instanceof J.a?o.getPlayer():null),new te.a(.25,1),new ne.a((()=>["Wall jump with (".concat(o instanceof J.a?s.getKey("jump"):"space",") during wall run")]),1,"./asset/sound/system/help.mp3",1));return r.position.x=e,r.position.y=t+.5,r.position.z=n,o.addEntitys(r),r})),HELP_5:new W.a(R.h.UI_HELP_POINT,1,!1,((e,t,n,a,o)=>{const s=new I.a("help help-5",new c.a(R.h.UI_HELP_POINT,1),new u.a(!0,!1,!0,.5),new i.a(o instanceof J.a?o.getPlayer():null),new te.a(.25,1),new ne.a((()=>["The cliff can be grabbed"]),1,"./asset/sound/system/help.mp3",1));return s.position.x=e,s.position.y=t+.5,s.position.z=n,o.addEntitys(s),s})),HELP_6:new W.a(R.h.UI_HELP_POINT,1,!1,((e,t,n,a,o)=>{const s=o.getControlManager(),r=new I.a("help help-6",new c.a(R.h.UI_HELP_POINT,1),new u.a(!0,!1,!0,.5),new i.a(o instanceof J.a?o.getPlayer():null),new te.a(.25,2),new ne.a((()=>["Turn to the direction you want to fly","and jump with the (".concat(o instanceof J.a?s.getKey("jump"):"space",")")]),1,"./asset/sound/system/help.mp3",1));return r.position.x=e,r.position.y=t+.5,r.position.z=n,o.addEntitys(r),r})),HELP_7:new W.a(R.h.UI_HELP_POINT,1,!1,((e,t,n,a,o)=>{const s=new I.a("help help-7",new c.a(R.h.UI_HELP_POINT,1),new u.a(!0,!1,!0,.5),new i.a(o instanceof J.a?o.getPlayer():null),new te.a(.25,1),new ne.a((()=>["You can move sideways while grabbing the cliff"]),1,"./asset/sound/system/help.mp3",1));return s.position.x=e,s.position.y=t+.5,s.position.z=n,o.addEntitys(s),s})),HELP_8:new W.a(R.h.UI_HELP_POINT,1,!1,((e,t,n,a,o)=>{const s=new I.a("help help-8",new c.a(R.h.UI_HELP_POINT,1),new u.a(!0,!1,!0,.5),new i.a(o instanceof J.a?o.getPlayer():null),new te.a(.25,1),new ne.a((()=>["Jump up and grab an overhead cliff"]),1,"./asset/sound/system/help.mp3",1));return s.position.x=e,s.position.y=t+.5,s.position.z=n,o.addEntitys(s),s})),HELP_9:new W.a(R.h.UI_HELP_POINT,1,!1,((e,t,n,a,o)=>{const s=new I.a("help help-9",new c.a(R.h.UI_HELP_POINT,1),new u.a(!0,!1,!0,.5),new i.a(o instanceof J.a?o.getPlayer():null),new te.a(.25,1),new ne.a((()=>["You can turn left and change direction","while climbing the wall"]),1,"./asset/sound/system/help.mp3",1));return s.position.x=e,s.position.y=t+.5,s.position.z=n,o.addEntitys(s),s})),HELP_10:new W.a(R.h.UI_HELP_POINT,1,!1,((e,t,n,a,o)=>{const s=new I.a("help help-10",new c.a(R.h.UI_HELP_POINT,1),new u.a(!0,!1,!0,.5),new i.a(o instanceof J.a?o.getPlayer():null),new te.a(.25,1),new ne.a((()=>["You can slide by crouching during the sprint"]),1,"./asset/sound/system/help.mp3",1));return s.position.x=e,s.position.y=t+.5,s.position.z=n,o.addEntitys(s),s})),HELP_11:new W.a(R.h.UI_HELP_POINT,1,!1,((e,t,n,a,o)=>{const s=new I.a("help help-11",new c.a(R.h.UI_HELP_POINT,1),new u.a(!0,!1,!0,.5),new i.a(o instanceof J.a?o.getPlayer():null),new te.a(.25,1),new ne.a((()=>["A coil can be created by crouching while jumping"]),1,"./asset/sound/system/help.mp3",1));return s.position.x=e,s.position.y=t+.5,s.position.z=n,o.addEntitys(s),s})),HELP_12:new W.a(R.h.UI_HELP_POINT,1,!1,((e,t,n,a,o)=>{const s=new I.a("help help-12",new c.a(R.h.UI_HELP_POINT,1),new u.a(!0,!1,!0,.5),new i.a(o instanceof J.a?o.getPlayer():null),new te.a(.25,1),new ne.a((()=>["Punches can tempolary flinch the enemy."]),1,"./asset/sound/system/help.mp3",1));return s.position.x=e,s.position.y=t+.5,s.position.z=n,o.addEntitys(s),s})),HELP_13:new W.a(R.h.UI_HELP_POINT,1,!1,((e,t,n,a,o)=>{const s=new I.a("help help-12",new c.a(R.h.UI_HELP_POINT,1),new u.a(!0,!1,!0,.5),new i.a(o instanceof J.a?o.getPlayer():null),new te.a(.25,1),new ne.a((()=>["Hold the button down for a while and then release it","you can spend stamina to blow up enemies."]),1,"./asset/sound/system/help.mp3",1));return s.position.x=e,s.position.y=t+.5,s.position.z=n,o.addEntitys(s),s})),HELP_14:new W.a(R.h.UI_HELP_POINT,1,!1,((e,t,n,a,o)=>{const s=new I.a("help help-12",new c.a(R.h.UI_HELP_POINT,1),new u.a(!0,!1,!0,.5),new i.a(o instanceof J.a?o.getPlayer():null),new te.a(.25,1),new ne.a((()=>["The aim is stable when crouching"]),1,"./asset/sound/system/help.mp3",1));return s.position.x=e,s.position.y=t+.5,s.position.z=n,o.addEntitys(s),s})),HELP_15:new W.a(R.h.UI_HELP_POINT,1,!1,((e,t,n,a,o)=>{const s=o.getControlManager(),r=new I.a("help help-13",new c.a(R.h.UI_HELP_POINT,1),new u.a(!0,!1,!0,.5),new i.a(o instanceof J.a?o.getPlayer():null),new te.a(.25,1),new ne.a((()=>["You can lean with ".concat(o instanceof J.a?"gamepad"===o.getControlManager().getInputType()?"(".concat(s.getKey("auto-lean"),") and (left stick)"):"(".concat(s.getKey("lean-left"),") or (").concat(s.getKey("lean-right"),")"):"(q) or (e)"),"Leaning through the wall stabilizes the aim"]),1,"./asset/sound/system/help.mp3",1));return r.position.x=e,r.position.y=t+.5,r.position.z=n,o.addEntitys(r),r})),HELP_16:new W.a(R.h.UI_HELP_POINT,1,!1,((e,t,n,a,o)=>{const s=o.getControlManager(),r=new I.a("help help-14",new c.a(R.h.UI_HELP_POINT,1),new u.a(!0,!1,!0,.5),new i.a(o instanceof J.a?o.getPlayer():null),new te.a(.25,1),new ne.a((()=>["You can dual wild with ".concat(o instanceof J.a?"".concat("gamepad"===o.getControlManager().getInputType()?"(".concat(s.getKey("weapon-wheel"),")"):"(weapon selection key) or (".concat(s.getKey("weapon-wheel"),")")," and (").concat(s.getKey("fire-left"),") or (").concat(s.getKey("fire-right"),")"):"(weapon selection key) or (tab) and (mouse-left) or (mouse-right)")]),1,"./asset/sound/system/help.mp3",1));return r.position.x=e,r.position.y=t+.5,r.position.z=n,o.addEntitys(r),r})),HELP_17:new W.a(R.h.UI_HELP_POINT,1,!1,((e,t,n,a,o)=>{const s=new I.a("help help-15",new c.a(R.h.UI_HELP_POINT,1),new u.a(!0,!1,!0,.5),new i.a(o instanceof J.a?o.getPlayer():null),new te.a(.25,1),new ne.a((()=>["This is the end of the tutorial"]),1,"./asset/sound/system/help.mp3",1));return s.position.x=e,s.position.y=t+.5,s.position.z=n,o.addEntitys(s),s})),GOLE:new W.a(R.h.UI_GOLE_POINT,1,!1,((e,t,n,a,i)=>{const o=new I.a("gole",new A.a(!1));return o.position.x=e,o.position.y=t,o.position.z=n,i.addEntitys(o),o})),SECRET:new W.a(R.h.UI_SECRET_POINT,1,!1,((e,t,n,a,i)=>{const o=new I.a("secret",new A.a(!0));return o.position.x=e,o.position.y=t,o.position.z=n,i.addEntitys(o),o})),ENEMY_TARGET:new W.a(R.h.ENEMY_TARGET_STILL,1/0,!1,((e,t,n,a,s)=>{const p=new I.a("enemy guy guy-target not-count",new M.a(R.h.ENEMY_TARGET_STILL,{aim:R.h.NONE,pain:R.h.ENEMY_TARGET_PAIN,blow:R.h.ENEMY_TARGET_BLOW,down:R.h.ENEMY_TARGET_DOWN,freeze:R.h.ENEMY_TARGET_FREEZE},0,.5,0,1/0,1/0,0,0,.75,!1,.25,1,.75,.25,1.125,.75,!1,!0),new k.a({health:{value:60,max:60}}),new O.a(1/0,0,0,{melee:0,ammo:1,ball:1,plasma:1,rocket:1,explode:2}),new b.a(1.125,.75,1),new c.a(R.h.ENEMY_TARGET_STILL,2),new u.a(!0,!1,!0,.5),new C.a(.75,1.9),new E.a(1.125,1.125),new o.a(.75,1.9),new i.a(s instanceof J.a?s.getPlayer():null),new l.a(0),new h.a(.025,0,.025,0),new r.a(2)),d=new X.a(p,.5,.625);return p.position.x=e,p.position.y=t,p.position.z=n,p.direction.x=0,s.addEntitys(p,d),p})),ENEMY_GUY_PISTOL:new W.a(R.h.ENEMY_GUY_PISTOL_STILL,1/0,!1,((e,t,n,a,s)=>{const p=1.1,d=new I.a("enemy guy guy-pistol",new M.a(R.h.ENEMY_GUY_PISTOL_STILL,{aim:R.h.ENEMY_GUY_PISTOL_AIM,pain:R.h.ENEMY_GUY_PISTOL_PAIN,blow:R.h.ENEMY_GUY_PISTOL_BLOW,down:R.h.ENEMY_GUY_PISTOL_DOWN,freeze:R.h.ENEMY_GUY_PISTOL_FREEZE},0,.5,0,1/0,1/0,5,10,.75,!0,.25,1,.75,.25,1.2375,.75*p,!1,!0,pe,fe,be),new _.a(0,.375,D.a,1,15,"magic","shoot",.75,1,.5,0,0,0,0,.175,1,0,["shot-target"]),new k.a({health:{value:60,max:60}}),new O.a(1/0,0,0,{melee:0,ammo:1,ball:1,plasma:1,rocket:1,explode:2}),new b.a(1.2375,.75*p,1),new c.a(R.h.ENEMY_GUY_PISTOL_STILL,2.2),new u.a(!0,!1,!0,.5),new C.a(.75*p,2.09),new E.a(1.375,1.375),new o.a(.75*p,2.09),new i.a(s instanceof J.a?s.getPlayer():null),new l.a(.175),new h.a(.025,0,.025,0),new r.a(2)),g=new X.a(d,.55,.6875);return d.position.x=e,d.position.y=t,d.position.z=n,d.direction.x=0,s.addEntitys(d,g),d})),ENEMY_GUY_SHOTGUN:new W.a(R.h.ENEMY_GUY_SHOTGUN_STILL,1/0,!1,((e,t,n,a,s)=>{const p=new I.a("enemy guy guy-shotgun",new M.a(R.h.ENEMY_GUY_SHOTGUN_STILL,{aim:R.h.ENEMY_GUY_SHOTGUN_AIM,pain:R.h.ENEMY_GUY_SHOTGUN_PAIN,blow:R.h.ENEMY_GUY_SHOTGUN_BLOW,down:R.h.ENEMY_GUY_SHOTGUN_DOWN,freeze:R.h.ENEMY_GUY_SHOTGUN_FREEZE},0,.5,0,1/0,1/0,2.5,5,.75,!1,.25,1,.75,.25,1.0125,.675,!1,!0,de,ye,xe),new _.a(0,.375,F.a,1,15,"flame","shoot",1.25,3,.25,.05*ce.b,.05*ce.b,0,0,.275,1,0,["shot-target"]),new k.a({health:{value:30,max:30}}),new O.a(1/0,0,0,{melee:0,ammo:1,ball:1,plasma:1,rocket:1,explode:2}),new b.a(1.0125,.675,1),new c.a(R.h.ENEMY_GUY_SHOTGUN_STILL,1.8),new u.a(!0,!1,!0,.5),new C.a(.675,1.71),new E.a(1.125,1.125),new o.a(.675,1.71),new i.a(s instanceof J.a?s.getPlayer():null),new l.a(.175),new h.a(.025,0,.025,0),new r.a(2)),d=new X.a(p,.45,.5625);return p.position.x=e,p.position.y=t,p.position.z=n,p.direction.x=0,s.addEntitys(p,d),p})),ENEMY_GUY_MACHINGUN:new W.a(R.h.ENEMY_GUY_MACHINGUN_STILL,1/0,!1,((e,t,n,a,s)=>{const p=new I.a("enemy guy guy-machingun",new M.a(R.h.ENEMY_GUY_MACHINGUN_STILL,{aim:R.h.ENEMY_GUY_MACHINGUN_AIM,pain:R.h.ENEMY_GUY_MACHINGUN_PAIN,blow:R.h.ENEMY_GUY_MACHINGUN_BLOW,down:R.h.ENEMY_GUY_MACHINGUN_DOWN,freeze:R.h.ENEMY_GUY_MACHINGUN_FREEZE},0,.5,0,1/0,1/0,5,10,.75,!1,.25,1,.75,.25,1.125,.75,!1,!0,ge,ve,Me),new _.a(0,.375,U.a,1,9,"magic","shoot",.125,1,.1,.05*ce.b,.025*ce.b,0,0,.25,1,0,["shot-target"]),new k.a({health:{value:45,max:45}}),new O.a(1/0,0,0,{melee:0,ammo:1,ball:1,plasma:1,rocket:1,explode:2}),new b.a(1.125,.75,1),new c.a(R.h.ENEMY_GUY_MACHINGUN_STILL,2),new u.a(!0,!1,!0,.5),new C.a(.75,1.9),new E.a(1.25,1.25),new o.a(.75,1.9),new i.a(s instanceof J.a?s.getPlayer():null),new l.a(.175),new h.a(.025,0,.025,0),new r.a(2)),d=new X.a(p,.5,.625);return p.position.x=e,p.position.y=t,p.position.z=n,p.direction.x=0,s.addEntitys(p,d),p})),ENEMY_GUY_MELEE:new W.a(R.h.ENEMY_GUY_MELEE_STILL,1/0,!1,((e,t,n,a,s)=>{const p=.9,d=new I.a("enemy guy guy-melee",new M.a(R.h.ENEMY_GUY_MELEE_STILL,{aim:R.h.ENEMY_GUY_MELEE_AIM,pain:R.h.ENEMY_GUY_MELEE_PAIN,blow:R.h.ENEMY_GUY_MELEE_BLOW,down:R.h.ENEMY_GUY_MELEE_DOWN,freeze:R.h.ENEMY_GUY_MELEE_FREEZE},0,.5,0,1/0,1/0,0,4.25,.25,!0,.5,1,.75,.25,1.0125,.675,!1,!0,me,we,Ee),new T.a(1,15,"slash",.625,.1375,.03125,["enemy","object","shot-target","player-hit-bullet","enemy-hit-bullet"]),new k.a({health:{value:60,max:60}}),new O.a(1/0,0,0,{melee:0,ammo:.5,ball:3,plasma:1,rocket:1,explode:2}),new b.a(1.0125,.675,1),new c.a(R.h.ENEMY_GUY_MELEE_ARMOR_STILL,1.8),new u.a(!0,!1,!0,.5),new C.a(.675,1.71),new E.a(1.125,1.125),new o.a(.675,1.71),new i.a(s instanceof J.a?s.getPlayer():null),new l.a(.2),new h.a(.025,0,.025,0),new r.a(2)),g=new q.a(d,p,p);return d.position.x=e,d.position.y=t,d.position.z=n,d.direction.x=0,s.addEntitys(d,g),d})),ENEMY_GUY_MISSILE:new W.a(R.h.ENEMY_GUY_MISSILE_STILL,1/0,!1,((e,t,n,a,s)=>{const p=new I.a("enemy guy guy-missile no-blow",new M.a(R.h.ENEMY_GUY_MISSILE_STILL,{aim:R.h.ENEMY_GUY_MISSILE_AIM,pain:R.h.ENEMY_GUY_MISSILE_PAIN,freeze:R.h.ENEMY_GUY_MISSILE_FREEZE},0,-.75,0,1/0,1/0,5,10,.5,!1,.25,1,.75,.25,1.5,1.5,!0,!1),new _.a(0,-.75,H.a,1,5,"magic","shoot-range",.75,1,.75,.05*ce.b,.025*ce.b,0,0,.175,5,.1,["shot-target"]),new k.a({health:{value:125,max:125}}),new O.a(1/0,0,0,{melee:0,ammo:1,ball:1,plasma:.25,rocket:1,explode:3}),new c.a(R.h.ENEMY_GUY_MISSILE_STILL,3),new u.a(!0,!1,!0,.5),new C.a(.9,1.875),new E.a(1.5,1.875),new o.a(.9,1.875),new i.a(s instanceof J.a?s.getPlayer():null),new l.a(.1),new h.a(.025,.025,.025,1),new r.a(2.5,0));return p.position.x=e,p.position.y=t+.5,p.position.z=n,p.direction.x=0,s.addEntitys(p),p})),ENEMY_GUY_PISTOL_ARMOR:new W.a(R.h.ENEMY_GUY_PISTOL_ARMOR_STILL,1/0,!1,((e,t,n,a,s)=>{const p=1.1,d=new I.a("enemy guy guy-pistol guy-armor no-blow",new M.a(R.h.ENEMY_GUY_PISTOL_ARMOR_STILL,{aim:R.h.ENEMY_GUY_PISTOL_ARMOR_AIM,pain:R.h.ENEMY_GUY_PISTOL_ARMOR_PAIN,freeze:R.h.ENEMY_GUY_PISTOL_ARMOR_FREEZE},0,.5,0,1/0,1/0,5,10,.5,!1,0,1,.75,.25,2.0625,2.0625,!1,!1,pe,[],[],_e.ENEMY_GUY_PISTOL),new _.a(0,.375,D.a,1,15,"magic","shoot",1,1,.5,.05*ce.b,.025*ce.b,0,0,.175,5,.125,["enemy","shot-target"]),new k.a({armor:{value:100,max:100},health:{value:200,max:200}}),new O.a(1/0,0,0,{melee:1,ammo:.75,ball:.75,plasma:1,rocket:1,explode:.75}),new c.a(R.h.ENEMY_GUY_PISTOL_ARMOR_STILL,2.2),new u.a(!0,!1,!0,.5),new C.a(.75*p,2.09),new E.a(1.375,2.09),new o.a(.75*p,2.09),new i.a(s instanceof J.a?s.getPlayer():null),new l.a(.2),new h.a(.025,0,.025,0),new r.a(2));return d.position.x=e,d.position.y=t,d.position.z=n,d.direction.x=0,s.addEntitys(d),d})),ENEMY_GUY_SHOTGUN_ARMOR:new W.a(R.h.ENEMY_GUY_SHOTGUN_ARMOR_STILL,1/0,!1,((e,t,n,a,s)=>{const p=new I.a("enemy guy guy-shotgun guy-armor no-blow",new M.a(R.h.ENEMY_GUY_SHOTGUN_ARMOR_STILL,{aim:R.h.ENEMY_GUY_SHOTGUN_ARMOR_AIM,pain:R.h.ENEMY_GUY_SHOTGUN_ARMOR_PAIN,freeze:R.h.ENEMY_GUY_SHOTGUN_ARMOR_FREEZE},0,.5,0,.0375,1/0,1.75,3.75,.5,!1,0,1,.75,.25,1.59375,1.59375,!1,!1,de,[],[],_e.ENEMY_GUY_SHOTGUN),new _.a(0,.375,Q.a,1,3,"flame","shoot-range",.05,1,.5,.05*ce.b,.025*ce.b,0,0,.25,1,0,["enemy","shot-target"]),new k.a({armor:{value:100,max:100},health:{value:200,max:200}}),new O.a(1/0,0,0,{melee:1,ammo:.75,ball:.75,plasma:1,rocket:1,explode:.75}),new c.a(R.h.ENEMY_GUY_SHOTGUN_ARMOR_STILL,1.7),new u.a(!0,!1,!0,.5),new C.a(.6375,1.615),new E.a(1.0625,1.615),new o.a(.6375,1.615),new i.a(s instanceof J.a?s.getPlayer():null),new l.a(.2),new h.a(.025,0,.025,0),new r.a(2));return p.position.x=e,p.position.y=t,p.position.z=n,p.direction.x=0,s.addEntitys(p),p})),ENEMY_GUY_MACHINGUN_ARMOR:new W.a(R.h.ENEMY_GUY_MACHINGUN_ARMOR_STILL,1/0,!1,((e,t,n,a,s)=>{const p=new I.a("enemy guy guy-machingun guy-armor no-blow",new M.a(R.h.ENEMY_GUY_MACHINGUN_ARMOR_STILL,{aim:R.h.ENEMY_GUY_MACHINGUN_ARMOR_AIM,pain:R.h.ENEMY_GUY_MACHINGUN_ARMOR_PAIN,freeze:R.h.ENEMY_GUY_MACHINGUN_ARMOR_FREEZE},0,.5,.0375,.1*ce.b,1,5,10,.5,!1,0,1,.75,.25,1.875,1.875,!1,!1,ge,[],[],_e.ENEMY_GUY_MACHINGUN),new _.a(0,.375,$.a,10,2,"missile","shoot-range",1,1,1,.05*ce.b,.025*ce.b,0,0,.125,1,0,["enemy","shot-target"]),new k.a({armor:{value:100,max:100},health:{value:200,max:200}}),new O.a(1/0,0,0,{melee:1,ammo:.75,ball:.75,plasma:1,rocket:1,explode:.75}),new c.a(R.h.ENEMY_GUY_MACHINGUN_ARMOR_STILL,2),new u.a(!0,!1,!0,.5),new C.a(.75,1.9),new E.a(1.25,1.9),new o.a(.75,1.9),new i.a(s instanceof J.a?s.getPlayer():null),new l.a(.2),new h.a(.025,0,.025,0),new r.a(2));return p.position.x=e,p.position.y=t,p.position.z=n,p.direction.x=0,s.addEntitys(p),p})),ENEMY_GUY_MELEE_ARMOR:new W.a(R.h.ENEMY_GUY_MELEE_ARMOR_STILL,1/0,!1,((e,t,n,a,s)=>{const p=1.1,d=new I.a("enemy guy guy-melee guy-armor green-blood no-blow",new M.a(R.h.ENEMY_GUY_MELEE_ARMOR_STILL,{aim:R.h.ENEMY_GUY_MELEE_ARMOR_AIM,pain:R.h.ENEMY_GUY_MELEE_ARMOR_PAIN,freeze:R.h.ENEMY_GUY_MELEE_ARMOR_FREEZE},0,.5,0,1/0,1/0,0,4.25,.25,!0,0,1,.75,.25,2.0625,2.0625,!1,!1,me,[],[],_e.ENEMY_GUY_MELEE),new T.a(1,15,"slash",.625,.1375,.03125,["enemy","object","shot-target","player-hit-bullet","enemy-hit-bullet"]),new k.a({armor:{value:100,max:100},health:{value:200,max:200}}),new O.a(1/0,0,0,{melee:1,ammo:.75,ball:.75,plasma:1,rocket:1,explode:.75}),new c.a(R.h.ENEMY_GUY_MELEE_ARMOR_STILL,2.2),new u.a(!0,!1,!0,.5),new B.a(!1,1,.25,0,128,"corrode",ee.a),new C.a(.75*p,2.09),new E.a(1.375,2.09),new o.a(.75*p,2.09),new i.a(s instanceof J.a?s.getPlayer():null),new l.a(.2),new h.a(.025,0,.025,0),new r.a(2));return d.position.x=e,d.position.y=t,d.position.z=n,d.direction.x=0,s.addEntitys(d),d})),ENEMY_BALL_DRONE:new W.a(R.h.ENEMY_TANK_BALL_STILL,1/0,!1,((e,t,n,a,s)=>{const p=new I.a("enemy ball ball-drone",new M.a(R.h.ENEMY_TANK_BALL_STILL,{aim:R.h.ENEMY_TANK_BALL_AIM,pain:R.h.ENEMY_TANK_BALL_PAIN,freeze:R.h.ENEMY_TANK_BALL_FREEZE},0,.5,0,1/0,1/0,5,10,.25,!1,0,1,.75,.25,1,1,!1,!1,[]),new oe.a(.5,.5,U.a,1,10,2,"magic","always",.0625,.1,0,0,.25,1,["shot-target"]),new k.a({armor:{value:25,max:25},health:{value:75,max:75}}),new O.a(1/0,0,0,{melee:0,ammo:.75,ball:.75,plasma:1,rocket:1,explode:0}),new c.a(R.h.ENEMY_TANK_BALL_STILL,1),new u.a(!0,!1,!0,.5),new B.a(!1,.5,.25,0,64,"explode",ee.b),new C.a(1,1),new E.a(1,1),new o.a(1,1),new i.a(s instanceof J.a?s.getPlayer():null),new l.a(.2),new h.a(.025,0,.025,0),new r.a(2));return p.position.x=e,p.position.y=t,p.position.z=n,p.direction.x=0,s.addEntitys(p),p})),ENEMY_BALL_TANK:new W.a(R.h.ENEMY_TANK_BALL_STILL,1/0,!1,((e,t,n,a,s)=>{const p=1.75,d=new I.a("enemy ball ball-tank no-blow",new M.a(R.h.ENEMY_TANK_BALL_STILL,{aim:R.h.ENEMY_TANK_BALL_AIM,pain:R.h.ENEMY_TANK_BALL_PAIN,freeze:R.h.ENEMY_TANK_BALL_FREEZE},0,.5,0,1/0,1/0,5,10,.25,!1,0,1,.75,.25,p,p,!1,!1,[]),new oe.a(.5,.5,U.a,3,10,2,"magic","always",.0625,.1,0,0,.25,2.5,["shot-target"]),new k.a({armor:{value:100,max:100},health:{value:200,max:200}}),new O.a(1/0,0,0,{melee:0,ammo:.25,ball:.25,plasma:1,rocket:1,explode:0}),new c.a(R.h.ENEMY_TANK_BALL_STILL,p),new u.a(!0,!1,!0,.5),new B.a(!1,1,.25,0,128,"explode",ee.b),new C.a(p,p),new E.a(p,p),new o.a(p,p),new i.a(s instanceof J.a?s.getPlayer():null),new l.a(.2),new h.a(.025,0,.025,0),new r.a(2));return d.position.x=e,d.position.y=t,d.position.z=n,d.direction.x=0,s.addEntitys(d),d})),OBJECT_SHOP:new W.a(R.h.OBJECT_SHOP,1/0,!1,((e,t,n,a,i)=>{const s=new I.a("object shop",new L.a({pistol:50,machingun:100,shotgun:200,launcher:500,magazine:10,shell:10,rocket:10}),new j.a,new c.a(R.h.OBJECT_SHOP,2),new u.a(!0,!1,!0,.5),new h.a(.025,0,.025,0),new C.a(1,1.99),new o.a(1,1.99),new r.a(1/0));return s.position.x=e,s.position.y=t,s.position.z=n,s.direction.x=0,i.addEntitys(s),s})),OBJECT_EDITOR:new W.a(R.h.OBJECT_EDITOR,1,!1,((e,t,n,a,i)=>{const s=new N.a("editor",new V.a,new P.a(.175),new l.a(.1),new h.a(.025,.025,.025)),p=new I.a("object edtior",new Y.a(s),new j.a,new c.a(R.h.OBJECT_EDITOR,2),new u.a(!0,!1,!0,.5),new h.a(.025,0,.025,0),new C.a(1.25,1.99),new o.a(1.25,1.99),new r.a(1/0));return p.position.x=e,p.position.y=t,p.position.z=n,s.position.x=e,s.position.y=t+1,s.position.z=n,p.direction.x=0,i.addEntitys(p,s),p})),OBJECT_DRUM:new W.a(R.h.OBJECT_DRUM,1/0,!1,((e,t,n,a,i)=>{const s=new I.a("object drum",new B.a(!1,1,.5,0,128,"explode",ee.b),new k.a({health:{value:20,max:20}}),new O.a(1/0,0,0,{melee:0,ammo:1,ball:1,rocket:1,explode:1}),new c.a(R.h.OBJECT_DRUM,3),new u.a(!0,!1,!0,.5),new C.a(.75,1.5),new E.a(1,1.75),new h.a(.025,0,.025,0),new o.a(.75,1.5),new r.a(2.5));return s.position.x=e,s.position.y=t,s.position.z=n,s.direction.x=0,i.addEntitys(s),s})),ITEM_MEAT_STIM:new W.a(R.h.ITEM_MEAT_STIM,1/0,!1,((e,t,n,a,i)=>{const s=new I.a("item meat stim",new S.a(!0,!0,0,{health:10,gauge:.25,meat:250,score:250},"player-pickup-meat",R.n),new c.a(R.h.ITEM_MEAT_STIM,2),new u.a(!0,!1,!0,.5),new h.a(.025,0,.025,0),new o.a(.75,.375),new r.a(1));return s.position.x=e,s.position.y=t,s.position.z=n,s.direction.x=0,i.addEntitys(s),s})),ITEM_MEAT_MEDIKIT:new W.a(R.h.ITEM_MEAT_MEDIKIT,1/0,!1,((e,t,n,a,i)=>{const s=new I.a("item meat medikit",new S.a(!0,!0,0,{health:50,gauge:.5,meat:1e3,score:1e3},"player-pickup-meat",R.n),new c.a(R.h.ITEM_MEAT_MEDIKIT,2),new u.a(!0,!1,!0,.5),new h.a(.025,0,.025,0),new o.a(.75,.375),new r.a(1));return s.position.x=e,s.position.y=t,s.position.z=n,s.direction.x=0,i.addEntitys(s),s})),ITEM_MEAT_ELIXIR:new W.a(R.h.ITEM_MEAT_ELIXIR,1/0,!1,((e,t,n,a,i)=>{const s=new I.a("item meat elixir",new S.a(!0,!0,0,{health:100,gauge:1,meat:1e4,score:1e4},"player-pickup-meat",R.n),new c.a(R.h.ITEM_MEAT_ELIXIR,2),new u.a(!0,!1,!0,.5),new h.a(.025,0,.025,0),new o.a(.75,.375),new r.a(1));return s.position.x=e,s.position.y=t,s.position.z=n,s.direction.x=0,i.addEntitys(s),s})),ITEM_HEALTH_ELIXIR:new W.a(R.h.ITEM_HEALTH_ELIXIR,1/0,!1,((e,t,n,a,i)=>{const s=new I.a("item meat elixir",new S.a(!0,!0,0,{health:200},"player-pickup-health",R.m),new c.a(R.h.ITEM_HEALTH_ELIXIR,2),new u.a(!0,!1,!0,.5),new h.a(.025,0,.025,0),new o.a(.75,.375),new r.a(1));return s.position.x=e,s.position.y=t,s.position.z=n,s.direction.x=0,i.addEntitys(s),s})),ITEM_ARMOR_ELIXIR:new W.a(R.h.ITEM_ARMOR_ELIXIR,1/0,!1,((e,t,n,a,i)=>{const s=new I.a("item armor elixir",new S.a(!0,!1,0,{armor:100},"player-pickup-armor",R.j),new c.a(R.h.ITEM_ARMOR_ELIXIR,2),new u.a(!0,!1,!0,.5),new h.a(.025,0,.025,0),new o.a(.75,.375),new r.a(1));return s.position.x=e,s.position.y=t,s.position.z=n,s.direction.x=0,i.addEntitys(s),s})),ITEM_ENERGY_ELIXIR:new W.a(R.h.ITEM_ENERGY_ELIXIR,1/0,!1,((e,t,n,a,i)=>{const s=new I.a("item armor elixir",new S.a(!0,!1,0,{energy:100},"player-pickup-stamina",R.o),new c.a(R.h.ITEM_ENERGY_ELIXIR,2),new u.a(!0,!1,!0,.5),new h.a(.025,0,.025,0),new o.a(.75,.375),new r.a(1));return s.position.x=e,s.position.y=t,s.position.z=n,s.direction.x=0,i.addEntitys(s),s})),ITEM_CLIP:new W.a(R.h.ITEM_AMMO_CLIP,1/0,!1,((e,t,n,a,i)=>{const s=new I.a("item ammo clip",new S.a(!1,!0,0,{clip:12},"player-pickup-ammo",R.n),new c.a(R.h.ITEM_AMMO_CLIP,2),new u.a(!0,!1,!0,.5),new h.a(.025,0,.025,0),new o.a(.75,.375),new r.a(1));return s.position.x=e,s.position.y=t,s.position.z=n,s.direction.x=0,i.addEntitys(s),s})),ITEM_MAGAZINE:new W.a(R.h.ITEM_AMMO_MAGAZINE,1/0,!1,((e,t,n,a,i)=>{const s=new I.a("item ammo magazine",new S.a(!1,!0,0,{magazine:30},"player-pickup-ammo",R.i),new c.a(R.h.ITEM_AMMO_MAGAZINE,2),new u.a(!0,!1,!0,.5),new h.a(.025,0,.025,0),new o.a(.75,.375),new r.a(1));return s.position.x=e,s.position.y=t,s.position.z=n,s.direction.x=0,i.addEntitys(s),s})),ITEM_SHELL:new W.a(R.h.ITEM_AMMO_SHELL,1/0,!1,((e,t,n,a,i)=>{const s=new I.a("item ammo shell",new S.a(!1,!0,0,{shell:6},"player-pickup-ammo",R.i),new c.a(R.h.ITEM_AMMO_SHELL,2),new u.a(!0,!1,!0,.5),new h.a(.025,0,.025,0),new o.a(.75,.375),new r.a(1));return s.position.x=e,s.position.y=t,s.position.z=n,s.direction.x=0,i.addEntitys(s),s})),ITEM_ROCKET:new W.a(R.h.ITEM_AMMO_ROCKET,1/0,!1,((e,t,n,a,i)=>{const s=new I.a("item ammo rocket",new S.a(!1,!0,0,{rocket:1},"player-pickup-ammo",R.i),new c.a(R.h.ITEM_AMMO_ROCKET,2),new u.a(!0,!1,!0,.5),new h.a(.025,0,.025,0),new o.a(.75,.375),new r.a(1));return s.position.x=e,s.position.y=t,s.position.z=n,s.direction.x=0,i.addEntitys(s),s})),ITEM_CELL:new W.a(R.h.ITEM_AMMO_CELL,1/0,!1,((e,t,n,a,i)=>{const s=new I.a("item ammo cell",new S.a(!1,!0,0,{cell:20},"player-pickup-ammo",R.i),new c.a(R.h.ITEM_AMMO_CELL,2),new u.a(!0,!1,!0,.5),new h.a(.025,0,.025,0),new o.a(.75,.375),new r.a(1));return s.position.x=e,s.position.y=t,s.position.z=n,s.direction.x=0,i.addEntitys(s),s})),ITEM_PUNCH:new W.a(R.h.ITEM_WEAPON_PUNCH,1/0,!1,((e,t,n,a,i)=>{const s=new I.a("item weapon punch",new S.a(!1,!0,0,{hand:"punch"},"player-pickup-weapon",R.i),new c.a(R.h.ITEM_WEAPON_PUNCH,2),new u.a(!0,!1,!0,.5),new h.a(.025,0,.025,0),new o.a(.75,.375),new C.a(.75,.375,["player","enemy"]),new r.a(1));return s.position.x=e,s.position.y=t,s.position.z=n,s.direction.x=0,i.addEntitys(s),s})),ITEM_BINOCULARS:new W.a(R.h.ITEM_WEAPON_BINOCULARS,1/0,!1,((e,t,n,a,i)=>{const s=new I.a("item weapon monocular",new S.a(!1,!0,0,{hand:"monocular"},"player-pickup-weapon",R.p),new c.a(R.h.ITEM_WEAPON_BINOCULARS,2),new u.a(!0,!1,!0,.5),new h.a(.025,0,.025,0),new o.a(.75,.375),new C.a(.75,.375,["player","enemy"]),new r.a(1));return s.position.x=e,s.position.y=t,s.position.z=n,s.direction.x=0,i.addEntitys(s),s})),ITEM_SLOWBALL:new W.a(R.h.ITEM_WEAPON_SLOWBALL,1/0,!1,((e,t,n,a,i)=>{const s=new I.a("item weapon slowball",new S.a(!1,!0,0,{hand:"slowball"},"player-pickup-weapon",R.p),new c.a(R.h.ITEM_WEAPON_SLOWBALL,2),new u.a(!0,!1,!0,.5),new h.a(.025,0,.025,0),new o.a(.75,.375),new C.a(.75,.375,["player","enemy"]),new r.a(1));return s.position.x=e,s.position.y=t,s.position.z=n,s.direction.x=0,i.addEntitys(s),s})),ITEM_ENERGYSHIELD:new W.a(R.h.ITEM_WEAPON_ENERGYSHIELD,1/0,!1,((e,t,n,a,i)=>{const s=new I.a("item weapon energyshield",new S.a(!1,!0,0,{hand:"energyshield"},"player-pickup-weapon",R.p),new c.a(R.h.ITEM_WEAPON_ENERGYSHIELD,2),new u.a(!0,!1,!0,.5),new h.a(.025,0,.025,0),new o.a(.75,.375),new C.a(.75,.375,["player","enemy"]),new r.a(1));return s.position.x=e,s.position.y=t,s.position.z=n,s.direction.x=0,i.addEntitys(s),s})),ITEM_COMBOBOOSTER:new W.a(R.h.ITEM_WEAPON_COMBOBOOSTER,1/0,!1,((e,t,n,a,i)=>{const s=new I.a("item weapon combobooster",new S.a(!1,!0,0,{hand:"combobooster"},"player-pickup-weapon",R.p),new c.a(R.h.ITEM_WEAPON_COMBOBOOSTER,2),new u.a(!0,!1,!0,.5),new h.a(.025,0,.025,0),new o.a(.75,.375),new C.a(.75,.375,["player","enemy"]),new r.a(1));return s.position.x=e,s.position.y=t,s.position.z=n,s.direction.x=0,i.addEntitys(s),s})),ITEM_FROZEN_GRENADE:new W.a(R.h.ITEM_WEAPON_FROZEN_GRENADE,1/0,!1,((e,t,n,a,i)=>{const s=new I.a("item weapon slowball",new S.a(!1,!0,0,{hand:"freezegrenade"},"player-pickup-weapon",R.p),new c.a(R.h.ITEM_WEAPON_FROZEN_GRENADE,2),new u.a(!0,!1,!0,.5),new h.a(.025,0,.025,0),new o.a(.75,.375),new C.a(.75,.375,["player","enemy"]),new r.a(1));return s.position.x=e,s.position.y=t,s.position.z=n,s.direction.x=0,i.addEntitys(s),s})),ITEM_HOOKSHOT:new W.a(R.h.ITEM_WEAPON_HOOKSHOT,1/0,!1,((e,t,n,a,i)=>{const s=new I.a("item wapon hookshot",new S.a(!1,!0,0,{hand:"hookshot"},"player-pickup-weapon",R.p),new c.a(R.h.ITEM_WEAPON_HOOKSHOT,2),new u.a(!0,!1,!0,.5),new h.a(.025,0,.025,0),new o.a(.75,.375),new C.a(.75,.375,["player","enemy"]),new r.a(1));return s.position.x=e,s.position.y=t,s.position.z=n,s.direction.x=0,i.addEntitys(s),s})),ITEM_PISTOL:new W.a(R.h.ITEM_WEAPON_PISTOL,1/0,!1,((e,t,n,a,i)=>{const s=new I.a("item weapon pistol",new S.a(!1,!0,0,{sidearm:"pistol"},"player-pickup-weapon",R.i),new c.a(R.h.ITEM_WEAPON_PISTOL,2),new u.a(!0,!1,!0,.5),new h.a(.025,0,.025,0),new o.a(.75,.375),new C.a(.75,.375,["player","enemy"]),new r.a(1));return s.position.x=e,s.position.y=t,s.position.z=n,s.direction.x=0,i.addEntitys(s),s})),ITEM_HANDCANNON:new W.a(R.h.ITEM_WEAPON_HANDCANNON,1/0,!1,((e,t,n,a,i)=>{const s=new I.a("item weapon handcannon",new S.a(!1,!0,0,{sidearm:"handcannon"},"player-pickup-weapon",R.i),new c.a(R.h.ITEM_WEAPON_HANDCANNON,2),new u.a(!0,!1,!0,.5),new h.a(.025,0,.025,0),new o.a(.75,.375),new C.a(.75,.375,["player","enemy"]),new r.a(1));return s.position.x=e,s.position.y=t,s.position.z=n,s.direction.x=0,i.addEntitys(s),s})),ITEM_MACHINGUN:new W.a(R.h.ITEM_WEAPON_MACHINGUN,1/0,!1,((e,t,n,a,i)=>{const s=new I.a("item weapon machingun",new S.a(!1,!0,0,{machingun:"machingun",magazine:30},"player-pickup-weapon",R.p),new c.a(R.h.ITEM_WEAPON_MACHINGUN,2),new u.a(!0,!1,!0,.5),new h.a(.025,0,.025,0),new o.a(.75,.375),new C.a(.75,.375,["player","enemy"]),new r.a(1));return s.position.x=e,s.position.y=t,s.position.z=n,s.direction.x=0,i.addEntitys(s),s})),ITEM_CHAINSHOTGUN:new W.a(R.h.ITEM_WEAPON_CHAINSHOTGUN,1/0,!1,((e,t,n,a,i)=>{const s=new I.a("item weapon chainshotgun",new S.a(!1,!0,0,{machingun:"chainshotgun",magazine:30},"player-pickup-weapon",R.p),new c.a(R.h.ITEM_WEAPON_CHAINSHOTGUN,2),new u.a(!0,!1,!0,.5),new h.a(.025,0,.025,0),new o.a(.75,.375),new C.a(.75,.375,["player","enemy"]),new r.a(1));return s.position.x=e,s.position.y=t,s.position.z=n,s.direction.x=0,i.addEntitys(s),s})),ITEM_SHOTGUN:new W.a(R.h.ITEM_WEAPON_SHOTGUN,1/0,!1,((e,t,n,a,i)=>{const s=new I.a("item weapon shotgun",new S.a(!1,!0,0,{shotgun:"shotgun",shell:6},"player-pickup-weapon",R.p),new c.a(R.h.ITEM_WEAPON_SHOTGUN,2),new u.a(!0,!1,!0,.5),new h.a(.025,0,.025,0),new o.a(.75,.375),new C.a(.75,.375,["player","enemy"]),new r.a(1));return s.position.x=e,s.position.y=t,s.position.z=n,s.direction.x=0,i.addEntitys(s),s})),ITEM_HEAVYCANNON:new W.a(R.h.ITEM_WEAPON_HEAVYCANNON,1/0,!1,((e,t,n,a,i)=>{const s=new I.a("item weapon heavycannon",new S.a(!1,!0,0,{shotgun:"heavycannon",shell:6},"player-pickup-weapon",R.p),new c.a(R.h.ITEM_WEAPON_HEAVYCANNON,2),new u.a(!0,!1,!0,.5),new h.a(.025,0,.025,0),new o.a(.75,.375),new C.a(.75,.375,["player","enemy"]),new r.a(1));return s.position.x=e,s.position.y=t,s.position.z=n,s.direction.x=0,i.addEntitys(s),s})),ITEM_LAUNCHER:new W.a(R.h.ITEM_WEAPON_LAUNCHER,1/0,!1,((e,t,n,a,i)=>{const s=new I.a("item weapon launcher",new S.a(!1,!0,0,{launcher:"launcher",rocket:2},"player-pickup-weapon",R.p),new c.a(R.h.ITEM_WEAPON_LAUNCHER,2),new u.a(!0,!1,!0,.5),new h.a(.025,0,.025,0),new o.a(.75,.375),new C.a(.75,.375,["player","enemy"]),new r.a(1));return s.position.x=e,s.position.y=t,s.position.z=n,s.direction.x=0,i.addEntitys(s),s})),ITEM_CLUSTERBOW:new W.a(R.h.ITEM_WEAPON_CLUSTERBOW,1/0,!1,((e,t,n,a,i)=>{const s=new I.a("item weapon clusterbow",new S.a(!1,!0,0,{launcher:"clusterbow",rocket:3},"player-pickup-weapon",R.p),new c.a(R.h.ITEM_WEAPON_CLUSTERBOW,2),new u.a(!0,!1,!0,.5),new h.a(.025,0,.025,0),new o.a(.75,.375),new C.a(.75,.375,["player","enemy"]),new r.a(1));return s.position.x=e,s.position.y=t,s.position.z=n,s.direction.x=0,i.addEntitys(s),s})),ITEM_PLASMAGUN:new W.a(R.h.ITEM_WEAPON_PLASMAGUN,1/0,!1,((e,t,n,a,i)=>{const s=new I.a("item weapon plasmagun",new S.a(!1,!0,0,{plasmagun:"plasmagun",cell:20},"player-pickup-weapon",R.p),new c.a(R.h.ITEM_WEAPON_PLASMAGUN,2),new u.a(!0,!1,!0,.5),new h.a(.025,0,.025,0),new o.a(.75,.375),new C.a(.75,.375,["player","enemy"]),new r.a(1));return s.position.x=e,s.position.y=t,s.position.z=n,s.direction.x=0,i.addEntitys(s),s})),ITEM_PLASMASMG:new W.a(R.h.ITEM_WEAPON_PLASMASMG,1/0,!1,((e,t,n,a,i)=>{const s=new I.a("item weapon plasmasmg",new S.a(!1,!0,0,{plasmagun:"plasmasmg",cell:20},"player-pickup-weapon",R.p),new c.a(R.h.ITEM_WEAPON_PLASMASMG,2),new u.a(!0,!1,!0,.5),new h.a(.025,0,.025,0),new o.a(.75,.375),new C.a(.75,.375,["player","enemy"]),new r.a(1));return s.position.x=e,s.position.y=t,s.position.z=n,s.direction.x=0,i.addEntitys(s),s})),ITEM_KEY_RED:new W.a(R.h.ITEM_KEY_RED,1,!1,((e,t,n,a,i)=>{const s=new I.a("item key key-red",new S.a(!0,!1,0,{"key-red":1},"player-pickup-key",R.l),new c.a(R.h.ITEM_KEY_RED,2),new u.a(!0,!1,!0,.5),new h.a(.025,0,.025,0),new o.a(.75,.375),new r.a(1));return s.position.x=e,s.position.y=t,s.position.z=n,s.direction.x=0,i.addEntitys(s),s})),ITEM_KEY_BLUE:new W.a(R.h.ITEM_KEY_BLUE,1,!1,((e,t,n,a,i)=>{const s=new I.a("item key key-blue",new S.a(!0,!1,0,{"key-blue":1},"player-pickup-key",R.l),new c.a(R.h.ITEM_KEY_BLUE,2),new u.a(!0,!1,!0,.5),new h.a(.025,0,.025,0),new o.a(.75,.375),new r.a(1));return s.position.x=e,s.position.y=t,s.position.z=n,s.direction.x=0,i.addEntitys(s),s})),ITEM_KEY_YELLOW:new W.a(R.h.ITEM_KEY_YELLOW,1,!1,((e,t,n,a,i)=>{const s=new I.a("item key key-yellow",new S.a(!0,!1,0,{"key-yellow":1},"player-pickup-key",R.l),new c.a(R.h.ITEM_KEY_YELLOW,2),new u.a(!0,!1,!0,.5),new h.a(.025,0,.025,0),new o.a(.75,.375),new r.a(1));return s.position.x=e,s.position.y=t,s.position.z=n,s.direction.x=0,i.addEntitys(s),s})),ITEM_KEY_RANDOM:new W.a(R.h.ITEM_KEY_RANDOM,3,!1,((e,t,n,a,i)=>{const o=new Array;return 0===i.getEntitysOfName("key-red").length&&o.push(_e.ITEM_KEY_RED),0===i.getEntitysOfName("key-blue").length&&o.push(_e.ITEM_KEY_BLUE),0===i.getEntitysOfName("key-yellow").length&&o.push(_e.ITEM_KEY_YELLOW),o.length>0?o[o.length*Math.random()|0].spawn(e,t,n,0,i):null})),CHECKPOINT:new W.a(R.h.OBJECT_CHECKPOINT_DISABLE,1/0,!0,((e,t,n,a,i)=>{const s=new I.a("checkpoint",new ae.a,new c.a(R.h.NONE,2),new u.a(!0,!1,!0,.5),new o.a(.5,.001),new h.a(.025,0,.025,0),new r.a(1));return s.position.x=e,s.position.y=t,s.position.z=n,s.direction.x=a,i.addEntitys(s),s})),SPAWNER_HEALTH_ELIXER:new W.a(R.h.OBJECT_SPAWNER_HEALTH,1/0,!1,((e,t,n,a,i)=>{const s=new I.a("spawner spawner-elixer",new G.a(_e.ITEM_HEALTH_ELIXIR,i instanceof J.a&&(i.getGameMode()===se.a.PRACTICE||i.getGameMode()===se.a.TUTORIAL)?2.5:45,!0),new c.a(R.h.OBJECT_SPAWNER_HEALTH,1),new u.a(!0,!1,!0,.5),new K.a(1,1),new o.a(.5,.001),new h.a(.025,0,.025,0),new r.a(1),new le.a);return s.position.x=e,s.position.y=t,s.position.z=n,s.direction.x=0,i.addEntitys(s),s})),SPAWNER_ARMOR_ELIXER:new W.a(R.h.OBJECT_SPAWNER_ARMOR,1/0,!1,((e,t,n,a,i)=>{const s=new I.a("spawner spawner-elixer",new G.a(_e.ITEM_ARMOR_ELIXIR,i instanceof J.a&&(i.getGameMode()===se.a.PRACTICE||i.getGameMode()===se.a.TUTORIAL)?2.5:45,!0),new c.a(R.h.OBJECT_SPAWNER_ARMOR,1),new u.a(!0,!1,!0,.5),new K.a(1,1),new o.a(.5,.001),new h.a(.025,0,.025,0),new r.a(1),new le.a);return s.position.x=e,s.position.y=t,s.position.z=n,s.direction.x=0,i.addEntitys(s),s})),SPAWNER_ENERGY_ELIXER:new W.a(R.h.OBJECT_SPAWNER_AMMO,1/0,!1,((e,t,n,a,i)=>{const s=new I.a("spawner spawner-elixer",new G.a(_e.ITEM_ENERGY_ELIXIR,i instanceof J.a&&(i.getGameMode()===se.a.PRACTICE||i.getGameMode()===se.a.TUTORIAL)?2.5:45,!0),new c.a(R.h.OBJECT_SPAWNER_AMMO,1),new u.a(!0,!1,!0,.5),new K.a(1,1),new o.a(.5,.001),new h.a(.025,0,.025,0),new r.a(1),new le.a);return s.position.x=e,s.position.y=t,s.position.z=n,s.direction.x=0,i.addEntitys(s),s})),SPAWNER_MAGAZINE:new W.a(R.h.OBJECT_SPAWNER_AMMO,1/0,!1,((e,t,n,a,i)=>{const s=new I.a("spawner spawner-elixer",new G.a(_e.ITEM_MAGAZINE,i instanceof J.a&&(i.getGameMode()===se.a.PRACTICE||i.getGameMode()===se.a.TUTORIAL)?2.5:45,!0),new c.a(R.h.OBJECT_SPAWNER_AMMO,1),new u.a(!0,!1,!0,.5),new K.a(1,1),new o.a(.5,.001),new h.a(.025,0,.025,0),new r.a(1),new le.a);return s.position.x=e,s.position.y=t,s.position.z=n,s.direction.x=0,i.addEntitys(s),s})),SPAWNER_SHELL:new W.a(R.h.OBJECT_SPAWNER_AMMO,1/0,!1,((e,t,n,a,i)=>{const s=new I.a("spawner spawner-elixer",new G.a(_e.ITEM_SHELL,i instanceof J.a&&(i.getGameMode()===se.a.PRACTICE||i.getGameMode()===se.a.TUTORIAL)?2.5:45,!0),new c.a(R.h.OBJECT_SPAWNER_AMMO,1),new u.a(!0,!1,!0,.5),new K.a(1,1),new o.a(.5,.001),new h.a(.025,0,.025,0),new r.a(1),new le.a);return s.position.x=e,s.position.y=t,s.position.z=n,s.direction.x=0,i.addEntitys(s),s})),SPAWNER_ROCKET:new W.a(R.h.OBJECT_SPAWNER_AMMO,1/0,!1,((e,t,n,a,i)=>{const s=new I.a("spawner spawner-elixer",new G.a(_e.ITEM_ROCKET,i instanceof J.a&&(i.getGameMode()===se.a.PRACTICE||i.getGameMode()===se.a.TUTORIAL)?2.5:45,!0),new c.a(R.h.OBJECT_SPAWNER_AMMO,1),new u.a(!0,!1,!0,.5),new K.a(1,1),new o.a(.5,.001),new h.a(.025,0,.025,0),new r.a(1),new le.a);return s.position.x=e,s.position.y=t,s.position.z=n,s.direction.x=0,i.addEntitys(s),s})),SPAWNER_CELL:new W.a(R.h.OBJECT_SPAWNER_AMMO,1/0,!1,((e,t,n,a,i)=>{const s=new I.a("spawner spawner-elixer",new G.a(_e.ITEM_CELL,i instanceof J.a&&(i.getGameMode()===se.a.PRACTICE||i.getGameMode()===se.a.TUTORIAL)?2.5:45,!0),new c.a(R.h.OBJECT_SPAWNER_AMMO,1),new u.a(!0,!1,!0,.5),new K.a(1,1),new o.a(.5,.001),new h.a(.025,0,.025,0),new r.a(1),new le.a);return s.position.x=e,s.position.y=t,s.position.z=n,s.direction.x=0,i.addEntitys(s),s})),SPAWNER_TARGET:new W.a(R.h.OBJECT_SPAWNER_OTHER,1/0,!1,((e,t,n,a,i)=>{const s=new I.a("spawner spawner-target",new G.a(_e.ENEMY_TARGET,2.5),new c.a(R.h.OBJECT_SPAWNER_OTHER,1),new u.a(!0,!1,!0,.5),new K.a(1,1),new o.a(.5,.001),new h.a(.025,0,.025,0),new r.a(1),new le.a);return s.position.x=e,s.position.y=t,s.position.z=n,s.direction.x=0,i.addEntitys(s),s})),HORDE_GROUND_SPAWNER:new W.a(R.h.UI_HORDE_GROUND_SPAWN_POINT,1/0,!1,((e,t,n,a,i)=>{const o=new I.a("horde-spawn-point ground",new ie.a("default",1/0),new c.a(R.h.OBJECT_SPAWNER_OTHER,1),new K.a(1,1));return o.position.x=e,o.position.y=t+.5,o.position.z=n,i.addEntitys(o),o})),HORDE_SNIPER_SPAWNER:new W.a(R.h.UI_HORDE_SNIPER_SPAWN_POINT,1/0,!1,((e,t,n,a,i)=>{const o=new I.a("horde-spawn-point sniper",new c.a(R.h.OBJECT_SPAWNER_OTHER,1),new ie.a("sniper",1),new K.a(1,1));return o.position.x=e,o.position.y=t+.5,o.position.z=n,i.addEntitys(o),o})),HORDE_SKY_SPAWNER:new W.a(R.h.UI_HORDE_SKY_SPAWN_POINT,1/0,!1,((e,t,n,a,i)=>{const o=new I.a("horde-spawn-point sky",new ie.a("sky",1),new c.a(R.h.OBJECT_SPAWNER_OTHER,1),new K.a(1,1));return o.position.x=e,o.position.y=t+.5,o.position.z=n,i.addEntitys(o),o}))};a()}catch(e){a(e)}}))},(e,t,n)=>{var a=n(72),i=n(86);e.exports=function(e){return a(i(e))}},(e,t,n)=>{var a=n(3).String;e.exports=function(e){try{return a(e)}catch(e){return"Object"}}},(e,t,n)=>{var a=n(98),i=n(3);e.exports="process"==a(i.process)},(e,t,n)=>{var a=n(3),i=n(87),o=a.TypeError;e.exports=function(e,t){if(i(t,e))return e;throw o("Incorrect invocation")}},(e,t,n)=>{var a=n(3),i=n(102),o=n(17),s=n(168),r=n(130),l=n(21),h=n(278),c=n(78),u=n(73),p=i&&i.prototype,d=l("species"),g=!1,m=o(a.PromiseRejectionEvent),f=s("Promise",(function(){var e=r(i),t=e!==String(i);if(!t&&66===u)return!0;if(c&&(!p.catch||!p.finally))return!0;if(u>=51&&/native code/.test(e))return!1;var n=new i((function(e){e(1)})),a=function(e){e((function(){}),(function(){}))};return(n.constructor={})[d]=a,!(g=n.then((function(){}))instanceof a)||!t&&h&&!m}));e.exports={CONSTRUCTOR:f,REJECTION_EVENT:m,SUBCLASSING:g}},e=>{e.exports={}},(e,t,n)=>{var a=n(37),i=n(99),o=n(115),s=n(21)("iterator");e.exports=function(e){if(null!=e)return i(e,s)||i(e,"@@iterator")||o[a(e)]}},(e,t,n)=>{"use strict";var a=n(19),i=n(11),o=n(12),s=n(174),r=n(25),l=n(131),h=n(88),c=n(133),u=s.ArrayBuffer,p=s.DataView,d=p.prototype,g=i(u.prototype.slice),m=i(d.getUint8),f=i(d.setUint8);a({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:o((function(){return!new u(2).slice(1,void 0).byteLength}))},{slice:function(e,t){if(g&&void 0===t)return g(r(this),e);for(var n=r(this).byteLength,a=l(e,n),i=l(void 0===t?n:t,n),o=new(c(this,u))(h(i-a)),s=new p(this),d=new p(o),y=0;a<i;)f(d,y++,m(s,a++));return o}})},(e,t,n)=>{"use strict";var a=n(3),i=n(20),o=n(104),s=n(84),r=n(211),l=n(79),h=n(12),c=a.RangeError,u=a.Int8Array,p=u&&u.prototype,d=p&&p.set,g=o.aTypedArray,m=o.exportTypedArrayMethod,f=!h((function(){var e=new Uint8ClampedArray(2);return i(d,e,{length:1,0:3},1),3!==e[1]})),y=f&&o.NATIVE_ARRAY_BUFFER_VIEWS&&h((function(){var e=new u(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]}));m("set",(function(e){g(this);var t=r(arguments.length>1?arguments[1]:void 0,1),n=l(e);if(f)return i(d,this,n,t);var a=this.length,o=s(n),h=0;if(o+t>a)throw c("Wrong length");for(;h<o;)this[t+h]=n[h++]}),!f||y)},(e,t,n)=>{"use strict";var a=n(3),i=n(11),o=n(12),s=n(77),r=n(212),l=n(104),h=n(294),c=n(295),u=n(73),p=n(296),d=l.aTypedArray,g=l.exportTypedArrayMethod,m=a.Uint16Array,f=m&&i(m.prototype.sort),y=!(!f||o((function(){f(new m(2),null)}))&&o((function(){f(new m(2),{})}))),v=!!f&&!o((function(){if(u)return u<74;if(h)return h<67;if(c)return!0;if(p)return p<602;var e,t,n=new m(516),a=Array(516);for(e=0;e<516;e++)t=e%4,n[e]=515-e,a[e]=e-2*t+3;for(f(n,(function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(n[e]!==a[e])return!0}));g("sort",(function(e){return void 0!==e&&s(e),v?f(this,e):r(d(this),function(e){return function(t,n){return void 0!==e?+e(t,n)||0:n!=n?-1:t!=t?1:0===t&&0===n?1/t>0&&1/n<0?1:-1:t>n}}(e))}),!v||y)},(e,t,n)=>{"use strict";var a=n(3),i=n(135),o=n(104),s=n(12),r=n(197),l=a.Int8Array,h=o.aTypedArray,c=o.exportTypedArrayMethod,u=[].toLocaleString,p=!!l&&s((function(){u.call(new l(1))}));c("toLocaleString",(function(){return i(u,p?r(h(this)):h(this),r(arguments))}),s((function(){return[1,2].toLocaleString()!=new l([1,2]).toLocaleString()}))||!s((function(){l.prototype.toLocaleString.call([1,2])})))},(e,t,n)=>{"use strict";var a=n(19),i=n(314).left,o=n(204),s=n(73),r=n(112);a({target:"Array",proto:!0,forced:!o("reduce")||!r&&s>79&&s<83},{reduce:function(e){var t=arguments.length;return i(this,e,t,t>1?arguments[1]:void 0)}})},(e,t,n)=>{"use strict";n.d(t,{a:()=>g,b:()=>p,c:()=>d});n(302),n(18);var a=n(85),i=n(34),o=n(91),s=n(22);const r={};(0,i.b)()?(0,s.b)(o.d,"message",(e=>{const{data:t}=e;if(t instanceof Object&&"save"===t.method){const e=r[t.name]||{};for(const t in e)delete e[t];for(const n in t.value)e[n]=t.value[n];r[t.name]=e}})):(0,s.b)(o.d,"message",(e=>{const{data:t}=e;if(t instanceof Object)switch(t.method){case"load":p(t.name,t.forceLocalStorage).then((e=>{o.d.postMessage({method:"load",name:t.name,value:e,key:t.key})}));break;case"save":p(t.name).then((e=>{for(const n in t.value)e[n]=t.value[n];d(t.name,t.forceLocalStorage).then((e=>{o.d.postMessage({method:"save",name:t.name,value:t.value,key:t.key})}))}));break;case"delete":g(t.name,t.forceLocalStorage).then((()=>{o.d.postMessage({method:"delete",name:t.name,key:t.key})}))}}));const l=function(e,t){switch(!0){case void 0===t:return{__extendData__:!0,type:"undefined",value:""};case null===t:return{__extendData__:!0,type:"null",value:""};case Number.isNaN(t):return{__extendData__:!0,type:"number",value:"NaN"};case Number.POSITIVE_INFINITY===t:return{__extendData__:!0,type:"number",value:"Infinity"};case Number.NEGATIVE_INFINITY===t:return{__extendData__:!0,type:"number",value:"-Infinity"};case t instanceof Date:return{__extendData__:!0,type:"date",value:t.toISOString()};case"symbol"==typeof t:return{__extendData__:!0,type:"symbol",value:Symbol.keyFor(t)}}return t},h=function(e,t){if("object"!=typeof t||!t.__extendData__)return t;switch(t.type){case"undefined":return;case"null":return null;case"number":switch(t.value){case"NaN":return Number.NaN;case"Infinity":case"+Infinity":return Number.POSITIVE_INFINITY;case"-Infinity":return Number.NEGATIVE_INFINITY}case"date":return new Date(t.value);case"symbol":return Symbol.for(t.value)}};async function c(e,t){let n={};try{if(!t&&"electron"in self)n=JSON.parse(JSON.stringify(await self.electron.loadStorage(e),h));else{const t=localStorage.getItem(e)||"";t&&t.length>0&&(n=JSON.parse(t,h))}}catch(n){await async function(e,t){!t&&"electron"in self?await self.electron.deleteStorage(e):localStorage.removeItem(e)}(e,t)}return n}async function u(e,t,n){try{!n&&"electron"in self?await self.electron.saveStorage(e,JSON.parse(JSON.stringify(t,l))):localStorage.setItem(e,JSON.stringify(t,l))}catch(t){console.error('"'.concat(e,'" is define local storage.'))}}async function p(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={};if((0,i.b)()){if(r.hasOwnProperty(e))return r[e];let i=(0,a.a)();n=await new Promise((n=>{const a=e=>{const{data:t}=e;if(t instanceof Object&&t.key===i&&"load"===t.method)(0,s.d)(o.d,"message",a),r[t.name]=t.value,n(t.value)};(0,s.b)(o.d,"message",a),o.d.postMessage({method:"load",name:e,forceLocalStorage:t,key:i})}))}else r.hasOwnProperty(e)||(r[e]=await c(e,t)),n=r[e];return n}async function d(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if((0,i.b)()){if(!r.hasOwnProperty(e))return;let n=(0,a.a)();await new Promise((a=>{const i=e=>{const{data:t}=e;if(t instanceof Object&&t.key===n&&"save"===t.method)(0,s.d)(o.d,"message",i),n=null,a(null)};(0,s.b)(o.d,"message",i),o.d.postMessage({method:"save",name:e,value:r[e],forceLocalStorage:t,key:n})}))}else r.hasOwnProperty(e)&&await u(e,r[e],t)}async function g(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if((0,i.b)()){if(!r.hasOwnProperty(e))return;let n=(0,a.a)();return await new Promise((a=>{(0,s.b)(o.d,"message",(function t(i){const{data:l}=i;if(l instanceof Object&&l.key===n&&"delete"===l.method)(0,s.d)(o.d,"message",t),delete r[e],n=null,a(l.value)})),o.d.postMessage({method:"delete",name:e,forceLocalStorage:t,key:n})}))}delete(await p(e))[e],await d(e,t)}},(e,t,n)=>{"use strict";n.d(t,{a:()=>T,b:()=>M,c:()=>E,d:()=>C});n(1),n(2),n(14),n(15),n(16),n(18);var a=n(91),i=n(34),o=n(0),s=n(85),r=n(22),l=n(35);let h=!1,c=!1,u=!1,p=!1;const d=new Array,g=new o.e(0,0),m=new Array,f=new Array;let y=!1,v=1,w=-1;const b=()=>{-1===w&&(w=setTimeout((()=>{w=-1;const[e,t]=M();v=self.devicePixelRatio,m.forEach((e=>e.call(null))),a.h.postMessage({method:"resolution",width:e,height:t}),a.h.postMessage({method:"pixel-ratio",value:self.devicePixelRatio})}),100))};if((0,i.b)())(0,r.b)(a.h,"message",(e=>{const{data:t}=e;if(t instanceof Object)switch(t.method){case"resolution":g.x=t.width,g.y=t.height;break;case"pixel-ratio":v=t.value;break;case"focusChange":y=t.value;break;case"browser":u=t.value;break;case"hack":h=t.value;break;case"electron":c=t.value;break;case"success":d.includes(t.key)&&d.splice(d.indexOf(t.key),1)}}));else{function S(){if((0,r.b)((0,l.d)(),"resize",b),(0,r.b)((0,l.d)(),"fullscreenchange",b),(0,r.b)((0,l.d)(),"fullscreenerror",b),(0,r.b)((0,l.d)(),"blur",b),(0,r.b)((0,l.d)(),"focus",b),(0,r.b)((0,l.d)(),"orientationchange",b),"electron"in self&&(0,r.b)(self.electron,"focuschange",(e=>x(e.value))),(0,r.b)((0,l.d)(),"focus",(()=>x(!1))),(0,r.b)((0,l.d)(),"blur",(()=>x(!0))),(0,r.b)((0,l.d)(),"mousemove",(()=>x(!1))),document.body)b();else{const e=()=>{(0,r.d)((0,l.d)(),"load",e),b()};(0,r.b)((0,l.d)(),"load",e)}}(0,r.b)(a.h,"message",(async e=>{const{data:t}=e;if(t instanceof Object)switch(t.method){case"blur":y=t.value;break;case"exec":await(t.value?C():T()),a.h.postMessage({method:"success",key:t.key})}})),(0,r.b)(document,"fullscreenchange",(()=>{u=!!document.fullscreenElement,a.h.postMessage({method:"browser",value:u})})),S()}function x(e){y!==e&&(y=e,f.forEach((e=>e(y))),a.h.postMessage({method:"blur",value:e}))}function M(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{x:n,y:a}=(0,i.b)()?g:new o.e(self.document.body.offsetWidth,self.document.body.offsetHeight);return[Math.floor(n*(e?v:1)),Math.floor(a/(t&&n<a?2:1)*(e?v:1))]}function E(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return(0,i.b)()?d.length>0?p:(0,i.a)()?c:e?u||h:u:(0,i.a)()?c:null!==document.fullscreenElement||!!e&&_()}function _(){return(0,i.b)()?h:self.innerHeight>=self.outerHeight||self.innerHeight>=self.outerWidth}function C(){const e=async t=>{if((0,i.b)()){const n=(0,s.a)(),o=e=>{const{data:i}=e;if(i instanceof Object&&i.key===n&&"success"===i.method)d.includes(i.key)&&d.splice(d.indexOf(i.key),1),(0,r.d)(a.h,"message",o),t(null)};p=!0,d.push(n),(0,r.b)(a.h,"message",o),a.h.postMessage({method:"exec",value:!0,key:n})}else if("electron"in self)c||(self.electron.setFullscreen(!0),c=!0,self.dispatchEvent(new UIEvent("resize")),a.h.postMessage({method:"electron",value:c})),t(null);else if(E(!(0,i.a)()))t(null);else if(null!==document.body){function h(){a.h.postMessage({method:"browser",value:E()}),t(null)}document.body.requestFullscreen().then(h).catch(h)}else{const u=()=>{(0,r.d)((0,l.d)(),"load",u),e(t)};(0,r.b)((0,l.d)(),"load",u)}};return new Promise(e)}async function T(){(0,i.b)()?await new Promise((e=>{const t=(0,s.a)(),n=i=>{const{data:o}=i;if(o instanceof Object&&o.key===t&&"success"===o.method)d.includes(o.key)&&d.splice(d.indexOf(o.key),1),(0,r.d)(a.h,"message",n),e(null)};p=!1,d.push(t),(0,r.b)(a.h,"message",n),a.h.postMessage({method:"exec",value:!1,key:t})})):E(!(0,i.a)())&&((0,i.a)()?c&&("electron"in self&&self.electron.setFullscreen(!1),c=!1,self.dispatchEvent(new UIEvent("resize")),a.h.postMessage({method:"electron",value:c})):E(!1)&&await document.exitFullscreen())}},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>p,b:()=>u,c:()=>d});var i=n(60),o=n(96),s=n(5),r=n(76),l=n(319),h=n(149),c=e([s]);s=(c.then?(await c)():c)[0];class u extends i.a{constructor(e,t,n,a,i,c,u,p,d,g,m,f,y,v){super(s.h.EFFECT_DEFAULT_EXPLODE1,e,t,n,a,i,c,0,.25,!1,m,f,y,new l.a(c,c,u,p,d,1,g,1/0,"default",v),new o.a([s.h.EFFECT_DEFAULT_EXPLODE1,s.h.EFFECT_DEFAULT_EXPLODE2,s.h.EFFECT_DEFAULT_EXPLODE3,s.h.EFFECT_DEFAULT_EXPLODE4,s.h.EFFECT_DEFAULT_EXPLODE5,s.h.EFFECT_DEFAULT_EXPLODE6,s.h.EFFECT_DEFAULT_EXPLODE7,s.h.EFFECT_DEFAULT_EXPLODE8,s.h.EFFECT_DEFAULT_EXPLODE9,s.h.EFFECT_DEFAULT_EXPLODE10,s.h.EFFECT_DEFAULT_EXPLODE11,s.h.EFFECT_DEFAULT_EXPLODE12,s.h.EFFECT_DEFAULT_EXPLODE13,s.h.EFFECT_DEFAULT_EXPLODE14],.75,!1),new r.a(.75),new h.a(["./asset/sound/effect/explode.mp3"],10*c,!1))}}class p extends i.a{constructor(e,t,n,a,i,c,u,p,d,g,m,f,y,v){super(s.h.EFFECT_CORROSIVE_EXPLODE1,e,t,n,a,i,c,0,.25,!1,m,f,y,new l.a(c,c,u,p,d,1,g,1/0,"acid",v),new o.a([s.h.EFFECT_CORROSIVE_EXPLODE1,s.h.EFFECT_CORROSIVE_EXPLODE2,s.h.EFFECT_CORROSIVE_EXPLODE3,s.h.EFFECT_CORROSIVE_EXPLODE4,s.h.EFFECT_CORROSIVE_EXPLODE5,s.h.EFFECT_CORROSIVE_EXPLODE6,s.h.EFFECT_CORROSIVE_EXPLODE7,s.h.EFFECT_CORROSIVE_EXPLODE8,s.h.EFFECT_CORROSIVE_EXPLODE9,s.h.EFFECT_CORROSIVE_EXPLODE10,s.h.EFFECT_CORROSIVE_EXPLODE11,s.h.EFFECT_CORROSIVE_EXPLODE12,s.h.EFFECT_CORROSIVE_EXPLODE13,s.h.EFFECT_CORROSIVE_EXPLODE14],.75,!1),new r.a(.75),new h.a(["./asset/sound/effect/corrosive.mp3"],10,!1))}}class d extends i.a{constructor(e,t,n,a,i,c,u,p,d,g,m,f,y,v){super(s.h.EFFECT_CORROSIVE_EXPLODE1,e,t,n,a,i,c,0,.25,!1,m,f,y,new l.a(c,c,u,p,d,1,g,1/0,"freeze",v),new o.a([s.h.EFFECT_CORROSIVE_EXPLODE1,s.h.EFFECT_CORROSIVE_EXPLODE2,s.h.EFFECT_CORROSIVE_EXPLODE3,s.h.EFFECT_CORROSIVE_EXPLODE4,s.h.EFFECT_CORROSIVE_EXPLODE5,s.h.EFFECT_CORROSIVE_EXPLODE6,s.h.EFFECT_CORROSIVE_EXPLODE7,s.h.EFFECT_CORROSIVE_EXPLODE8,s.h.EFFECT_CORROSIVE_EXPLODE9,s.h.EFFECT_CORROSIVE_EXPLODE10,s.h.EFFECT_CORROSIVE_EXPLODE11,s.h.EFFECT_CORROSIVE_EXPLODE12,s.h.EFFECT_CORROSIVE_EXPLODE13,s.h.EFFECT_CORROSIVE_EXPLODE14],.75,!1),new r.a(.75),new h.a(["./asset/sound/effect/ice-explode.mp3"],10,!1))}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{a:()=>i});class i{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;a(this,"enable",!0),a(this,"exec",!1),a(this,"dir",0),a(this,"nextDir",-1),a(this,"sizeY",void 0),a(this,"stretchSpeed",void 0),this.sizeY=e,this.stretchSpeed=t}}},(e,t,n)=>{"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{a:()=>i});class i{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];a(this,"time",0),a(this,"startScale",-1),a(this,"speed",void 0),a(this,"scale",void 0),a(this,"loop",void 0),this.speed=e,this.scale=t,this.loop=n}}},(e,t,n)=>{"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{a:()=>i});class i{constructor(e,t,n,i){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];a(this,"isOverPick",void 0),a(this,"isPartPick",void 0),a(this,"noPickupTime",void 0),a(this,"items",void 0),a(this,"soundNameSpace",void 0),a(this,"pickUpSounds",void 0),a(this,"override",!1),a(this,"time",0),this.isOverPick=e,this.isPartPick=t,this.noPickupTime=n,this.items=i,this.soundNameSpace=o,this.pickUpSounds=s}}},(e,t,n)=>{var a=n(267),i=n(159);e.exports=function(e){var t=a(e,"string");return i(t)?t:t+""}},(e,t,n)=>{var a=n(28),i=n(29),o=Function.prototype,s=a&&Object.getOwnPropertyDescriptor,r=i(o,"name"),l=r&&"something"===function(){}.name,h=r&&(!a||a&&s(o,"name").configurable);e.exports={EXISTS:r,PROPER:l,CONFIGURABLE:h}},(e,t,n)=>{var a=n(11),i=n(17),o=n(161),s=a(Function.toString);i(o.inspectSource)||(o.inspectSource=function(e){return s(e)}),e.exports=o.inspectSource},(e,t,n)=>{var a=n(95),i=Math.max,o=Math.min;e.exports=function(e,t){var n=a(e);return n<0?i(n+t,0):o(n,t)}},(e,t,n)=>{"use strict";var a=n(83),i=n(45),o=n(21),s=n(28),r=o("species");e.exports=function(e){var t=a(e),n=i.f;s&&t&&!t[r]&&n(t,r,{configurable:!0,get:function(){return this}})}},(e,t,n)=>{var a=n(25),i=n(195),o=n(21)("species");e.exports=function(e,t){var n,s=a(e).constructor;return void 0===s||null==(n=a(s)[o])?t:i(n)}},(e,t,n)=>{var a,i,o,s,r=n(3),l=n(135),h=n(89),c=n(17),u=n(29),p=n(12),d=n(196),g=n(197),m=n(74),f=n(136),y=n(198),v=n(112),w=r.setImmediate,b=r.clearImmediate,x=r.process,M=r.Dispatch,E=r.Function,_=r.MessageChannel,C=r.String,T=0,S={},k="onreadystatechange";try{a=r.location}catch(e){}var O=function(e){if(u(S,e)){var t=S[e];delete S[e],t()}},A=function(e){return function(){O(e)}},L=function(e){O(e.data)},P=function(e){r.postMessage(C(e),a.protocol+"//"+a.host)};w&&b||(w=function(e){f(arguments.length,1);var t=c(e)?e:E(e),n=g(arguments,1);return S[++T]=function(){l(t,void 0,n)},i(T),T},b=function(e){delete S[e]},v?i=function(e){x.nextTick(A(e))}:M&&M.now?i=function(e){M.now(A(e))}:_&&!y?(s=(o=new _).port2,o.port1.onmessage=L,i=h(s.postMessage,s)):r.addEventListener&&c(r.postMessage)&&!r.importScripts&&a&&"file:"!==a.protocol&&!p(P)?(i=P,r.addEventListener("message",L,!1)):i=k in m("script")?function(e){d.appendChild(m("script")).onreadystatechange=function(){d.removeChild(this),O(e)}}:function(e){setTimeout(A(e),0)}),e.exports={set:w,clear:b}},(e,t,n)=>{var a=n(71),i=Function.prototype,o=i.apply,s=i.call;e.exports="object"==typeof Reflect&&Reflect.apply||(a?s.bind(o):function(){return s.apply(o,arguments)})},(e,t,n)=>{var a=n(3).TypeError;e.exports=function(e,t){if(e<t)throw a("Not enough arguments");return e}},(e,t,n)=>{"use strict";var a=n(77),i=function(e){var t,n;this.promise=new e((function(e,a){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=a})),this.resolve=a(t),this.reject=a(n)};e.exports.f=function(e){return new i(e)}},(e,t,n)=>{var a=n(3),i=n(20),o=n(77),s=n(25),r=n(111),l=n(116),h=a.TypeError;e.exports=function(e,t){var n=arguments.length<2?l(e):t;if(o(n))return s(i(n,e));throw h(r(e)+" is not iterable")}},(e,t,n)=>{var a=n(3),i=n(29),o=n(17),s=n(79),r=n(164),l=n(279),h=r("IE_PROTO"),c=a.Object,u=c.prototype;e.exports=l?c.getPrototypeOf:function(e){var t=s(e);if(i(t,h))return t[h];var n=t.constructor;return o(n)&&t instanceof n?n.prototype:t instanceof c?u:null}},(e,t,n)=>{"use strict";n.d(t,{a:()=>l,b:()=>o,c:()=>s,d:()=>h});n(1),n(2),n(7),n(117),n(366),n(118),n(119),n(120),n(367),n(368),n(244),n(369),n(370),n(371),n(143),n(372),n(373);const a=new Map;function i(e,t){let n;const a=e.toLowerCase();switch(!0){case/^int[0-9]+$/.test(a):switch(a){case"int8":n=new Int8Array(t);break;case"int16":n=new Int16Array(t);break;case"int32":n=new Int32Array(t)}break;case/^uint[0-9]+$/.test(a):switch(a){case"uint8":n=new Uint8Array(t);break;case"uint16":n=new Uint16Array(t);break;case"uint32":n=new Uint32Array(t)}break;case"uint8clamped"===a:n=new Uint8ClampedArray(t);break;case/^float[0-9]+$/.test(a):switch(a){case"float32":n=new Float32Array(t);break;case"float64":n=new Float64Array(t)}}if(!n)throw new Error("Not found array type was ".concat(e));return n}function o(e,t){const n=a.has(e)?a.get(e):l(e,1,!0);return n?(a.set(e,n),n[0]=t,n[0]):t}function s(){return"SharedArrayBuffer"in self}function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a=i(e,t).byteLength;return!n&&s()?new SharedArrayBuffer(a):new ArrayBuffer(a)}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return i(e,r(e,t,n))}function h(e,t,n,a,i){e[t*n+a]=i}},(e,t,n)=>{"use strict";var a,i,o=n(20),s=n(11),r=n(43),l=n(206),h=n(173),c=n(160),u=n(103),p=n(80).get,d=n(241),g=n(242),m=c("native-string-replace",String.prototype.replace),f=RegExp.prototype.exec,y=f,v=s("".charAt),w=s("".indexOf),b=s("".replace),x=s("".slice),M=(i=/b*/g,o(f,a=/a/,"a"),o(f,i,"a"),0!==a.lastIndex||0!==i.lastIndex),E=h.BROKEN_CARET,_=void 0!==/()??/.exec("")[1];(M||_||E||d||g)&&(y=function(e){var t,n,a,i,s,h,c,d=this,g=p(d),C=r(e),T=g.raw;if(T)return T.lastIndex=d.lastIndex,t=o(y,T,C),d.lastIndex=T.lastIndex,t;var S=g.groups,k=E&&d.sticky,O=o(l,d),A=d.source,L=0,P=C;if(k&&(O=b(O,"y",""),-1===w(O,"g")&&(O+="g"),P=x(C,d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==v(C,d.lastIndex-1))&&(A="(?: "+A+")",P=" "+P,L++),n=new RegExp("^(?:"+A+")",O)),_&&(n=new RegExp("^"+A+"$(?!\\s)",O)),M&&(a=d.lastIndex),i=o(f,k?n:d,P),k?i?(i.input=x(i.input,L),i[0]=x(i[0],L),i.index=d.lastIndex,d.lastIndex+=i[0].length):d.lastIndex=0:M&&i&&(d.lastIndex=d.global?i.index+i[0].length:a),_&&i&&i.length>1&&o(m,i[0],n,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(i[s]=void 0)})),i&&S)for(i.groups=h=u(null),s=0;s<S.length;s++)h[(c=S[s])[0]]=i[c[1]];return i}),e.exports=y},(e,t,n)=>{var a=n(3),i=n(131),o=n(84),s=n(210),r=a.Array,l=Math.max;e.exports=function(e,t,n){for(var a=o(e),h=i(t,a),c=i(void 0===n?a:n,a),u=r(l(c-h,0)),p=0;h<c;h++,p++)s(u,p,e[h]);return u.length=p,u}},(e,t,n)=>{n(82)("Float32",(function(e){return function(t,n,a){return e(this,t,n,a)}}))},(e,t,n)=>{"use strict";n.d(t,{a:()=>y,b:()=>m,c:()=>v,d:()=>g,e:()=>w,f:()=>f});n(7),n(106);var a=n(315);n(1),n(2);new WeakMap,new WeakMap;var i=n(24),o=n(22),s=n(34),r=n(250);const l={},h=new Array;let c=new Array,u=!1,p=!1;function d(){u?a.a.postMessage({method:"enable"}):a.a.postMessage({method:"disable"})}function g(){u||(u=!0,d())}function m(){u&&(u=!1,d())}function f(){p=!0}function y(){p=!1}function v(e,t){h.push({id:e,message:t})}function w(){if(p)a.a.postMessage({method:"stop"});else if(h.length>0){const e=(0,r.a)(c,h);c=h.slice(),e.length>0&&a.a.postMessage({method:"log",value:e}),(0,i.a)(h)}}(0,s.b)()||(0,o.b)(a.a,"message",(e=>{const{data:t}=e;if(t instanceof Object)switch(t.method){case"enable":u=!0;break;case"disable":u=!1;break;case"log":p=!1;const e=t.value;(0,r.b)(c,e);for(const e in c){const{id:t,message:n}=c[e];l[t]=n}const n=Object.values(c);for(const e in l)n.some((t=>t.id===e))||delete l[e];break;case"stop":p=!0}}))},(e,t,n)=>{"use strict";n.d(t,{a:()=>o});n(1),n(2);var a=n(0),i=n(38);class o extends i.a{constructor(){var e,t,n;super(...arguments),e=this,t="direction",n=new a.e(0,0),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}}},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>d,b:()=>p});n(7);var i=n(8),o=n(33),s=n(188),r=n(50),l=n(47),h=n(0),c=e([r,l]);function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const a=e.getComponent(r.a),c=n?n.getComponent(s.a):null,u=-1!==a.rightWeapon.time?Math.min(a.rightWeapon.time,a.rightWeapon.data.fireSpeed):a.rightWeapon.data.fireSpeed,p=-1!==a.leftWeapon.time?Math.min(a.leftWeapon.time,a.leftWeapon.data.fireSpeed):a.leftWeapon.data.fireSpeed,d=(0,i.c)(Math.min(1,u/a.rightWeapon.data.fireSpeed),1),g=(0,i.c)(Math.min(1,p/a.leftWeapon.data.fireSpeed),1),m=Math.min(1,u/Math.min(.05,a.rightWeapon.data.fireSpeed)),f=Math.min(1,p/Math.min(.05,a.leftWeapon.data.fireSpeed));let y=1,v=1,w=1,b=-1;const x=(!a.leftWeapon.data.grip&&a.rightWeapon.data.grip&&!a.rightWeapon.data.release||a.leftWeapon.data.grip&&!a.rightWeapon.data.grip&&!a.leftWeapon.data.release)&&!((null!=c&&c.inverse?a.leftWeapon.data.climb:a.rightWeapon.data.climb)&&null!==(t=e.getComponent(o.a))&&void 0!==t&&t.exec)&&!a.leftWeapon.data.release&&!a.rightWeapon.data.release&&(!a.leftWeapon.data.fireRelease||(!a.leftWeapon.isChargeStart&&!a.leftWeapon.isFireStart||!a.leftWeapon.isAmmo&&!(g>0&&g<1)))&&(!a.rightWeapon.data.fireRelease||(!a.rightWeapon.isChargeStart&&!a.rightWeapon.isFireStart||!a.rightWeapon.isAmmo&&!(d>0&&d<1)))&&(!a.leftWeapon.data.grip||(!a.leftWeapon.isFireStart||!a.leftWeapon.isAmmo&&!(g>0&&g<1)))&&(!a.rightWeapon.data.grip||(!a.rightWeapon.isFireStart||!a.rightWeapon.isAmmo&&!(d>0&&d<1)))&&(a.leftWeapon.data.shootType!==l.q.HOOK||0===a.leftWeapon.bullets.length)&&(a.rightWeapon.data.shootType!==l.q.HOOK||0===a.rightWeapon.bullets.length);let M=null;return null!==c&&(!c.inverse&&x&&a.rightWeapon.data.grip&&!a.leftWeapon.data.grip&&d>=1||c.inverse&&x&&a.rightWeapon.data.grip&&!a.leftWeapon.data.grip?(y=g,v=f,w=a.leftWeapon.chargePar,b=a.leftWeapon.isChargeAttack?a.leftWeapon.data.fireAnimationMax:a.leftWeapon.data.fireAnimationMin,M="left"):c.inverse&&x&&a.leftWeapon.data.grip&&!a.rightWeapon.data.grip&&g>=1||!c.inverse&&x&&a.leftWeapon.data.grip&&!a.rightWeapon.data.grip?(y=d,v=m,w=a.rightWeapon.chargePar,b=a.rightWeapon.isChargeAttack?a.rightWeapon.data.fireAnimationMax:a.rightWeapon.data.fireAnimationMin,M="right"):c.inverse?(y=g,v=f,w=a.leftWeapon.chargePar,b=a.leftWeapon.isChargeAttack?a.leftWeapon.data.fireAnimationMax:a.leftWeapon.data.fireAnimationMin,M="left"):c.inverse||(y=d,v=m,w=a.rightWeapon.chargePar,b=a.rightWeapon.isChargeAttack?a.rightWeapon.data.fireAnimationMax:a.rightWeapon.data.fireAnimationMin,M="right")),[x,M,b,(0,i.c)(Math.abs(Math.cos(h.b+h.b*y)),1,1e4),v,w]}[r,l]=c.then?(await c)():c;class d{constructor(e,t,n,a,i,o,s,r,l,h,c,p,d,g,m,f,y,v,w,b,x,M,E,_,C,T,S,k,O,A,L,P,I,N,R,W,z,D,F,U,H,B,G,Y,V,j,K,X,q,J,Z,$,Q,ee,te,ne,ae,ie,oe,se,re,le,he,ce,ue,pe,de,ge,me,fe,ye,ve,we,be,xe,Me,Ee,_e,Ce,Te,Se,ke,Oe,Ae,Le,Pe,Ie,Ne,Re,We){u(this,"itemMaterial",void 0),u(this,"stillMaterial",void 0),u(this,"cluchMateial",void 0),u(this,"jumpMaterial",void 0),u(this,"airMaterial",void 0),u(this,"sprintMaterial",void 0),u(this,"slidingMaterial",void 0),u(this,"coilMaterial",void 0),u(this,"grabMaterial",void 0),u(this,"wallrunMaterial",void 0),u(this,"chargeMaterial",void 0),u(this,"chargeWaitMaterial",void 0),u(this,"fireMaterial",void 0),u(this,"chargeFireMaterial",void 0),u(this,"cockingMaterial",void 0),u(this,"gripMaterial",void 0),u(this,"emptyMaterial",void 0),u(this,"muzzleFlashMaterials",void 0),u(this,"flip",void 0),u(this,"grip",void 0),u(this,"climb",void 0),u(this,"release",void 0),u(this,"fireRelease",void 0),u(this,"isEndFire",void 0),u(this,"shootType",void 0),u(this,"isShootHold",void 0),u(this,"fireAnimationMin",void 0),u(this,"fireAnimationMax",void 0),u(this,"sprintType",void 0),u(this,"tacticalSprintType",void 0),u(this,"changeAnimationType",void 0),u(this,"lightForce",void 0),u(this,"fireSpeed",void 0),u(this,"waitTime",void 0),u(this,"burstTime",void 0),u(this,"normalBulletType",void 0),u(this,"chargeBulletType",void 0),u(this,"damageMin",void 0),u(this,"damageMax",void 0),u(this,"random",void 0),u(this,"chargeTime",void 0),u(this,"damageTypeMin",void 0),u(this,"damageTypeMax",void 0),u(this,"bulletCountMin",void 0),u(this,"bulletCountMax",void 0),u(this,"bulletSpeedMin",void 0),u(this,"bulletSpeedMax",void 0),u(this,"bulletBurstMin",void 0),u(this,"bulletBurstMax",void 0),u(this,"bulletLengthMin",void 0),u(this,"bulletLengthMax",void 0),u(this,"bulletScaleMin",void 0),u(this,"bulletScaleMax",void 0),u(this,"standBulletSpreadMin",void 0),u(this,"actionBulletSpreadMin",void 0),u(this,"standBulletSpreadMax",void 0),u(this,"actionBulletSpreadMax",void 0),u(this,"spreadBulletMin",void 0),u(this,"spreadBulletMax",void 0),u(this,"standRecoilForceMin",void 0),u(this,"actionRecoilForceMin",void 0),u(this,"standRecoilForceMax",void 0),u(this,"actionRecoilForceMax",void 0),u(this,"swaiTime",void 0),u(this,"swaiPar",void 0),u(this,"swaiForce",void 0),u(this,"swaiReduce",void 0),u(this,"bobTime",void 0),u(this,"bobPar",void 0),u(this,"bobForce",void 0),u(this,"bobReduce",void 0),u(this,"bobFov",void 0),u(this,"backShock",void 0),u(this,"ammoType",void 0),u(this,"ammoReduceMin",void 0),u(this,"ammoReduceMax",void 0),u(this,"isRotateCenter",void 0),u(this,"isNeverLower",void 0),u(this,"fireSound",void 0),u(this,"chargeFireSound",void 0),u(this,"isReticle",void 0),u(this,"isNormalHitShoot",void 0),u(this,"isChargeHitShoot",void 0),u(this,"isHave",void 0),u(this,"isEmptySound",void 0),u(this,"isOutOfAmmoLower",void 0),u(this,"normalFindTarget",void 0),u(this,"chargeFindTarget",void 0),u(this,"normalFindType",void 0),u(this,"chargeFindType",void 0),this.itemMaterial=e,this.stillMaterial=t,this.cluchMateial=n,this.jumpMaterial=a,this.airMaterial=i,this.sprintMaterial=o,this.slidingMaterial=s,this.coilMaterial=r,this.grabMaterial=l,this.wallrunMaterial=h,this.chargeMaterial=c,this.chargeWaitMaterial=p,this.fireMaterial=d,this.chargeFireMaterial=g,this.cockingMaterial=m,this.gripMaterial=f,this.emptyMaterial=y,this.muzzleFlashMaterials=v,this.flip=w,this.grip=b,this.climb=x,this.release=M,this.fireRelease=E,this.isEndFire=_,this.shootType=C,this.isShootHold=T,this.fireAnimationMin=S,this.fireAnimationMax=k,this.sprintType=O,this.tacticalSprintType=A,this.changeAnimationType=L,this.lightForce=P,this.fireSpeed=I,this.waitTime=N,this.burstTime=R,this.normalBulletType=W,this.chargeBulletType=z,this.damageMin=D,this.damageMax=F,this.random=U,this.chargeTime=H,this.damageTypeMin=B,this.damageTypeMax=G,this.bulletCountMin=Y,this.bulletCountMax=V,this.bulletSpeedMin=j,this.bulletSpeedMax=K,this.bulletBurstMin=J,this.bulletBurstMax=Z,this.bulletLengthMin=X,this.bulletLengthMax=q,this.bulletScaleMin=$,this.bulletScaleMax=Q,this.standBulletSpreadMin=ee,this.actionBulletSpreadMin=te,this.standBulletSpreadMax=ne,this.actionBulletSpreadMax=ae,this.spreadBulletMin=ie,this.spreadBulletMax=oe,this.standRecoilForceMin=se,this.actionRecoilForceMin=re,this.standRecoilForceMax=le,this.actionRecoilForceMax=he,this.swaiTime=ce,this.swaiPar=ue,this.swaiForce=pe,this.swaiReduce=de,this.bobTime=ge,this.bobPar=me,this.bobForce=fe,this.bobReduce=ye,this.bobFov=ve,this.backShock=we,this.ammoType=be,this.ammoReduceMin=xe,this.ammoReduceMax=Me,this.isRotateCenter=Ee,this.isNeverLower=_e,this.fireSound=Ce,this.chargeFireSound=Te,this.isReticle=Se,this.isNormalHitShoot=ke,this.isChargeHitShoot=Oe,this.isHave=Ae,this.isEmptySound=Le,this.isOutOfAmmoLower=Pe,this.normalFindTarget=Ie,this.chargeFindTarget=Ne,this.normalFindType=Re,this.chargeFindType=We}create(){return new g(this)}}class g{constructor(e){u(this,"data",void 0),u(this,"time",-1),u(this,"fireTime",-1),u(this,"fireStartTime",-1),u(this,"bullets",new Array),u(this,"isFireStart",!1),u(this,"isCanShoot",!1),u(this,"isShootable",!1),u(this,"isAmmo",!1),u(this,"isEmpty",!1),u(this,"isFireWait",!1),u(this,"noChargeFireTime",0),u(this,"isChargeStart",!1),u(this,"isChargeEnable",!1),u(this,"isChargeMax",!1),u(this,"isChargeAttack",!1),u(this,"spread",0),u(this,"chargeLateTime",0),u(this,"chargePar",0),u(this,"isFirePress",!1),u(this,"shootableTarget",null),u(this,"isHoldFire",!1),u(this,"activeHold",!1),u(this,"isWaitWeaponChange",!1),u(this,"isTouchActiveEntity",!1),u(this,"noChargeFireLock",!1),u(this,"isChargeCancelLock",!1),u(this,"burstCount",0),u(this,"muzzleFlashIndex",-1),this.data=e}}a()}catch(m){a(m)}}))},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>l});var i=n(5),o=n(0),s=e([i]);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}i=(s.then?(await s)():s)[0];class l{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"none",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]&&arguments[5],h=arguments.length>6?arguments[6]:void 0,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"none",u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[i.h.NONE],p=arguments.length>9&&void 0!==arguments[9]?arguments[9]:1,d=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,g=arguments.length>11&&void 0!==arguments[11]?arguments[11]:.05,m=arguments.length>12&&void 0!==arguments[12]?arguments[12]:10,f=arguments.length>13&&void 0!==arguments[13]&&arguments[13];r(this,"init",!1),r(this,"isRemove",!0),r(this,"fixPosition",new o.f(0,0,0)),r(this,"invert",void 0),r(this,"damage",void 0),r(this,"random",void 0),r(this,"damageType",void 0),r(this,"force",void 0),r(this,"isDeath",void 0),r(this,"getSpark",void 0),r(this,"trailType",void 0),r(this,"images",void 0),r(this,"startScale",void 0),r(this,"endScale",void 0),r(this,"trailLength",void 0),r(this,"effectCount",void 0),r(this,"isTrailRotateRandom",void 0),r(this,"isReduceAmmo",!0),this.invert=e,this.damage=t,this.random=n,this.damageType=a,this.force=s,this.isDeath=l,this.getSpark=h,this.trailType=c,this.images=u,this.startScale=p,this.endScale=d,this.force=s,this.trailLength=g,this.effectCount=m,this.isTrailRotateRandom=f}}a()}catch(h){a(h)}}))},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>c});var i=n(60),o=n(76),s=n(5),r=n(96),l=n(149),h=e([s]);s=(h.then?(await h)():h)[0];class c extends i.a{constructor(e,t,n,a,i,h,c,u,p,d){super(s.h.EFFECT_HIT_WALL1,e,t,n,a,i,2*h,Math.PI*Math.random(),0,!0,c,u,p,new r.a([s.h.EFFECT_HIT_WALL1,s.h.EFFECT_HIT_WALL2,s.h.EFFECT_HIT_WALL3],.1,!1),new o.a(.1),new l.a(["./asset/sound/effect/bullet-wall-spark.mp3"],1,!1))}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.d(t,{a:()=>o});var a=n(85);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:(0,a.a)();i(this,"sounds",void 0),i(this,"volume",void 0),i(this,"unliveStop",void 0),i(this,"loop",void 0),i(this,"namespace",void 0),i(this,"init",!1),this.sounds=e,this.volume=t,this.unliveStop=n,this.loop=o,this.namespace=s}}},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>h});var i=n(60),o=n(76),s=n(5),r=n(96),l=e([s]);s=(l.then?(await l)():l)[0];class h extends i.a{constructor(e,t,n,a,i,l,h,c,u,p){super(s.h.EFFECT_BULLET_AMMO_TRAIL,e,t,n,a,i,3*l,Math.PI*Math.random(),0,!0,h,c,u,new r.a([s.h.EFFECT_HIT_BLOOD1,s.h.EFFECT_HIT_BLOOD2,s.h.EFFECT_HIT_BLOOD3],.1,!1),new o.a(.1))}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>c});n(1),n(2);var i=n(60),o=n(96),s=n(5),r=n(76),l=n(149),h=e([s]);s=(h.then?(await h)():h)[0];class c extends i.a{constructor(e,t,n,a,i,h,c,u,p,d,g){super(s.h.EFFECT_SPARK_MISSILE1,e,t,n,a,i,2.5*h,.25,0,!0,u,p,d,new o.a([s.h.EFFECT_SPARK_MISSILE1,s.h.EFFECT_SPARK_MISSILE2,s.h.EFFECT_SPARK_MISSILE3,s.h.EFFECT_SPARK_MISSILE4],.25,!1),new r.a(.25),...c?[new l.a(["./asset/sound/effect/damage-magic.mp3"],1,!1)]:[])}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.d(t,{a:()=>i});n(217);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class i{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];a(this,"time",0),a(this,"speed",void 0),a(this,"reverse",void 0),a(this,"loop",void 0),this.speed=e,this.reverse=t,this.loop=n}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>o});var a=n(0);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o{constructor(){i(this,"init",!1),i(this,"bullet",null),i(this,"fixPosition",new a.f(0,0,0))}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>o});var a=n(0);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.25;i(this,"init",!1),i(this,"initTime",-1),i(this,"position",new a.f(0,0,0)),i(this,"scale",0),i(this,"rotate",0),i(this,"isRotateCenter",!1),i(this,"speed",void 0),this.speed=e}}},(e,t,n)=>{"use strict";function a(){return"localhost"===location.hostname}n.d(t,{a:()=>a})},(e,t,n)=>{"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{a:()=>i});class i{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,"items",void 0),a(this,"sale",1),a(this,"index",0),this.items=e}}},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>p,b:()=>u,c:()=>d,d:()=>g});n(15),n(16),n(14);var i=n(122),o=n(34),s=n(0),r=n(32),l=n(225),h=n(5),c=e([r,h]);[r,h]=c.then?(await c)():c;const u=!0,p=!0,d=!0;class g{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;var n,a,i;i=void 0,(a="setting")in(n=this)?Object.defineProperty(n,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[a]=i,this.setting=e,this.init(t)}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.setFramerate(this.setting.hasOwnProperty("framerateIndex")?this.setting.framerateIndex:1),this.setFOV(this.setting.hasOwnProperty("fov")?this.setting.fov:90,e),this.setStickInnerDeadzoneX(this.setting.hasOwnProperty("stickInnerDeadzoneX")?this.setting.stickInnerDeadzoneX:.1),this.setStickOuterDeadzoneX(this.setting.hasOwnProperty("stickOuterDeadzoneX")?this.setting.stickOuterDeadzoneX:0),this.setStickInnerDeadzoneY(this.setting.hasOwnProperty("stickInnerDeadzoneY")?this.setting.stickInnerDeadzoneY:.1),this.setStickOuterDeadzoneY(this.setting.hasOwnProperty("stickOuterDeadzoneY")?this.setting.stickOuterDeadzoneY:0),this.setWheelInnerDeadzone(this.setting.hasOwnProperty("wheelInnerDeadzone")?this.setting.wheelInnerDeadzone:.1),this.setWheelOuterDeadzone(this.setting.hasOwnProperty("wheelOuterDeadzone")?this.setting.wheelOuterDeadzone:0),this.setSoundVolume(this.setting.hasOwnProperty("soundVolume")?this.setting.soundVolume:1),this.setClusterResolution(this.setting.hasOwnProperty("clusterResolution")?this.setting.clusterResolution:16),this.setFullscreen(this.setting.hasOwnProperty("isFullscreen")?this.setting.isFullscreen:!!(0,o.a)()),this.setBrowserFullscreen(!!this.setting.hasOwnProperty("isBrowserFullscreen")&&this.setting.isBrowserFullscreen),this.setAutomaticResolution(!this.setting.hasOwnProperty("isAutomaticResolution")||this.setting.isAutomaticResolution),this.setResolutionIndex(this.setting.hasOwnProperty("resolutionIndex")?this.setting.resolutionIndex:0),this.setHighPixelRatio(!!this.setting.hasOwnProperty("isHighPixelRatio")&&this.setting.isHighPixelRatio),this.setReflectionCount(this.setting.hasOwnProperty("reflectionCount")?this.setting.reflectionCount:2),this.setShadow(!this.setting.hasOwnProperty("isShadow")||this.setting.isShadow),this.setSoftShadow(!this.setting.hasOwnProperty("isSoftShadow")||this.setting.isSoftShadow),this.setRoughness(!this.setting.hasOwnProperty("isRoughness")||this.setting.isRoughness),this.setDithering(!!this.setting.hasOwnProperty("isDithering")&&this.setting.isDithering),this.setBloom(this.setting.hasOwnProperty("bloom")?this.setting.bloom:1),this.setMuzzleFlash(!this.setting.hasOwnProperty("isMuzzleFlash")||this.setting.isMuzzleFlash),this.setBlurDotScale(this.setting.hasOwnProperty("blurDotScale")?this.setting.blurDotScale:4),this.setContrast(this.setting.hasOwnProperty("contrast")?this.setting.contrast:1),this.setBrightness(this.setting.hasOwnProperty("brightness")?this.setting.brightness:1),this.setCRTEnable(!!this.setting.hasOwnProperty("isCRT")&&this.setting.isCRT),this.setCRTSubPixel(this.setting.hasOwnProperty("crtSubPixel")?this.setting.crtSubPixel:3),this.setCRTLens(this.setting.hasOwnProperty("crtLens")?this.setting.crtLens:.075),this.setCRTDeep(this.setting.hasOwnProperty("crtDeep")?this.setting.crtDeep:.075),this.setCRTEdge(this.setting.hasOwnProperty("crtEdge")?this.setting.crtEdge:.025),this.setCRTVig(this.setting.hasOwnProperty("crtVig")?this.setting.crtVig:.175),this.setCRTShadowMask(!!this.setting.hasOwnProperty("isCRTShadowMask")&&this.setting.isCRTShadowMask),this.setCRTCenterFadeOut(this.setting.hasOwnProperty("crtCenterFadeOut")?this.setting.crtCenterFadeOut:1),this.setSensibility(this.setting.hasOwnProperty("sensibility")?this.setting.sensibility:50),this.setInvertX(!!this.setting.hasOwnProperty("invertX")&&this.setting.invertX),this.setInvertY(!!this.setting.hasOwnProperty("invertY")&&this.setting.invertY),this.setBob(!this.setting.hasOwnProperty("bob")||this.setting.bob),this.setToggleSprint(!this.setting.hasOwnProperty("toggleSprint")||this.setting.toggleSprint),this.setToggleCluch(!this.setting.hasOwnProperty("toggleCluch")||this.setting.toggleCluch),this.setWeaponChargeStandTime(this.setting.hasOwnProperty("weaponChargeStandTime")?this.setting.weaponChargeStandTime:180),this.setWeaponWheelStandTime(this.setting.hasOwnProperty("weaponWheelStandTime")?this.setting.weaponWheelStandTime:180),this.setEatSound(!this.setting.hasOwnProperty("eatSound")||this.setting.eatSound),this.setEnemyVoice(!this.setting.hasOwnProperty("enemyVoice")||this.setting.enemyVoice),this.setCheckPoint(!this.setting.hasOwnProperty("isCheckPoint")||this.setting.isCheckPoint),this.setPistolStart(!!this.setting.hasOwnProperty("isPistolStart")&&this.setting.isPistolStart),this.setPermaDeath(!!this.setting.hasOwnProperty("isPermaDeath")&&this.setting.isPermaDeath),this.setSSSSlowMo(!this.setting.hasOwnProperty("isSSSSlowMo")||this.setting.isSSSSlowMo),this.setDisplayPlayTime(!!this.setting.hasOwnProperty("isDisplayPlayTime")&&this.setting.isDisplayPlayTime),this.setHUD(!this.setting.hasOwnProperty("isHUD")||this.setting.isHUD),this.setTheme(this.setting.hasOwnProperty("theme")?Object.keys(h.r).includes(this.setting.theme)?this.setting.theme:Object.keys(h.r)[0]:"RED"),this.setDebugLog(!!this.setting.hasOwnProperty("isDebugLog")&&this.setting.isDebugLog)}reset(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;for(const e in this.setting)delete this.setting[e];this.init(e)}saveSetting(){(0,i.c)("setting")}setSensibility(e){this.setting.sensibility=e,this.saveSetting()}setInvertX(e){this.setting.invertX=e,this.saveSetting()}setInvertY(e){this.setting.invertY=e,this.saveSetting()}setBob(e){this.setting.bob=e,this.saveSetting()}setToggleSprint(e){this.setting.toggleSprint=e,this.saveSetting()}setToggleCluch(e){this.setting.toggleCluch=e,this.saveSetting()}setWeaponChargeStandTime(e){this.setting.weaponChargeStandTime=e,this.saveSetting()}setWeaponWheelStandTime(e){this.setting.weaponWheelStandTime=e,this.saveSetting()}setEatSound(e){this.setting.eatSound=e,this.saveSetting()}setEnemyVoice(e){this.setting.enemyVoice=e,this.saveSetting()}setCheckPoint(e){this.setting.isCheckPoint=e,this.saveSetting()}setPistolStart(e){this.setting.isPistolStart=e,this.saveSetting()}setPermaDeath(e){this.setting.isPermaDeath=e,this.saveSetting()}setSSSSlowMo(e){this.setting.isSSSSlowMo=e,this.saveSetting()}setFOV(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null!==t&&t.getScenes().forEach((t=>{if(!(t instanceof r.a))return;t.getCamera().fov=(0,s.g)(e)})),this.setting.fov=e,this.saveSetting()}setFramerate(e){e>=l.a.length&&(e=1),this.setting.framerateIndex=e,this.saveSetting()}setSoundVolume(e){this.setting.soundVolume=e,this.saveSetting()}setClusterResolution(e){this.setting.clusterResolution=e,this.saveSetting()}setFullscreen(e){this.setting.isFullscreen=e,this.saveSetting()}setBrowserFullscreen(e){this.setting.isBrowserFullscreen=e,this.saveSetting()}setAutomaticResolution(e){this.setting.isAutomaticResolution=e,this.saveSetting()}setResolutionIndex(e){this.setting.resolutionIndex=e,this.saveSetting()}setHighPixelRatio(e){this.setting.isHighPixelRatio=e,this.saveSetting()}setReflectionCount(e){this.setting.reflectionCount=e,this.saveSetting()}setShadow(e){this.setting.isShadow=e,this.saveSetting()}setSoftShadow(e){this.setting.isSoftShadow=e,this.saveSetting()}setRoughness(e){this.setting.isRoughness=e,this.saveSetting()}setDithering(e){this.setting.isDithering=e,this.saveSetting()}setBloom(e){this.setting.bloom=e,this.saveSetting()}setMuzzleFlash(e){this.setting.isMuzzleFlash=e,this.saveSetting()}setBlurDotScale(e){this.setting.blurDotScale=e,this.saveSetting()}setContrast(e){this.setting.contrast=e,this.saveSetting()}setBrightness(e){this.setting.brightness=e,this.saveSetting()}setCRTEnable(e){this.setting.isCRT=e,this.saveSetting()}setCRTDeep(e){this.setting.crtDeep=e,this.saveSetting()}setCRTSubPixel(e){this.setting.crtSubPixel=e,this.saveSetting()}setCRTLens(e){this.setting.crtLens=e,this.saveSetting()}setCRTEdge(e){this.setting.crtEdge=e,this.saveSetting()}setCRTVig(e){this.setting.crtVig=e,this.saveSetting()}setCRTShadowMask(e){this.setting.isCRTShadowMask=e,this.saveSetting()}setCRTCenterFadeOut(e){this.setting.crtCenterFadeOut=e,this.saveSetting()}setStickInnerDeadzoneX(e){this.setting.stickInnerDeadzoneX=e,this.saveSetting()}setStickOuterDeadzoneX(e){this.setting.stickOuterDeadzoneX=e,this.saveSetting()}setStickInnerDeadzoneY(e){this.setting.stickInnerDeadzoneY=e,this.saveSetting()}setStickOuterDeadzoneY(e){this.setting.stickOuterDeadzoneY=e,this.saveSetting()}setWheelInnerDeadzone(e){this.setting.wheelInnerDeadzone=e,this.saveSetting()}setWheelOuterDeadzone(e){this.setting.wheelOuterDeadzone=e,this.saveSetting()}setDisplayPlayTime(e){this.setting.isDisplayPlayTime=e,this.saveSetting()}setHUD(e){this.setting.isHUD=e,this.saveSetting()}setTheme(e){this.setting.theme=e,this.saveSetting()}setDebugLog(e){this.setting.isDebugLog=e,this.saveSetting()}hasBob(){return this.setting.bob}hasToggleSprint(){return this.setting.toggleSprint}hasToggleCluch(){return this.setting.toggleCluch}getWeaponChargeStandTime(){return this.setting.weaponChargeStandTime}getWeaponWheelStandTime(){return this.setting.weaponWheelStandTime}hasEatSound(){return this.setting.eatSound}hasEnemyVoice(){return this.setting.enemyVoice}hasCheckPoint(){return this.setting.isCheckPoint}hasPistolStart(){return this.setting.isPistolStart}hasPermaDeath(){return this.setting.isPermaDeath}hasSSSSlowMo(){return this.setting.isSSSSlowMo}hasDebugLog(){return this.setting.isDebugLog}getSoundVolume(){return this.setting.soundVolume}getReflectionCount(){return this.setting.reflectionCount}getBlurDotScale(){return this.hasCRT()?1:this.setting.blurDotScale}hasShadow(){return this.setting.isShadow}hasSoftShadow(){return this.setting.isSoftShadow}hasRoughness(){return this.setting.isRoughness}getBloom(){return this.setting.bloom}hasMuzzleFlash(){return this.setting.isMuzzleFlash}getContrast(){return this.setting.contrast}getBrightness(){return this.setting.brightness}hasCRT(){return this.setting.isCRT}getResolutionIndex(){return this.setting.resolutionIndex}hasHighPixelRatio(){return this.setting.isHighPixelRatio}hasFullscreen(){return this.setting.isFullscreen}hasBrowserFullscreen(){return this.setting.isBrowserFullscreen}hasAutomaticResolution(){return this.setting.isAutomaticResolution}getCRTSubPixel(){return this.setting.crtSubPixel}getCRTLens(){return this.setting.crtLens}getCRTDeep(){return this.setting.crtDeep}getCRTEdge(){return this.setting.crtEdge}getCRTVig(){return this.setting.crtVig}hasCRTShadowMask(){return this.setting.isCRTShadowMask}getCRTCenterFadeOut(){return this.setting.crtCenterFadeOut}getSensibility(){return this.setting.sensibility}hasInvertX(){return this.setting.invertX}hasInvertY(){return this.setting.invertY}getStickInnerDeadzoneX(){return this.setting.stickInnerDeadzoneX}getStickOuterDeadzoneX(){return this.setting.stickOuterDeadzoneX}getStickInnerDeadzoneY(){return this.setting.stickInnerDeadzoneY}getStickOuterDeadzoneY(){return this.setting.stickOuterDeadzoneY}getWheelInnerDeadzone(){return this.setting.wheelInnerDeadzone}getWheelOuterDeadzone(){return this.setting.wheelOuterDeadzone}getFramerate(){return(0,o.a)()?l.a[this.setting.framerateIndex]:1/0}getFramerateIndex(){return this.setting.framerateIndex}hasDisplayPlayTime(){return this.setting.isDisplayPlayTime}hasHUD(){return this.setting.isHUD}getTheme(){return this.setting.theme}getFOV(){return this.setting.fov}}a()}catch(e){a(e)}}))},(e,t,n)=>{var a=n(28),i=n(20),o=n(266),s=n(36),r=n(110),l=n(128),h=n(29),c=n(228),u=Object.getOwnPropertyDescriptor;t.f=a?u:function(e,t){if(e=r(e),t=l(t),c)try{return u(e,t)}catch(e){}if(h(e,t))return s(!i(o.f,e,t),e[t])}},(e,t,n)=>{var a=n(3),i=n(83),o=n(17),s=n(87),r=n(190),l=a.Object;e.exports=r?function(e){return"symbol"==typeof e}:function(e){var t=i("Symbol");return o(t)&&s(t.prototype,l(e))}},(e,t,n)=>{var a=n(78),i=n(161);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.22.5",mode:a?"pure":"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.22.5/LICENSE",source:"https://github.com/zloirock/core-js"})},(e,t,n)=>{var a=n(3),i=n(162),o="__core-js_shared__",s=a[o]||i(o,{});e.exports=s},(e,t,n)=>{var a=n(3),i=Object.defineProperty;e.exports=function(e,t){try{i(a,e,{value:t,configurable:!0,writable:!0})}catch(n){a[e]=t}return t}},(e,t,n)=>{var a=n(11),i=0,o=Math.random(),s=a(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+s(++i+o,36)}},(e,t,n)=>{var a=n(160),i=n(163),o=a("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},e=>{e.exports={}},(e,t,n)=>{var a=n(194),i=n(167).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return a(e,i)}},e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},(e,t,n)=>{var a=n(12),i=n(17),o=/#|\.prototype\./,s=function(e,t){var n=l[r(e)];return n==c||n!=h&&(i(t)?a(t):!!t)},r=s.normalize=function(e){return String(e).replace(o,".").toLowerCase()},l=s.data={},h=s.NATIVE="N",c=s.POLYFILL="P";e.exports=s},(e,t,n)=>{var a=n(11),i=n(12),o=n(17),s=n(37),r=n(83),l=n(130),h=function(){},c=[],u=r("Reflect","construct"),p=/^\s*(?:class|function)\b/,d=a(p.exec),g=!p.exec(h),m=function(e){if(!o(e))return!1;try{return u(h,c,e),!0}catch(e){return!1}},f=function(e){if(!o(e))return!1;switch(s(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return g||!!d(p,l(e))}catch(e){return!0}};f.sham=!0,e.exports=!u||i((function(){var e;return m(m.call)||!m(Object)||!m((function(){e=!0}))||e}))?f:m},e=>{e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},(e,t,n)=>{var a=n(21),i=n(115),o=a("iterator"),s=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||s[o]===e)}},(e,t,n)=>{var a=n(42),i=n(98),o=n(21)("match");e.exports=function(e){var t;return a(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},(e,t,n)=>{var a=n(12),i=n(3).RegExp,o=a((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),s=o||a((function(){return!i("a","y").sticky})),r=o||a((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));e.exports={BROKEN_CARET:r,MISSED_STICKY:s,UNSUPPORTED_Y:o}},(e,t,n)=>{"use strict";var a=n(3),i=n(11),o=n(28),s=n(207),r=n(129),l=n(55),h=n(208),c=n(12),u=n(113),p=n(95),d=n(88),g=n(209),m=n(288),f=n(139),y=n(100),v=n(166).f,w=n(45).f,b=n(289),x=n(142),M=n(101),E=n(80),_=r.PROPER,C=r.CONFIGURABLE,T=E.get,S=E.set,k="ArrayBuffer",O="DataView",A="Wrong index",L=a.ArrayBuffer,P=L,I=P&&P.prototype,N=a.DataView,R=N&&N.prototype,W=Object.prototype,z=a.Array,D=a.RangeError,F=i(b),U=i([].reverse),H=m.pack,B=m.unpack,G=function(e){return[255&e]},Y=function(e){return[255&e,e>>8&255]},V=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},j=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},K=function(e){return H(e,23,4)},X=function(e){return H(e,52,8)},q=function(e,t){w(e.prototype,t,{get:function(){return T(this)[t]}})},J=function(e,t,n,a){var i=g(n),o=T(e);if(i+t>o.byteLength)throw D(A);var s=T(o.buffer).bytes,r=i+o.byteOffset,l=x(s,r,r+t);return a?l:U(l)},Z=function(e,t,n,a,i,o){var s=g(n),r=T(e);if(s+t>r.byteLength)throw D(A);for(var l=T(r.buffer).bytes,h=s+r.byteOffset,c=a(+i),u=0;u<t;u++)l[h+u]=c[o?u:t-u-1]};if(s){var $=_&&L.name!==k;if(c((function(){L(1)}))&&c((function(){new L(-1)}))&&!c((function(){return new L,new L(1.5),new L(NaN),$&&!C})))$&&C&&l(L,"name",k);else{(P=function(e){return u(this,I),new L(g(e))}).prototype=I;for(var Q,ee=v(L),te=0;ee.length>te;)(Q=ee[te++])in P||l(P,Q,L[Q]);I.constructor=P}y&&f(R)!==W&&y(R,W);var ne=new N(new P(2)),ae=i(R.setInt8);ne.setInt8(0,2147483648),ne.setInt8(1,2147483649),!ne.getInt8(0)&&ne.getInt8(1)||h(R,{setInt8:function(e,t){ae(this,e,t<<24>>24)},setUint8:function(e,t){ae(this,e,t<<24>>24)}},{unsafe:!0})}else I=(P=function(e){u(this,I);var t=g(e);S(this,{bytes:F(z(t),0),byteLength:t}),o||(this.byteLength=t)}).prototype,R=(N=function(e,t,n){u(this,R),u(e,I);var a=T(e).byteLength,i=p(t);if(i<0||i>a)throw D("Wrong offset");if(i+(n=void 0===n?a-i:d(n))>a)throw D("Wrong length");S(this,{buffer:e,byteLength:n,byteOffset:i}),o||(this.buffer=e,this.byteLength=n,this.byteOffset=i)}).prototype,o&&(q(P,"byteLength"),q(N,"buffer"),q(N,"byteLength"),q(N,"byteOffset")),h(R,{getInt8:function(e){return J(this,1,e)[0]<<24>>24},getUint8:function(e){return J(this,1,e)[0]},getInt16:function(e){var t=J(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=J(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return j(J(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return j(J(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return B(J(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return B(J(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){Z(this,1,e,G,t)},setUint8:function(e,t){Z(this,1,e,G,t)},setInt16:function(e,t){Z(this,2,e,Y,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){Z(this,2,e,Y,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){Z(this,4,e,V,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){Z(this,4,e,V,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){Z(this,4,e,K,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){Z(this,8,e,X,t,arguments.length>2?arguments[2]:void 0)}});M(P,k),M(N,O),e.exports={ArrayBuffer:P,DataView:N}},(e,t,n)=>{"use strict";var a=n(135),i=n(20),o=n(11),s=n(176),r=n(172),l=n(25),h=n(86),c=n(133),u=n(177),p=n(88),d=n(43),g=n(99),m=n(142),f=n(179),y=n(141),v=n(173),w=n(12),b=v.UNSUPPORTED_Y,x=4294967295,M=Math.min,E=[].push,_=o(/./.exec),C=o(E),T=o("".slice);s("split",(function(e,t,n){var o;return o="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var o=d(h(this)),s=void 0===n?x:n>>>0;if(0===s)return[];if(void 0===e)return[o];if(!r(e))return i(t,o,e,s);for(var l,c,u,p=[],g=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,v=new RegExp(e.source,g+"g");(l=i(y,v,o))&&!((c=v.lastIndex)>f&&(C(p,T(o,f,l.index)),l.length>1&&l.index<o.length&&a(E,p,m(l,1)),u=l[0].length,f=c,p.length>=s));)v.lastIndex===l.index&&v.lastIndex++;return f===o.length?!u&&_(v,"")||C(p,""):C(p,T(o,f)),p.length>s?m(p,0,s):p}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:i(t,this,e,n)}:t,[function(t,n){var a=h(this),s=null==t?void 0:g(t,e);return s?i(s,t,a,n):i(o,d(a),t,n)},function(e,a){var i=l(this),s=d(e),r=n(o,i,s,a,o!==t);if(r.done)return r.value;var h=c(i,RegExp),g=i.unicode,m=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(b?"g":"y"),y=new h(b?"^(?:"+i.source+")":i,m),v=void 0===a?x:a>>>0;if(0===v)return[];if(0===s.length)return null===f(y,s)?[s]:[];for(var w=0,E=0,_=[];E<s.length;){y.lastIndex=b?0:E;var S,k=f(y,b?T(s,E):s);if(null===k||(S=M(p(y.lastIndex+(b?E:0)),s.length))===w)E=u(s,E,g);else{if(C(_,T(s,w,E)),_.length===v)return _;for(var O=1;O<=k.length-1;O++)if(C(_,k[O]),_.length===v)return _;E=w=S}}return C(_,T(s,w)),_}]}),!!w((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),b)},(e,t,n)=>{"use strict";n(7);var a=n(11),i=n(46),o=n(141),s=n(12),r=n(21),l=n(55),h=r("species"),c=RegExp.prototype;e.exports=function(e,t,n,u){var p=r(e),d=!s((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),g=d&&!s((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[h]=function(){return n},n.flags="",n[p]=/./[p]),n.exec=function(){return t=!0,null},n[p](""),!t}));if(!d||!g||n){var m=a(/./[p]),f=t(p,""[e],(function(e,t,n,i,s){var r=a(e),l=t.exec;return l===o||l===c.exec?d&&!s?{done:!0,value:m(t,n,i)}:{done:!0,value:r(n,t,i)}:{done:!1}}));i(String.prototype,e,f[0]),i(c,p,f[1])}u&&l(c[p],"sham",!0)}},(e,t,n)=>{"use strict";var a=n(178).charAt;e.exports=function(e,t,n){return t+(n?a(e,t).length:1)}},(e,t,n)=>{var a=n(11),i=n(95),o=n(43),s=n(86),r=a("".charAt),l=a("".charCodeAt),h=a("".slice),c=function(e){return function(t,n){var a,c,u=o(s(t)),p=i(n),d=u.length;return p<0||p>=d?e?"":void 0:(a=l(u,p))<55296||a>56319||p+1===d||(c=l(u,p+1))<56320||c>57343?e?r(u,p):a:e?h(u,p,p+2):c-56320+(a-55296<<10)+65536}};e.exports={codeAt:c(!1),charAt:c(!0)}},(e,t,n)=>{var a=n(3),i=n(20),o=n(25),s=n(17),r=n(98),l=n(141),h=a.TypeError;e.exports=function(e,t){var n=e.exec;if(s(n)){var a=i(n,e,t);return null!==a&&o(a),a}if("RegExp"===r(e))return i(l,e,t);throw h("RegExp#exec called on incompatible receiver")}},(e,t,n)=>{"use strict";var a=n(129).PROPER,i=n(46),o=n(25),s=n(43),r=n(12),l=n(245),h="toString",c=RegExp.prototype.toString,u=r((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),p=a&&c.name!=h;(u||p)&&i(RegExp.prototype,h,(function(){var e=o(this);return"/"+s(e.source)+"/"+s(l(e))}),{unsafe:!0})},(e,t,n)=>{"use strict";var a=n(19),i=n(78),o=n(102),s=n(12),r=n(83),l=n(17),h=n(133),c=n(234),u=n(46),p=o&&o.prototype;if(a({target:"Promise",proto:!0,real:!0,forced:!!o&&s((function(){p.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=h(this,r("Promise")),n=l(e);return this.then(n?function(n){return c(t,e()).then((function(){return n}))}:e,n?function(n){return c(t,e()).then((function(){throw n}))}:e)}}),!i&&l(o)){var d=r("Promise").prototype.finally;p.finally!==d&&u(p,"finally",d,{unsafe:!0})}},(e,t,n)=>{"use strict";n.d(t,{a:()=>c,b:()=>p,c:()=>u,d:()=>l,e:()=>h});n(7),n(175);var a=n(0);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o{constructor(e,t){i(this,"type",void 0),i(this,"name",void 0),this.type=e,this.name=t.split(" ")}}class s extends o{constructor(e,t,n,a,o,s){super(e,t),i(this,"x",void 0),i(this,"y",void 0),i(this,"offsetX",void 0),i(this,"offsetY",void 0),this.x=n,this.y=a,this.offsetX=o,this.offsetY=s}}class r extends s{constructor(e,t,n,a,o,s,r,l){let h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:new Array;super(e,t,n,a,o,s),i(this,"width",void 0),i(this,"height",void 0),i(this,"children",void 0),this.width=r,this.height=l,this.children=h}}class l extends o{constructor(e,t,n,o,s,r,l){super("line",e),i(this,"color",void 0),i(this,"start",void 0),i(this,"end",void 0),i(this,"bold",void 0),this.color=t,this.start=new a.e(n,o),this.end=new a.e(s,r),this.bold=l}}class h extends r{constructor(e,t,n,a,o,s,r,l){super("rect",e,o,s,arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,r,l,arguments.length>10&&void 0!==arguments[10]?arguments[10]:new Array),i(this,"color",void 0),i(this,"fill",void 0),i(this,"bold",void 0),this.color=t,this.fill=n,this.bold=a}}class c extends r{constructor(e,t,n,a,o,s,r,l,h,c){let u=!(arguments.length>10&&void 0!==arguments[10])||arguments[10];super("arc",e,s,r,arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,l,l,arguments.length>13&&void 0!==arguments[13]?arguments[13]:new Array),i(this,"color",void 0),i(this,"gradiant",void 0),i(this,"gradiantPar",void 0),i(this,"fill",void 0),i(this,"bold",void 0),i(this,"startAngle",void 0),i(this,"endAngle",void 0),i(this,"clockWise",void 0),t instanceof Array?(this.color="",this.gradiant=t):(this.color=t,this.gradiant=[]),this.gradiantPar=n,this.fill=a,this.bold=o,this.startAngle=h,this.endAngle=c,this.clockWise=u}}class u extends r{constructor(e,t,n,a,o,s){let r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,u=arguments.length>12&&void 0!==arguments[12]?arguments[12]:1;super("image",e,n,a,arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,o,s,arguments.length>13&&void 0!==arguments[13]?arguments[13]:new Array),i(this,"image",void 0),i(this,"clipX",void 0),i(this,"clipY",void 0),i(this,"clipWidth",void 0),i(this,"clipHeight",void 0),i(this,"alpha",void 0),this.image=t,this.clipX=r,this.clipY=l,this.clipWidth=h,this.clipHeight=c,this.alpha=u}}class p extends s{constructor(e,t,n,a,o,s,r,l){let h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,c=arguments.length>11&&void 0!==arguments[11]?arguments[11]:1,u=arguments.length>12&&void 0!==arguments[12]?arguments[12]:[-1,-1,-1];super("font",e,r,l,arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,arguments.length>10&&void 0!==arguments[10]?arguments[10]:0),i(this,"image",void 0),i(this,"clipWidth",void 0),i(this,"clipHeight",void 0),i(this,"order",void 0),i(this,"text",void 0),i(this,"size",void 0),i(this,"alpha",void 0),i(this,"color",void 0),this.image=t,this.clipWidth=n,this.clipHeight=a,this.order=o,this.text=s,this.size=h,this.alpha=c,this.color=u}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>o});var a=n(0);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o{constructor(){i(this,"keys",{}),i(this,"presss",{}),i(this,"axes",{x:new a.e(0,0),y:new a.e(0,0),z:new a.e(0,0)}),i(this,"bobs",{x:new a.e(0,0),y:new a.e(0,0),z:new a.e(0,0)})}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>o});n(1),n(2);var a=n(0);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o{constructor(e,t,n,o,s,r,l,h,c,u){let p=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1/0,d=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,g=arguments.length>12&&void 0!==arguments[12]?arguments[12]:"hitbox",m=arguments.length>13&&void 0!==arguments[13]?arguments[13]:[];i(this,"hit",!1),i(this,"over",!1),i(this,"target",null),i(this,"hitPosition",new a.f(-1,-1,-1)),i(this,"fixPosition",new a.f(0,0,0)),i(this,"behind",void 0),i(this,"start",void 0),i(this,"originStart",void 0),i(this,"originPosition",void 0),i(this,"originDirection",void 0),i(this,"attacker",void 0),i(this,"filter",new Array),i(this,"size",void 0),i(this,"speed",void 0),i(this,"distance",void 0),i(this,"tree",void 0),this.start=new a.f(e,t,n),this.originStart=new a.f(o,s,r),this.originPosition=new a.f(o,s,r),this.originDirection=new a.e(l,h),this.behind=e!==o||t!==s||n!==r,this.size=c,this.speed=u,this.distance=p,this.attacker=d,this.tree=g,this.filter.push(...m)}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>i});n(121);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class i{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;a(this,"time",0),a(this,"tick",void 0),a(this,"par",void 0),a(this,"scale",void 0),a(this,"reduce",void 0),a(this,"fov",void 0),this.tick=e,this.par=t,this.scale=n,this.reduce=i,this.fov=o}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>o});var a=n(0);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,c=arguments.length>8&&void 0!==arguments[8]&&arguments[8],u=arguments.length>9&&void 0!==arguments[9]&&arguments[9],p=!(arguments.length>10&&void 0!==arguments[10])||arguments[10];i(this,"enable",!0),i(this,"time",0),i(this,"initTime",-1),i(this,"x",void 0),i(this,"y",void 0),i(this,"rotate",void 0),i(this,"speed",void 0),i(this,"add",void 0),i(this,"mrotate",void 0),i(this,"blockX",void 0),i(this,"slide",void 0),i(this,"invert",void 0),i(this,"moveFix",void 0),i(this,"hard",void 0),i(this,"old",{position:new a.e(-1,-1),scale:-1,rotate:-1}),i(this,"move",{position:new a.e(0,0),scale:0,rotate:0}),i(this,"swais",new Array),this.x=e,this.y=t,this.rotate=n,this.speed=o,this.add=s,this.mrotate=r,this.blockX=l,this.slide=h,this.invert=c,this.moveFix=u,this.hard=p}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>s});n(1),n(2);var a=n(183),i=n(0);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class s extends a.a{constructor(){super(...arguments),o(this,"mode",0),o(this,"voxel",null),o(this,"pawn",null),o(this,"exit",!1),o(this,"isStick",!1),o(this,"openMenu",!1),o(this,"cmda",new i.e(0,0))}}},(e,t,n)=>{"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{a:()=>i});class i{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];a(this,"time",0),a(this,"fireTime",0),a(this,"spinPar",0),a(this,"spinTime",-1),a(this,"enableSprint",!1),a(this,"sprintStartTime",-1),a(this,"isFireAnimation",!1),a(this,"state","still"),a(this,"muzzleFlash",void 0),a(this,"inverse",void 0),this.muzzleFlash=e,this.inverse=t}}},(e,t,n)=>{"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{a:()=>i});class i{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;a(this,"backShock",0),a(this,"standY",void 0),a(this,"cluchY",void 0),this.standY=e,this.cluchY=t}}},(e,t,n)=>{var a=n(191);e.exports=a&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},(e,t,n)=>{var a=n(73),i=n(12);e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&a&&a<41}))},(e,t,n)=>{var a=n(12),i=n(17),o=n(29),s=n(28),r=n(129).CONFIGURABLE,l=n(130),h=n(80),c=h.enforce,u=h.get,p=Object.defineProperty,d=s&&!a((function(){return 8!==p((function(){}),"length",{value:8}).length})),g=String(String).split("String"),m=e.exports=function(e,t,n){if("Symbol("===String(t).slice(0,7)&&(t="["+String(t).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!o(e,"name")||r&&e.name!==t)&&p(e,"name",{value:t,configurable:!0}),d&&n&&o(n,"arity")&&e.length!==n.arity&&p(e,"length",{value:n.arity}),n&&o(n,"constructor")&&n.constructor){if(s)try{p(e,"prototype",{writable:!1})}catch(e){}}else e.prototype=void 0;var a=c(e);return o(a,"source")||(a.source=g.join("string"==typeof t?t:"")),e};Function.prototype.toString=m((function(){return i(this)&&u(this).source||l(this)}),"toString")},(e,t,n)=>{var a=n(29),i=n(270),o=n(158),s=n(45);e.exports=function(e,t,n){for(var r=i(t),l=s.f,h=o.f,c=0;c<r.length;c++){var u=r[c];a(e,u)||n&&a(n,u)||l(e,u,h(t,u))}}},(e,t,n)=>{var a=n(11),i=n(29),o=n(110),s=n(230).indexOf,r=n(165),l=a([].push);e.exports=function(e,t){var n,a=o(e),h=0,c=[];for(n in a)!i(r,n)&&i(a,n)&&l(c,n);for(;t.length>h;)i(a,n=t[h++])&&(~s(c,n)||l(c,n));return c}},(e,t,n)=>{var a=n(3),i=n(169),o=n(111),s=a.TypeError;e.exports=function(e){if(i(e))return e;throw s(o(e)+" is not a constructor")}},(e,t,n)=>{var a=n(83);e.exports=a("document","documentElement")},(e,t,n)=>{var a=n(11);e.exports=a([].slice)},(e,t,n)=>{var a=n(94);e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(a)},(e,t,n)=>{var a=n(20),i=n(25),o=n(99);e.exports=function(e,t,n){var s,r;i(e);try{if(!(s=o(e,"return"))){if("throw"===t)throw n;return n}s=a(s,e)}catch(e){r=!0,s=e}if("throw"===t)throw n;if(r)throw s;return i(s),n}},(e,t,n)=>{var a=n(21)("iterator"),i=!1;try{var o=0,s={next:function(){return{done:!!o++}},return:function(){i=!0}};s[a]=function(){return this},Array.from(s,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o={};o[a]=function(){return{next:function(){return{done:n=!0}}}},e(o)}catch(e){}return n}},(e,t,n)=>{var a=n(194),i=n(167);e.exports=Object.keys||function(e){return a(e,i)}},(e,t,n)=>{var a=n(89),i=n(11),o=n(72),s=n(79),r=n(84),l=n(281),h=i([].push),c=function(e){var t=1==e,n=2==e,i=3==e,c=4==e,u=6==e,p=7==e,d=5==e||u;return function(g,m,f,y){for(var v,w,b=s(g),x=o(b),M=a(m,f),E=r(x),_=0,C=y||l,T=t?C(g,E):n||p?C(g,0):void 0;E>_;_++)if((d||_ in x)&&(w=M(v=x[_],_,b),e))if(t)T[_]=w;else if(w)switch(e){case 3:return!0;case 5:return v;case 6:return _;case 2:h(T,v)}else switch(e){case 4:return!1;case 7:h(T,v)}return u?-1:i||c?c:T}};e.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterReject:c(7)}},(e,t,n)=>{var a=n(98);e.exports=Array.isArray||function(e){return"Array"==a(e)}},(e,t,n)=>{"use strict";var a=n(12);e.exports=function(e,t){var n=[][e];return!!n&&a((function(){n.call(null,t||function(){return 1},1)}))}},e=>{e.exports="\t\n\v\f\r Â áš€â€€â€â€‚â€ƒâ€„â€…â€†â€‡â€ˆâ€‰â€Šâ€¯âŸã€€\u2028\u2029\ufeff"},(e,t,n)=>{"use strict";var a=n(25);e.exports=function(){var e=a(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},e=>{e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},(e,t,n)=>{var a=n(46);e.exports=function(e,t,n){for(var i in t)a(e,i,t[i],n);return e}},(e,t,n)=>{var a=n(3),i=n(95),o=n(88),s=a.RangeError;e.exports=function(e){if(void 0===e)return 0;var t=i(e),n=o(t);if(t!==n)throw s("Wrong length or index");return n}},(e,t,n)=>{"use strict";var a=n(128),i=n(45),o=n(36);e.exports=function(e,t,n){var s=a(t);s in e?i.f(e,s,o(0,n)):e[s]=n}},(e,t,n)=>{var a=n(3),i=n(292),o=a.RangeError;e.exports=function(e,t){var n=i(e);if(n%t)throw o("Wrong offset");return n}},(e,t,n)=>{var a=n(142),i=Math.floor,o=function(e,t){var n=e.length,l=i(n/2);return n<8?s(e,t):r(e,o(a(e,0,l),t),o(a(e,l),t),t)},s=function(e,t){for(var n,a,i=e.length,o=1;o<i;){for(a=o,n=e[o];a&&t(e[a-1],n)>0;)e[a]=e[--a];a!==o++&&(e[a]=n)}return e},r=function(e,t,n,a){for(var i=t.length,o=n.length,s=0,r=0;s<i||r<o;)e[s+r]=s<i&&r<o?a(t[s],n[r])<=0?t[s++]:n[r++]:s<i?t[s++]:n[r++];return e};e.exports=o},function(e){e.exports=function(e){var t={};function n(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(a,i,function(t){return e[t]}.bind(null,i));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=90)}({17:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var a=n(18),i=function(){function e(){}return e.getFirstMatch=function(e,t){var n=t.match(e);return n&&n.length>0&&n[1]||""},e.getSecondMatch=function(e,t){var n=t.match(e);return n&&n.length>1&&n[2]||""},e.matchAndReturnConst=function(e,t,n){if(e.test(t))return n},e.getWindowsVersionName=function(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e.getMacOSVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e.getAndroidVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},e.getVersionPrecision=function(e){return e.split(".").length},e.compareVersions=function(t,n,a){void 0===a&&(a=!1);var i=e.getVersionPrecision(t),o=e.getVersionPrecision(n),s=Math.max(i,o),r=0,l=e.map([t,n],(function(t){var n=s-e.getVersionPrecision(t),a=t+new Array(n+1).join(".0");return e.map(a.split("."),(function(e){return new Array(20-e.length).join("0")+e})).reverse()}));for(a&&(r=s-Math.min(i,o)),s-=1;s>=r;){if(l[0][s]>l[1][s])return 1;if(l[0][s]===l[1][s]){if(s===r)return 0;s-=1}else if(l[0][s]<l[1][s])return-1}},e.map=function(e,t){var n,a=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n+=1)a.push(t(e[n]));return a},e.find=function(e,t){var n,a;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(n=0,a=e.length;n<a;n+=1){var i=e[n];if(t(i,n))return i}},e.assign=function(e){for(var t,n,a=e,i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];if(Object.assign)return Object.assign.apply(Object,[e].concat(o));var r=function(){var e=o[t];"object"==typeof e&&null!==e&&Object.keys(e).forEach((function(t){a[t]=e[t]}))};for(t=0,n=o.length;t<n;t+=1)r();return e},e.getBrowserAlias=function(e){return a.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return a.BROWSER_MAP[e]||""},e}();t.default=i,e.exports=t.default},18:function(e,t,n){"use strict";t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var a,i=(a=n(91))&&a.__esModule?a:{default:a},o=n(18);function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var r=function(){function e(){}var t,n,a;return e.getParser=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw new Error("UserAgent should be a string");return new i.default(e,t)},e.parse=function(e){return new i.default(e).getResult()},t=e,a=[{key:"BROWSER_MAP",get:function(){return o.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return o.ENGINE_MAP}},{key:"OS_MAP",get:function(){return o.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return o.PLATFORMS_MAP}}],(n=null)&&s(t.prototype,n),a&&s(t,a),e}();t.default=r,e.exports=t.default},91:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var a=l(n(92)),i=l(n(93)),o=l(n(94)),s=l(n(95)),r=l(n(17));function l(e){return e&&e.__esModule?e:{default:e}}var h=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=r.default.find(a.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=r.default.find(i.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||"":t||""},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=r.default.find(o.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=r.default.find(s.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return r.default.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,n={},a=0,i={},o=0;if(Object.keys(e).forEach((function(t){var s=e[t];"string"==typeof s?(i[t]=s,o+=1):"object"==typeof s&&(n[t]=s,a+=1)})),a>0){var s=Object.keys(n),l=r.default.find(s,(function(e){return t.isOS(e)}));if(l){var h=this.satisfies(n[l]);if(void 0!==h)return h}var c=r.default.find(s,(function(e){return t.isPlatform(e)}));if(c){var u=this.satisfies(n[c]);if(void 0!==u)return u}}if(o>0){var p=Object.keys(i),d=r.default.find(p,(function(e){return t.isBrowser(e,!0)}));if(void 0!==d)return this.compareVersion(i[d])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var n=this.getBrowserName().toLowerCase(),a=e.toLowerCase(),i=r.default.getBrowserTypeByAlias(a);return t&&i&&(a=i.toLowerCase()),a===n},t.compareVersion=function(e){var t=[0],n=e,a=!1,i=this.getBrowserVersion();if("string"==typeof i)return">"===e[0]||"<"===e[0]?(n=e.substr(1),"="===e[1]?(a=!0,n=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?n=e.substr(1):"~"===e[0]&&(a=!0,n=e.substr(1)),t.indexOf(r.default.compareVersions(i,n,a))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e,t){return void 0===t&&(t=!1),this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some((function(e){return t.is(e)}))},e}();t.default=h,e.exports=t.default},92:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var a,i=(a=n(17))&&a.__esModule?a:{default:a},o=/version\/(\d+(\.?_?\d+)+)/i,s=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},n=i.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},n=i.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},n=i.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},n=i.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},n=i.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(e){var t={name:"Opera Touch"},n=i.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},n=i.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},n=i.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},n=i.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},n=i.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},n=i.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},n=i.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},n=i.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},n=i.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},n=i.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return n&&(t.version=n),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},n=i.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},n=i.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},n=i.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},n=i.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},n=i.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},n=i.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},n=i.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},n=i.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MiuiBrowser/i],describe:function(e){var t={name:"Miui"},n=i.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},n=i.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},n=i.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},n=i.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t={name:"Android Browser"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:i.default.getFirstMatch(t,e),version:i.default.getSecondMatch(t,e)}}}];t.default=s,e.exports=t.default},93:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var a,i=(a=n(17))&&a.__esModule?a:{default:a},o=n(18),s=[{test:[/Roku\/DVP/],describe:function(e){var t=i.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:o.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=i.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe:function(e){var t=i.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),n=i.default.getWindowsVersionName(t);return{name:o.OS_MAP.Windows,version:t,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(e){var t={name:o.OS_MAP.iOS},n=i.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return n&&(t.version=n),t}},{test:[/macintosh/i],describe:function(e){var t=i.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),n=i.default.getMacOSVersionName(t),a={name:o.OS_MAP.MacOS,version:t};return n&&(a.versionName=n),a}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=i.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:o.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t=i.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),n=i.default.getAndroidVersionName(t),a={name:o.OS_MAP.Android,version:t};return n&&(a.versionName=n),a}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=i.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),n={name:o.OS_MAP.WebOS};return t&&t.length&&(n.version=t),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=i.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||i.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||i.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:o.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=i.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=i.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:o.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:o.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=i.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.PlayStation4,version:t}}}];t.default=s,e.exports=t.default},94:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var a,i=(a=n(17))&&a.__esModule?a:{default:a},o=n(18),s=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=i.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",n={type:o.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(n.model=t),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),n=e.test(/like (ipod|iphone)/i);return t&&!n},describe:function(e){var t=i.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:o.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}}];t.default=s,e.exports=t.default},95:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var a,i=(a=n(17))&&a.__esModule?a:{default:a},o=n(18),s=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:o.ENGINE_MAP.Blink};var t=i.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:o.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:o.ENGINE_MAP.Trident},n=i.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:o.ENGINE_MAP.Presto},n=i.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=e.test(/gecko/i),n=e.test(/like gecko/i);return t&&!n},describe:function(e){var t={name:o.ENGINE_MAP.Gecko},n=i.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:o.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:o.ENGINE_MAP.WebKit},n=i.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}}];t.default=s,e.exports=t.default}})},(e,t,n)=>{n(382)},(e,t,n)=>{n(248)},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>d,b:()=>p});n(1),n(2);var i=n(96),o=n(505),s=n(503),r=n(76),l=n(10),h=n(5),c=n(0),u=e([h]);h=(u.then?(await u)():u)[0];class p extends l.a{constructor(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;for(var l=arguments.length,u=new Array(l>7?l-7:0),p=7;p<l;p++)u[p-7]=arguments[p];super("effect effect-headshot",new s.a(h.h.EFFECT_HEADSHOT1,5*a,c.a*Math.random()),new o.a(!0,!0,!0,0),new i.a([h.h.EFFECT_HEADSHOT1,h.h.EFFECT_HEADSHOT2,h.h.EFFECT_HEADSHOT3,h.h.EFFECT_HEADSHOT4,h.h.EFFECT_HEADSHOT5,h.h.EFFECT_HEADSHOT6],.25,!1),new r.a(.25),...u);const{position:d}=this;d.x=e,d.y=t,d.z=n}}class d extends l.a{constructor(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;for(var l=arguments.length,u=new Array(l>7?l-7:0),p=7;p<l;p++)u[p-7]=arguments[p];super("effect effect-headshot",new s.a(h.h.EFFECT_ARMORBREAK1,5*a,c.a*Math.random()),new o.a(!0,!0,!0),new i.a([h.h.EFFECT_ARMORBREAK1,h.h.EFFECT_ARMORBREAK2,h.h.EFFECT_ARMORBREAK3,h.h.EFFECT_ARMORBREAK4,h.h.EFFECT_ARMORBREAK5,h.h.EFFECT_ARMORBREAK6],.25,!1),new r.a(.25),...u);const{position:d}=this;d.x=e,d.y=t,d.z=n}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";var a=n(19),i=n(11),o=n(203),s=i([].reverse),r=[1,2];a({target:"Array",proto:!0,forced:String(r)===String(r.reverse())},{reverse:function(){return o(this)&&(this.length=this.length),s(this)}})},(e,t,n)=>{"use strict";n.d(t,{a:()=>s});var a=n(0),i=n(61);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class s extends i.a{constructor(e,t,n){let i=arguments.length>7?arguments[7]:void 0,s=arguments.length>8?arguments[8]:void 0,r=arguments.length>9?arguments[9]:void 0,l=arguments.length>10?arguments[10]:void 0,h=arguments.length>11?arguments[11]:void 0,c=arguments.length>12?arguments[12]:void 0,u=arguments.length>13?arguments[13]:void 0,p=arguments.length>14?arguments[14]:void 0,d=arguments.length>15&&void 0!==arguments[15]?arguments[15]:0,g=arguments.length>16&&void 0!==arguments[16]?arguments[16]:0;super(arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,arguments.length>5&&void 0!==arguments[5]?arguments[5]:"none",arguments.length>6&&void 0!==arguments[6]?arguments[6]:"shoot",i,arguments.length>17&&void 0!==arguments[17]?arguments[17]:new Array),o(this,"shootPoint",void 0),o(this,"bulletType",void 0),o(this,"bulletCount",void 0),o(this,"nearBulletSpread",void 0),o(this,"farBulletSpread",void 0),o(this,"radius",void 0),o(this,"bulletSpeed",void 0),o(this,"burstCount",void 0),o(this,"bulletScale",void 0),o(this,"burstInterval",void 0),o(this,"burst",0),o(this,"burstTime",0),o(this,"burstTick",-1),this.shootPoint=new a.e(e,t),this.bulletType=n,this.fireSpeed=i,this.bulletCount=s,this.bulletScale=r,this.nearBulletSpread=l,this.farBulletSpread=h,this.radius=new a.e(c,u),this.bulletSpeed=p,this.burstCount=d,this.burstInterval=g}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>i});var a=n(0);class i{constructor(e,t,n){var i,o,s;s=void 0,(o="point")in(i=this)?Object.defineProperty(i,o,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[o]=s,this.point=new a.f(e,t,n)}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>o});var a=n(0);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o{constructor(){i(this,"value",new a.e(0,0)),i(this,"position",new a.e(0,0)),i(this,"old",new a.e(0,0)),i(this,"time",0),i(this,"force",0),i(this,"startTime",0),i(this,"subY",0)}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>o});n(1),n(2);var a=n(38),i=n(70);class o extends a.c{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];super(i.a,...t)}}},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>u,b:()=>c});n(1),n(2);var i=n(5),o=n(56),s=n(0),r=n(32),l=n(9),h=e([i,r]);function c(e){const t=null==e?void 0:e.getComponent(l.b);return null!==e&&-1===((null==t?void 0:t.deathTime)||-1)&&-1===((null==t?void 0:t.goleTime)||-1)&&-1===((null==t?void 0:t.intermissionTime)||-1)}function u(e,t,n,a,l,h){const[,c,,,]=t.hitScanVoxel(0,s.b,e.position.x,e.position.y+.001,e.position.z,a/2);if(-1!==c&&c>0){let a=n;const u=(0,o.b)(e.position.x,e.position.z,a);for(let n=0,o=0|u.length;n<o;n=n+2|0){const o=u[n+0]+.5,l=u[n+1]+.5,h=t.getVoxel(o,c-.5,l);if(((0|e.position.x)!==o||(0|e.position.z)!==l)&&(0,r.b)(h,i.u)){const t=(0,s.u)((0,s.m)(e.position.x,e.position.z,o,l)),[n,i]=(0,s.q)(t,0,1);a=Math.min(a,2*(0,s.o)(o+.5+n,l+.5+i,e.position.x,e.position.z))}}l.push(h(a,e.position.x,c+.01,e.position.z))}}[i,r]=h.then?(await h)():h,a()}catch(p){a(p)}}))},(e,t,n)=>{"use strict";n.d(t,{a:()=>a});n(7),n(249),n(106);function a(e){return btoa(unescape(encodeURIComponent(e)))}},(e,t,n)=>{"use strict";n.d(t,{a:()=>h});n(18),n(1),n(2);var a=n(34),i=n(22),o=n(91),s=n(24);const r=new Array;async function l(){await Promise.all(r.map((e=>e())).filter((e=>e instanceof Promise))),(0,s.a)(r)}function h(e){document.body?setTimeout((()=>r.push(e))):document.addEventListener("DOMContentLoaded",(()=>r.push(e)),!1)}(0,a.b)()&&(0,i.b)(o.e,"message",(e=>{const{data:t}=e;if(t instanceof Object&&"ready"===t.method)l()}))},(e,t,n)=>{"use strict";n.d(t,{a:()=>a});const a=[30,60,144,240]},(e,t,n)=>{"use strict";n.d(t,{a:()=>a});class a{constructor(){var e,t,n;n=!1,(t="enable")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}}},(e,t,n)=>{"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{a:()=>i});class i{constructor(e){a(this,"editor",void 0),a(this,"camera",null),this.editor=e}}},(e,t,n)=>{var a=n(28),i=n(12),o=n(74);e.exports=!a&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},(e,t,n)=>{var a=n(28),i=n(12);e.exports=a&&i((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},(e,t,n)=>{var a=n(110),i=n(131),o=n(84),s=function(e){return function(t,n,s){var r,l=a(t),h=o(l),c=i(s,h);if(e&&n!=n){for(;h>c;)if((r=l[c++])!=r)return!0}else for(;h>c;c++)if((e||c in l)&&l[c]===n)return e||c||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},(e,t,n)=>{var a,i,o,s,r,l,h,c,u=n(3),p=n(89),d=n(158).f,g=n(134).set,m=n(198),f=n(274),y=n(275),v=n(112),w=u.MutationObserver||u.WebKitMutationObserver,b=u.document,x=u.process,M=u.Promise,E=d(u,"queueMicrotask"),_=E&&E.value;_||(a=function(){var e,t;for(v&&(e=x.domain)&&e.exit();i;){t=i.fn,i=i.next;try{t()}catch(e){throw i?s():o=void 0,e}}o=void 0,e&&e.enter()},m||v||y||!w||!b?!f&&M&&M.resolve?((h=M.resolve(void 0)).constructor=M,c=p(h.then,h),s=function(){c(a)}):v?s=function(){x.nextTick(a)}:(g=p(g,u),s=function(){g(a)}):(r=!0,l=b.createTextNode(""),new w(a).observe(l,{characterData:!0}),s=function(){l.data=r=!r})),e.exports=_||function(e){var t={fn:e,next:void 0};o&&(o.next=t),i||(i=t,s()),o=t}},(e,t,n)=>{var a=n(3),i=n(89),o=n(20),s=n(25),r=n(111),l=n(171),h=n(84),c=n(87),u=n(138),p=n(116),d=n(199),g=a.TypeError,m=function(e,t){this.stopped=e,this.result=t},f=m.prototype;e.exports=function(e,t,n){var a,y,v,w,b,x,M,E=n&&n.that,_=!(!n||!n.AS_ENTRIES),C=!(!n||!n.IS_ITERATOR),T=!(!n||!n.INTERRUPTED),S=i(t,E),k=function(e){return a&&d(a,"normal",e),new m(!0,e)},O=function(e){return _?(s(e),T?S(e[0],e[1],k):S(e[0],e[1])):T?S(e,k):S(e)};if(C)a=e;else{if(!(y=p(e)))throw g(r(e)+" is not iterable");if(l(y)){for(v=0,w=h(e);w>v;v++)if((b=O(e[v]))&&c(f,b))return b;return new m(!1)}a=u(e,y)}for(x=a.next;!(M=o(x,a)).done;){try{b=O(M.value)}catch(e){d(a,"throw",e)}if("object"==typeof b&&b&&c(f,b))return b}return new m(!1)}},(e,t,n)=>{var a=n(102),i=n(200),o=n(114).CONSTRUCTOR;e.exports=o||!i((function(e){a.all(e).then(void 0,(function(){}))}))},(e,t,n)=>{var a=n(25),i=n(42),o=n(137);e.exports=function(e,t){if(a(e),i(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},(e,t,n)=>{var a=n(21),i=n(103),o=n(45),s=a("unscopables"),r=Array.prototype;null==r[s]&&o.f(r,s,{configurable:!0,value:i(null)}),e.exports=function(e){r[s][e]=!0}},(e,t,n)=>{"use strict";var a=n(19),i=n(20),o=n(78),s=n(129),r=n(17),l=n(237),h=n(139),c=n(100),u=n(101),p=n(55),d=n(46),g=n(21),m=n(115),f=n(238),y=s.PROPER,v=s.CONFIGURABLE,w=f.IteratorPrototype,b=f.BUGGY_SAFARI_ITERATORS,x=g("iterator"),M="keys",E="values",_="entries",C=function(){return this};e.exports=function(e,t,n,s,g,f,T){l(n,t,s);var S,k,O,A=function(e){if(e===g&&R)return R;if(!b&&e in I)return I[e];switch(e){case M:case E:case _:return function(){return new n(this,e)}}return function(){return new n(this)}},L=t+" Iterator",P=!1,I=e.prototype,N=I[x]||I["@@iterator"]||g&&I[g],R=!b&&N||A(g),W="Array"==t&&I.entries||N;if(W&&(S=h(W.call(new e)))!==Object.prototype&&S.next&&(o||h(S)===w||(c?c(S,w):r(S[x])||d(S,x,C)),u(S,L,!0,!0),o&&(m[L]=C)),y&&g==E&&N&&N.name!==E&&(!o&&v?p(I,"name",E):(P=!0,R=function(){return i(N,this)})),g)if(k={values:A(E),keys:f?R:A(M),entries:A(_)},T)for(O in k)(b||P||!(O in I))&&d(I,O,k[O]);else a({target:t,proto:!0,forced:b||P},k);return o&&!T||I[x]===R||d(I,x,R,{name:g}),m[t]=R,k}},(e,t,n)=>{"use strict";var a=n(238).IteratorPrototype,i=n(103),o=n(36),s=n(101),r=n(115),l=function(){return this};e.exports=function(e,t,n,h){var c=t+" Iterator";return e.prototype=i(a,{next:o(+!h,n)}),s(e,c,!1,!0),r[c]=l,e}},(e,t,n)=>{"use strict";var a,i,o,s=n(12),r=n(17),l=n(103),h=n(139),c=n(46),u=n(21),p=n(78),d=u("iterator"),g=!1;[].keys&&("next"in(o=[].keys())?(i=h(h(o)))!==Object.prototype&&(a=i):g=!0),null==a||s((function(){var e={};return a[d].call(e)!==e}))?a={}:p&&(a=l(a)),r(a[d])||c(a,d,(function(){return this})),e.exports={IteratorPrototype:a,BUGGY_SAFARI_ITERATORS:g}},e=>{e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},(e,t,n)=>{var a=n(74)("span").classList,i=a&&a.constructor&&a.constructor.prototype;e.exports=i===Object.prototype?void 0:i},(e,t,n)=>{var a=n(12),i=n(3).RegExp;e.exports=a((function(){var e=i(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},(e,t,n)=>{var a=n(12),i=n(3).RegExp;e.exports=a((function(){var e=i("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},(e,t,n)=>{var a=n(17),i=n(42),o=n(100);e.exports=function(e,t,n){var s,r;return o&&a(s=t.constructor)&&s!==n&&i(r=s.prototype)&&r!==n.prototype&&o(e,r),e}},(e,t,n)=>{n(82)("Uint8",(function(e){return function(t,n,a){return e(this,t,n,a)}}))},(e,t,n)=>{var a=n(20),i=n(29),o=n(87),s=n(206),r=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||"flags"in r||i(e,"flags")||!o(r,e)?t:a(s,e)}},(e,t,n)=>{"use strict";n.d(t,{a:()=>o});var a=n(0);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o{constructor(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];i(this,"size",void 0),i(this,"treeFix",void 0),this.size=new a.e(e,t),this.treeFix=n}}},(e,t,n)=>{var a=n(12),i=n(21),o=n(78),s=i("iterator");e.exports=!a((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,a){t.delete("b"),n+=a+e})),o&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[s]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://Ñ‚ÐµÑÑ‚").host||"#%D0%B1"!==new URL("http://a#Ð±").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},(e,t,n)=>{"use strict";n(1);var a=n(19),i=n(3),o=n(20),s=n(11),r=n(28),l=n(247),h=n(46),c=n(208),u=n(101),p=n(237),d=n(80),g=n(113),m=n(17),f=n(29),y=n(89),v=n(37),w=n(25),b=n(42),x=n(43),M=n(103),E=n(36),_=n(138),C=n(116),T=n(136),S=n(21),k=n(212),O=S("iterator"),A="URLSearchParams",L="URLSearchParamsIterator",P=d.set,I=d.getterFor(A),N=d.getterFor(L),R=Object.getOwnPropertyDescriptor,W=function(e){if(!r)return i[e];var t=R(i,e);return t&&t.value},z=W("fetch"),D=W("Request"),F=W("Headers"),U=D&&D.prototype,H=F&&F.prototype,B=i.RegExp,G=i.TypeError,Y=i.decodeURIComponent,V=i.encodeURIComponent,j=s("".charAt),K=s([].join),X=s([].push),q=s("".replace),J=s([].shift),Z=s([].splice),$=s("".split),Q=s("".slice),ee=/\+/g,te=Array(4),ne=function(e){return te[e-1]||(te[e-1]=B("((?:%[\\da-f]{2}){"+e+"})","gi"))},ae=function(e){try{return Y(e)}catch(t){return e}},ie=function(e){var t=q(e,ee," "),n=4;try{return Y(t)}catch(e){for(;n;)t=q(t,ne(n--),ae);return t}},oe=/[!'()~]|%20/g,se={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},re=function(e){return se[e]},le=function(e){return q(V(e),oe,re)},he=p((function(e,t){P(this,{type:L,iterator:_(I(e).entries),kind:t})}),"Iterator",(function(){var e=N(this),t=e.kind,n=e.iterator.next(),a=n.value;return n.done||(n.value="keys"===t?a.key:"values"===t?a.value:[a.key,a.value]),n}),!0),ce=function(e){this.entries=[],this.url=null,void 0!==e&&(b(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===j(e,0)?Q(e,1):e:x(e)))};ce.prototype={type:A,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,n,a,i,s,r,l,h=C(e);if(h)for(n=(t=_(e,h)).next;!(a=o(n,t)).done;){if(s=(i=_(w(a.value))).next,(r=o(s,i)).done||(l=o(s,i)).done||!o(s,i).done)throw G("Expected sequence with length 2");X(this.entries,{key:x(r.value),value:x(l.value)})}else for(var c in e)f(e,c)&&X(this.entries,{key:c,value:x(e[c])})},parseQuery:function(e){if(e)for(var t,n,a=$(e,"&"),i=0;i<a.length;)(t=a[i++]).length&&(n=$(t,"="),X(this.entries,{key:ie(J(n)),value:ie(K(n,"="))}))},serialize:function(){for(var e,t=this.entries,n=[],a=0;a<t.length;)e=t[a++],X(n,le(e.key)+"="+le(e.value));return K(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var ue=function(){g(this,pe);var e=arguments.length>0?arguments[0]:void 0;P(this,new ce(e))},pe=ue.prototype;if(c(pe,{append:function(e,t){T(arguments.length,2);var n=I(this);X(n.entries,{key:x(e),value:x(t)}),n.updateURL()},delete:function(e){T(arguments.length,1);for(var t=I(this),n=t.entries,a=x(e),i=0;i<n.length;)n[i].key===a?Z(n,i,1):i++;t.updateURL()},get:function(e){T(arguments.length,1);for(var t=I(this).entries,n=x(e),a=0;a<t.length;a++)if(t[a].key===n)return t[a].value;return null},getAll:function(e){T(arguments.length,1);for(var t=I(this).entries,n=x(e),a=[],i=0;i<t.length;i++)t[i].key===n&&X(a,t[i].value);return a},has:function(e){T(arguments.length,1);for(var t=I(this).entries,n=x(e),a=0;a<t.length;)if(t[a++].key===n)return!0;return!1},set:function(e,t){T(arguments.length,1);for(var n,a=I(this),i=a.entries,o=!1,s=x(e),r=x(t),l=0;l<i.length;l++)(n=i[l]).key===s&&(o?Z(i,l--,1):(o=!0,n.value=r));o||X(i,{key:s,value:r}),a.updateURL()},sort:function(){var e=I(this);k(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,n=I(this).entries,a=y(e,arguments.length>1?arguments[1]:void 0),i=0;i<n.length;)a((t=n[i++]).value,t.key,this)},keys:function(){return new he(this,"keys")},values:function(){return new he(this,"values")},entries:function(){return new he(this,"entries")}},{enumerable:!0}),h(pe,O,pe.entries,{name:"entries"}),h(pe,"toString",(function(){return I(this).serialize()}),{enumerable:!0}),u(ue,A),a({global:!0,constructor:!0,forced:!l},{URLSearchParams:ue}),!l&&m(F)){var de=s(H.has),ge=s(H.set),me=function(e){if(b(e)){var t,n=e.body;if(v(n)===A)return t=e.headers?new F(e.headers):new F,de(t,"content-type")||ge(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),M(e,{body:E(0,x(n)),headers:E(0,t)})}return e};if(m(z)&&a({global:!0,enumerable:!0,noTargetGet:!0,forced:!0},{fetch:function(e){return z(e,arguments.length>1?me(arguments[1]):{})}}),m(D)){var fe=function(e){return g(this,U),new D(e,arguments.length>1?me(arguments[1]):{})};U.constructor=fe,fe.prototype=U,a({global:!0,constructor:!0,noTargetGet:!0,forced:!0},{Request:fe})}}e.exports={URLSearchParams:ue,getState:I}},(e,t,n)=>{"use strict";var a=n(20),i=n(176),o=n(25),s=n(88),r=n(43),l=n(86),h=n(99),c=n(177),u=n(179);i("match",(function(e,t,n){return[function(t){var n=l(this),i=null==t?void 0:h(t,e);return i?a(i,t,n):new RegExp(t)[e](r(n))},function(e){var a=o(this),i=r(e),l=n(t,a,i);if(l.done)return l.value;if(!a.global)return u(a,i);var h=a.unicode;a.lastIndex=0;for(var p,d=[],g=0;null!==(p=u(a,i));){var m=r(p[0]);d[g]=m,""===m&&(a.lastIndex=c(i,s(a.lastIndex),h)),g++}return 0===g?null:d}]}))},(e,t,n)=>{"use strict";n.d(t,{a:()=>W,b:()=>z});var a={};n.r(a),n.d(a,{JsonPatchError:()=>y,_areEquals:()=>S,applyOperation:()=>M,applyPatch:()=>E,applyReducer:()=>_,deepClone:()=>v,getValueByPointer:()=>x,validate:()=>T,validator:()=>C});var i={};n.r(i),n.d(i,{compare:()=>R,generate:()=>I,observe:()=>P,unobserve:()=>L});
/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */
var o,s=(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},o(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=Object.prototype.hasOwnProperty;function l(e,t){return r.call(e,t)}function h(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var a=[];for(var i in e)l(e,i)&&a.push(i);return a}function c(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function u(e){for(var t,n=0,a=e.length;n<a;){if(!((t=e.charCodeAt(n))>=48&&t<=57))return!1;n++}return!0}function p(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function d(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function g(e){if(void 0===e)return!0;if(e)if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(g(e[t]))return!0}else if("object"==typeof e)for(var a=h(e),i=a.length,o=0;o<i;o++)if(g(e[a[o]]))return!0;return!1}function m(e,t){var n=[e];for(var a in t){var i="object"==typeof t[a]?JSON.stringify(t[a],null,2):t[a];void 0!==i&&n.push(a+": "+i)}return n.join("\n")}var f=function(e){function t(t,n,a,i,o){var s=this.constructor,r=e.call(this,m(t,{name:n,index:a,operation:i,tree:o}))||this;return r.name=n,r.index=a,r.operation=i,r.tree=o,Object.setPrototypeOf(r,s.prototype),r.message=m(t,{name:n,index:a,operation:i,tree:o}),r}return s(t,e),t}(Error),y=f,v=c,w={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var a=e[t];return delete e[t],{newDocument:n,removed:a}},replace:function(e,t,n){var a=e[t];return e[t]=this.value,{newDocument:n,removed:a}},move:function(e,t,n){var a=x(n,this.path);a&&(a=c(a));var i=M(n,{op:"remove",path:this.from}).removed;return M(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:a}},copy:function(e,t,n){var a=x(n,this.from);return M(n,{op:"add",path:this.path,value:c(a)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:S(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},b={add:function(e,t,n){return u(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){return{newDocument:n,removed:e.splice(t,1)[0]}},replace:function(e,t,n){var a=e[t];return e[t]=this.value,{newDocument:n,removed:a}},move:w.move,copy:w.copy,test:w.test,_get:w._get};function x(e,t){if(""==t)return e;var n={op:"_get",path:t};return M(e,n),n.value}function M(e,t,n,a,i,o){if(void 0===n&&(n=!1),void 0===a&&(a=!0),void 0===i&&(i=!0),void 0===o&&(o=0),n&&("function"==typeof n?n(t,0,e,t.path):C(t,0)),""===t.path){var s={newDocument:e};if("add"===t.op)return s.newDocument=t.value,s;if("replace"===t.op)return s.newDocument=t.value,s.removed=e,s;if("move"===t.op||"copy"===t.op)return s.newDocument=x(e,t.from),"move"===t.op&&(s.removed=e),s;if("test"===t.op){if(s.test=S(e,t.value),!1===s.test)throw new y("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s.newDocument=e,s}if("remove"===t.op)return s.removed=e,s.newDocument=null,s;if("_get"===t.op)return t.value=e,s;if(n)throw new y("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return s}a||(e=c(e));var r=(t.path||"").split("/"),l=e,h=1,p=r.length,g=void 0,m=void 0,f=void 0;for(f="function"==typeof n?n:C;;){if((m=r[h])&&-1!=m.indexOf("~")&&(m=d(m)),i&&("__proto__"==m||"prototype"==m&&h>0&&"constructor"==r[h-1]))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&void 0===g&&(void 0===l[m]?g=r.slice(0,h).join("/"):h==p-1&&(g=t.path),void 0!==g&&f(t,0,e,g)),h++,Array.isArray(l)){if("-"===m)m=l.length;else{if(n&&!u(m))throw new y("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);u(m)&&(m=~~m)}if(h>=p){if(n&&"add"===t.op&&m>l.length)throw new y("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);if(!1===(s=b[t.op].call(t,l,m,e)).test)throw new y("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}}else if(h>=p){if(!1===(s=w[t.op].call(t,l,m,e)).test)throw new y("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}if(l=l[m],n&&h<p&&(!l||"object"!=typeof l))throw new y("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,t,e)}}function E(e,t,n,a,i){if(void 0===a&&(a=!0),void 0===i&&(i=!0),n&&!Array.isArray(t))throw new y("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");a||(e=c(e));for(var o=new Array(t.length),s=0,r=t.length;s<r;s++)o[s]=M(e,t[s],n,!0,i,s),e=o[s].newDocument;return o.newDocument=e,o}function _(e,t,n){var a=M(e,t);if(!1===a.test)throw new y("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return a.newDocument}function C(e,t,n,a){if("object"!=typeof e||null===e||Array.isArray(e))throw new y("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(!w[e.op])throw new y("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n);if("string"!=typeof e.path)throw new y("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new y('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if(("move"===e.op||"copy"===e.op)&&"string"!=typeof e.from)throw new y("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new y("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&g(e.value))throw new y("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n)if("add"==e.op){var i=e.path.split("/").length,o=a.split("/").length;if(i!==o+1&&i!==o)throw new y("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==a)throw new y("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if("move"===e.op||"copy"===e.op){var s=T([{op:"_get",path:e.from,value:void 0}],n);if(s&&"OPERATION_PATH_UNRESOLVABLE"===s.name)throw new y("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}function T(e,t,n){try{if(!Array.isArray(e))throw new y("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)E(c(t),c(e),n||!0);else{n=n||C;for(var a=0;a<e.length;a++)n(e[a],a,t,void 0)}}catch(e){if(e instanceof y)return e;throw e}}function S(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var n,a,i,o=Array.isArray(e),s=Array.isArray(t);if(o&&s){if((a=e.length)!=t.length)return!1;for(n=a;0!=n--;)if(!S(e[n],t[n]))return!1;return!0}if(o!=s)return!1;var r=Object.keys(e);if((a=r.length)!==Object.keys(t).length)return!1;for(n=a;0!=n--;)if(!t.hasOwnProperty(r[n]))return!1;for(n=a;0!=n--;)if(!S(e[i=r[n]],t[i]))return!1;return!0}return e!=e&&t!=t}
/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */
var k=new WeakMap,O=function(e){this.observers=new Map,this.obj=e},A=function(e,t){this.callback=e,this.observer=t};function L(e,t){t.unobserve()}function P(e,t){var n,a=function(e){return k.get(e)}(e);if(a){var i=function(e,t){return e.observers.get(t)}(a,t);n=i&&i.observer}else a=new O(e),k.set(e,a);if(n)return n;if(n={},a.value=c(e),t){n.callback=t,n.next=null;var o=function(){I(n)},s=function(){clearTimeout(n.next),n.next=setTimeout(o)};"undefined"!=typeof window&&(window.addEventListener("mouseup",s),window.addEventListener("keyup",s),window.addEventListener("mousedown",s),window.addEventListener("keydown",s),window.addEventListener("change",s))}return n.patches=[],n.object=e,n.unobserve=function(){I(n),clearTimeout(n.next),function(e,t){e.observers.delete(t.callback)}(a,n),"undefined"!=typeof window&&(window.removeEventListener("mouseup",s),window.removeEventListener("keyup",s),window.removeEventListener("mousedown",s),window.removeEventListener("keydown",s),window.removeEventListener("change",s))},a.observers.set(t,new A(t,n)),n}function I(e,t){void 0===t&&(t=!1);var n=k.get(e.object);N(n.value,e.object,e.patches,"",t),e.patches.length&&E(n.value,e.patches);var a=e.patches;return a.length>0&&(e.patches=[],e.callback&&e.callback(a)),a}function N(e,t,n,a,i){if(t!==e){"function"==typeof t.toJSON&&(t=t.toJSON());for(var o=h(t),s=h(e),r=!1,u=s.length-1;u>=0;u--){var d=e[m=s[u]];if(!l(t,m)||void 0===t[m]&&void 0!==d&&!1===Array.isArray(t))Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:a+"/"+p(m),value:c(d)}),n.push({op:"remove",path:a+"/"+p(m)}),r=!0):(i&&n.push({op:"test",path:a,value:e}),n.push({op:"replace",path:a,value:t}),!0);else{var g=t[m];"object"==typeof d&&null!=d&&"object"==typeof g&&null!=g&&Array.isArray(d)===Array.isArray(g)?N(d,g,n,a+"/"+p(m),i):d!==g&&(!0,i&&n.push({op:"test",path:a+"/"+p(m),value:c(d)}),n.push({op:"replace",path:a+"/"+p(m),value:c(g)}))}}if(r||o.length!=s.length)for(u=0;u<o.length;u++){var m;l(e,m=o[u])||void 0===t[m]||n.push({op:"add",path:a+"/"+p(m),value:c(t[m])})}}}function R(e,t,n){void 0===n&&(n=!1);var a=[];return N(e,t,a,"",n),a}Object.assign({},a,i,{JsonPatchError:f,deepClone:c,escapePathComponent:p,unescapePathComponent:d});function W(e,t){return R(e,t)}function z(e,t){E(e,t)}},(e,t,n)=>{"use strict";n.d(t,{a:()=>o});var a=n(0);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o{constructor(e,t,n,o,s,r,l,h,c){let u=arguments.length>9&&void 0!==arguments[9]&&arguments[9],p=arguments.length>10&&void 0!==arguments[10]&&arguments[10],d=arguments.length>11&&void 0!==arguments[11]&&arguments[11],g=arguments.length>12&&void 0!==arguments[12]&&arguments[12],m=arguments.length>13&&void 0!==arguments[13]&&arguments[13],f=arguments.length>14&&void 0!==arguments[14]&&arguments[14],y=arguments.length>15&&void 0!==arguments[15]&&arguments[15],v=arguments.length>16&&void 0!==arguments[16]&&arguments[16],w=arguments.length>17&&void 0!==arguments[17]&&arguments[17],b=arguments.length>18&&void 0!==arguments[18]&&arguments[18],x=arguments.length>19&&void 0!==arguments[19]&&arguments[19],M=arguments.length>20&&void 0!==arguments[20]&&arguments[20];i(this,"position",void 0),i(this,"front",void 0),i(this,"back",void 0),i(this,"right",void 0),i(this,"left",void 0),i(this,"top",void 0),i(this,"bottom",void 0),i(this,"flipXFront",!1),i(this,"flipYFront",!1),i(this,"flipXBack",!1),i(this,"flipYBack",!1),i(this,"flipXRight",!1),i(this,"flipYRight",!1),i(this,"flipXLeft",!1),i(this,"flipYLeft",!1),i(this,"flipXTop",!1),i(this,"flipYTop",!1),i(this,"flipXBottom",!1),i(this,"flipYBottom",!1),this.position=new a.f(e,t,n),this.front=o,this.back=s,this.right=r,this.left=l,this.top=h,this.bottom=c,this.flipXFront=u,this.flipYFront=p,this.flipXBack=d,this.flipYBack=g,this.flipXRight=m,this.flipYRight=f,this.flipXLeft=y,this.flipYLeft=v,this.flipXTop=w,this.flipYTop=b,this.flipXBottom=x,this.flipYBottom=M}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>l});var a=n(38),i=n(22),o=n(85);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class r extends a.b{constructor(e,t,n,a,i,o){super(!1),s(this,"name",void 0),s(this,"scenes",void 0),s(this,"renderers",void 0),s(this,"assets",void 0),s(this,"controls",void 0),s(this,"sounds",void 0),this.name=e,this.scenes=t,this.renderers=n,this.assets=a,this.controls=i,this.sounds=o}getName(){return this.name}getRendererManager(){return this.renderers}getAssetManager(){return this.assets}getControlManager(){return this.controls}getSoundManager(){return this.sounds}createSound(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.sounds.create(e,t,null===n?(0,o.a)():n)}getSound(e){return this.sounds.getSound(e)}hasSound(e){return this.sounds.hasSound(e)}getSceneManager(){return this.scenes}clear(){const e=this.getSoundManager(),t=this.getControlManager();e.clear(),t.clear(),super.clear()}destroy(){const e=this.getSceneManager(),t=this.getControlManager(),n=this.getAssetManager(),a=this.getSoundManager(),o=this.getRendererManager();e.destroy(),t.destroy(),n.destroy(),a.destroy(),o.destroy(),new i.a(this,"destroy").trigger()}oninactive(){this.getControlManager().clear()}onupdatebegin(e){const{time:t,now:n,framerate:a,fps:o,updateCount:s}=e;new i.a(this.getControlManager(),"update").trigger({time:t,now:n,framerate:a,fps:o,updateCount:s})}onupdateend(e){const{time:t,now:n,framerate:a,fps:o,updateCount:s}=e;new i.a(this.getSceneManager(),"update").trigger({time:t,now:n,framerate:a,fps:o,updateCount:s}),new i.a(this.getRendererManager(),"update").trigger({time:t,now:n,framerate:a,fps:o,updateCount:s}),new i.a(this.getSoundManager(),"update").trigger({time:t,now:n,framerate:a,fps:o,updateCount:s}),new i.a(this.getAssetManager(),"update").trigger({time:t,now:n,framerate:a,fps:o,updateCount:s})}}class l extends r{constructor(e,t,n,a,i,o){super(e,t,n,a,i,o)}createTransferUIData(e){return[]}}},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>h,b:()=>l});var i=n(39),o=n(47),s=e([o]);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){let t=(0,i.e)(e,"useshoppoint",0),n=0,a=0;for(let e=0,i=0|o.r.length;e<i;e=e+1|0){const i=o.r[e];if(t-i.need<0){const s=o.r[e-1];return n=t/i.need,a=i.need,[s.img,n,t,a,s.sale]}t-=i.need}const s=o.r[o.r.length-1];return[s.img,n,a,a,s.sale]}o=(s.then?(await s)():s)[0];class h{constructor(e,t,n){r(this,"img",void 0),r(this,"need",void 0),r(this,"sale",void 0),this.img=e,this.need=t,this.sale=n}}a()}catch(c){a(c)}}))},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>D});n(18),n(1),n(2),n(14);var i=n(32),o=n(336),s=n(490),r=n(338),l=n(70),h=n(145),c=n(31),u=n(491),p=n(182),d=n(337),g=n(5),m=n(109),f=n(27),y=n(122),v=n(492),w=n(493),b=n(90),x=n(34),M=n(107),E=n(0),_=n(339),C=n(494),T=n(495),S=n(354),k=n(123),O=n(157),A=n(54),L=n(225),P=n(81),I=n(92),N=e([i,s,g,m,f,_,T,O,P]);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}[i,s,g,m,f,_,T,O,P]=N.then?(await N)():N;class D extends i.a{constructor(e,t,n,a,i,o,r,c,p,d,g,m){const f=new l.a("camera"),y=new h.a("sun");super(e,21,21,21,10,t,L.a[L.a.length-2],i,o,r,c,p,d,g,n,f,y),z(this,"isLoad",void 0),z(this,"gameMode",0),z(this,"editorData",void 0),z(this,"setting",void 0);const w=new O.d(n);this.addSystems(new P.b(w),new v.a,new T.a,new s.a(w,i,this.getControlManager()),new u.a,new C.a),this.addEntitys(y,f),this.isLoad=!1,this.editorData=m,this.setting=w}getFOVToCamera(){const e=this.setting.getFOV();return(0,E.g)(e)}getFramerate(){return this.setting.getFramerate()}getGameMode(){return this.gameMode}hasLoad(){return this.isLoad}hasSaveData(){return!!this.editorData&&Object.keys(this.editorData).length>0}setGameMode(e){this.gameMode=e}load(){this.importJSON(this.editorData)}async save(){const e=this.editorData,t=this.exportJSON();for(const n in t)e[n]=t[n];await(0,y.c)("editorData",!0)}newMap(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!e||e){this.clear();const e=this.getMargin();this.setWorldSize(21,21,21,e,e,e,e,e,e);const[t,n,a]=this.getWorldSize();for(let e=0;e<t;e=e+1|0)for(let t=0;t<n;t=t+1|0)for(let n=0;n<a;n=n+1|0)this.setVoxel(e,t,n,g.t.NONE,!1);const i=new l.a("camera",new S.a,new o.a,new c.a(.1),new P.a(.175));i.position.x=12.5,i.position.y=12.5,i.position.z=12.5,i.direction.x=5*E.d,i.direction.y=.5*E.d,i.fov=this.getFOVToCamera();const s=new w.a("sun");s.direction.x=1.2875*Math.PI,s.direction.y=1.2875*Math.PI,this.setCamera(i),this.setSun(s),this.addEntitys(i,s);const r=new d.a("start-point",10.5,11,10.5,0,m.a.PLAYER);return this.addEntitys(r),m.a.PLAYER.hasAngle()&&this.addEntitys(new _.a(r)),this.setTileSet(g.s.METAL),this.setVoxel(10,10,10,g.t.DEFAULT,!0,!1),this.getMap().requestRefleshDistanceField(),this.isLoad=!0,!0}return!1}async openMap(){const e=await(0,b.d)("V.R.G. map file",["application/json"],["json"]);try{if(null===e)throw new Error;this.importJSON(JSON.parse(e))}catch(e){throw new Error("Can't open this map.")}}async saveMap(){let e=null;try{e=JSON.stringify(this.exportJSON())}catch(e){}null!==e&&await(0,b.e)("V.R.G. map file",["application/json"],["json"],"blob",e)}async previewMap(){if(await this.save(),this.getEntitys().some((e=>e instanceof d.a&&e.pawn===m.a.PLAYER))){const e=this.getSceneManager().getScene("preview");null!==e&&e instanceof f.a&&(e.previewLevel(this.exportJSON()),this.getSceneManager().activeScene("preview"))}}exportJSON(){const e=this.getCamera(),t={position:W({},e.position),direction:W({},e.direction)},n=this.getTileSet(),a=Object.keys(A.a)[Object.values(A.a).indexOf(this.getGameMode())],o=null!==n&&Object.keys(g.s)[Object.values(g.s).indexOf(n)]||"METAL",s=Object.keys(g.a)[Object.values(g.a).indexOf(this.getBackground()||g.a.DEFAULT)],r=this.getVoxelManager().getVoxels().filter((e=>e&&!(0,i.b)(e,g.u))).map((e=>null===e?null:{position:W({},e.position),front:e.front,back:e.back,right:e.right,left:e.left,top:e.top,bottom:e.bottom,flipXFront:e.flipXFront,flipYFront:e.flipYFront,flipXBack:e.flipXBack,flipYBack:e.flipYBack,flipXRight:e.flipXRight,flipYRight:e.flipYRight,flipXLeft:e.flipXLeft,flipYLeft:e.flipYLeft,flipXTop:e.flipXTop,flipYTop:e.flipYTop,flipXBottom:e.flipXBottom,flipYBottom:e.flipYBottom})),l=this.getEntitys((e=>e instanceof d.a)).map((e=>({position:W({},e.position),direction:W({},e.direction),id:Object.keys(m.a)[Object.values(m.a).indexOf(e.pawn)]}))),h=this.getMap(),[c,u,p]=h.getSize(),f=h.getVoxelField(),y=h.getDistanceField(),v=h.getMortonField(),w={voxel_field:new Array,distance_field:new Array,morton_field:new Array,voxel_inserts:(0,I.a)(h.getVoxelInsertDatas()),distance_inserts:(0,I.a)(h.getDistanceInsertDatas()),morton_inserts:(0,I.a)(h.getMortonInsertDatas()),size:{width:c,height:u,depth:p}};for(let e=0;e<c;e=e+1|0){w.voxel_field[e]=new Array,w.distance_field[e]=new Array,w.morton_field[e]=new Array;for(let t=0;t<u;t=t+1|0){w.voxel_field[e][t]=new Array,w.distance_field[e][t]=new Array,w.morton_field[e][t]=new Array;for(let n=0;n<p;n=n+1|0)w.voxel_field[e][t][n]=h.get(0,e,t,n,f),w.distance_field[e][t][n]=h.get(0,e,t,n,y),w.morton_field[e][t][n]=h.get(0,e,t,n,v)}}return{camera:t,mode:a,tileset:o,background:s,voxels:r,entitys:l,map:w,offset:this.getOffset()}}importJSON(e){const{camera:t,mode:n,tileset:a,background:i,entitys:s}=e;this.clear();const r=new l.a("camera",new S.a,new o.a,new c.a(.1),new P.a(.175));r.position.x=t.position.x,r.position.y=t.position.y,r.position.z=t.position.z,r.direction.x=t.direction.x,r.direction.y=t.direction.y,r.direction.z=t.direction.z,r.fov=this.getFOVToCamera();const h=new w.a("sun");h.direction.x=1.2875*Math.PI,h.direction.y=1.2875*Math.PI,this.setCamera(r),this.setSun(h),this.addEntitys(r,h),this.setGameMode(Object.values(A.a)[Object.keys(A.a).indexOf(n)]),this.setTileSet(g.s[a]||"METAL"),this.setBackground(g.a[i]||g.a.DEFALUT),this.setWorldData(e);const u=new Array;s.forEach((e=>{if(!m.a.hasOwnProperty(e.id))return;const t=new d.a("",e.position.x,e.position.y,e.position.z,e.direction.x,m.a[e.id]);u.push(t),m.a[e.id].hasAngle()&&u.push(new _.a(t))})),this.addEntitys(...u),this.isLoad=!0}createTransferUIData(e){if(!e)return[];const t=this.getCamera();if(t.hasComponent(o.a)){const e=t.getComponent(o.a),n=this.getControlManager();return[...e.openMenu?(0,P.d)(t,this,this.setting,0,0,.45):e.menuMode===r.a.MOVIE?[]:[new p.a("rectile-rect","rgba(255, 255, 255, 1.0)",1,!0,1,0,0,.005,0,E.a,!0,0,0),new p.b("editor-mode-font","./asset/font.png",5,5,g.e,"".concat(Object.keys(A.a)[Object.values(A.a).indexOf(this.getGameMode())]," mode"),0,-.75,1,0,0,1,[1,1,1]),new p.b("editor-mode-font","./asset/font.png",5,5,g.e,e.editMode.length>0?"".concat(e.editMode," edit"):"",0,.75,1,0,0,1,[1,1,1]),new p.b("control-help","./asset/font.png",5,5,g.e,"set item",-.75,.35,1,1,0,1,[1,1,1]),new p.b("control-key","./asset/font.png",5,5,g.e,"".concat(n.getKey("keyboard"===n.getInputType()?"fire-left":"fire-right")),-.8,.35,1,-1,0),new p.b("control-help","./asset/font.png",5,5,g.e,"remove item",-.75,.425,1,1,0,1,[1,1,1]),new p.b("control-key","./asset/font.png",5,5,g.e,"".concat(n.getKey("keyboard"===n.getInputType()?"fire-right":"fire-left")),-.8,.425,1,-1,0),new p.b("control-help","./asset/font.png",5,5,g.e,"change item angle",-.75,.5,1,1,0,1,[1,1,1]),new p.b("control-key","./asset/font.png",5,5,g.e,"".concat("keyboard"===n.getInputType()?"mouse wheel":"right or left"),-.8,.5,1,-1,0),new p.b("control-help","./asset/font.png",5,5,g.e,"tool menu",-.75,.575,1,1,0,1,[1,1,1]),new p.b("control-key","./asset/font.png",5,5,g.e,"".concat(n.getKey("weapon-wheel")),-.8,.575,1,-1,0)]]}return[]}async onactive(e){"keyboard"===this.getControlManager().getInputType()&&await(0,M.c)(),!(0,x.a)()&&this.setting.hasBrowserFullscreen()&&await(0,k.d)()}}a()}catch(F){a(F)}}))},(e,t,n)=>{"use strict";function a(e,t,n){let a="".concat(e);for(;a.length<n;)a="".concat(t).concat(a);return a}function i(e,t,n){let a="".concat(e);for(;a.length<n;)a="".concat(t).concat(a);return"".concat(a.substring(0,a.length-(n-1)),".").concat(a.substring(a.length-(n-1),a.length))}n.d(t,{a:()=>i,b:()=>a})},(e,t,n)=>{"use strict";n.d(t,{a:()=>a});class a{}},(e,t,n)=>{"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{a:()=>i});class i{constructor(e,t,n){a(this,"limit",void 0),a(this,"force",void 0),a(this,"forceHoming",void 0),a(this,"tic",0),a(this,"oldTic",0),this.limit=e,this.force=t,this.forceHoming=n}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>a});class a{}},(e,t,n)=>{"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{a:()=>i});class i{constructor(){a(this,"exec",!1),a(this,"hasDoorMessage",!1)}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>a});class a{constructor(){var e,t,n;n=!1,(t="enable")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}}},(e,t,n)=>{"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{a:()=>i});class i{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];a(this,"spawner",void 0),a(this,"interval",void 0),a(this,"spawn",null),a(this,"gauge",null),a(this,"time",0),a(this,"hoverTime",0),a(this,"oldHoverPositionY",-1),a(this,"isHoverAnimation",void 0),this.spawner=e,this.interval=t,this.isHoverAnimation=n}}},(e,t,n)=>{"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{a:()=>i});class i{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;a(this,"attachEntitys",new Array),a(this,"spawnCount",0),a(this,"type",void 0),a(this,"max",void 0),this.type=e,this.max=t}}},(e,t,n)=>{"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{a:()=>i});class i{constructor(e,t){a(this,"landing",!1),a(this,"feel",!1),a(this,"min",void 0),a(this,"max",void 0),this.min=e,this.max=t}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>a});class a{constructor(){var e,t,n;n=0,(t="speed")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}}},function(e,t,n){e.exports=function(){"use strict";var e=Function.prototype.toString,t=Object.create,a=Object.defineProperty,i=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,s=Object.getOwnPropertySymbols,r=Object.getPrototypeOf,l=Object.prototype,h=l.hasOwnProperty,c=l.propertyIsEnumerable,u="function"==typeof s,p="function"==typeof WeakMap,d=function(){if(p)return function(){return new WeakMap};var e=function(){function e(){this._keys=[],this._values=[]}return e.prototype.has=function(e){return!!~this._keys.indexOf(e)},e.prototype.get=function(e){return this._values[this._keys.indexOf(e)]},e.prototype.set=function(e,t){this._keys.push(e),this._values.push(t)},e}();return function(){return new e}}(),g=function(n,a){var i=n.__proto__||r(n);if(!i)return t(null);var o=i.constructor;if(o===a.Object)return i===a.Object.prototype?{}:t(i);if(~e.call(o).indexOf("[native code]"))try{return new o}catch(e){}return t(i)},m=function(e,t,n,a){var i=g(e,t);for(var o in a.set(e,i),e)h.call(e,o)&&(i[o]=n(e[o],a));if(u)for(var r=s(e),l=0,p=r.length,d=void 0;l<p;++l)d=r[l],c.call(e,d)&&(i[d]=n(e[d],a));return i},f=function(e,t,n,r){var l=g(e,t);r.set(e,l);for(var h=u?o(e).concat(s(e)):o(e),c=0,p=h.length,d=void 0,m=void 0;c<p;++c)if("callee"!==(d=h[c])&&"caller"!==d)if(m=i(e,d)){m.get||m.set||(m.value=n(e[d],r));try{a(l,d,m)}catch(e){l[d]=m.value}}else l[d]=n(e[d],r);return l},y=function(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t},v=Array.isArray,w=Object.getPrototypeOf,b=function(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:(console&&console.error&&console.error('Unable to locate global object, returning "this".'),this)}();function x(e,t){var n=!(!t||!t.isStrict),a=t&&t.realm||b,i=n?f:m,o=function(e,t){if(!e||"object"!=typeof e)return e;if(t.has(e))return t.get(e);var s,r=e.__proto__||w(e),l=r&&r.constructor;if(!l||l===a.Object)return i(e,a,o,t);if(v(e)){if(n)return f(e,a,o,t);s=new l,t.set(e,s);for(var h=0,c=e.length;h<c;++h)s[h]=o(e[h],t);return s}if(e instanceof a.Date)return new l(e.getTime());if(e instanceof a.RegExp)return(s=new l(e.source,e.flags||y(e))).lastIndex=e.lastIndex,s;if(a.Map&&e instanceof a.Map)return s=new l,t.set(e,s),e.forEach((function(e,n){s.set(n,o(e,t))})),s;if(a.Set&&e instanceof a.Set)return s=new l,t.set(e,s),e.forEach((function(e){s.add(o(e,t))})),s;if(a.Blob&&e instanceof a.Blob)return e.slice(0,e.size,e.type);if(a.Buffer&&a.Buffer.isBuffer(e))return s=a.Buffer.allocUnsafe?a.Buffer.allocUnsafe(e.length):new l(e.length),t.set(e,s),e.copy(s),s;if(a.ArrayBuffer){if(a.ArrayBuffer.isView(e))return s=new l(e.buffer.slice(0)),t.set(e,s),s;if(e instanceof a.ArrayBuffer)return s=e.slice(0),t.set(e,s),s}return"function"==typeof e.then||e instanceof Error||a.WeakMap&&e instanceof a.WeakMap||a.WeakSet&&e instanceof a.WeakSet?e:i(e,a,o,t)};return o(e,d())}return x.default=x,x.strict=function(e,t){return x(e,{isStrict:!0,realm:t?t.realm:void 0})},x}()},(e,t)=>{"use strict";var n={}.propertyIsEnumerable,a=Object.getOwnPropertyDescriptor,i=a&&!n.call({1:2},1);t.f=i?function(e){var t=a(this,e);return!!t&&t.enumerable}:n},(e,t,n)=>{var a=n(3),i=n(20),o=n(42),s=n(159),r=n(99),l=n(268),h=n(21),c=a.TypeError,u=h("toPrimitive");e.exports=function(e,t){if(!o(e)||s(e))return e;var n,a=r(e,u);if(a){if(void 0===t&&(t="default"),n=i(a,e,t),!o(n)||s(n))return n;throw c("Can't convert object to primitive value")}return void 0===t&&(t="number"),l(e,t)}},(e,t,n)=>{var a=n(3),i=n(20),o=n(17),s=n(42),r=a.TypeError;e.exports=function(e,t){var n,a;if("string"===t&&o(n=e.toString)&&!s(a=i(n,e)))return a;if(o(n=e.valueOf)&&!s(a=i(n,e)))return a;if("string"!==t&&o(n=e.toString)&&!s(a=i(n,e)))return a;throw r("Can't convert object to primitive value")}},(e,t,n)=>{var a=n(3),i=n(17),o=n(130),s=a.WeakMap;e.exports=i(s)&&/native code/.test(o(s))},(e,t,n)=>{var a=n(83),i=n(11),o=n(166),s=n(271),r=n(25),l=i([].concat);e.exports=a("Reflect","ownKeys")||function(e){var t=o.f(r(e)),n=s.f;return n?l(t,n(e)):t}},(e,t)=>{t.f=Object.getOwnPropertySymbols},(e,t,n)=>{var a=n(3),i=n(17),o=a.String,s=a.TypeError;e.exports=function(e){if("object"==typeof e||i(e))return e;throw s("Can't set "+o(e)+" as a prototype")}},(e,t,n)=>{var a={};a[n(21)("toStringTag")]="z",e.exports="[object z]"===String(a)},(e,t,n)=>{var a=n(94),i=n(3);e.exports=/ipad|iphone|ipod/i.test(a)&&void 0!==i.Pebble},(e,t,n)=>{var a=n(94);e.exports=/web0s(?!.*chrome)/i.test(a)},(e,t,n)=>{var a=n(3);e.exports=function(e,t){var n=a.console;n&&n.error&&(1==arguments.length?n.error(e):n.error(e,t))}},e=>{var t=function(){this.head=null,this.tail=null};t.prototype={add:function(e){var t={item:e,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}},e.exports=t},e=>{e.exports="object"==typeof window&&"object"!=typeof Deno},(e,t,n)=>{var a=n(12);e.exports=!a((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},(e,t,n)=>{"use strict";var a=n(202).forEach,i=n(204)("forEach");e.exports=i?[].forEach:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}},(e,t,n)=>{var a=n(282);e.exports=function(e,t){return new(a(e))(0===t?0:t)}},(e,t,n)=>{var a=n(3),i=n(203),o=n(169),s=n(42),r=n(21)("species"),l=a.Array;e.exports=function(e){var t;return i(e)&&(t=e.constructor,(o(t)&&(t===l||i(t.prototype))||s(t)&&null===(t=t[r]))&&(t=void 0)),void 0===t?l:t}},(e,t,n)=>{var a=n(3),i=n(172),o=a.TypeError;e.exports=function(e){if(i(e))throw o("The method doesn't accept regular expressions");return e}},(e,t,n)=>{var a=n(21)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[a]=!1,"/./"[e](t)}catch(e){}}return!1}},(e,t,n)=>{var a=n(19),i=n(286);a({global:!0,forced:parseInt!=i},{parseInt:i})},(e,t,n)=>{var a=n(3),i=n(12),o=n(11),s=n(43),r=n(287).trim,l=n(205),h=a.parseInt,c=a.Symbol,u=c&&c.iterator,p=/^[+-]?0x/i,d=o(p.exec),g=8!==h(l+"08")||22!==h(l+"0x16")||u&&!i((function(){h(Object(u))}));e.exports=g?function(e,t){var n=r(s(e));return h(n,t>>>0||(d(p,n)?16:10))}:h},(e,t,n)=>{var a=n(11),i=n(86),o=n(43),s=n(205),r=a("".replace),l="["+s+"]",h=RegExp("^"+l+l+"*"),c=RegExp(l+l+"*$"),u=function(e){return function(t){var n=o(i(t));return 1&e&&(n=r(n,h,"")),2&e&&(n=r(n,c,"")),n}};e.exports={start:u(1),end:u(2),trim:u(3)}},(e,t,n)=>{var a=n(3).Array,i=Math.abs,o=Math.pow,s=Math.floor,r=Math.log,l=Math.LN2;e.exports={pack:function(e,t,n){var h,c,u,p=a(n),d=8*n-t-1,g=(1<<d)-1,m=g>>1,f=23===t?o(2,-24)-o(2,-77):0,y=e<0||0===e&&1/e<0?1:0,v=0;for((e=i(e))!=e||e===1/0?(c=e!=e?1:0,h=g):(h=s(r(e)/l),e*(u=o(2,-h))<1&&(h--,u*=2),(e+=h+m>=1?f/u:f*o(2,1-m))*u>=2&&(h++,u/=2),h+m>=g?(c=0,h=g):h+m>=1?(c=(e*u-1)*o(2,t),h+=m):(c=e*o(2,m-1)*o(2,t),h=0));t>=8;)p[v++]=255&c,c/=256,t-=8;for(h=h<<t|c,d+=t;d>0;)p[v++]=255&h,h/=256,d-=8;return p[--v]|=128*y,p},unpack:function(e,t){var n,a=e.length,i=8*a-t-1,s=(1<<i)-1,r=s>>1,l=i-7,h=a-1,c=e[h--],u=127&c;for(c>>=7;l>0;)u=256*u+e[h--],l-=8;for(n=u&(1<<-l)-1,u>>=-l,l+=t;l>0;)n=256*n+e[h--],l-=8;if(0===u)u=1-r;else{if(u===s)return n?NaN:c?-1/0:1/0;n+=o(2,t),u-=r}return(c?-1:1)*n*o(2,u-t)}}},(e,t,n)=>{"use strict";var a=n(79),i=n(131),o=n(84);e.exports=function(e){for(var t=a(this),n=o(t),s=arguments.length,r=i(s>1?arguments[1]:void 0,n),l=s>2?arguments[2]:void 0,h=void 0===l?n:i(l,n);h>r;)t[r++]=e;return t}},(e,t,n)=>{var a=n(3),i=n(12),o=n(200),s=n(104).NATIVE_ARRAY_BUFFER_VIEWS,r=a.ArrayBuffer,l=a.Int8Array;e.exports=!s||!i((function(){l(1)}))||!i((function(){new l(-1)}))||!o((function(e){new l,new l(null),new l(1.5),new l(e)}),!0)||i((function(){return 1!==new l(new r(2),1,void 0).length}))},(e,t,n)=>{var a=n(42),i=Math.floor;e.exports=Number.isInteger||function(e){return!a(e)&&isFinite(e)&&i(e)===e}},(e,t,n)=>{var a=n(3),i=n(95),o=a.RangeError;e.exports=function(e){var t=i(e);if(t<0)throw o("The argument can't be less than 0");return t}},(e,t,n)=>{var a=n(89),i=n(20),o=n(195),s=n(79),r=n(84),l=n(138),h=n(116),c=n(171),u=n(104).aTypedArrayConstructor;e.exports=function(e){var t,n,p,d,g,m,f=o(this),y=s(e),v=arguments.length,w=v>1?arguments[1]:void 0,b=void 0!==w,x=h(y);if(x&&!c(x))for(m=(g=l(y,x)).next,y=[];!(d=i(m,g)).done;)y.push(d.value);for(b&&v>2&&(w=a(w,arguments[2])),n=r(y),p=new(u(f))(n),t=0;n>t;t++)p[t]=b?w(y[t],t):y[t];return p}},(e,t,n)=>{var a=n(94).match(/firefox\/(\d+)/i);e.exports=!!a&&+a[1]},(e,t,n)=>{var a=n(94);e.exports=/MSIE|Trident/.test(a)},(e,t,n)=>{var a=n(94).match(/AppleWebKit\/(\d+)\./);e.exports=!!a&&+a[1]},(e,t,n)=>{"use strict";n.d(t,{a:()=>r});var a=n(22),i=n(8),o=n(35);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class r{constructor(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];s(this,"maxFrameSkipCount",20),s(this,"speed",1),s(this,"framerate",60),s(this,"updateCount",0),s(this,"tickFps",60),s(this,"paintFps",60),s(this,"reqAnim",-1),s(this,"timeout",-1),s(this,"updateTime",-1),s(this,"nextGameTick",-1),s(this,"paintTime",-1),s(this,"skipFrameCount",-1),s(this,"oldTime",-1),s(this,"stackTick",0),s(this,"isSleep",!1),s(this,"isError",!1),s(this,"isUpdateDefault",!1),s(this,"isPaintDefault",!1),s(this,"useAnimationFrame",void 0),(0,a.b)((0,o.d)(),"error",(()=>{this.error()})),this.useAnimationFrame=e}reset(){let e=!1;return-1!==this.reqAnim&&((0,o.b)(this.reqAnim),e=!0),this.updateTime=-1,this.nextGameTick=-1,this.paintTime=-1,this.reqAnim=-1,this.oldTime=-1,e}error(){this.isError=!0,this.stop(),new a.a(this,"error").trigger()}sleep(){this.isSleep=!0,new a.a(this,"sleep").trigger({})}unsleep(){this.isSleep=!1,new a.a(this,"unsleep").trigger()}updateDefault(){this.isUpdateDefault=!0}paintDefault(){this.isPaintDefault=!0}getFramerate(){return this.framerate}getTickFramerate(){return this.tickFps}getPaintFramerate(){return this.paintFps}setTickFramerate(e){this.tickFps=e}setPaintFramerate(e){this.paintFps=e}tickFunc(e){this.requestTick();const t=Math.min(240,this.getTickFramerate()),n=Math.min(240,this.getPaintFramerate()),s=1e3/n;if(-1===this.updateTime&&(this.updateTime=e),-1===this.nextGameTick&&(this.nextGameTick=e),-1===this.paintTime&&(this.paintTime=e),-1===this.oldTime&&(this.oldTime=e),this.isSleep)return this.updateTime=e,this.paintTime=e,this.nextGameTick=e,void(this.oldTime=e);const r=Math.max(0,e-this.updateTime);this.updateTime=e;const l=(0,i.c)(1e3/r,t);let h=0;if(this.isPaintDefault||0===h&&this.updateCount>0){if(Math.max(0,e-this.paintTime)>=s){const t=(0,i.c)(s,n);if(this.framerate=Math.min(t,n),this.useAnimationFrame){if(-1===this.reqAnim){const i=()=>{this.isPaintDefault?this.reqAnim=(0,o.e)(i):this.reqAnim=-1,new a.a(this,"paint").trigger({now:e,framerate:t,fps:n})};this.reqAnim=(0,o.e)(i),this.isPaintDefault=!1,this.paintTime+=s}}else new a.a(this,"paint").trigger({now:e,framerate:t,fps:n}),this.isPaintDefault=!1,this.paintTime+=s}else this.isPaintDefault=!0}let c=this.oldTime;do{const t=h<=0?e:performance.now(),n=t-c+this.stackTick,i=60/(1e3/n/(1e3/60)),o=n/(1e3/60)*this.speed;if(0===h&&new a.a(this,"updatebegin").trigger({now:e,framerate:l,fps:this.getTickFramerate(),updateCount:this.updateCount}),new a.a(this,"update").trigger({time:o,now:e,framerate:i,fps:this.getTickFramerate(),updateIndex:h}),this.nextGameTick+=n,this.stackTick=0,c=t,h++,this.nextGameTick>e){this.skipFrameCount=Math.min(this.maxFrameSkipCount,this.skipFrameCount+.5);break}if(h>=this.skipFrameCount){this.skipFrameCount=Math.max(1,this.skipFrameCount-1|0),this.stackTick=e-this.nextGameTick;break}}while(this.nextGameTick<=e);this.oldTime=c;const u=Math.max(0,r-(performance.now()-e));(h>0||this.isUpdateDefault)&&(this.isUpdateDefault=!1,new a.a(this,"updateend").trigger({time:u/(1e3/60),now:e,framerate:l,fps:this.getTickFramerate(),updateCount:h})),this.updateCount=h}requestTick(){-1===this.timeout&&(this.timeout=(0,o.f)((()=>{const e=performance.now();this.timeout=-1,this.tickFunc(e)})))}cancelTick(){return-1!==this.timeout&&((0,o.c)(this.timeout),this.timeout=-1,!0)}run(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return!(this.isError||this.hasRun()||this.isSleep&&!e)&&(this.reset(),this.isSleep=!1,this.requestTick(),!0)}stop(){return!this.hasRun()||(this.reset(),this.cancelTick())}getNowFramerate(){return this.framerate}hasRun(){return-1!==this.timeout}hasSleep(){return this.isSleep}getSpeed(){return this.speed}setSpeed(e){this.speed=e}clear(){this.setSpeed(1)}}},(e,t,n)=>{var a=n(11),i=n(79),o=Math.floor,s=a("".charAt),r=a("".replace),l=a("".slice),h=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,c=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,a,u,p){var d=n+e.length,g=a.length,m=c;return void 0!==u&&(u=i(u),m=h),r(p,m,(function(i,r){var h;switch(s(r,0)){case"$":return"$";case"&":return e;case"`":return l(t,0,n);case"'":return l(t,d);case"<":h=u[l(r,1,-1)];break;default:var c=+r;if(0===c)return i;if(c>g){var p=o(c/10);return 0===p?i:p<=g?void 0===a[p-1]?s(r,1):a[p-1]+s(r,1):i}h=a[c-1]}return void 0===h?"":h}))}},e=>{e.exports=!1},(e,t,n)=>{"use strict";n.d(t,{a:()=>p,b:()=>u});n(1),n(2),n(18),n(181);var a=n(24),i=n(56),o=n(0),s=n(500),r=n(92);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const h=()=>0;class c{constructor(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;l(this,"x",void 0),l(this,"y",void 0),l(this,"z",void 0),l(this,"stepX",void 0),l(this,"stepY",void 0),l(this,"stepZ",void 0),l(this,"step",void 0),l(this,"prev",void 0),l(this,"cost",0),this.x=e,this.y=t,this.z=n,this.stepX=a,this.stepY=i,this.stepZ=o,this.step=null===s?0:s.step+1,this.prev=s}getCost(e,t,n){return(0,o.p)(e,t,n,this.x,this.y,this.z)+this.step}}class u{constructor(e){l(this,"finish",!0),l(this,"find",!1),l(this,"start",new c(0,0,0)),l(this,"hasSearch",{}),l(this,"searchPoint",new Array),l(this,"stack",new Array),l(this,"dimension",void 0),this.dimension=e?3:2}hasFinish(){return this.finish}begin(e,t,n){this.finish=!1,this.find=!1,this.start=new c(.5+(0|e),.5+(0|t),.5+(0|n)),this.hasSearch={},(0,a.a)(this.searchPoint),this.searchPoint.push(this.start)}close(e){if(null!==e){(0,a.a)(this.stack);let t=e,n=null;do{t!==e&&(t===this.start||null!==n&&t.stepX===n.stepX&&t.stepY===n.stepY&&t.stepZ===n.stepZ)||(n=t,this.stack.unshift(t.x,t.y,t.z))}while(null!==(t=t.prev));this.find=!0}else this.find=!1;this.finish=!0}}class p{constructor(){l(this,"stacks",new Array),l(this,"queue",new Array),l(this,"sorts",new WeakMap),l(this,"block",{block:!1})}find(e,t,n,o){let l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e=>({block:!1}),u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e=>!0,p=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e=>e.step,d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:()=>!0,g=arguments.length>8&&void 0!==arguments[8]?arguments[8]:h;const m=[];return new Promise(((h,f)=>{if(!e.hasFinish())return;const y=(0,r.a)(3===e.dimension?i.j:i.i),{block:v}=this;let w=0;e.begin(.5+(0|t),.5+(0|n),.5+(0|o)),(0,a.b)(y);const b=this;this.queue.push(function*(){do{yield g;const t=e.searchPoint.shift()||null;if(null===t||!d())break;if(u(t)){e.close(t),h(null);break}for(let n=0|y.length;w<n;w=w+1|0){const[n,a,i]=y[w],o=n+(0|t.x)|0,r=a+(0|t.y)|0,h=i+(0|t.z)|0;let u=b.stacks.shift()||null;null===u?u=new c(o+.5,r+.5,h+.5,n,a,i,t):(u.x=o+.5,u.y=r+.5,u.z=h+.5,u.stepX=n,u.stepY=a,u.stepZ=i,u.prev=t,u.cost=0),v.block=!1,delete v.label,l(u,v);let d=(0,s.d)(o,r,h);const g=v.label||null;if(null!==g&&(d="".concat(d,"-").concat(g)),!e.hasSearch[d]&&(e.hasSearch[d]=!0,!v.block)){u.cost=p(u);let t=!1;for(let n=0,a=0|e.searchPoint.length;n<a;n=n+1|0){if(e.searchPoint[n].cost>u.cost){e.searchPoint.splice(n,0,u),t=!0;break}}t||e.searchPoint.push(u)}}w=0,m.push(t)}while(e.searchPoint.length>0);return e.close(null),f(),!0}())})).finally((()=>{this.stacks.push(...m)}))}begin(){(0,a.c)(this.queue).asc((e=>(this.sorts.get(e)||h)()))}update(e,t,n,a){if(this.queue.length<=0)return;const i=Math.min(e,n===1/0?1e3/a:1e3/n);do{const e=this.queue.shift()||null;if(null===e)break;{const t=e.next();t.done||(this.sorts.set(e,t.value),this.queue.push(e))}}while(performance.now()-t<i&&this.queue.length>0)}}},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>r});n(18),n(1),n(2);var i=n(381),o=n(384),s=e([o]);o=(s.then?(await s)():s)[0];class r extends i.a{async load(){const e=this.getDatas();0===e.length&&e.push(...await Promise.all(this.getUrls().map((async e=>await(0,o.a)(e)))))}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";var a=n(19),i=n(28),o=n(3),s=n(11),r=n(29),l=n(17),h=n(87),c=n(43),u=n(45).f,p=n(193),d=o.Symbol,g=d&&d.prototype;if(i&&l(d)&&(!("description"in g)||void 0!==d().description)){var m={},f=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:c(arguments[0]),t=h(g,this)?new d(e):void 0===e?d():d(e);return""===e&&(m[t]=!0),t};p(f,d),f.prototype=g,g.constructor=f;var y="Symbol(test)"==String(d("test")),v=s(g.toString),w=s(g.valueOf),b=/^Symbol\((.*)\)[^)]+$/,x=s("".replace),M=s("".slice);u(g,"description",{configurable:!0,get:function(){var e=w(this),t=v(e);if(r(m,e))return"";var n=y?M(t,7,-1):x(t,b,"$1");return""===n?void 0:n}}),a({global:!0,constructor:!0,forced:!0},{Symbol:f})}},(e,t,n)=>{var a=n(192),i=n(45);e.exports=function(e,t,n){return n.get&&a(n.get,t,{getter:!0}),n.set&&a(n.set,t,{setter:!0}),i.f(e,t,n)}},(e,t,n)=>{"use strict";var a=n(28),i=n(11),o=n(20),s=n(12),r=n(201),l=n(271),h=n(266),c=n(79),u=n(72),p=Object.assign,d=Object.defineProperty,g=i([].concat);e.exports=!p||s((function(){if(a&&1!==p({b:1},p(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach((function(e){t[e]=e})),7!=p({},e)[n]||r(p({},t)).join("")!=i}))?function(e,t){for(var n=c(e),i=arguments.length,s=1,p=l.f,d=h.f;i>s;)for(var m,f=u(arguments[s++]),y=p?g(r(f),p(f)):r(f),v=y.length,w=0;v>w;)m=y[w++],a&&!o(d,f,m)||(n[m]=f[m]);return n}:p},(e,t,n)=>{"use strict";var a=n(3),i=n(89),o=n(20),s=n(79),r=n(306),l=n(171),h=n(169),c=n(84),u=n(210),p=n(138),d=n(116),g=a.Array;e.exports=function(e){var t=s(e),n=h(this),a=arguments.length,m=a>1?arguments[1]:void 0,f=void 0!==m;f&&(m=i(m,a>2?arguments[2]:void 0));var y,v,w,b,x,M,E=d(t),_=0;if(!E||this==g&&l(E))for(y=c(t),v=n?new this(y):g(y);y>_;_++)M=f?m(t[_],_):t[_],u(v,_,M);else for(x=(b=p(t,E)).next,v=n?new this:[];!(w=o(x,b)).done;_++)M=f?r(b,m,[w.value,_],!0):w.value,u(v,_,M);return v.length=_,v}},(e,t,n)=>{var a=n(25),i=n(199);e.exports=function(e,t,n,o){try{return o?t(a(n)[0],n[1]):t(n)}catch(t){i(e,"throw",t)}}},(e,t,n)=>{"use strict";var a=n(3),i=n(11),o=2147483647,s=/[^\0-\u007E]/,r=/[.\u3002\uFF0E\uFF61]/g,l="Overflow: input needs wider integers to process",h=a.RangeError,c=i(r.exec),u=Math.floor,p=String.fromCharCode,d=i("".charCodeAt),g=i([].join),m=i([].push),f=i("".replace),y=i("".split),v=i("".toLowerCase),w=function(e){return e+22+75*(e<26)},b=function(e,t,n){var a=0;for(e=n?u(e/700):e>>1,e+=u(e/t);e>455;)e=u(e/35),a+=36;return u(a+36*e/(e+38))},x=function(e){var t=[];e=function(e){for(var t=[],n=0,a=e.length;n<a;){var i=d(e,n++);if(i>=55296&&i<=56319&&n<a){var o=d(e,n++);56320==(64512&o)?m(t,((1023&i)<<10)+(1023&o)+65536):(m(t,i),n--)}else m(t,i)}return t}(e);var n,a,i=e.length,s=128,r=0,c=72;for(n=0;n<e.length;n++)(a=e[n])<128&&m(t,p(a));var f=t.length,y=f;for(f&&m(t,"-");y<i;){var v=o;for(n=0;n<e.length;n++)(a=e[n])>=s&&a<v&&(v=a);var x=y+1;if(v-s>u((o-r)/x))throw h(l);for(r+=(v-s)*x,s=v,n=0;n<e.length;n++){if((a=e[n])<s&&++r>o)throw h(l);if(a==s){for(var M=r,E=36;;){var _=E<=c?1:E>=c+26?26:E-c;if(M<_)break;var C=M-_,T=36-_;m(t,p(w(_+C%T))),M=u(C/T),E+=36}m(t,p(w(M))),c=b(r,x,y==f),r=0,y++}}r++,s++}return g(t,"")};e.exports=function(e){var t,n,a=[],i=y(f(v(e),r,"."),".");for(t=0;t<i.length;t++)n=i[t],m(a,c(s,n)?"xn--"+x(n):n);return g(a,".")}},(e,t,n)=>{var a=n(28),i=n(3),o=n(11),s=n(168),r=n(243),l=n(55),h=n(166).f,c=n(87),u=n(172),p=n(43),d=n(245),g=n(173),m=n(309),f=n(46),y=n(12),v=n(29),w=n(80).enforce,b=n(132),x=n(21),M=n(241),E=n(242),_=x("match"),C=i.RegExp,T=C.prototype,S=i.SyntaxError,k=o(T.exec),O=o("".charAt),A=o("".replace),L=o("".indexOf),P=o("".slice),I=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,N=/a/g,R=/a/g,W=new C(N)!==N,z=g.MISSED_STICKY,D=g.UNSUPPORTED_Y,F=a&&(!W||z||M||E||y((function(){return R[_]=!1,C(N)!=N||C(R)==R||"/a/i"!=C(N,"i")})));if(s("RegExp",F)){for(var U=function(e,t){var n,a,i,o,s,h,g=c(T,this),m=u(e),f=void 0===t,y=[],b=e;if(!g&&m&&f&&e.constructor===U)return e;if((m||c(T,e))&&(e=e.source,f&&(t=d(b))),e=void 0===e?"":p(e),t=void 0===t?"":p(t),b=e,M&&"dotAll"in N&&(a=!!t&&L(t,"s")>-1)&&(t=A(t,/s/g,"")),n=t,z&&"sticky"in N&&(i=!!t&&L(t,"y")>-1)&&D&&(t=A(t,/y/g,"")),E&&(o=function(e){for(var t,n=e.length,a=0,i="",o=[],s={},r=!1,l=!1,h=0,c="";a<=n;a++){if("\\"===(t=O(e,a)))t+=O(e,++a);else if("]"===t)r=!1;else if(!r)switch(!0){case"["===t:r=!0;break;case"("===t:k(I,P(e,a+1))&&(a+=2,l=!0),i+=t,h++;continue;case">"===t&&l:if(""===c||v(s,c))throw new S("Invalid capture group name");s[c]=!0,o[o.length]=[c,h],l=!1,c="";continue}l?c+=t:i+=t}return[i,o]}(e),e=o[0],y=o[1]),s=r(C(e,t),g?this:T,U),(a||i||y.length)&&(h=w(s),a&&(h.dotAll=!0,h.raw=U(function(e){for(var t,n=e.length,a=0,i="",o=!1;a<=n;a++)"\\"!==(t=O(e,a))?o||"."!==t?("["===t?o=!0:"]"===t&&(o=!1),i+=t):i+="[\\s\\S]":i+=t+O(e,++a);return i}(e),n)),i&&(h.sticky=!0),y.length&&(h.groups=y)),e!==b)try{l(s,"source",""===b?"(?:)":b)}catch(e){}return s},H=h(C),B=0;H.length>B;)m(U,C,H[B++]);T.constructor=U,U.prototype=T,f(i,"RegExp",U,{constructor:!0})}b("RegExp")},(e,t,n)=>{var a=n(45).f;e.exports=function(e,t,n){n in e||a(e,n,{configurable:!0,get:function(){return t[n]},set:function(e){t[n]=e}})}},(e,t,n)=>{"use strict";n.d(t,{a:()=>c,b:()=>u});n(18),n(1),n(2),n(214),n(215);var a=n(155),i=n(85),o=n(34),s=n(91),r=n(90),l=n(22);let h=self.fetch;function c(e,t){let n=h;return(0,o.b)()||!(0,o.a)()||(0,a.a)()||(n=async function(e,t){const n="electron"in self?await("GET"===t.method?self.electron.requestHTTP(e):self.electron.existsHTTP(e)):null;return new Response(n,{status:n?200:404})}),n(e,t)}function u(e,t){return URL.createObjectURL(new Blob([t],{type:e}))}(0,o.b)()?h=async function(e,t){return new Promise(((n,a)=>{const o=(0,i.a)(),r=e=>{const{data:t}=e;if(t instanceof Object&&o===t.key&&"return"===t.method)(0,l.d)(s.c,"message",r),t.error?a():n(new Response(t.value,{status:200}))};(0,l.b)(s.c,"message",r),s.c.postMessage({method:"fetch",type:"arraybuffer",options:t,url:e,key:o})}))}:(0,l.b)(s.c,"message",(e=>{const{data:t}=e;if(t instanceof Object&&"fetch"===t.method)(0,r.a)(t.url,t.type,t.options).then((e=>s.c.postMessage({method:"return",error:!1,value:e.source,key:t.key}))).catch((()=>s.c.postMessage({method:"return",error:!0,value:null,key:t.key})))}))},e=>{e.exports=function(){return"undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type||(!("undefined"==typeof process||"object"!=typeof process.versions||!process.versions.electron)||"object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}},e=>{"use strict";e.exports=i,e.exports.isMobile=i,e.exports.default=i;const t=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,n=/CrOS/,a=/android|ipad|playbook|silk/i;function i(e){e||(e={});let i=e.ua;if(i||"undefined"==typeof navigator||(i=navigator.userAgent),i&&i.headers&&"string"==typeof i.headers["user-agent"]&&(i=i.headers["user-agent"]),"string"!=typeof i)return!1;let o=t.test(i)&&!n.test(i)||!!e.tablet&&a.test(i);return!o&&e.tablet&&e.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==i.indexOf("Macintosh")&&-1!==i.indexOf("Safari")&&(o=!0),o}},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>c});n(7),n(1),n(2),n(18),n(117),n(143),n(118),n(119),n(120);var i=n(385),o=n(386),s=(n(387),e([o]));o=(s.then?(await s)():s)[0];self,c(0,0).getContext("2d"),c(0,0).getContext("webgl"),c(0,0).getContext("webgl2");const r=new i.a(Worker,(function(){postMessage("OffscreenCanvas"in self&&null!==new OffscreenCanvas(1,1).getContext("2d"))})),l=new i.a(Worker,(function(){postMessage("OffscreenCanvas"in self&&null!==new OffscreenCanvas(1,1).getContext("webgl"))})),h=new i.a(Worker,(function(){postMessage("OffscreenCanvas"in self&&null!==new OffscreenCanvas(1,1).getContext("webgl2"))}));await r.exec(),await l.exec(),await h.exec();r.terminate(),l.terminate(),h.terminate();new WeakMap,new WeakMap;function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"OffscreenCanvas"in self?new OffscreenCanvas(e,t):(()=>{const n=document.createElement("canvas");return n.width=0|e,n.height=0|t,n})()}a()}catch(u){a(u)}}),1)},(e,t,n)=>{var a=n(3),i=n(77),o=n(79),s=n(72),r=n(84),l=a.TypeError,h=function(e){return function(t,n,a,h){i(n);var c=o(t),u=s(c),p=r(c),d=e?p-1:0,g=e?-1:1;if(a<2)for(;;){if(d in u){h=u[d],d+=g;break}if(d+=g,e?d<0:p<=d)throw l("Reduce of empty array with no initial value")}for(;e?d>=0:p>d;d+=g)d in u&&(h=n(h,u[d],d,c));return h}};e.exports={left:h(!1),right:h(!0)}},(e,t,n)=>{"use strict";n.d(t,{a:()=>l,b:()=>r,c:()=>c,d:()=>h});var a=n(35),i=n(22),o=n(34),s=n(155);const r=new a.a("window"),l=new a.a("display-log"),h=new a.a("worker-tick"),c=new a.a("worker-paint");(0,o.b)()||(0,i.b)(r,"message",(e=>{const{data:t}=e;if(t instanceof Object)switch(t.method){case"shutdown":self.close();break;case"reload":!(0,s.a)()&&"electron"in self?self.electron.reboot():self.location.reload()}}))},(e,t,n)=>{"use strict";n.d(t,{a:()=>d,b:()=>g});var a=n(224),i=n(91),o=n(22),s=n(34),r=n(35),l=(n(1),n(2),n(18),n(223)),h=n(85);let c=(e,t)=>{(0,r.f)(t)};if(!(0,s.b)()){let e=!1;const t=new Array;c=(n,a)=>{if(e){const e=document.createElement("link");e.setAttribute("rel","stylesheet"),e.setAttribute("href","data:text/css;base64,".concat((0,l.a)(n))),document.getElementsByTagName("head")[0].appendChild(e),a()}else t.push([n,a])};const n=()=>{for((0,o.d)((0,r.d)(),"DOMContentLoaded",n),e=!0;t.length>0;){const[e,n]=t[0];c(e,n),t.shift()}};(0,o.b)((0,r.d)(),"DOMContentLoaded",n),(0,o.b)(i.i,"message",(e=>{const{data:t}=e;if(t instanceof Object&&"add"===t.method)c(t.value,(()=>i.i.postMessage({method:"success",key:t.key})))}))}let u=!1,p=!1;function d(){return u}function g(){return p}(0,s.b)()?(0,o.b)(i.a,"message",(e=>{const{data:t}=e;if(t instanceof Object)switch(t.method){case"change-mouse":u=t.value;break;case"change-touch":p=t.value}})):(0,a.a)((()=>{(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const a=t.join("\n");return new Promise((e=>{if((0,s.b)()){const t=(0,h.a)(),n=a=>{const{data:s}=a;s instanceof Object&&s.key===t&&"success"===s.method&&((0,o.d)(i.i,"message",n),e())};(0,o.b)(i.i,"message",n),i.i.postMessage({method:"add",value:a,key:t})}else c(a,(()=>e()))}))})("\n            @media (pointer: fine) {\n                /* Rules for devices with mouse here */\n            }\n        ").then((()=>{const e=()=>{(0,r.e)(e);const t=self.matchMedia("(pointer:fine)").matches;t!==u&&i.a.postMessage({method:"change-mouse",value:t}),u=t;const n="ontouchstart"in window||"DocuentTouch"in self&&self.DocumentTouch&&document instanceof self.DocumentTouch||navigator.maxTouchPoints>0||"msMaxTouchPoints"in self.navigator&&self.navigator.msMaxTouchPoints>0;n!==p&&i.a.postMessage({method:"change-touch",value:n}),p=n};(0,r.e)(e)}))}))},(e,t,n)=>{"use strict";n.d(t,{a:()=>o,b:()=>r,c:()=>s});n(1),n(2);var a=n(123),i=n(8);const o=[[720,480],[854,480],[960,540],[1024,576],[1136,640],[1280,720],[1366,768],[1600,900],[1920,1080],[2048,1152],[2560,1440],[2880,1620],[3200,1800],[3840,2160],[7680,4320]];function s(e,t){return t[(0,i.a)(e.getResolutionIndex(),0,t.length-1)]}function r(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return((0,a.c)(!0)&&!e.hasAutomaticResolution()?s(e,t):null)||(0,a.b)(e.hasHighPixelRatio(),n)}},(e,t,n)=>{"use strict";n.d(t,{a:()=>o});var a=n(0);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Array,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:()=>[];i(this,"enable",!1),i(this,"range",void 0),i(this,"filter",void 0),i(this,"execAddComponents",void 0),this.range=new a.e(e,t),this.filter=n,this.execAddComponents=o}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>s});var a=n(61),i=n(0);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class s extends a.a{constructor(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"default";super(arguments.length>4&&void 0!==arguments[4]?arguments[4]:128,arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,arguments.length>6&&void 0!==arguments[6]?arguments[6]:"none","melee",arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,arguments.length>9&&void 0!==arguments[9]?arguments[9]:[]),o(this,"force",void 0),o(this,"minDamage",void 0),o(this,"type",void 0),o(this,"range",void 0),this.minDamage=a,this.force=n,this.range=new i.e(e,t),this.type=s}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>s});var a=n(61),i=n(0);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class s extends a.a{constructor(e,t,n,a,s){let r=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0;super(arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,arguments.length>7&&void 0!==arguments[7]?arguments[7]:"none","melee",arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,arguments.length>10&&void 0!==arguments[10]?arguments[10]:[]),o(this,"force",void 0),o(this,"clusterCount",void 0),o(this,"range",void 0),o(this,"direction",void 0),this.force=n,this.clusterCount=r,this.range=new i.e(e,t),this.direction=new i.e(a,s)}}},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>r});n(1),n(2);var i=n(23),o=n(153),s=e([i]);i=(s.then?(await s)():s)[0];class r extends i.a{constructor(e,t,n,a,i,s,r,l,h,c,u,p,d,g,m,f,y,v){super("player-bullet hook target",u,c,0,0,y,v,arguments.length>18&&void 0!==arguments[18]?arguments[18]:"ammo",e,t,n,a,i,s,r,l,p,p,1/0,!1,0,!1,((e,t,n,a,i,o,s,r,l,h,c)=>null),"none",0,0,!1,null,[],0,0,0,arguments.length>20&&void 0!==arguments[20]?arguments[20]:null,arguments.length>21&&void 0!==arguments[21]?arguments[21]:null,"hitbox",["player-hit-bullet","enemy-hit-bullet",...arguments.length>22&&void 0!==arguments[22]?arguments[22]:new Array],new o.a)}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>h,b:()=>l});n(1),n(2);var i=n(23),o=n(403),s=n(147),r=e([i,o,s]);[i,o,s]=r.then?(await r)():r;class l extends i.a{}class h extends l{constructor(e,t,n,a,i,r,l,h,c,u,p,d,g,m,f,y,v,w){let b=arguments.length>18&&void 0!==arguments[18]?arguments[18]:"ammo",x=arguments.length>20&&void 0!==arguments[20]?arguments[20]:null,M=arguments.length>21&&void 0!==arguments[21]?arguments[21]:null,E=arguments.length>22&&void 0!==arguments[22]?arguments[22]:new Array;super("player-bullet",p,u,m*v,f,v,w,b,e,t,n,a,i,r,l,h,d,0,c,g,.25+.75*v,!0,((e,t,n,a,i,r,c,u,p,d,g)=>{var f;return new o.a(e,t,n,l,h,1,!1,0,m,b,(null==this||null===(f=this.getComponent(s.a))||void 0===f?void 0:f.force)||0,v,this,p,d,g)}),"none",0,0,!1,null,[],0,0,0,x,M,"hitbox",[...v>=1?["player-hit-bullet","player-bullet","enemy-bullet"]:[],...E])}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.d(t,{a:()=>o});var a=n(0);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o{constructor(e,t,n,o,s,r,l){i(this,"minDamage",void 0),i(this,"maxDamage",void 0),i(this,"damageType",void 0),i(this,"chargePar",void 0),i(this,"force",void 0),i(this,"range",void 0),this.minDamage=e,this.maxDamage=t,this.damageType=n,this.chargePar=s,this.force=o,this.range=new a.e(r,l)}}},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>l,b:()=>r});var i=n(47),o=e([i]);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e){for(let t=0,n=0|i.m.length;t<n;t=t+1|0){const n=i.m[t];if(e-n.score<0){const e=i.m[Math.max(t-1,0)]||n;return[e.text,e.color]}}const t=i.m[i.m.length-1];return[t.text,t.color]}i=(o.then?(await o)():o)[0];class l{constructor(e,t,n){s(this,"score",void 0),s(this,"text",void 0),s(this,"color",void 0),this.score=e,this.text=t,this.color=n}}a()}catch(h){a(h)}}))},(e,t,n)=>{"use strict";n.d(t,{a:()=>s});var a=n(61),i=n(0);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class s extends a.a{constructor(){let e=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,t=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"none","melee",arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,arguments.length>6&&void 0!==arguments[6]?arguments[6]:new Array),o(this,"air",!1),o(this,"isPush",!1),o(this,"start",new i.f(-1,-1,-1)),o(this,"end",new i.f(-1,-1,-1)),o(this,"oldPosition",new i.f(-1,-1,-1)),o(this,"jumpForce",void 0),this.jumpForce=new i.e(e,t)}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>o});n(7);var a=n(219);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o{constructor(e,t,n,a){i(this,"material",void 0),i(this,"limit",void 0),i(this,"isAngle",void 0),i(this,"exec",void 0),this.material=e,this.limit=t,this.isAngle=n,this.exec=a}spawn(e,t,n,i,o){const s=e+1e-4,r=t,l=n+1e-4,h=this.exec(s,r,l,i,o);return null!==h&&h.setComponents(new a.a(s,r,l)),h}getLimit(){return this.limit}hasAngle(){return this.isAngle}getMaterial(){return this.material}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>s});var a=n(341),i=n(30),o=n(328);class s extends o.a{constructor(e,t,n){var o;super("shot-target head",e,0,(null===(o=e.getComponent(i.a))||void 0===o?void 0:o.size.y)||0,0,t,n,{melee:1,ammo:1/0,ball:1/0,plasma:1,rocket:1,explode:1},new a.a(e))}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>l});n(1),n(2);var a=n(10),i=n(40),o=n(30),s=n(504),r=n(62);class l extends a.a{constructor(e,t,n,a,l,h,c){let u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{};for(var p=arguments.length,d=new Array(p>8?p-8:0),g=8;g<p;g++)d[g-8]=arguments[g];super("".concat(e.length>0?"".concat(e," "):"","shottarget"),new r.a(n,a,l),new i.a(1/0,0,0,u),new s.a(t),new o.a(h,c),...d)}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>s});var a=n(0),i=n(61);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class s extends i.a{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>8?arguments[8]:void 0,r=arguments.length>9?arguments[9]:void 0,l=arguments.length>10?arguments[10]:void 0,h=arguments.length>11?arguments[11]:void 0,c=arguments.length>12?arguments[12]:void 0,u=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0;super(arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,arguments.length>6&&void 0!==arguments[6]?arguments[6]:"none",arguments.length>7&&void 0!==arguments[7]?arguments[7]:"shoot",s,arguments.length>14&&void 0!==arguments[14]?arguments[14]:new Array),o(this,"angleX",0),o(this,"shootPoint",void 0),o(this,"bulletType",void 0),o(this,"brancheCount",void 0),o(this,"bulletSpeed",void 0),o(this,"bulletScale",void 0),o(this,"radius",void 0),o(this,"rollTime",void 0),this.shootPoint=new a.e(e,t),this.bulletType=n,this.brancheCount=i,this.fireSpeed=s,this.bulletScale=r,this.radius=new a.e(l,h),this.bulletSpeed=c,this.rollTime=u}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>i});n(1),n(2);var a=n(70);class i extends a.a{constructor(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];super(e,...n),this.hudFov=.23964497041420119}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>r});n(1),n(2),n(14);var a=n(4),i=n(504),o=n(70),s=n(9);class r extends a.a{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a,o,s;super(i.a,...t),s={},(o="animations")in(a=this)?Object.defineProperty(a,o,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[o]=s}addAnimations(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach((e=>{this.animations[e.name]=e}))}additional(e,t,n){var a;const r=t.getComponent(i.a).value;if(!(r instanceof o.a&&null!=r&&r.hasComponent(i.a)))return;const l=r.getComponent(i.a).value;if(null===l)return;let h=(null===(a=l.getComponent(s.b))||void 0===a?void 0:a.state)||"still";this.animations.hasOwnProperty(h)||(h="still"),"still"!==h&&this.animations.hasOwnProperty("still")&&this.animations.still.update(e,t,l,n,h),this.animations.hasOwnProperty(h)&&this.animations[h].update(e,t,l,n,h)}}},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>x,b:()=>b,c:()=>w,d:()=>v,e:()=>y});n(1),n(2);var i=n(10),o=n(503),s=n(5),r=n(505),l=n(13),h=n(41),c=n(76),u=n(126),p=n(333),d=n(0),g=n(349),m=e([s]);s=(m.then?(await m)():m)[0];class f extends i.a{constructor(e,t,n,a){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,g=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,m=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;for(var f=arguments.length,y=new Array(f>8?f-8:0),v=8;v<f;v++)y[v-8]=arguments[v];super("effect blood",new o.a(e,0,0,Math.random()>.5,!1),new r.a(!0,!0,!0,0),new l.a(.001,0,.001,0),new h.a(.5),new u.a(.5+.25*Math.random(),i,!1),new c.a(1.25),new p.a(t,n,a,...(0,d.n)(s,g,m,0,0,0)),...y);const{position:w}=this;w.x=t,w.y=n,w.z=a;const b=this.getComponent(l.a);b.value.x=s,b.value.y=g,b.value.z=m}}class y extends f{constructor(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;super([s.h.EFFECT_BLOOD_RED1,s.h.EFFECT_BLOOD_RED2,s.h.EFFECT_BLOOD_RED3][3*Math.random()|0],e,t,n,a,i,o,r)}}class v extends f{constructor(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;super([s.h.EFFECT_BLOOD_GREEN1,s.h.EFFECT_BLOOD_GREEN2,s.h.EFFECT_BLOOD_GREEN3][3*Math.random()|0],e,t,n,a,i,o,r)}}class w extends i.a{constructor(e,t,n,a){super("effect acid",new o.a([s.h.EFFECT_ACID_RED1,s.h.EFFECT_ACID_RED2][2*Math.random()|0],e,Math.random()*d.a,Math.random()>.5,!1),new r.a(!1,!0,!1,0),new g.a(e,null,!1));const{position:i}=this;i.x=t,i.y=n,i.z=a}}class b extends i.a{constructor(e,t,n,a,i){super("effect acid",new o.a(s.h.EFFECT_ACID_GREEN,e,Math.random()*d.a,Math.random()>.5,!1),new r.a(!1,!0,!1,0),new g.a(e,i,!0));const{position:l}=this;l.x=t,l.y=n+.01,l.z=a}}class x extends i.a{constructor(e,t,n,a){super("effect acid",new o.a(s.h.EFFECT_ACID_BLUE,e,Math.random()*d.a,Math.random()>.5,!1),new r.a(!1,!0,!1,0),new g.a(e,null,!1));const{position:i}=this;i.x=t,i.y=n,i.z=a}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.d(t,{a:()=>o});var a=n(0);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o{constructor(e,t,n,o,s){i(this,"origin",void 0),i(this,"direction",void 0),this.origin=new a.f(e,t,n),this.direction=new a.e(o,s)}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>o});n(1),n(2);var a=n(38),i=n(145);class o extends a.c{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];super(i.a,...t)}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>a});const a="0.27.0"},(e,t,n)=>{"use strict";n.d(t,{a:()=>s});var a=n(183),i=n(0);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class s extends a.a{constructor(){super(),o(this,"openMenu",!1),o(this,"isReleaseClick",!1),o(this,"menuMode",0),o(this,"editMode",""),o(this,"isStick",!1),o(this,"voxelMode",void 0),o(this,"pallets",new Array),o(this,"cmda",new i.e(0,0)),o(this,"isFullscreen",!1),o(this,"isPointerLock",!1),o(this,"exitID",-1),this.voxelMode=0}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>r});var a=n(10),i=n(503),o=n(505),s=n(246);class r extends a.a{constructor(e,t,n,a,r,l){var h,c,u;super(e.length>0?"pawn ".concat(e):"pawn",new i.a(l.getMaterial(),2,0,!1,!1),new o.a(!0,!1,!0,.5),new s.a(1,1)),u=void 0,(c="pawn")in(h=this)?Object.defineProperty(h,c,{value:u,enumerable:!0,configurable:!0,writable:!0}):h[c]=u,this.pawn=l,this.position.x=Math.floor(t)+.5,this.position.y=Math.floor(n),this.position.z=Math.floor(a)+.5,this.direction.x=r}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>a});const a={TITLE:0,GAME_MODE:1,THEME:2,BACKGROUND:3,VOXEL:4,TEXTURE:5,PLAYABLE:6,SPAWNER:7,ITEM:8,WEAPON:9,ENEMY:10,MOVIE:11,TUTORIAL:12}},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>c});var i=n(353),o=n(505),s=n(503),r=n(10),l=n(5),h=e([l]);l=(h.then?(await h)():h)[0];class c extends r.a{constructor(e){super("angle",new s.a(l.h.UI_ANGLE,1,0,!1,!1),new o.a(!1,!0,!1,0),new i.a(e))}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.d(t,{a:()=>a});class a{constructor(){var e,t,n;n=!1,(t="init")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>a});class a{constructor(e){var t,n,a;a=void 0,(n="target")in(t=this)?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,this.target=e}}},(e,t,n)=>{"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{a:()=>i});class i{constructor(e){a(this,"init",!1),a(this,"point",void 0),this.point=e}}},(e,t,n)=>{"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{a:()=>i});class i{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;a(this,"timeStamp",-1),a(this,"recoveryTime",void 0),a(this,"waitTime",void 0),this.recoveryTime=e,this.waitTime=t}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>a});class a{constructor(){var e,t,n;n=-1,(t="time")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}}},(e,t,n)=>{"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{a:()=>i});class i{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;a(this,"time",0),a(this,"old",-1),a(this,"height",void 0),a(this,"speed",void 0),this.height=e,this.speed=t}}},(e,t,n)=>{"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{a:()=>i});class i{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;a(this,"isHover",!1),a(this,"message",void 0),a(this,"sound",void 0),a(this,"volume",void 0),a(this,"range",void 0),this.message=e,this.sound=n,this.volume=i,this.range=t}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>a});class a{constructor(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t,n,a;a=void 0,(n="secret")in(t=this)?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,this.secret=e}}},(e,t,n)=>{"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{a:()=>i});class i{constructor(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:128,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"explode";a(this,"fall",void 0),a(this,"size",void 0),a(this,"force",void 0),a(this,"minDamage",void 0),a(this,"maxDamage",void 0),a(this,"damageType",void 0),a(this,"sparkTypes",void 0),this.fall=e,this.size=t,this.force=n,this.minDamage=i,this.maxDamage=o,this.damageType=s;for(var r=arguments.length,l=new Array(r>6?r-6:0),h=6;h<r;h++)l[h-6]=arguments[h];this.sparkTypes=l}}},(e,t,n)=>{"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{a:()=>i});class i{constructor(e,t,n){a(this,"spawnTime",performance.now()),a(this,"scale",void 0),a(this,"attacker",void 0),a(this,"isDamage",void 0),this.scale=e,this.attacker=t,this.isDamage=n}}},(e,t,n)=>{"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{a:()=>i});class i{constructor(){a(this,"init",!1),a(this,"rotSpeed",0),a(this,"landing",!1)}}},(e,t,n)=>{"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{a:()=>i});class i{constructor(){a(this,"spawnTime",performance.now()),a(this,"init",!1),a(this,"rotSpeed",0),a(this,"rot",0)}}},(e,t,n)=>{"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{a:()=>i});class i{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;a(this,"daytimeSpeed",void 0),a(this,"nightSpeed",void 0),this.daytimeSpeed=e,this.nightSpeed=t}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>a});class a{constructor(e){var t,n,a;a=void 0,(n="target")in(t=this)?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,this.target=e}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>a});class a{}},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>S,b:()=>T,c:()=>C,d:()=>k,e:()=>O,f:()=>b,g:()=>_,h:()=>x,i:()=>M});n(1),n(2);var i=n(10),o=n(13),s=n(41),r=n(6),l=n(503),h=n(5),c=n(505),u=n(152),p=n(126),d=n(127),g=n(263),m=n(350),f=n(351),y=n(0),v=e([h]);h=(v.then?(await v)():v)[0];class w extends i.a{constructor(e,t,n,a,i){let l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;for(var u=arguments.length,p=new Array(u>8?u-8:0),d=8;d<u;d++)p[d-8]=arguments[d];super("item".concat(e.length>0?" ".concat(e):""),new o.a(.001,0,.001,0),new s.a(i),new r.a(.25,.25),...p);const{position:g}=this;g.x=t,g.y=n+.01,g.z=a;const m=this.getComponent(r.a);m.old.x=g.x,m.old.y=g.y,m.old.z=g.z;const f=this.getComponent(o.a);f.value.x=l,f.value.y=h,f.value.z=c}}class b extends w{constructor(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;super("item gib piece",e,t,n,1,arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,new m.a,new d.a(!0,!0,.5,{health:3,gauge:.05,meat:i,score:i},"player-pickup-meat",h.n),new g.a(2.5,10),new l.a([h.h.EFFECT_GIB1,h.h.EFFECT_GIB2,h.h.EFFECT_GIB3,h.h.EFFECT_GIB4][4*Math.random()|0],0,Math.random()*y.a,Math.random()>.5,Math.random()>.5),new c.a(!0,!0,!0,.1),new u.a(1+.5*Math.random(),Math.random()>.5,!0),new p.a(.1+.4*Math.random(),a,!1))}}class x extends w{constructor(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;super("item gib piece",e,t,n,1,arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,new m.a,new d.a(!0,!0,.5,{health:3,armor:5,gauge:.05,meat:i,score:i},"player-pickup-meat",h.k),new g.a(2.5,10),new l.a([h.h.EFFECT_ICE_GIB1,h.h.EFFECT_ICE_GIB2,h.h.EFFECT_ICE_GIB3,h.h.EFFECT_ICE_GIB4][4*Math.random()|0],0,Math.random()*y.a,Math.random()>.5,Math.random()>.5),new c.a(!0,!0,!0,.1),new u.a(1+.5*Math.random(),Math.random()>.5,!0),new p.a(.1+.4*Math.random(),a,!1))}}class M extends w{constructor(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super("effect stuff",e,t,n,1,arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,new f.a,new d.a(!1,!1,.5,{energy:10},"player-pickup-stamina",h.o),new g.a(2.5,2.5),new l.a(h.h.EFFECT_STUFF,1*a,0,Math.random()>.5,Math.random()>.5),new c.a(!0,!1,!0,.1),new u.a(1+.5*Math.random(),Math.random()>.5,!0))}}class E extends w{constructor(e,t,n,a,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,r=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,p=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,f=arguments.length>9?arguments[9]:void 0;for(var v=arguments.length,w=new Array(v>10?v-10:0),b=10;b<v;b++)w[b-10]=arguments[b];super("effect armor".concat(0===e.length?"":" ".concat(e)),t,n,a,1,s,r,p,new m.a,new d.a(!1,!1,.5,{armor:f},"player-pickup-armor",h.j),new g.a(2.5,2.5),new l.a(i,2*o,Math.random()*y.a,!1,!1),new c.a(!0,!1,!0,.1),new u.a(1+.5*Math.random(),Math.random()>.5,!0),...w)}}class _ extends E{constructor(e,t,n,a){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;super("effect helmet",e,t,n,h.h.ENEMY_GUY_HELMET_STILL,a,i,o,s,5)}}class C extends E{constructor(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;super("effect armor-helmet",e,t,n,h.h.ENEMY_GUY_ARMOR_HELMET,a,i,o,s,5)}}class T extends E{constructor(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;super("effect armor-body",e,t,n,h.h.ENEMY_GUY_ARMOR_BODY,a,i,o,s,5)}}class S extends E{constructor(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;super("effect armor-arm",e,t,n,h.h.ENEMY_GUY_ARMOR_ARM,a,i,o,s,1)}}class k extends E{constructor(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;super("effect armor-sholder",e,t,n,h.h.ENEMY_GUY_ARMOR_SHOULDER,a,i,o,s,1)}}class O extends E{constructor(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;super("effect armor-waist",e,t,n,h.h.ENEMY_GUY_ARMOR_WAIST,a,i,o,s,1)}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.a(e,(async(e,t)=>{try{n(18);var a=n(363),i=n(391),o=n(392),s=n(393),r=n(27),l=n(489),h=n(5),c=n(496),u=n(497),p=n(498),d=n(499),g=e([a,o,s,r,l,h]);async function m(e){console.error("not support script is demo version")}[a,o,s,r,l,h]=g.then?(await g)():g,(0,a.a)(class extends o.a{constructor(e,t,n,a,o,g,m){super();const f=new i.a(Object.values(h.h)),y=new s.a,v=new s.a,w=new c.a,b=new d.a,x=new u.a(g,t),M=new p.a,E=new p.a,_=new p.a,C=new l.a("title",e,t,o,this,w,b,x,M,!0,m.isUseVulkan),T=new r.a("practice",m.maxTextureSize,e,t,this,w,b,x,E,f,v,{}),S=new r.a("game",m.maxTextureSize,e,t,this,w,b,x,_,f,y,n);S.setMaterials(h.h),T.setMaterials(h.h),this.addScenes(C,S,T)}},m),t()}catch(f){t(f)}}))},(e,t,n)=>{"use strict";var a,i,o,s=n(19),r=n(78),l=n(112),h=n(3),c=n(20),u=n(46),p=n(100),d=n(101),g=n(132),m=n(77),f=n(17),y=n(42),v=n(113),w=n(133),b=n(134).set,x=n(231),M=n(276),E=n(170),_=n(277),C=n(80),T=n(102),S=n(114),k=n(137),O="Promise",A=S.CONSTRUCTOR,L=S.REJECTION_EVENT,P=S.SUBCLASSING,I=C.getterFor(O),N=C.set,R=T&&T.prototype,W=T,z=R,D=h.TypeError,F=h.document,U=h.process,H=k.f,B=H,G=!!(F&&F.createEvent&&h.dispatchEvent),Y="unhandledrejection",V=function(e){var t;return!(!y(e)||!f(t=e.then))&&t},j=function(e,t){var n,a,i,o=t.value,s=1==t.state,r=s?e.ok:e.fail,l=e.resolve,h=e.reject,u=e.domain;try{r?(s||(2===t.rejection&&Z(t),t.rejection=1),!0===r?n=o:(u&&u.enter(),n=r(o),u&&(u.exit(),i=!0)),n===e.promise?h(D("Promise-chain cycle")):(a=V(n))?c(a,n,l,h):l(n)):h(o)}catch(e){u&&!i&&u.exit(),h(e)}},K=function(e,t){e.notified||(e.notified=!0,x((function(){for(var n,a=e.reactions;n=a.get();)j(n,e);e.notified=!1,t&&!e.rejection&&q(e)})))},X=function(e,t,n){var a,i;G?((a=F.createEvent("Event")).promise=t,a.reason=n,a.initEvent(e,!1,!0),h.dispatchEvent(a)):a={promise:t,reason:n},!L&&(i=h["on"+e])?i(a):e===Y&&M("Unhandled promise rejection",n)},q=function(e){c(b,h,(function(){var t,n=e.facade,a=e.value;if(J(e)&&(t=E((function(){l?U.emit("unhandledRejection",a,n):X(Y,n,a)})),e.rejection=l||J(e)?2:1,t.error))throw t.value}))},J=function(e){return 1!==e.rejection&&!e.parent},Z=function(e){c(b,h,(function(){var t=e.facade;l?U.emit("rejectionHandled",t):X("rejectionhandled",t,e.value)}))},$=function(e,t,n){return function(a){e(t,a,n)}},Q=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,K(e,!0))},ee=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw D("Promise can't be resolved itself");var a=V(t);a?x((function(){var n={done:!1};try{c(a,t,$(ee,n,e),$(Q,n,e))}catch(t){Q(n,t,e)}})):(e.value=t,e.state=1,K(e,!1))}catch(t){Q({done:!1},t,e)}}};if(A&&(z=(W=function(e){v(this,z),m(e),c(a,this);var t=I(this);try{e($(ee,t),$(Q,t))}catch(e){Q(t,e)}}).prototype,(a=function(e){N(this,{type:O,done:!1,notified:!1,parent:!1,reactions:new _,rejection:!1,state:0,value:void 0})}).prototype=u(z,"then",(function(e,t){var n=I(this),a=H(w(this,W));return n.parent=!0,a.ok=!f(e)||e,a.fail=f(t)&&t,a.domain=l?U.domain:void 0,0==n.state?n.reactions.add(a):x((function(){j(a,n)})),a.promise})),i=function(){var e=new a,t=I(e);this.promise=e,this.resolve=$(ee,t),this.reject=$(Q,t)},k.f=H=function(e){return e===W||undefined===e?new i(e):B(e)},!r&&f(T)&&R!==Object.prototype)){o=R.then,P||u(R,"then",(function(e,t){var n=this;return new W((function(e,t){c(o,n,e,t)})).then(e,t)}),{unsafe:!0});try{delete R.constructor}catch(e){}p&&p(R,z)}s({global:!0,constructor:!0,wrap:!0,forced:A},{Promise:W}),d(W,O,!1,!0),g(O)},(e,t,n)=>{"use strict";var a=n(19),i=n(20),o=n(77),s=n(137),r=n(170),l=n(232);a({target:"Promise",stat:!0,forced:n(233)},{all:function(e){var t=this,n=s.f(t),a=n.resolve,h=n.reject,c=r((function(){var n=o(t.resolve),s=[],r=0,c=1;l(e,(function(e){var o=r++,l=!1;c++,i(n,t,e).then((function(e){l||(l=!0,s[o]=e,--c||a(s))}),h)})),--c||a(s)}));return c.error&&h(c.value),n.promise}})},(e,t,n)=>{"use strict";var a=n(19),i=n(78),o=n(114).CONSTRUCTOR,s=n(102),r=n(83),l=n(17),h=n(46),c=s&&s.prototype;if(a({target:"Promise",proto:!0,forced:o,real:!0},{catch:function(e){return this.then(void 0,e)}}),!i&&l(s)){var u=r("Promise").prototype.catch;c.catch!==u&&h(c,"catch",u,{unsafe:!0})}},(e,t,n)=>{"use strict";var a=n(19),i=n(20),o=n(77),s=n(137),r=n(170),l=n(232);a({target:"Promise",stat:!0,forced:n(233)},{race:function(e){var t=this,n=s.f(t),a=n.reject,h=r((function(){var s=o(t.resolve);l(e,(function(e){i(s,t,e).then(n.resolve,a)}))}));return h.error&&a(h.value),n.promise}})},(e,t,n)=>{"use strict";var a=n(19),i=n(20),o=n(137);a({target:"Promise",stat:!0,forced:n(114).CONSTRUCTOR},{reject:function(e){var t=o.f(this);return i(t.reject,void 0,e),t.promise}})},(e,t,n)=>{"use strict";var a=n(19),i=n(83),o=n(78),s=n(102),r=n(114).CONSTRUCTOR,l=n(234),h=i("Promise"),c=o&&!r;a({target:"Promise",stat:!0,forced:o||r},{resolve:function(e){return l(c&&this===h?s:this,e)}})},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>w});n(1),n(2),n(18),n(14);var i=n(32),o=n(252),s=n(504),r=n(22),l=n(122),h=n(144),c=n(107),u=n(315),p=n(390),d=n(157),g=n(317),m=n(35),f=n(24),y=n(250),v=e([i,p,d]);function w(e,t){let n=null,a=null,v=null,w=null,b=null,x=null,M="title",E=0,_=0,C=0,T=60,S=!1,k=!0,O=!0,A=!0,L=!0,P=!0,I=!1,N=!1,R=!1,W=!1,z={},D={},F={};function U(){let e=performance.now();if(e-C>1e3&&(_=E,E=0,C=e),function(e){var t,a;if(null===(t=x)||void 0===t||!t.hasDebugLog())return;const o=(null===(a=n)||void 0===a?void 0:a.getActiveScene())||null,r=o instanceof i.a&&o.getCamera().hasComponent(s.a)?o.getCamera().getComponent(s.a).value:null;(0,p.a)(r,o,e,_),(0,h.e)()}(T),null!==x){var t;const[e,a]=(0,g.b)(x,g.a),i={size:{width:e,height:a}};null===(t=n)||void 0===t||t.applyScreenData(i)}}function H(){var e;if(!a)return;const t=(null===(e=n)||void 0===e?void 0:e.getActiveScene())||null;if(null===t)return;const[o,s]=t instanceof i.a?t.createTransferVoxelData(t,!0,k):[null,[]];k=!1,null!==o&&(a.postMessage({method:"transfer-render",value:o},s),O=!1,I=!1)}function B(){var e;if(!v)return;const t=(null===(e=n)||void 0===e?void 0:e.getActiveScene())||null;if(null===t)return;const a=t instanceof o.a?t.createTransferUIData(!0):null;if(null!==a)if(d.b){const e=(0,y.a)(z,a);if(e.length>0){E+=e.length,z=a;const t=(0,f.d)(JSON.stringify(e));v.postMessage({method:"transfer-render",value:t},[t.buffer]),A=!1,N=!1}}else v.postMessage({method:"transfer-render",value:a}),A=!1,N=!1}function G(){var e;const t=(null===(e=n)||void 0===e?void 0:e.createTransferUpdateData())||null;if(null!==t)if(d.c){const e=(0,y.a)(D,t);if(e.length>0){E+=e.length,D=t;const n=(0,f.d)(JSON.stringify(e));(0,m.d)().postMessage({method:"transfer-update",value:n},[n.buffer]),L=!1,R=!1}}else(0,m.d)().postMessage({method:"transfer-update",value:t}),L=!1,R=!1}function Y(){var e;const t=(null===(e=n)||void 0===e?void 0:e.createTransferSoundData())||null;if(null!==t)if(d.a){const e=(0,y.a)(F,t);if(e.length>0){E+=e.length,F=t;const n=(0,f.d)(JSON.stringify(e));(0,m.d)().postMessage({method:"transfer-sound",value:n},[n.buffer]),P=!1,W=!1}}else(0,m.d)().postMessage({method:"transfer-sound",value:t}),P=!1,W=!1}function V(e){const t=e.update||null;var a;null!==t&&(null===(a=n)||void 0===a||a.applyUpdateData(t))}(0,r.b)((0,m.d)(),"message",(async o=>{var s,p,g,f,y,E;const{data:_}=o;if(_ instanceof Object)switch(_.method){case"portready":a=_.RaycastChannel,v=_.UIChannel,w=_.ControlChannel,null!==a&&(0,r.b)(a,"message",(e=>{const{data:t}=e;if(t instanceof Object&&"apply-render-data"===t.method)!function(e){var t;O=!0,I&&(H(),U()),(null===(t=n)||void 0===t?void 0:t.getActiveScene())instanceof i.a&&(T=e.fps),V(e)}(t)})),null!==v&&(0,r.b)(v,"message",(e=>{const{data:t}=e;if(t instanceof Object&&"apply-render-data"===t.method)!function(e){var t;A=!0,N&&B(),(null===(t=n)||void 0===t?void 0:t.getActiveScene())instanceof i.a||(T=e.fps),V(e)}(t)})),(0,m.d)().postMessage({method:"portready"});break;case"portstart":null===(s=a)||void 0===s||s.start(),null===(p=v)||void 0===p||p.start(),null===(g=w)||void 0===g||g.start(),(0,m.d)().postMessage({method:"portstart"});break;case"init":_.value&&async function(t){b=await(0,l.b)("setting"),x=new d.d(b),n=new e(b,await(0,l.b)("keyconfig"),await(0,l.b)("saveData",!0),await(0,l.b)("editorData",!0),await(0,l.b)("hordeLoadout"),w,t),M=t.initScene,n.getScenes().forEach((e=>{let t=0;new r.a(e,"paint").on((()=>{var n;const a=(null===(n=x)||void 0===n?void 0:n.getFramerate())||60;t!==a&&("electron"in self?(self.electron.setFramerate(a),e.setPaintFramerate(1/0)):e.setPaintFramerate(a)),t=a;let i=!1;O?(H(),i=!0):I=!0,A?(B(),i=!0):N=!0,i&&U()})),new r.a(e,"update").on((()=>{e.setTickFramerate(Math.max(60,e.getPaintFramerate())),L?G():R=!0,P?Y():W=!0}))})),new r.a(n,"active").on((()=>{k=!0})),new r.a(n,"error").on((()=>{(0,m.d)().postMessage({method:"error"})}));let a=null;(0,r.b)(u.d,"message",(async e=>{var i,o,s,r,l,h,u,p,d,g,m,f,y,v,w;const{data:b}=e;if(b instanceof Object&&S)switch(b.method){case"sleep":var x;a=(null===(i=n)||void 0===i?void 0:i.getActiveSceneName())||t.initScene,"string"==typeof b.scene&&(null===(x=n)||void 0===x||x.activeScene(b.scene)),null===(o=n)||void 0===o||null===(s=o.getActiveScene())||void 0===s||s.sleep(),"string"==typeof b.scene&&(0,c.a)();break;case"unsleep":const e=a||(null===(r=n)||void 0===r?void 0:r.getActiveSceneName())||t.initScene;null===(l=n)||void 0===l||l.activeScene(e,!0),null===(h=n)||void 0===h||null===(u=h.getScene(e))||void 0===u||u.unsleep(),a=null,"title"===e&&(0,c.a)();break;case"run":null===(p=n)||void 0===p||null===(d=p.getActiveScene())||void 0===d||d.run();break;case"stop":null===(g=n)||void 0===g||null===(m=g.getActiveScene())||void 0===m||m.stop();break;case"pause":null===(f=n)||void 0===f||f.activeScene("title");break;case"error":null===(y=n)||void 0===y||null===(v=y.getActiveScene())||void 0===v||v.error();break;case"changescene":null===(w=n)||void 0===w||w.activeScene(b.value,!0)}}))}(_.value).then((()=>(0,m.d)().postMessage({method:"ready"})));break;case"start":S=!0,null!==x&&(x.hasDebugLog()?(0,h.d)():(0,h.b)()),null===(f=n)||void 0===f||f.activeScene(M,!0),null===(y=n)||void 0===y||y.run();break;case"apply-update-data":L=!0,R&&G();break;case"apply-sound-data":!function(e){var t;P=!0,null===(t=n)||void 0===t||t.applySoundData(e),W&&Y(),W=!1}(_.value);break;case"script":t(_.value);break;case"close":stop(),null===(E=n)||void 0===E||E.destroy(),(0,r.c)(),(0,m.d)().postMessage({method:"terminate"})}})),(0,m.d)().postMessage({method:"standby"})}[i,p,d]=v.then?(await v)():v,a()}catch(b){a(b)}}))},(e,t,n)=>{var a=n(28),i=n(229),o=n(45),s=n(25),r=n(110),l=n(201);t.f=a&&!i?Object.defineProperties:function(e,t){s(e);for(var n,a=r(t),i=l(t),h=i.length,c=0;h>c;)o.f(e,n=i[c++],a[n]);return e}},(e,t,n)=>{"use strict";n.d(t,{a:()=>p});n(1),n(2),n(15),n(16),n(285);var a=n(140),i=n(56);function o(e,t,n,a,o,s,r){let[l,h,c]=r;const u=0|t,p=0|n,d=0|a;if(null===e||u<0||u>=l||p<0||p>=h||d<0||d>=c)return-1;return e[(0,i.g)(s,o,u,p,d,l,h,c)]}var s=n(500);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class l{constructor(e,t,n){r(this,"voxel_field",void 0),r(this,"distance_field",void 0),r(this,"morton_field",void 0),r(this,"fill_field",void 0),this.voxel_field=e,this.distance_field=t,this.morton_field=n,this.fill_field=(0,a.a)("int32",this.distance_field.length),this.fill_field.fill(1)}clearData(){this.distance_field.fill(-1),this.morton_field.fill(-1),this.fill_field.fill(0)}getReferenceMorton(e,t,n,a,o){const[s,r,l]=e,h=(0,i.g)(t,0,n,a,o,s,r,l);return this.morton_field[h]}findDistanceFind(e,t,n,a,r,l,h){const[c,u,p]=e,d=new Array,g={};let m=1/0,f=!1;const y=(a,r,l,y)=>{const v=(0,i.g)(t,0,r,l,y,c,u,p);if(r<0||l<0||y<0||r>c-1||l>u-1||y>p-1)return m=Math.min(m,a-1),f=!0,void(h&&(this.morton_field[v]=-1));const w=(0,s.d)(r,l,y);return g[w]?(m=Math.min(m,a-1),f=!0,void(h&&(this.morton_field[v]=this.getReferenceMorton(e,t,r,l,y)))):(g[w]=!0,o(this.voxel_field,r,l,y,0,t,e)!==n?(m=Math.min(m,a-1),f=!0,void(h&&(this.morton_field[v]=(0,s.d)(r,l,y)))):void d.push({count:a,x:r,y:l,z:y}))};y(1,a,r,l);e:for(;d.length>0;){const e=d.shift()||null;if(null===e)break;const{count:t,x:n,y:a,z:o}=e;for(let e=0,s=0|i.j.length;e<s;e=e+1|0){const[s,r,l]=i.j[e];if(y(t+1,n+s,a+r,o+l),f)break e}}return m===1/0?1:m}getDistanceFind(e,t,n,a,o,r,l,h,c,u,p,d,g,m){if(h<0||c<0||u<0||h>p-1||c>d-1||u>g-1)return-1;const f=m?-1:(0,s.d)(o,r,l);for(var y=arguments.length,v=new Array(y>14?y-14:0),w=14;w<y;w++)v[w-14]=arguments[w];if(-1!==f&&v.includes(f))return-1;const b=(0,i.g)(t,0,h,c,u,p,d,g),x=this.distance_field[b],M=0===this.fill_field[b],E=m?this.findDistanceFind(e,t,n,h,c,u,m):a;return M?(this.distance_field[b]=E,this.fill_field[b]=1):this.distance_field[b]=m?Math.max(0,Math.max(this.distance_field[b],E)):Math.max(0,Math.min(this.distance_field[b],E)),M&&(this.morton_field[b]=m?this.morton_field[b]:f),x===this.distance_field[b]?M?E:-1:E}buildPointFind(e,t,n,a,r,l){for(var h=arguments.length,c=new Array(h>6?h-6:0),u=6;u<h;u++)c[u-6]=arguments[u];const[p,d,g]=e,m=new Array,f={},y=o(this.voxel_field,a,r,l,0,n,e)===t,v=this.getDistanceFind(e,n,t,0,a,r,l,a,r,l,p,d,g,y,...c);if(-1===v)return;const w=(i,h,u,v)=>{if(h<0||u<0||v<0||h>p-1||u>d-1||v>g-1)return;const w=(0,s.d)(h,u,v);if(!f[w]&&(f[w]=!0,o(this.voxel_field,h,u,v,0,n,e)===t)){const o=this.getDistanceAll(e,n,t,i,a,r,l,h,u,v,p,d,g,y,...c);-1!==o&&m.push({count:o,x:h,y:u,z:v})}};if(y)w(v,a,r,l);else{const e=(0,s.d)(a,r,l);m.push({count:v,x:a,y:r,z:l}),f[e]=!0}for(;m.length>0;){const e=m.shift()||null;if(null===e)break;const{count:t,x:n,y:a,z:o}=e;for(let e=0,s=0|i.j.length;e<s;e=e+1|0){const[s,r,l]=i.j[e];w(t+1,n+s,a+r,o+l)}}}findDistanceAll(e,t,n,a,r,l){const[h,c,u]=e,p=new Array,d={};let g=1/0,m=!1;const f=(a,r,l,f)=>{if(r<0||l<0||f<0||r>h-1||l>c-1||f>u-1)return g=Math.min(g,a-1),void(m=!0);const y=(0,i.g)(t,0,r,l,f,h,c,u),v=this.distance_field[y];if(-1!==v)return g=Math.min(g,v),void(m=!0);const w=(0,s.d)(r,l,f);return d[w]?(g=Math.min(g,a-1),void(m=!0)):(d[w]=!0,o(this.voxel_field,r,l,f,0,t,e)!==n?(g=Math.min(g,a-1),void(m=!0)):void p.push({count:a,x:r,y:l,z:f}))};f(1,a,r,l);e:for(;p.length>0;){const e=p.shift()||null;if(null===e)break;const{count:t,x:n,y:a,z:o}=e;for(let e=0,s=0|i.j.length;e<s;e=e+1|0){const[s,r,l]=i.j[e];if(f(t+1,n+s,a+r,o+l),m)break e}}return g===1/0?1:g}getDistanceAll(e,t,n,a,o,r,l,h,c,u,p,d,g){let m=arguments.length>13&&void 0!==arguments[13]&&arguments[13];if(h<0||c<0||u<0||h>p-1||c>d-1||u>g-1)return-1;const f=(0,s.d)(o,r,l);for(var y=arguments.length,v=new Array(y>14?y-14:0),w=14;w<y;w++)v[w-14]=arguments[w];if(v.includes(f))return-1;const b=(0,i.g)(t,0,h,c,u,p,d,g),x=this.distance_field[b],M=0===this.fill_field[b],E=m?this.findDistanceAll(e,t,n,h,c,u):a;return M?(this.distance_field[b]=E,this.fill_field[b]=1):this.distance_field[b]=m?Math.max(0,Math.max(this.distance_field[b],E)):Math.max(0,Math.min(this.distance_field[b],E)),x===this.distance_field[b]?M?E:-1:(this.morton_field[b]=f,E)}buildPointAll(e,t,n,a,r,l){for(var h=arguments.length,c=new Array(h>6?h-6:0),u=6;u<h;u++)c[u-6]=arguments[u];const[p,d,g]=e,m=new Array,f={},y=(0,s.d)(a,r,l),v=o(this.voxel_field,a,r,l,0,n,e)===t,w=this.getDistanceAll(e,n,t,0,a,r,l,a,r,l,p,d,g,v,...c);if(-1===w)return;const b=(i,h,u,y)=>{if(h<0||u<0||y<0||h>p-1||u>d-1||y>g-1)return;const w=(0,s.d)(h,u,y);if(!f[w]&&(f[w]=!0,o(this.voxel_field,h,u,y,0,n,e)===t)){const o=this.getDistanceAll(e,n,t,i,a,r,l,h,u,y,p,d,g,v,...c);-1!==o&&m.push({count:o,x:h,y:u,z:y})}};for(b(w,a,r,l),m.push({count:w,x:a,y:r,z:l}),f[y]=!0;m.length>0;){const e=m.shift()||null;if(null===e)break;const{count:t,x:n,y:a,z:o}=e;for(let e=0,s=0|i.j.length;e<s;e=e+1|0){const[s,r,l]=i.j[e];b(t+1,n+s,a+r,o+l)}}}buildPoint(e,t,n,a,i,o,s){for(var r=arguments.length,l=new Array(r>7?r-7:0),h=7;h<r;h++)l[h-7]=arguments[h];return s?this.buildPointAll(e,t,n,a,i,o,...l):this.buildPointFind(e,t,n,a,i,o,...l)}find(e,t,n,a,i,s){const[r,l,h]=e;for(var c=arguments.length,u=new Array(c>6?c-6:0),p=6;p<c;p++)u[p-6]=arguments[p];o(this.voxel_field,a,i,s,0,n,e)===t&&u.includes(this.getReferenceMorton(e,n,a,i,s))&&this.getDistanceFind(e,n,t,0,a,i,s,a,i,s,r,l,h,!0,...u)}buildFind(e,t,n,a){for(var i=arguments.length,o=new Array(i>4?i-4:0),r=4;r<i;r++)o[r-4]=arguments[r];for(let i=0,r=0|a.length;i<r;i=i+1|0){const r=a[i],[l,h,c]=(0,s.a)(r);this.find(e,t,n,l,h,c,...o)}}buildAll(e,t,n,a){this.clearData();for(let i=0,o=0|a.length;i<o;i=i+1|0){const o=a[i],[r,l,h]=(0,s.a)(o);this.buildPointAll(e,t,n,r,l,h)}}}var h=n(0),c=n(24);function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class p{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"uint8",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1;u(this,"voxel_inserts",{}),u(this,"distance_inserts",{}),u(this,"morton_inserts",{}),u(this,"find_distance_fields",new Array),u(this,"build_distance_field",new Array),u(this,"buffer",null),u(this,"is_update",!0),u(this,"is_reflesh_distance_field",!1),u(this,"voxel_field",null),u(this,"distance_field",null),u(this,"morton_field",null),u(this,"distance_field_builder",null),u(this,"width",void 0),u(this,"height",void 0),u(this,"depth",void 0),u(this,"distance",void 0),u(this,"data_type",void 0),u(this,"length",void 0),u(this,"fill",void 0),this.width=0|e,this.height=0|t,this.depth=0|n,this.distance=(0,h.p)(0,0,0,e,t,n),this.data_type=a,this.length=i,this.fill=o,this.setSize(e,t,n)}clear(){this.setSize(1,1,1)}setSize(e,t,n){if(e===this.width&&t===this.height&&n===this.depth&&null!==this.buffer)return;const i=(0,a.a)(this.data_type,e*t*n*this.getLength()),o=(0,a.a)("int32",e*t*n),r=(0,a.a)("int32",e*t*n);this.distance_field_builder=new l(i,o,r),this.buffer=i.buffer,this.width=0|e,this.height=0|t,this.depth=0|n,this.distance=(0,h.p)(0,0,0,e,t,n),this.voxel_field=i,this.distance_field=o,this.morton_field=r,i.fill(this.getFill()),o.fill(1),r.fill(-1);for(const e in this.voxel_inserts)delete this.voxel_inserts[e];for(const e in this.distance_inserts)delete this.distance_inserts[e];for(const e in this.morton_inserts)delete this.morton_inserts[e];let c=0;const u=new Array;for(let a=0;a<e;a=a+1|0)for(let e=0;e<t;e=e+1|0)for(let t=0;t<n;t=t+1|0)c++,u.push((0,s.d)(a,e,t));this.voxel_inserts[0]={count:c,mortons:u},this.is_update=!0}initData(e,t,n,a,o,s){const[r,l,h]=this.getSize(),c=this.getLength(),u=this.getVoxelField(),p=this.getDistanceField(),d=this.getMortonField();if(null!==u&&null!==p&&null!==d){for(const e in this.voxel_inserts)delete this.voxel_inserts[e];for(const e in this.distance_inserts)delete this.distance_inserts[e];for(const e in this.morton_inserts)delete this.morton_inserts[e];for(const e in a)this.voxel_inserts[e]=a[e];for(const e in o)this.distance_inserts[e]=o[e];for(const e in s)this.morton_inserts[e]=s[e];for(let a=0,o=0|r;a<o;a=a+1|0)for(let o=0,s=0|l;o<s;o=o+1|0)for(let s=0,g=0|h;s<g;s=s+1|0){const g=(0,i.g)(c,0,a,o,s,r,l,h),m=(0,i.g)(1,0,a,o,s,r,l,h);u[g]=e[a][o][s],p[m]=t[a][o][s],d[m]=n[a][o][s]}}}getWorldDistance(){return this.distance}getSize(){const{width:e,height:t,depth:n}=this;return[e,t,n]}getFill(){return this.fill}getLength(){return this.length}getBuffer(){return this.buffer}getVoxelField(){return this.voxel_field}getDistanceField(){return this.distance_field}getMortonField(){return this.morton_field}getVoxelInsertDatas(){return this.voxel_inserts}getDistanceInsertDatas(){return this.distance_inserts}getMortonInsertDatas(){return this.morton_inserts}set(e,t,n,r,l){let h=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:this.getVoxelField(),u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:this.getSize();if(null===c)return;const p=0|t,d=0|n,g=0|r,[m,f,y]=u;if(p<0||p>=m||d<0||d>=f||g<0||g>=y)return;const v=c===this.getVoxelField()?this.getLength():1,w=(0,i.g)(v,e,p,d,g,m,f,y),b=c[w];if(b===(0,a.b)(this.data_type,l))return;c[w]=l;let x=null,M=!1;switch(c){case this.getVoxelField():this.is_update=!0,x=this.voxel_inserts,M=!0;break;case this.getDistanceField():this.is_update=!0,x=this.distance_inserts;break;case this.getMortonField():x=this.morton_inserts}if(null!==x){const e=(0,s.d)(t,n,r);if(x[b]){const t=x[b];t.count--,t.mortons.splice(t.mortons.indexOf(e),1),t.count<=0&&delete x[b]}x[l]||(x[l]={count:0,mortons:new Array});const a=x[l];a.count++,a.mortons.push(e)}if(M&&h&&(this.build_distance_field.some((e=>{let[t,n,a]=e;return t===p&&n===d&&a===g}))||this.build_distance_field.push([p,d,g]),null!==this.voxel_field))if(l!==this.getFill())for(let t=0,n=0|i.j.length;t<n;t=t+1|0){const[n,a,r]=i.j[t],l=p+n,h=d+a,c=g+r,m=o(this.voxel_field,l,h,c,e,v,u);if(-1===m||m===this.getFill())continue;const f=(0,s.d)(l,h,c);this.find_distance_fields.includes(f)||this.find_distance_fields.push(f)}else{const e=(0,s.d)(p,d,g);this.find_distance_fields.includes(e)||this.find_distance_fields.push(e)}}get(e,t,n,a){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.getVoxelField(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:this.getSize();return null===i?-1:o(i,t,n,a,e,i===this.getVoxelField()?this.getLength():1,s)}getVoxelInsertData(e){return this.voxel_inserts.hasOwnProperty(e)?this.voxel_inserts[e]:null}getDistanceInsertData(e){return this.distance_inserts.hasOwnProperty(e)?this.distance_inserts[e]:null}getMortonInsertData(e){return this.morton_inserts.hasOwnProperty(e)?this.morton_inserts[e]:null}expand(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0===e&&0===t&&0===n)return;const[a,i,o]=this.getSize(),r=this.getVoxelField(),l=this.getDistanceField(),h=this.getMortonField();this.setSize(a+Math.abs(e),i+Math.abs(t),o+Math.abs(n));const c=Math.abs(e<0?-e:0),u=Math.abs(t<0?-t:0),p=Math.abs(n<0?-n:0);for(let e=a-1|0;e>=0;e=e-1|0)for(let t=i-1|0;t>=0;t=t-1|0)for(let n=o-1|0;n>=0;n=n-1|0){const d=e+c,g=t+u,m=n+p;let f=this.get(0,e,t,n,l,[a,i,o]);f=-1===f?0:f,1!==f&&this.set(0,d,g,m,f,!1,this.getDistanceField());const y=this.getMortonField();let v=this.get(0,e,t,n,h,[a,i,o]);const[w,b,x]=(0,s.a)(v);v=-1===v?-1:(0,s.d)(w-c,b-u,x-p),-1!==v&&this.set(0,d,g,m,v,!1,y);for(let s=0,l=0|this.getLength();s<l;s=s+1|0){let l=this.get(s,e,t,n,r,[a,i,o]);l=-1===l?this.getFill():l,l!==this.getFill()&&this.set(s,d,g,m,l,!1,this.getVoxelField())}}}reduction(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0===e&&0===t&&0===n)return;const[a,i,o]=this.getSize(),r=this.getVoxelField(),l=this.getDistanceField(),h=this.getMortonField();this.setSize(a-Math.abs(e),i-Math.abs(t),o-Math.abs(n));const c=Math.abs(e<0?-e:0),u=Math.abs(t<0?-t:0),p=Math.abs(n<0?-n:0);for(let e=a-1|0;e>=0;e=e-1|0)for(let t=i-1|0;t>=0;t=t-1|0)for(let n=o-1|0;n>=0;n=n-1|0){const d=e-c,g=t-u,m=n-p;let f=this.get(0,e,t,n,l,[a,i,o]);f=-1===f?0:f,1!==f&&this.set(0,d,g,m,f,!1,this.getDistanceField());const y=this.getMortonField();let v=this.get(0,e,t,n,h,[a,i,o]);const[w,b,x]=(0,s.a)(v);v=-1===v?-1:(0,s.d)(w+c,b+u,x+m),-1!==v&&this.set(0,d,g,m,v,!1,y);for(let s=0,l=0|this.getLength();s<l;s=s+1|0){let l=this.get(s,e,t,n,r,[a,i,o]);l=-1===l?this.getFill():l,l!==this.getFill()&&this.set(s,d,g,m,l,!1,this.getVoxelField())}}}requestRefleshDistanceField(){this.is_reflesh_distance_field=!0}cancelRefleshDistanceField(){this.is_reflesh_distance_field=!1}hasUpdate(){return this.is_update}checkUpdate(){let e=this.is_update;if(this.is_reflesh_distance_field){var t;const a=new Array,i=Object.keys(this.voxel_inserts);for(let e=0,t=0|i.length;e<t;e=e+1|0){const t=parseInt(i[e]);var n;if(!isNaN(t)&&t>0)a.push(...(null===(n=this.getVoxelInsertData(t))||void 0===n?void 0:n.mortons)||[])}null===(t=this.distance_field_builder)||void 0===t||t.buildAll(this.getSize(),this.getFill(),this.getLength(),a),(0,c.a)(this.build_distance_field),this.is_reflesh_distance_field=!1,e=!0}else for(;this.build_distance_field.length>0;){const t=this.build_distance_field.shift()||null;if(null!==t){var a;const[e,n,i]=t;null===(a=this.distance_field_builder)||void 0===a||a.buildPoint(this.getSize(),this.getFill(),this.getLength(),e,n,i,!1)}e=!0}var i,o;this.find_distance_fields.length>0&&(null===(i=this.distance_field_builder)||void 0===i||i.buildFind(this.getSize(),this.getFill(),this.getLength(),(null===(o=this.getVoxelInsertData(this.getFill()))||void 0===o?void 0:o.mortons)||[],...this.find_distance_fields),(0,c.a)(this.find_distance_fields),e=!0);return this.is_update=!1,e}}},(e,t,n)=>{n(82)("Int8",(function(e){return function(t,n,a){return e(this,t,n,a)}}))},(e,t,n)=>{n(82)("Int16",(function(e){return function(t,n,a){return e(this,t,n,a)}}))},(e,t,n)=>{n(82)("Int32",(function(e){return function(t,n,a){return e(this,t,n,a)}}))},(e,t,n)=>{n(82)("Uint16",(function(e){return function(t,n,a){return e(this,t,n,a)}}))},(e,t,n)=>{n(82)("Uint32",(function(e){return function(t,n,a){return e(this,t,n,a)}}))},(e,t,n)=>{n(82)("Uint8",(function(e){return function(t,n,a){return e(this,t,n,a)}}),!0)},(e,t,n)=>{n(82)("Float64",(function(e){return function(t,n,a){return e(this,t,n,a)}}))},(e,t,n)=>{"use strict";var a=n(19),i=n(3),o=n(174),s=n(132),r="ArrayBuffer",l=o.ArrayBuffer;a({global:!0,constructor:!0,forced:i.ArrayBuffer!==l},{ArrayBuffer:l}),s(r)},(e,t,n)=>{"use strict";n.d(t,{a:()=>h});n(1),n(2),n(15),n(16),n(14);var a=n(56),i=n(500),o=n(0),s=n(24),r=n(8);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class h{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>[-1,-1,-1,-1,-1];l(this,"hasAdd",void 0),l(this,"paramGetter",void 0),l(this,"size",new o.f(1,1,1)),l(this,"data",{}),l(this,"entitys",new Array),l(this,"stands",new Array),l(this,"points",new Array),l(this,"oldPropertys",new WeakMap),l(this,"oldPoints",new WeakMap),this.hasAdd=e,this.paramGetter=t}hasOverPosition(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;const[o,s,r]=this.getSize();return e+a/2<0||t+i<0||n+a/2<0||e-a/2>=o||t>=s||n-a/2>=r}getDimension(){const[,e,t]=this.getSize();switch(!0){case!(1^e):return 1;case!(1^t):return 2}return 3}calcMortonNumber(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!this.hasOverPosition(e,t,n))switch(this.getDimension()){case 1:return(0,i.b)(e);case 2:return(0,i.c)(e,n);case 3:return(0,i.d)(e,t,n)}return-1}setSize(e,t,n){this.size.x=e,this.size.y=t,this.size.z=n}getSize(){return[this.size.x,this.size.y,this.size.z]}getEntityProperty(e){return this.paramGetter(e)}getOldEntityProperty(e){const t=this.oldPropertys.get(e);return t?[t.x,t.y,t.z,t.rx,t.ry]:[-1,-1,-1,-1,-1]}add(e){this.hasAdd(e)&&!this.stands.includes(e)&&!this.entitys.includes(e)&&this.stands.push(e)}remove(e){if(this.entitys.includes(e)){this.entitys.splice(this.entitys.indexOf(e),1);const t=this.oldPoints.get(e)||null;null!==t&&this.appendCells(e,new Array,t),this.oldPropertys.delete(e),this.oldPoints.delete(e)}this.stands.includes(e)&&this.stands.splice(this.stands.indexOf(e),1)}hasEntity(e){return this.hasAdd(e)}clear(){this.size.x=0,this.size.y=0,this.size.z=0;for(const e in this.data)delete this.data[e];this.entitys.forEach((e=>{this.oldPropertys.delete(e),this.oldPoints.delete(e)})),(0,s.a)(this.points),(0,s.a)(this.entitys),(0,s.a)(this.stands)}getCell(e){return this.data[e]||new Array}getPointCell(e,t,n){const a=this.calcMortonNumber(e,t,n);return this.getCell(a)}getAppendPoints(){return this.points}setOldPosition(e){const t=this.oldPropertys.get(e)||null;if(null!==t){const[n,a,i,o,s]=this.getEntityProperty(e),r=Math.floor(n-o/2),l=Math.floor(a),h=Math.floor(i-o/2),c=Math.ceil(n+o/2),u=Math.ceil(a+s),p=Math.ceil(i+o/2);t.sx=r,t.sy=l,t.sz=h,t.ex=c,t.ey=u,t.ez=p,t.x=n,t.y=a,t.z=i,t.rx=o,t.ry=s}}initOldPosition(e){const t={x:-1,y:-1,z:-1,rx:-1,ry:-1,sx:-1,sy:-1,sz:-1,ex:-1,ey:-1,ez:-1};return this.oldPropertys.set(e,t),t}appendCells(e,t,n){const a=e.getID();for(let e=0,i=0|n.length;e<i;e=e+1|0){const i=n[e];if(t.includes(i))continue;const o=this.data[i]||null;null!==o&&(o.splice(o.indexOf(a),1),o.length<=0&&delete this.data[i])}for(let e=0,n=0|t.length;e<n;e=e+1|0){const n=t[e],i=this.data[n]||null;null===i?this.data[n]=[a]:i.includes(a)||(i.push(a),this.points.includes(n)||this.points.push(n))}}update(e,t,n){for(this.setSize(e,t,n);this.stands.length>0;){const e=this.stands.shift()||null;null!==e&&this.entitys.push(e)}for(let i=0,s=0|this.entitys.length;i<s;i=i+1|0){const s=this.entitys[i],[l,h,c,u,p]=this.getEntityProperty(s);let d=this.oldPropertys.get(s)||null;if(null===d&&(d=this.initOldPosition(s)),-1!==l&&-1!==h&&-1!==c&&!this.hasOverPosition(l,h,c,u,p)){let i=this.oldPoints.get(s)||null;null===i&&(i=new Array);const g=Math.floor(l-u/2),m=Math.floor(h),f=Math.floor(c-u/2),y=Math.floor(l+u/2),v=Math.floor(h+p),w=Math.floor(c+u/2);if(d.sx!==g||d.sy!==m||d.sz!==f||d.ex!==y||d.ey!==v||d.ez!==w){const b=-1===d.x?l:d.x,x=-1===d.y?h:d.y,M=-1===d.z?c:d.z,E=d.rx?u:d.rx,_=d.ry?p:d.ry,C=l-b,T=h-x,S=c-M,k=(0,o.p)(0,0,0,e,t,n),O=Math.min((0,o.p)(C,T,S,0,0,0),k),[A,L]=(0,o.n)(C,T,S,0,0,0),P=Math.min(O,Math.max(Math.min(u,p),Math.min(E,_))/2,.5),[I,N,R]=(0,o.r)(A,L,0,0,1),W=this.getDimension();let z=0;const D=new Array;for(;;){const n=b+z*I,i=x+z*N,o=M+z*R;let s=new Array;switch(W){case 1:s=(0,a.a)(n,u,e);break;case 2:s=(0,a.b)(n,o,u,Math.max(e,t));break;case 3:s=(0,a.c)(n,i,o,u,p)}for(let e=0,t=0|s.length;e<t;e=e+W|0){const t=s[e],n=s[e+1],a=s[e+2];let i=-1;switch(W){case 1:i=this.calcMortonNumber(t,0,0);break;case 2:i=this.calcMortonNumber(t,0,n);break;case 3:i=this.calcMortonNumber(t,n,a)}-1===i||D.includes(i)||D.push(i)}if(z>=O)break;if(z=(0,r.a)((0,r.c)(z+P,O,1e5,Math.ceil),0,O),z<=0)break}0===P&&(d.sx=g,d.sy=m,d.sz=f,d.ex=y,d.ey=v,d.ez=w),this.oldPoints.set(s,D),this.appendCells(s,D,i)}}d.x=l,d.y=h,d.z=c,d.rx=u,d.ry=p}}}},(e,t,n)=>{var a=n(19),i=n(3),o=n(231),s=n(77),r=n(136),l=n(112),h=i.process;a({global:!0,enumerable:!0,noTargetGet:!0},{queueMicrotask:function(e){r(arguments.length,1),s(e);var t=l&&h.domain;o(t?t.bind(e):e)}})},(e,t,n)=>{n(377),n(378)},(e,t,n)=>{var a=n(19),i=n(3),o=n(134).clear;a({global:!0,bind:!0,enumerable:!0,forced:i.clearImmediate!==o},{clearImmediate:o})},(e,t,n)=>{var a=n(19),i=n(3),o=n(134).set;a({global:!0,bind:!0,enumerable:!0,forced:i.setImmediate!==o},{setImmediate:o})},()=>{},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>s});var i=n(301),o=e([i]);i=(o.then?(await o)():o)[0];class s extends i.a{}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.d(t,{a:()=>s});n(1),n(2),n(14),n(15),n(16),n(18);var a=n(90);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const o=new Map;new Array;class s{constructor(){i(this,"urls",void 0),i(this,"datas",Array()),i(this,"locations",new Array),i(this,"isTransfer",!1);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.urls=t}async load(){this.datas.length>0||this.datas.push(...await Promise.all(this.urls.map((async e=>(o.has(e)||o.set(e,(await(0,a.a)(e)).source),o.get(e))))))}getUrls(){return this.urls}getDatas(){return this.datas}getLocations(){return this.locations}hasTransfer(){return this.isTransfer}createTransferData(){const{urls:e,locations:t}=this;return this.isTransfer=!0,{urls:e,locations:t}}}},(e,t,n)=>{"use strict";n(383);var a,i=n(19),o=n(28),s=n(247),r=n(3),l=n(89),h=n(11),c=n(46),u=n(303),p=n(113),d=n(29),g=n(304),m=n(305),f=n(142),y=n(178).codeAt,v=n(307),w=n(43),b=n(101),x=n(136),M=n(248),E=n(80),_=E.set,C=E.getterFor("URL"),T=M.URLSearchParams,S=M.getState,k=r.URL,O=r.TypeError,A=r.parseInt,L=Math.floor,P=Math.pow,I=h("".charAt),N=h(/./.exec),R=h([].join),W=h(1..toString),z=h([].pop),D=h([].push),F=h("".replace),U=h([].shift),H=h("".split),B=h("".slice),G=h("".toLowerCase),Y=h([].unshift),V="Invalid scheme",j="Invalid host",K="Invalid port",X=/[a-z]/i,q=/[\d+-.a-z]/i,J=/\d/,Z=/^0x/i,$=/^[0-7]+$/,Q=/^\d+$/,ee=/^[\da-f]+$/i,te=/[\0\t\n\r #%/:<>?@[\\\]^|]/,ne=/[\0\t\n\r #/:<>?@[\\\]^|]/,ae=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,ie=/[\t\n\r]/g,oe=function(e){var t,n,a,i;if("number"==typeof e){for(t=[],n=0;n<4;n++)Y(t,e%256),e=L(e/256);return R(t,".")}if("object"==typeof e){for(t="",a=function(e){for(var t=null,n=1,a=null,i=0,o=0;o<8;o++)0!==e[o]?(i>n&&(t=a,n=i),a=null,i=0):(null===a&&(a=o),++i);return i>n&&(t=a,n=i),t}(e),n=0;n<8;n++)i&&0===e[n]||(i&&(i=!1),a===n?(t+=n?":":"::",i=!0):(t+=W(e[n],16),n<7&&(t+=":")));return"["+t+"]"}return e},se={},re=g({},se,{" ":1,'"':1,"<":1,">":1,"`":1}),le=g({},re,{"#":1,"?":1,"{":1,"}":1}),he=g({},le,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),ce=function(e,t){var n=y(e,0);return n>32&&n<127&&!d(t,e)?e:encodeURIComponent(e)},ue={ftp:21,file:null,http:80,https:443,ws:80,wss:443},pe=function(e,t){var n;return 2==e.length&&N(X,I(e,0))&&(":"==(n=I(e,1))||!t&&"|"==n)},de=function(e){var t;return e.length>1&&pe(B(e,0,2))&&(2==e.length||"/"===(t=I(e,2))||"\\"===t||"?"===t||"#"===t)},ge=function(e){return"."===e||"%2e"===G(e)},me={},fe={},ye={},ve={},we={},be={},xe={},Me={},Ee={},_e={},Ce={},Te={},Se={},ke={},Oe={},Ae={},Le={},Pe={},Ie={},Ne={},Re={},We=function(e,t,n){var a,i,o,s=w(e);if(t){if(i=this.parse(s))throw O(i);this.searchParams=null}else{if(void 0!==n&&(a=new We(n,!0)),i=this.parse(s,null,a))throw O(i);(o=S(new T)).bindURL(this),this.searchParams=o}};We.prototype={type:"URL",parse:function(e,t,n){var i,o,s,r,l,h=this,c=t||me,u=0,p="",g=!1,y=!1,v=!1;for(e=w(e),t||(h.scheme="",h.username="",h.password="",h.host=null,h.port=null,h.path=[],h.query=null,h.fragment=null,h.cannotBeABaseURL=!1,e=F(e,ae,"")),e=F(e,ie,""),i=m(e);u<=i.length;){switch(o=i[u],c){case me:if(!o||!N(X,o)){if(t)return V;c=ye;continue}p+=G(o),c=fe;break;case fe:if(o&&(N(q,o)||"+"==o||"-"==o||"."==o))p+=G(o);else{if(":"!=o){if(t)return V;p="",c=ye,u=0;continue}if(t&&(h.isSpecial()!=d(ue,p)||"file"==p&&(h.includesCredentials()||null!==h.port)||"file"==h.scheme&&!h.host))return;if(h.scheme=p,t)return void(h.isSpecial()&&ue[h.scheme]==h.port&&(h.port=null));p="","file"==h.scheme?c=ke:h.isSpecial()&&n&&n.scheme==h.scheme?c=ve:h.isSpecial()?c=Me:"/"==i[u+1]?(c=we,u++):(h.cannotBeABaseURL=!0,D(h.path,""),c=Ie)}break;case ye:if(!n||n.cannotBeABaseURL&&"#"!=o)return V;if(n.cannotBeABaseURL&&"#"==o){h.scheme=n.scheme,h.path=f(n.path),h.query=n.query,h.fragment="",h.cannotBeABaseURL=!0,c=Re;break}c="file"==n.scheme?ke:be;continue;case ve:if("/"!=o||"/"!=i[u+1]){c=be;continue}c=Ee,u++;break;case we:if("/"==o){c=_e;break}c=Pe;continue;case be:if(h.scheme=n.scheme,o==a)h.username=n.username,h.password=n.password,h.host=n.host,h.port=n.port,h.path=f(n.path),h.query=n.query;else if("/"==o||"\\"==o&&h.isSpecial())c=xe;else if("?"==o)h.username=n.username,h.password=n.password,h.host=n.host,h.port=n.port,h.path=f(n.path),h.query="",c=Ne;else{if("#"!=o){h.username=n.username,h.password=n.password,h.host=n.host,h.port=n.port,h.path=f(n.path),h.path.length--,c=Pe;continue}h.username=n.username,h.password=n.password,h.host=n.host,h.port=n.port,h.path=f(n.path),h.query=n.query,h.fragment="",c=Re}break;case xe:if(!h.isSpecial()||"/"!=o&&"\\"!=o){if("/"!=o){h.username=n.username,h.password=n.password,h.host=n.host,h.port=n.port,c=Pe;continue}c=_e}else c=Ee;break;case Me:if(c=Ee,"/"!=o||"/"!=I(p,u+1))continue;u++;break;case Ee:if("/"!=o&&"\\"!=o){c=_e;continue}break;case _e:if("@"==o){g&&(p="%40"+p),g=!0,s=m(p);for(var b=0;b<s.length;b++){var x=s[b];if(":"!=x||v){var M=ce(x,he);v?h.password+=M:h.username+=M}else v=!0}p=""}else if(o==a||"/"==o||"?"==o||"#"==o||"\\"==o&&h.isSpecial()){if(g&&""==p)return"Invalid authority";u-=m(p).length+1,p="",c=Ce}else p+=o;break;case Ce:case Te:if(t&&"file"==h.scheme){c=Ae;continue}if(":"!=o||y){if(o==a||"/"==o||"?"==o||"#"==o||"\\"==o&&h.isSpecial()){if(h.isSpecial()&&""==p)return j;if(t&&""==p&&(h.includesCredentials()||null!==h.port))return;if(r=h.parseHost(p))return r;if(p="",c=Le,t)return;continue}"["==o?y=!0:"]"==o&&(y=!1),p+=o}else{if(""==p)return j;if(r=h.parseHost(p))return r;if(p="",c=Se,t==Te)return}break;case Se:if(!N(J,o)){if(o==a||"/"==o||"?"==o||"#"==o||"\\"==o&&h.isSpecial()||t){if(""!=p){var E=A(p,10);if(E>65535)return K;h.port=h.isSpecial()&&E===ue[h.scheme]?null:E,p=""}if(t)return;c=Le;continue}return K}p+=o;break;case ke:if(h.scheme="file","/"==o||"\\"==o)c=Oe;else{if(!n||"file"!=n.scheme){c=Pe;continue}if(o==a)h.host=n.host,h.path=f(n.path),h.query=n.query;else if("?"==o)h.host=n.host,h.path=f(n.path),h.query="",c=Ne;else{if("#"!=o){de(R(f(i,u),""))||(h.host=n.host,h.path=f(n.path),h.shortenPath()),c=Pe;continue}h.host=n.host,h.path=f(n.path),h.query=n.query,h.fragment="",c=Re}}break;case Oe:if("/"==o||"\\"==o){c=Ae;break}n&&"file"==n.scheme&&!de(R(f(i,u),""))&&(pe(n.path[0],!0)?D(h.path,n.path[0]):h.host=n.host),c=Pe;continue;case Ae:if(o==a||"/"==o||"\\"==o||"?"==o||"#"==o){if(!t&&pe(p))c=Pe;else if(""==p){if(h.host="",t)return;c=Le}else{if(r=h.parseHost(p))return r;if("localhost"==h.host&&(h.host=""),t)return;p="",c=Le}continue}p+=o;break;case Le:if(h.isSpecial()){if(c=Pe,"/"!=o&&"\\"!=o)continue}else if(t||"?"!=o)if(t||"#"!=o){if(o!=a&&(c=Pe,"/"!=o))continue}else h.fragment="",c=Re;else h.query="",c=Ne;break;case Pe:if(o==a||"/"==o||"\\"==o&&h.isSpecial()||!t&&("?"==o||"#"==o)){if(".."===(l=G(l=p))||"%2e."===l||".%2e"===l||"%2e%2e"===l?(h.shortenPath(),"/"==o||"\\"==o&&h.isSpecial()||D(h.path,"")):ge(p)?"/"==o||"\\"==o&&h.isSpecial()||D(h.path,""):("file"==h.scheme&&!h.path.length&&pe(p)&&(h.host&&(h.host=""),p=I(p,0)+":"),D(h.path,p)),p="","file"==h.scheme&&(o==a||"?"==o||"#"==o))for(;h.path.length>1&&""===h.path[0];)U(h.path);"?"==o?(h.query="",c=Ne):"#"==o&&(h.fragment="",c=Re)}else p+=ce(o,le);break;case Ie:"?"==o?(h.query="",c=Ne):"#"==o?(h.fragment="",c=Re):o!=a&&(h.path[0]+=ce(o,se));break;case Ne:t||"#"!=o?o!=a&&("'"==o&&h.isSpecial()?h.query+="%27":h.query+="#"==o?"%23":ce(o,se)):(h.fragment="",c=Re);break;case Re:o!=a&&(h.fragment+=ce(o,re))}u++}},parseHost:function(e){var t,n,a;if("["==I(e,0)){if("]"!=I(e,e.length-1))return j;if(t=function(e){var t,n,a,i,o,s,r,l=[0,0,0,0,0,0,0,0],h=0,c=null,u=0,p=function(){return I(e,u)};if(":"==p()){if(":"!=I(e,1))return;u+=2,c=++h}for(;p();){if(8==h)return;if(":"!=p()){for(t=n=0;n<4&&N(ee,p());)t=16*t+A(p(),16),u++,n++;if("."==p()){if(0==n)return;if(u-=n,h>6)return;for(a=0;p();){if(i=null,a>0){if(!("."==p()&&a<4))return;u++}if(!N(J,p()))return;for(;N(J,p());){if(o=A(p(),10),null===i)i=o;else{if(0==i)return;i=10*i+o}if(i>255)return;u++}l[h]=256*l[h]+i,2!=++a&&4!=a||h++}if(4!=a)return;break}if(":"==p()){if(u++,!p())return}else if(p())return;l[h++]=t}else{if(null!==c)return;u++,c=++h}}if(null!==c)for(s=h-c,h=7;0!=h&&s>0;)r=l[h],l[h--]=l[c+s-1],l[c+--s]=r;else if(8!=h)return;return l}(B(e,1,-1)),!t)return j;this.host=t}else if(this.isSpecial()){if(e=v(e),N(te,e))return j;if(t=function(e){var t,n,a,i,o,s,r,l=H(e,".");if(l.length&&""==l[l.length-1]&&l.length--,(t=l.length)>4)return e;for(n=[],a=0;a<t;a++){if(""==(i=l[a]))return e;if(o=10,i.length>1&&"0"==I(i,0)&&(o=N(Z,i)?16:8,i=B(i,8==o?1:2)),""===i)s=0;else{if(!N(10==o?Q:8==o?$:ee,i))return e;s=A(i,o)}D(n,s)}for(a=0;a<t;a++)if(s=n[a],a==t-1){if(s>=P(256,5-t))return null}else if(s>255)return null;for(r=z(n),a=0;a<n.length;a++)r+=n[a]*P(256,3-a);return r}(e),null===t)return j;this.host=t}else{if(N(ne,e))return j;for(t="",n=m(e),a=0;a<n.length;a++)t+=ce(n[a],se);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return d(ue,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"==this.scheme&&1==t&&pe(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,n=e.username,a=e.password,i=e.host,o=e.port,s=e.path,r=e.query,l=e.fragment,h=t+":";return null!==i?(h+="//",e.includesCredentials()&&(h+=n+(a?":"+a:"")+"@"),h+=oe(i),null!==o&&(h+=":"+o)):"file"==t&&(h+="//"),h+=e.cannotBeABaseURL?s[0]:s.length?"/"+R(s,"/"):"",null!==r&&(h+="?"+r),null!==l&&(h+="#"+l),h},setHref:function(e){var t=this.parse(e);if(t)throw O(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"==e)try{return new ze(e.path[0]).origin}catch(e){return"null"}return"file"!=e&&this.isSpecial()?e+"://"+oe(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(w(e)+":",me)},getUsername:function(){return this.username},setUsername:function(e){var t=m(w(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<t.length;n++)this.username+=ce(t[n],he)}},getPassword:function(){return this.password},setPassword:function(e){var t=m(w(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<t.length;n++)this.password+=ce(t[n],he)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?oe(e):oe(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,Ce)},getHostname:function(){var e=this.host;return null===e?"":oe(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,Te)},getPort:function(){var e=this.port;return null===e?"":w(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""==(e=w(e))?this.port=null:this.parse(e,Se))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+R(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,Le))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""==(e=w(e))?this.query=null:("?"==I(e,0)&&(e=B(e,1)),this.query="",this.parse(e,Ne)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){""!=(e=w(e))?("#"==I(e,0)&&(e=B(e,1)),this.fragment="",this.parse(e,Re)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var ze=function(e){var t=p(this,De),n=x(arguments.length,1)>1?arguments[1]:void 0,a=_(t,new We(e,!1,n));o||(t.href=a.serialize(),t.origin=a.getOrigin(),t.protocol=a.getProtocol(),t.username=a.getUsername(),t.password=a.getPassword(),t.host=a.getHost(),t.hostname=a.getHostname(),t.port=a.getPort(),t.pathname=a.getPathname(),t.search=a.getSearch(),t.searchParams=a.getSearchParams(),t.hash=a.getHash())},De=ze.prototype,Fe=function(e,t){return{get:function(){return C(this)[e]()},set:t&&function(e){return C(this)[t](e)},configurable:!0,enumerable:!0}};if(o&&(u(De,"href",Fe("serialize","setHref")),u(De,"origin",Fe("getOrigin")),u(De,"protocol",Fe("getProtocol","setProtocol")),u(De,"username",Fe("getUsername","setUsername")),u(De,"password",Fe("getPassword","setPassword")),u(De,"host",Fe("getHost","setHost")),u(De,"hostname",Fe("getHostname","setHostname")),u(De,"port",Fe("getPort","setPort")),u(De,"pathname",Fe("getPathname","setPathname")),u(De,"search",Fe("getSearch","setSearch")),u(De,"searchParams",Fe("getSearchParams")),u(De,"hash",Fe("getHash","setHash"))),c(De,"toJSON",(function(){return C(this).serialize()}),{enumerable:!0}),c(De,"toString",(function(){return C(this).serialize()}),{enumerable:!0}),k){var Ue=k.createObjectURL,He=k.revokeObjectURL;Ue&&c(ze,"createObjectURL",l(Ue,k)),He&&c(ze,"revokeObjectURL",l(He,k))}b(ze,"URL"),i({global:!0,constructor:!0,forced:!s,sham:!o},{URL:ze})},(e,t,n)=>{"use strict";var a=n(178).charAt,i=n(43),o=n(80),s=n(236),r="String Iterator",l=o.set,h=o.getterFor(r);s(String,"String",(function(e){l(this,{type:r,string:i(e),index:0})}),(function(){var e,t=h(this),n=t.string,i=t.index;return i>=n.length?{value:void 0,done:!0}:(e=a(n,i),t.index+=e.length,{value:e,done:!1})}))},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>r});n(18);var i=n(313),o=n(90),s=e([i]);async function r(e){if("string"==typeof e){if("createImageBitmap"in self){const t=(await(0,o.a)(e,"blob")).source;return await self.createImageBitmap(t)}if("Image"in self){if(Image.prototype.decode){const e=new Image;return await e.decode(),e}return await new Promise((t=>{const n=new Image;n.onload=()=>{t(n)},n.onerror=()=>{throw new Error("Not found image to ".concat(e))},n.src=e}))}}else{if(0===e.width||0===e.height)return null;if("OffscreenCanvas"in self&&e instanceof self.OffscreenCanvas)return e.transferToImageBitmap();if("HTMLCanvasElement"in self&&e instanceof self.HTMLCanvasElement){const t=await new Promise((t=>{e.toBlob((e=>{e instanceof Blob&&t(e)}))}));return await self.createImageBitmap(t)}}return null}const l=(0,(i=(s.then?(await s)():s)[0]).a)(0,0);l.getContext("2d");a()}catch(h){a(h)}}))},(e,t,n)=>{"use strict";n.d(t,{a:()=>s});n(7),n(249),n(180),n(18),n(1),n(2),n(214),n(215);var a=n(22),i=n(310);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class s{constructor(e,t){o(this,"worker",void 0),o(this,"source",void 0);const n=t.toString().match(/^function\s*\w*\s*\([\w\s,]*\)\s*{([\w\W]*?)}$/),a=(0,i.b)("text/javascript",null!==n?n.length>2?"\n\t\t\tonmessage = (".concat(n[1],") => {\n\t\t\t\t").concat(n[2],"\n\t\t\t};\n\t\t"):"\n\t\t\tonmessage = () => {\n\t\t\t\t".concat(n[1],"\n\t\t\t};\n\t\t"):"");this.source=a,this.worker=new e(a)}exec(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new Promise(((t,n)=>{const i=e=>{(0,a.d)(this.worker,"message",i),(0,a.d)(this.worker,"error",o),t(e.data)},o=e=>{(0,a.d)(this.worker,"message",i),(0,a.d)(this.worker,"error",o),n(e)};(0,a.b)(this.worker,"message",i),(0,a.b)(this.worker,"error",o),this.worker.postMessage(e)}))}terminate(){URL.revokeObjectURL(this.source),this.worker.terminate()}}},(e,t,n)=>{"use strict";n.a(e,(async(e,t)=>{try{n(15),n(16),n(285),n(1),n(2);var a=n(313),i=(n(250),e([a]));a=(i.then?(await i)():i)[0];const o=(0,a.a)(0,0).getContext("webgl2"),s=null===o?null:o.getExtension("EXT_texture_filter_anisotropic")||o.getExtension("MOZ_EXT_texture_filter_anisotropic")||o.getExtension("WEBKIT_EXT_texture_filter_anisotropic");null===o||o.MAX_TEXTURE_SIZE,null===o||o.MAX_3D_TEXTURE_SIZE,null===o||o.MAX_COLOR_ATTACHMENTS,null!==o&&null!==s&&o.getParameter(s.MAX_TEXTURE_MAX_ANISOTROPY_EXT);t()}catch(e){t(e)}}))},(e,t,n)=>{"use strict";n(1),n(117),n(143),n(118),n(119),n(120);Float32Array},(e,t,n)=>{"use strict";n.d(t,{a:()=>u});n(18),n(1),n(2);var a=n(381),i=n(22);const o=["touchstart","touchend","mousedown","keydown"],s=new WeakMap;function r(e){if(s.get(e)||"suspended"!==e.state)return e;const t=self.document.body;function n(){o.forEach((e=>(0,i.d)(t,e,a))),s.delete(e)}function a(){e.resume().then(n)}return o.forEach((e=>(0,i.b)(t,e,a))),s.set(e,!0),e}var l=n(90),h=n(35);let c=null;if("AudioContext"in self){c=new AudioContext;try{r(c)}catch(e){const t=()=>{(0,i.d)((0,h.d)(),"DOMContentLoaded",t),c&&r(c)};(0,i.b)((0,h.d)(),"DOMContentLoaded",t)}}class u extends a.a{async load(){const e=this.getDatas();0===e.length&&e.push(...await Promise.all(this.getUrls().map((async e=>c?c.decodeAudioData((await(0,l.a)(e,"arraybuffer")).source):null))))}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>y});n(1),n(2),n(117),n(143),n(118),n(119),n(120),n(121);var a=n(505),i=n(75),o=n(503),s=n(504),r=(n(24),n(92)),l=n(140);function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class c{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;h(this,"data",void 0),h(this,"width",void 0),h(this,"height",void 0),h(this,"depth",void 0),this.data=e,this.width=0|t,this.height=0|n,this.depth=0|a}}class u{constructor(e){h(this,"maxTextureSize",void 0),h(this,"buffers",{}),this.maxTextureSize=e}get(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.buffers[e];return(0,l.c)()&&n.data.buffer instanceof self.SharedArrayBuffer||!t?n:new c((0,r.a)(n.data),n.width,n.height,n.depth)}has(e){return this.buffers.hasOwnProperty(e)}require(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const[o,s,r]=function(e,t){return[e%t,Math.max(1,Math.floor(e/t))%t,Math.min(t,Math.max(1,Math.floor(Math.floor(e/t)/t)))]}(n,this.maxTextureSize),h=o*s*r*a;return this.buffers.hasOwnProperty(e)&&this.buffers[e].data.length===h||(this.buffers[e]=new c((0,l.a)(t,h,i),o,s,r)),this.buffers[e]}}n(105);var p=n(0);function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){return e[t]}const m=16,f=21;class y{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;d(this,"setting",void 0),d(this,"buffers",void 0),d(this,"maxDrawDistance",void 0),d(this,"oldScene",null),this.setting=e,this.buffers=new u(t),this.maxDrawDistance=n}getClusterResolution(){return 16}lightCullingData(e,t){const n=e.getCamera(),r=e.getSun(),h=e.getMaterialManager().getMaterials(),c=new Array;let u=0;for(let e=0,r=0|t.length;e<r;e=e+1|0){var d;const r=t[e]||null;if(null===r)continue;const{position:g}=r,f=r.getComponent(o.a),y=h.indexOf(f.material)||0;if(y<=0)continue;let v=!1,w=0;const b=r.getComponent(i.a)||null;if(null!==b){if(!r.hasComponent(s.a))continue;const e=r.getComponent(i.a);if(r.getComponent(s.a).value!==n)continue;g.x=e.position.x*(e.position.z/n.hudFov),g.y=e.position.y*(e.position.z/n.hudFov),g.z=e.position.z,e.fix.x=e.position.x*(e.position.z/n.fov),e.fix.y=e.position.y*(e.position.z/n.fov),e.fix.z=e.position.z,f.scale=e.scale*(e.position.z/n.hudFov);const t=e.position.x*Math.abs(Math.sin(e.position.y*p.b));w=e.isFixRotate?(0,p.t)((Math.sin(t)+p.b*Math.sign(e.position.x)*(Math.abs(Math.max(0,.5-n.hudFov))/.25))*(Math.PI/16+Math.abs(Math.max(0,n.hudFov-.5))/.25*16)*(Math.abs(t)/.25)):0,f.rotate=e.rotate,v=!0}const x=r.getComponent(a.a),M=x.bottom*f.scale,E=g.x,_=g.y,C=g.z,[T,S,k]=v?(0,p.r)(n.direction.x,n.direction.y,E,_,C):[E,_,C],O=T+(v?n.position.x:0),A=S+(v?n.position.y:0)+M,L=k+(v?n.position.z:0),P=v?r.getComponent(i.a).position.z:(0,p.p)(O,A,L,n.position.x,n.position.y,n.position.z);if(P>this.maxDrawDistance)continue;const[I,N]=(0,p.n)(O,A,L,n.position.x,n.position.y,n.position.z),[R,W]=(0,p.i)(I,N,n.direction.x,n.direction.y);R>p.b&&W>p.b||((0,l.d)(c,m,u,0,P),(0,l.d)(c,m,u,1,g.x),(0,l.d)(c,m,u,2,g.y),(0,l.d)(c,m,u,3,g.z),(0,l.d)(c,m,u,4,M),(0,l.d)(c,m,u,5,f.scale),(0,l.d)(c,m,u,6,(null===(d=f.material)||void 0===d?void 0:d.bounding)||0),(0,l.d)(c,m,u,7,null!==b?b.fix.x:x.axes.x?1:0),(0,l.d)(c,m,u,8,null!==b?b.fix.y:x.axes.y?1:0),(0,l.d)(c,m,u,9,null!==b?b.fix.z:x.axes.z?1:0),(0,l.d)(c,m,u,10,(0,p.t)(f.rotate)),(0,l.d)(c,m,u,11,f.flip.x?-1:1),(0,l.d)(c,m,u,12,f.flip.y?-1:1),(0,l.d)(c,m,u,13,v?1:0),(0,l.d)(c,m,u,14,v?w:0),(0,l.d)(c,m,u,15,y),u++)}return{billboard_datas:new Float32Array(c),billboard_length:u,camera:{position:{x:n.position.x,y:n.position.y,z:n.position.z},direction:{x:n.direction.x,y:n.direction.y,z:n.direction.z},fov:n.fov,hudFov:n.hudFov,zoom:n.zoom,light:n.light},sun:{direction:{x:r.direction.x,y:r.direction.y}}}}buildMaterials(e,t,n){if(!n&&this.buffers.has("materials")&&!e.checkUpdate()&&!t.checkUpdate())return{materials:null};const a=[],i=t.getMaterials();for(const t in i){const n=Number(t);if(isNaN(n))continue;const o=i[n];a[n]=e.getBufferLocation(o.src,o.index)}const o=this.buffers.require("materials","int32",Math.max(1,a.length),1,!0);for(let e=0,t=0|a.length;e<t;e=e+1|0)o.data[e]=a[e]||0;return{materials:o}}buildVoxels(e,t,n){if(!n&&!t.checkUpdate()&&this.buffers.has("voxels"))return{voxels:null};const a=[],i=t.getVoxels();for(const t in i){const n=Number(t);if(isNaN(n))continue;const o=i[n];if(null===o)for(let e=0,t=21;e<t;e=e+1|0)a[n*f+e]=0;else{const t=e.getTileSet(),i=e.getMaterials();(0,l.d)(a,f,n,0,o.position.x),(0,l.d)(a,f,n,1,o.position.y),(0,l.d)(a,f,n,2,o.position.z),null!==t?((0,l.d)(a,f,n,3,Object.values(i).indexOf(g(t,o.front))),(0,l.d)(a,f,n,4,Object.values(i).indexOf(g(t,o.back))),(0,l.d)(a,f,n,5,Object.values(i).indexOf(g(t,o.right))),(0,l.d)(a,f,n,6,Object.values(i).indexOf(g(t,o.left))),(0,l.d)(a,f,n,7,Object.values(i).indexOf(g(t,o.top))),(0,l.d)(a,f,n,8,Object.values(i).indexOf(g(t,o.bottom)))):((0,l.d)(a,f,n,3,Object.values(i).indexOf(i.NONE)),(0,l.d)(a,f,n,4,Object.values(i).indexOf(i.NONE)),(0,l.d)(a,f,n,5,Object.values(i).indexOf(i.NONE)),(0,l.d)(a,f,n,6,Object.values(i).indexOf(i.NONE)),(0,l.d)(a,f,n,7,Object.values(i).indexOf(i.NONE)),(0,l.d)(a,f,n,8,Object.values(i).indexOf(i.NONE))),(0,l.d)(a,f,n,9,o.flipXFront?-1:1),(0,l.d)(a,f,n,10,o.flipYFront?-1:1),(0,l.d)(a,f,n,11,o.flipXBack?-1:1),(0,l.d)(a,f,n,12,o.flipYBack?-1:1),(0,l.d)(a,f,n,13,o.flipXRight?-1:1),(0,l.d)(a,f,n,14,o.flipYRight?-1:1),(0,l.d)(a,f,n,15,o.flipXLeft?-1:1),(0,l.d)(a,f,n,16,o.flipYLeft?-1:1),(0,l.d)(a,f,n,17,o.flipXTop?-1:1),(0,l.d)(a,f,n,18,o.flipYTop?-1:1),(0,l.d)(a,f,n,19,o.flipXBottom?-1:1),(0,l.d)(a,f,n,20,o.flipYBottom?-1:1)}}const o=this.buffers.require("voxels","float32",Math.max(f,a.length),1,!0);for(let e=0,t=0|a.length;e<t;e=e+1|0)o.data[e]=a[e]||0;return{voxels:o}}getMaxDrawDistance(){return this.maxDrawDistance}setMaxDrawDistance(e){this.maxDrawDistance=e}createData(e,t,n,a){const i=e.getRendererManager(),o=e.getMaterialManager(),s=e.getVoxelManager(),r=this.oldScene!==e.getName()||a;this.oldScene=e.getName();const h=e.getMap(),c=e.getLateTime(),[u,p]=i.getSize(),[d,g]=[this.getClusterResolution(),this.getClusterResolution()];let m=null,f=null,y=null,v=0;const w=[];if(n){const{camera:n,sun:a,billboard_datas:i,billboard_length:o}=this.lightCullingData(e,t);m=n,f=a,y=i,v=o,w.push(i.buffer)}const{materials:b}=this.buildMaterials(e.getAssetManager(),o,r),{voxels:x}=this.buildVoxels(e,s,r),M=e.getBackground(),E=h.checkUpdate(),_=h.getVoxelField(),C=h.getDistanceField();return(0,l.c)()||(null!==b&&w.push(b.data.buffer),null!==x&&w.push(x.data.buffer)),[{camera:m,sun:f,voxel_field:{width:h.getSize()[0],height:h.getSize()[1],depth:h.getSize()[2],distance:h.getWorldDistance(),data:E||r?_:null},distance_field:{width:h.getSize()[0],height:h.getSize()[1],depth:h.getSize()[2],data:E||r?C:null},materials:b,voxels:x,resolution:{width:u,height:p},cluster_resolution:{width:d,height:g},billboard_datas:y,billboard_length:v,background:M,lateTime:c},w]}}},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>h});var i=n(6),o=n(255),s=n(144),r=n(32),l=e([r]);function h(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if((0,s.c)("fps","".concat((0,o.b)(Math.floor(n)," ",3),"/").concat((null==t?void 0:t.getPaintFramerate())===1/0?"âˆž":null==t?void 0:t.getPaintFramerate())),(0,s.c)("opr","".concat(a)),t instanceof r.a&&(0,s.c)("ent","".concat((0,o.b)(t.getEntitys().length," ",4))),null!==e){const{position:t,direction:n}=e;if((0,s.c)("pos","".concat((0,o.b)((0,o.a)(Math.floor(10*t.x),"0",2)," ",6),":x").concat((0,o.b)((0,o.a)(Math.floor(10*t.y),"0",2)," ",6),":y").concat((0,o.b)((0,o.a)(Math.floor(10*t.z),"0",2)," ",6),":z")),(0,s.c)("dir","".concat((0,o.b)((0,o.a)(Math.floor(10*n.x),"0",2)," ",4),":x").concat((0,o.b)((0,o.a)(Math.floor(10*n.y),"0",2)," ",4),":y")),e.hasComponent(i.a)){const t=e.getComponent(i.a);(0,s.c)("hit","".concat((0,o.b)(t.hit.x," ",3),":x").concat((0,o.b)(t.hit.y," ",3),":y").concat((0,o.b)(t.hit.z," ",3),":z"))}}}r=(l.then?(await l)():l)[0],a()}catch(c){a(c)}}))},(e,t,n)=>{"use strict";n.d(t,{a:()=>i});n(1),n(2),n(15),n(16);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class i{constructor(e){a(this,"materials",new Array),a(this,"isUpdate",!0),this.addMaterials(...e)}addMaterials(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const a=t.filter((e=>!this.materials.includes(e)));a.length>0&&(this.materials.push(...a),this.isUpdate=!0)}getMaterial(e){return this.materials[e]||null}getMaterials(){return this.materials}hasMaterals(e){return this.materials.hasOwnProperty(e)}checkUpdate(){const{isUpdate:e}=this;return this.isUpdate=!1,e}}},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>u});n(14),n(18);var i=n(22),o=n(297),s=n(35),r=n(0),l=n(32),h=e([l]);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}l=(h.then?(await h)():h)[0];class u extends o.a{constructor(){super(!1),c(this,"activeSceneName",null),c(this,"activeTimer",null),c(this,"isUpdate",!1),c(this,"scenes",{})}addScenes(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach((e=>{this.scenes[e.getName()]=e,new i.a(this,"attach-scene").trigger({scene:e})}))}getScene(e){return this.scenes[e]||null}hasScene(e){return null!==this.getScene(e)}getScenes(){return Object.values(this.scenes)}getActiveScene(){return this.scenes[this.activeSceneName||""]||null}getActiveSceneName(){return this.activeSceneName}createTransferSoundData(){const e=this.getActiveScene();if(null===e)return null;const t=e instanceof l.a?e.getCamera():{direction:new r.f(0,0,0),position:new r.f(0,0,0)};return{sounds:e.getSoundManager().createTransferData(t.direction,t.position,e),sceneName:e.getName()}}createTransferUpdateData(){return null!==this.getActiveScene()&&this.isUpdate?(this.isUpdate=!1,{activeSceneName:this.activeSceneName}):null}applySoundData(e){const t=this.scenes[e.sceneName]||null;null!==t&&t.getSoundManager().applyData(e)}applyScreenData(e){for(const t in this.scenes){const n=this.scenes[t]||null;null!==n&&n.getRendererManager().applyData(e)}}applyUpdateData(e){for(const t in this.scenes){const n=this.scenes[t]||null;null!==n&&n.getAssetManager().applyData(e.assets)}}activeScene(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];null!==this.activeTimer&&(0,s.c)(this.activeTimer);let n=!1;this.activeTimer=(0,s.f)((async()=>{if(this.activeTimer=null,this.activeSceneName===e)return;this.isUpdate=!0;for(const a in this.scenes)if(a!==e){const e=this.scenes[a];await new i.a(this,"inactive").triggerAsync({scene:e}),await new i.a(e,"inactive").triggerAsync({}),t=t||e.hasRun(),n=n||e.hasSleep(),t&&!n&&e.stop()}const a=this.scenes[e]||null;null!==a&&(this.activeSceneName=e,await new i.a(this,"active").triggerAsync({scene:a}),await new i.a(a,"active").triggerAsync({}),t&&!n&&a.run())}))}destroy(){for(const e in this.scenes){this.scenes[e].destroy()}new i.a(this,"destroy").trigger(this)}}a()}catch(p){a(p)}}))},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>c});n(1),n(2),n(14);var i=n(24),o=n(32),s=n(5),r=n(251),l=e([o,s]);function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}[o,s]=l.then?(await l)():l;class c{constructor(){h(this,"voxels",new Array),h(this,"isUpdate",!0);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.voxels.push(s.u,...t)}clear(){(0,i.a)(this.voxels),this.voxels.push(s.u),this.isUpdate=!0}initData(e){this.clear(),this.voxels.push(...e.map((e=>null===e?null:new r.a(e.position.x,e.position.y,e.position.z,e.front,e.back,e.right,e.left,e.top,e.bottom,e.flipXFront,e.flipYFront,e.flipXBack,e.flipYBack,e.flipXRight,e.flipYRight,e.flipXLeft,e.flipYLeft,e.flipXTop,e.flipYTop,e.flipXBottom,e.flipYBottom))))}addVoxels(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach((e=>{if(!this.voxels.some((t=>null!==t&&(0,o.b)(e,t)))){for(let t=0,n=0|this.voxels.length;t<n;t=t+1|0)if(null===this.voxels[t])return this.voxels[t]=e,void(this.isUpdate=!0);this.voxels.push(e),this.isUpdate=!0}}))}removeVoxels(){for(let e=0,t=0|arguments.length;e<t;e=e+1|0){const t=e<0||arguments.length<=e?void 0:arguments[e],n=this.voxels.indexOf(t);-1!==n&&(this.voxels[n]=null)}}getVoxel(e){return this.voxels[e]||s.u}getVoxels(){return this.voxels}hasVoxel(e){return this.voxels.hasOwnProperty(e)}checkUpdate(){const{isUpdate:e}=this;return this.isUpdate=!1,e}}a()}catch(u){a(u)}}))},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>h});n(1),n(2);var i=n(23),o=n(5),s=n(148),r=n(150),l=e([i,o,s,r]);[i,o,s,r]=l.then?(await l)():l;class h extends i.a{constructor(e,t,n,a,i,l,h,c,u,p,d,g,m,f,y,v,w,b){let x=arguments.length>18&&void 0!==arguments[18]?arguments[18]:"ammo",M=arguments.length>20&&void 0!==arguments[20]?arguments[20]:null,E=arguments.length>21&&void 0!==arguments[21]?arguments[21]:null,_=arguments.length>22&&void 0!==arguments[22]?arguments[22]:new Array;super("player-bullet",d,p,f,y,w,b,x,e,t,n,a,i,l,h,c,g,0,u,m,.01,!0,((e,t,n,a,i,o,l,h,c,u,p)=>null!==c&&c.getNames().some((e=>"enemy"===e))&&!c.getNames().some((e=>"guy-armor"===e))?new r.a(e,t,n,a,i,1,this,c,u,p):new s.a(e,t,n,a,i,1,this,c,u,p)),"flash",1.5,10,!1,null,[o.h.EFFECT_BULLET_AMMO_TRAIL],0,1,0,M,E,"hitbox",["player-hit-bullet",..._])}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>l});n(1),n(2);var i=n(23),o=n(5),s=n(124),r=e([i,o,s]);[i,o,s]=r.then?(await r)():r;class l extends i.a{constructor(e,t,n,a,i,r,l,h,c,u,p,d,g,m,f,y,v,w){let b=arguments.length>18&&void 0!==arguments[18]?arguments[18]:"ammo",x=arguments.length>20&&void 0!==arguments[20]?arguments[20]:null,M=arguments.length>21&&void 0!==arguments[21]?arguments[21]:null,E=arguments.length>22&&void 0!==arguments[22]?arguments[22]:new Array;super("player-bullet",p,u,m,f,v,w,b,e,t,n,a,i,r,l,h,d,0,c,g,0,!0,((e,t,n,a,i,o,r,l,h,c,u)=>new s.b(e,t,n,a,i,5,.5,0,128,"explode",this,h,c,[])),"flash",5,10,!1,o.h.EFFECT_BULLET_AMMO_TRAIL,o.d,3*d,.4*d,0*d,x,M,"hitbox",["player-hit-bullet","enemy-hit-bullet",...E])}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>h});n(1),n(2);var i=n(23),o=n(148),s=n(150),r=n(216),l=e([i,o,s,r]);[i,o,s,r]=l.then?(await l)():l;class h extends i.a{constructor(e,t,n,a,i,l,h,c,u,p,d,g,m,f,y,v,w,b){let x=arguments.length>18&&void 0!==arguments[18]?arguments[18]:"ammo",M=arguments.length>20&&void 0!==arguments[20]?arguments[20]:null,E=arguments.length>21&&void 0!==arguments[21]?arguments[21]:null,_=arguments.length>22&&void 0!==arguments[22]?arguments[22]:new Array;super("player-bullet",d,p,f*w,y,w,b,x,e,t,n,a,i,l,h,c,g,0,u,m,.25+.75*w,!0,((e,t,n,a,i,l,h,c,u,p,d)=>w>=1?new r.b(e,t,n,1):null!==u&&u.getNames().some((e=>"enemy"===e))?new s.a(e,t,n,a,i,1,this,u,p,d):new o.a(e,t,n,a,i,1,this,u,p,d)),"none",0,0,!1,null,[],0,0,0,M,E,"hitbox",[...w>=1?["player-hit-bullet","enemy-hit-bullet","player-bullet","enemy-bullet"]:[],..._])}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>p});n(1),n(2);var i=n(23),o=n(5),s=n(151),r=n(40),l=n(39),h=n(30),c=n(44),u=e([i,o,s]);[i,o,s]=u.then?(await u)():u;class p extends i.a{constructor(e,t,n,a,i,u,p,d,g,m,f,y,v,w,b,x,M,E){let _=arguments.length>18&&void 0!==arguments[18]?arguments[18]:"ammo",C=arguments.length>20&&void 0!==arguments[20]?arguments[20]:null,T=arguments.length>21&&void 0!==arguments[21]?arguments[21]:null,S=arguments.length>22&&void 0!==arguments[22]?arguments[22]:new Array;super("player-bullet shot-target player-hit-bullet",f,m,w,b,M,E,_,e,t,n,a,i,u,p,d,y,0,g,v,0,!0,((e,t,n,a,i,o,r,l,h,c,u)=>new s.a(e,t,n,a,i,1,null===h,this,h,c,u)),"none",0,0,!1,o.h.EFFECT_BULLET_PLASMA_BALL,[],1.25,0,0,C,T,"hitbox",["player-hit-bullet",...S],new l.a({health:{value:1,max:1}}),new r.a(1/0,0,0,{magic:1,explode:1}),new h.a(.5,.5),new c.a(0,-.25,0))}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>h});n(1),n(2);var i=n(23),o=n(5),s=n(148),r=n(150),l=e([i,o,s,r]);[i,o,s,r]=l.then?(await l)():l;class h extends i.a{constructor(e,t,n,a,i,l,h,c,u,p,d,g,m,f,y,v,w,b){let x=arguments.length>18&&void 0!==arguments[18]?arguments[18]:"ammo",M=arguments.length>20&&void 0!==arguments[20]?arguments[20]:null,E=arguments.length>21&&void 0!==arguments[21]?arguments[21]:null,_=arguments.length>22&&void 0!==arguments[22]?arguments[22]:new Array;super("player-bullet",d,p,f,y,w,b,x,e,t,n,a,i,l,h,c,g,0,u,m,2/v,!0,((e,t,n,a,i,o,l,h,c,u,p)=>null!==c&&c.getNames().some((e=>"enemy"===e))&&!c.getNames().some((e=>"guy-armor"===e))?new r.a(e,t,n,a,i,1,this,c,u,p):new s.a(e,t,n,a,i,1,this,c,u,p)),"flash",1.5,10,!1,null,[o.h.EFFECT_BULLET_AMMO_TRAIL],0,1,0,M,E,"hitbox",["player-hit-bullet",..._])}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>h});n(1),n(2);var i=n(23),o=n(5),s=n(400),r=n(26),l=e([i,o,s]);[i,o,s]=l.then?(await l)():l;class h extends i.b{constructor(e,t,n,a,i,l,h,c,u,p,d,g,m,f,y,v,w,b){let x=arguments.length>18&&void 0!==arguments[18]?arguments[18]:"ammo",M=arguments.length>20&&void 0!==arguments[20]?arguments[20]:null,E=arguments.length>21&&void 0!==arguments[21]?arguments[21]:null,_=arguments.length>22&&void 0!==arguments[22]?arguments[22]:new Array;if(super("player-bullet cluster player-hit-bullet",d,p,f,y,w,b,x,e,t,n,a,i,l,h,c,g,0,u,.1,.5,!0,((e,t,n,a,i,o,r,l,h,c,u)=>new s.a(e,t,n,a,i,1,f,x,this,h,c,u)),"flash",5,10,!1,o.h.EFFECT_BULLET_GRENADE,[],3,3,3,M,E,"hitbox",["player-hit-bullet","enemy-hit-bullet",..._],["player-hit-bullet","enemy-hit-bullet",..._]),this.hasComponent(r.a)){this.getComponent(r.a).isPush=!1}}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>g});var i=n(60),o=n(5),s=n(320),r=n(149),l=n(76),h=n(503),c=n(505),u=n(96),p=n(0),d=e([o]);o=(d.then?(await d)():d)[0];class g extends i.a{constructor(e,t,n,a,i,d,g,m,f,y,v,w){super(o.h.NONE,e,t,n,a,i,5*d,0,.25,!1,f,y,v,new s.a(5*d,5*d,.5,a,i,g,1,m,1,5,w),new r.a(["./asset/sound/effect/mine-drop.mp3"],10,!1),new h.a(o.h.EFFECT_HEADSHOT1,2.5*d,p.a*Math.random()),new c.a(!0,!0,!0),new u.a([o.h.EFFECT_HEADSHOT1,o.h.EFFECT_HEADSHOT2,o.h.EFFECT_HEADSHOT3,o.h.EFFECT_HEADSHOT4,o.h.EFFECT_HEADSHOT5,o.h.EFFECT_HEADSHOT6],.25,!1),new l.a(.25))}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>h});n(1),n(2);var i=n(23),o=n(5),s=n(148),r=n(150),l=e([i,o,s,r]);[i,o,s,r]=l.then?(await l)():l;class h extends i.a{constructor(e,t,n,a,i,l,h,c,u,p,d,g,m,f,y,v,w,b){let x=arguments.length>18&&void 0!==arguments[18]?arguments[18]:"ammo",M=arguments.length>20&&void 0!==arguments[20]?arguments[20]:null,E=arguments.length>21&&void 0!==arguments[21]?arguments[21]:null,_=arguments.length>22&&void 0!==arguments[22]?arguments[22]:new Array;super("player-bullet",d,p,f,y,w,b,x,e,t,n,a,i,l,h,c,g,0,u,m,.01,!0,((e,t,n,a,i,o,l,h,c,u,p)=>null!==c&&c.getNames().some((e=>"enemy"===e))&&!c.getNames().some((e=>"guy-armor"===e))?new r.a(e,t,n,a,i,1,this,c,u,p):new s.a(e,t,n,a,i,1,this,c,u,p)),"flash",1,10,!1,null,[o.h.EFFECT_BULLET_RAIL_TRAIL],0,1,0,M,E,"hitbox",["player-hit-bullet",..._])}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>h});n(1),n(2);var i=n(23),o=n(5),s=n(124),r=n(152),l=e([i,o,s]);[i,o,s]=l.then?(await l)():l;class h extends i.b{constructor(e,t,n,a,i,l,h,c,u,p,d,g,m,f,y,v,w,b){let x=arguments.length>18&&void 0!==arguments[18]?arguments[18]:"ammo",M=arguments.length>20&&void 0!==arguments[20]?arguments[20]:null,E=arguments.length>21&&void 0!==arguments[21]?arguments[21]:null,_=arguments.length>22&&void 0!==arguments[22]?arguments[22]:new Array;super("player-bullet",d,p,f,y,w,b,x,e,t,n,a,i,l,h,c,g,0,u,0,.5,!0,((e,t,n,a,i,o,r,l,h,c,u)=>new s.c(e,t,n,a,i,5,.5,f,f,"freeze",this,h,c,[])),"flash",3,10,!1,o.h.EFFECT_BULLET_ARM_GRANADE,[o.h.EFFECT_BULLET_PLASMA_TRAIL],1,.5,0,M,E,"",["player-hit-bullet","enemy-hit-bullet",..._],["player-hit-bullet","enemy-hit-bullet",..._],new r.a(1,!1,!0))}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>l});var i=n(60),o=n(5),s=n(323),r=e([o]);o=(r.then?(await r)():r)[0];class l extends i.a{constructor(e,t,n,a,i,r,l,h,c,u,p,d,g,m,f,y){super(o.h.NONE,e,t,n,a,i,5*r,0,.25,!1,g,m,f,new s.a(h,c,u,p,d,2.5+5*d,2.5+5*d))}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>h});n(1),n(2);var i=n(23),o=n(5),s=n(148),r=n(150),l=e([i,o,s,r]);[i,o,s,r]=l.then?(await l)():l;class h extends i.a{constructor(e,t,n,a,i,l,h,c,u,p,d,g,m,f,y,v,w,b){let x=arguments.length>18&&void 0!==arguments[18]?arguments[18]:"ammo",M=arguments.length>20&&void 0!==arguments[20]?arguments[20]:null,E=arguments.length>21&&void 0!==arguments[21]?arguments[21]:null,_=arguments.length>22&&void 0!==arguments[22]?arguments[22]:new Array;super("player-bullet",d,p,f,y,w,b,x,e,t,n,a,i,l,h,c,g,0,u,m,1/v,!0,((e,t,n,a,i,o,l,h,c,u,p)=>null!==c&&c.getNames().some((e=>"enemy"===e))&&!c.getNames().some((e=>"guy-armor"===e))?new r.a(e,t,n,a,i,1,this,c,u,p):new s.a(e,t,n,a,i,1,this,c,u,p)),"flash",1,10,!1,null,[o.h.EFFECT_BULLET_RAIL_TRAIL],0,1,0,M,E,"hitbox",["player-hit-bullet",..._])}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.d(t,{a:()=>h});n(1),n(2);var a=n(504),i=n(256),o=n(44),s=n(4),r=n(0),l=n(69);class h extends s.a{constructor(){super(i.a,a.a,o.a)}offset(e,t,n){const i=t.getComponent(a.a).value;if(null===i)return;const{position:s,direction:h}=t,c=t.getComponent(o.a).position,u=t.getComponent(l.a);u.init||(u.now.x=c.x,u.now.y=c.y,u.now.z=c.z,u.init=!0,u.initTime=performance.now()),u.now.x=(0,r.x)(u.now.x,c.x+u.position.x,u.speed*e),u.now.y=(0,r.x)(u.now.y,c.y+u.position.y,u.speed*e),u.now.z=(0,r.x)(u.now.z,c.z+u.position.z,u.speed*e);const[p,d]=(0,r.q)(i.direction.x,u.now.x,u.now.z);s.x=i.position.x+p,s.y=i.position.y+u.now.y,s.z=i.position.z+d,h.x=i.direction.x,h.y=i.direction.y,h.z=i.direction.z}}},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>f});n(1),n(2);var i=n(6),o=n(105),s=n(0),r=n(32),l=n(13),h=n(4),c=n(5),u=n(41),p=n(8),d=n(24),g=n(56),m=e([r,c]);[r,c]=m.then?(await m)():m;class f extends h.a{constructor(){super(i.a,l.a)}findPoints(e,t,n,a,i,s,l){for(let h=0,u=0|l.length;h<u;h=h+1|0){const[u,p,d]=l[h];let g=!1;if((0,r.b)(s.getVoxel(u,p,d),c.u)||(g=(0,o.f)(u,p,d,e,t,n,a,i)),g)return[u,p,d]}return[-1,-1,-1]}fixYTop(e,t,n){const{position:a}=e,o=e.getComponent(i.a);let s=a.y+o.size.y;const[,r]=this.findPoints(a.x,a.y,a.z,o.size.x,o.size.y,t,n);return-1!==r?(s=Math.min(s,r),[0,s-o.size.y-a.y,0]):[0,0,0]}fixYBottom(e,t,n){const{position:a}=e,o=e.getComponent(i.a);let s=a.y;const[,r]=this.findPoints(a.x,a.y,a.z,o.size.x,o.size.y,t,n);return-1!==r?(s=Math.max(s,r+1),[0,s-a.y,0]):[0,0,0]}collisionMap(e,t,n,a,s){const{position:l}=e,h=e.getComponent(i.a),u=(0,g.c)(l.x,l.y,l.z,h.size.x,h.size.y);let p=0,m=0,f=0;const y=new Array;for(let e=0,t=0|u.length;e<t;e=e+3|0)y.push([u[e+0],u[e+1],u[e+2]]);l.y>a?(0,d.c)(y).desc((e=>e[1])):l.y<a&&(0,d.c)(y).asc((e=>e[1]));let v=!1,w=!1,b=n,x=a,M=s;for(let n=0,a=0|y.length;n<a;n=n+1|0){const[a,i,s]=y[n];if(!(0,r.b)(t.getVoxel(a,i,s),c.u)){let n=0,u=0,y=0,E=!1;const _=(0,g.c)(b,l.y,M,h.size.x,h.size.y),C=new Array;for(let e=0,t=0|_.length;e<t;e=e+3|0)C.push([_[e+0],_[e+1],_[e+2]]);l.y>x?(0,d.c)(C).desc((e=>e[1])):l.y<x&&(0,d.c)(C).asc((e=>e[1]));const[T,S,k]=this.findPoints(l.x,l.y,l.z,h.size.x,h.size.y,t,C);if(-1!==S)switch(!0){case(0,r.b)(t.getVoxel(T,S+1,k),c.u)&&l.y<x&&(0|l.y)<(x+.001|0)&&S===Math.floor(l.y):[,u]=this.fixYBottom(e,t,C),w=!0;break;case(0,r.b)(t.getVoxel(T,S-1,k),c.u)&&l.y>x&&(l.y+h.size.y|0)>(x-.001+h.size.y|0)&&S===Math.floor(l.y+h.size.y):[,u]=this.fixYTop(e,t,C),v=!0}if(m+=u,l.y+=u,[n,,y,E]=(0,o.c)(a,i,s,l.x,l.y,l.z,1.01*h.size.x,h.size.y,((e,n,a)=>!(0,r.b)(t.getVoxel(e,n,a),c.u))),p+=n,l.x+=n,f+=y,l.z+=y,0!==n&&(b=l.x),0!==u&&(x=l.y),0!==y&&(M=l.z),!E){if(0!==n){const e=h.size.x/2*(n>0?-1:1),t=l.x+e;l.x=(t%1>.5?Math.ceil(t):Math.floor(t))-e}if(0!==y){const e=h.size.x/2*(y>0?-1:1),t=l.z+e;l.z=(t%1>.5?Math.ceil(t):Math.floor(t))-e}}if(0!==u){const e=v?h.size.y:0,t=l.y+e;l.y=(w?Math.ceil(t):Math.floor(t))-e}}}return 0!==p&&(h.hit.x=p<0?1:-1),0!==m&&(h.hit.y=m<0?1:-1),0!==f&&(h.hit.z=f<0?1:-1),0!==p||0!==m||0!==f}additional(e,t,n){var a;const{position:o}=t,r=t.getComponent(i.a),h=(null===(a=t.getComponent(l.a))||void 0===a?void 0:a.value)||new s.f(0,0,0);r.hit.x>0?h.x=Math.min(0,h.x):r.hit.x<0&&(h.x=Math.max(0,h.x)),r.hit.y>0?h.y=Math.min(0,h.y):r.hit.y<0&&(h.y=Math.max(0,h.y)),r.hit.z>0?h.z=Math.min(0,h.z):r.hit.z<0&&(h.z=Math.max(0,h.z)),r.old.x=-1===r.old.x?o.x:r.old.x,r.old.y=-1===r.old.y?o.y:r.old.y,r.old.z=-1===r.old.z?o.z:r.old.z}physical(e,t,n){const{position:a}=t,o=t.getComponent(i.a),r=-1===o.old.x?a.x:o.old.x,l=-1===o.old.y?a.y:o.old.y,h=-1===o.old.z?a.z:o.old.z,c=a.x,u=a.y,d=a.z,[g,m,f]=(0,s.A)(c,u,d,r,l,h);if(o.enable&&(!o.init||0!==g||0!==m||0!==f)){const e=Math.min((0,s.p)(g,m,f,0,0,0),n.getWorldDistance()),i=Math.max(.01,Math.min(e,o.size.x/4,o.size.y/4,.5)),[y,v]=(0,s.n)(g,m,f,0,0,0),[w,b,x]=(0,s.r)(y,v,0,0,1);let M=i,E=r,_=l,C=h;for(;a.x=0!==o.hit.x?a.x:r+M*w,a.y=0!==o.hit.y?a.y:l+M*b,a.z=0!==o.hit.z?a.z:h+M*x,this.collisionMap(t,n,E,_,C),!(M>=e);)M=Math.min(e,(0,p.c)(M+i,e,1e5,Math.ceil)),E=a.x,_=a.y,C=a.z;0===o.hit.x&&(a.x=c),0===o.hit.y&&(a.y=u),0===o.hit.z&&(a.z=d)}0!==o.hit.x||0!==o.hit.z?o.hit.angle.x=(0,s.m)(o.hit.x,o.hit.z,0,0):o.hit.angle.x=-1,0!==o.hit.y?o.hit.angle.y=o.hit.y*s.b:o.hit.angle.y=-1}offset(e,t,n){var a,o;const{position:r}=t,h=t.getComponent(i.a),c=(null===(a=t.getComponent(l.a))||void 0===a?void 0:a.value)||new s.f(0,0,0),p=-1===h.old.x?r.x:h.old.x,d=-1===h.old.y?r.y:h.old.y,g=-1===h.old.z?r.z:h.old.z,m=r.x-p,f=r.y-d,y=r.z-g;0!==h.hit.x&&(h.hit.x<0?m>0||!n.hasBlockScaleVoxel(r.x-.001,r.y+.001,r.z,h.size.x,h.size.y-.002):m<0||!n.hasBlockScaleVoxel(r.x+.001,r.y+.001,r.z,h.size.x,h.size.y-.002))&&(h.hit.x=0),0!==h.hit.y&&(h.hit.y<0?f>0||!n.hasBlockScaleVoxel(r.x,r.y-.001,r.z,h.size.x-.001,.001):f<0||!n.hasBlockScaleVoxel(r.x,r.y+h.size.y+.001,r.z,h.size.x-.001,.001))&&(h.hit.y=0),0!==h.hit.z&&(h.hit.z<0?y>0||!n.hasBlockScaleVoxel(r.x,r.y+.001,r.z-.001,h.size.x,h.size.y-.002):y<0||!n.hasBlockScaleVoxel(r.x,r.y+.001,r.z+.001,h.size.x,h.size.y-.002))&&(h.hit.z=0);const v=(null===(o=t.getComponent(u.a))||void 0===o?void 0:o.flex)||0,w=c.x,b=c.y,x=c.z;0!==h.hit.x&&(c.x=Math.floor(-w*v*100)/100),0!==h.hit.y&&(c.y=Math.floor(-b*v*100)/100),0!==h.hit.z&&(c.z=Math.floor(-x*v*100)/100),h.enable?(h.old.x=r.x,h.old.y=r.y,h.old.z=r.z,h.init=!0):(h.hit.x=0,h.hit.y=0,h.hit.z=0,h.old.x=-1,h.old.y=-1,h.old.z=-1,h.init=!1)}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.d(t,{a:()=>r});var a=n(41),i=n(6),o=n(13),s=n(4);class r extends s.a{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;super(a.a,o.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"value",void 0),this.value=e}additional(e,t,n){var s;const r=t.getComponent(a.a);if(r.isFall||!r.init){const n=t.getComponent(o.a);n.value.y=Math.max(r.max*r.value,n.value.y-r.gravity*r.value*this.value*e*r.fall)}null!==(s=t.getComponent(i.a))&&void 0!==s&&s.enable||(r.init=!1)}offset(e,t,n){var s,r;const l=t.getComponent(a.a),h=((null===(s=t.getComponent(o.a))||void 0===s?void 0:s.value.y)||0)<=0&&((null===(r=t.getComponent(i.a))||void 0===r?void 0:r.hit.y)||0)<0;l.isFall&&h?l.isFall=!1:l.isFall||h||(l.isFall=!0),l.init=!0}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>l});n(1),n(2);var a=n(31),i=n(0),o=n(13),s=n(4),r=n(8);class l extends s.a{constructor(){super(a.a,o.a)}additional(e,t,n){const s=t.getComponent(a.a),l=t.getComponent(o.a);let[h,c,u]=(0,i.r)(s.look.x,s.look.y,s.move.x*s.speed*s.force,s.move.y*s.speed*s.force,s.move.z*s.speed*s.force);h=(0,r.c)(h,0,1e4),c=(0,r.c)(c,0,1e4),u=(0,r.c)(u,0,1e4),s.limit?(h>0?l.value.x=l.value.x<=h?Math.min(h,l.value.x+h):l.value.x:h<0&&(l.value.x=l.value.x>=h?Math.max(h,l.value.x+h):l.value.x),c>0?l.value.y=l.value.y<=c?Math.min(c,l.value.y+c):l.value.y:c<0&&(l.value.y=l.value.y>=c?Math.max(c,l.value.y+c):l.value.y),u>0?l.value.z=l.value.z<=u?Math.min(u,l.value.z+u):l.value.z:u<0&&(l.value.z=l.value.z>=u?Math.max(u,l.value.z+u):l.value.z)):(h>0?l.value.x=l.value.x<=h?h:l.value.x:h<0&&(l.value.x=l.value.x>=h?h:l.value.x),c>0?l.value.y=l.value.y<=c?c:l.value.y:c<0&&(l.value.y=l.value.y>=c?c:l.value.y),u>0?l.value.z=l.value.z<=u?u:l.value.z:u<0&&(l.value.z=l.value.z>=u?u:l.value.z))}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>h});n(1),n(2);var a=n(13),i=n(0),o=n(4),s=n(6),r=n(41),l=n(8);class h extends o.a{constructor(){super(a.a)}movable(e,t,n){var i;const{position:o}=t,s=t.getComponent(a.a),h=(null===(i=t.getComponent(r.a))||void 0===i?void 0:i.value)||0;o.x+=(0,l.c)(0===h?s.value.x*e:s.value.x*e/h,0),o.y+=(0,l.c)(0===h?s.value.y*e:s.value.y*e/h,0),o.z+=(0,l.c)(0===h?s.value.z*e:s.value.z*e/h,0)}physical(e,t,n){const o=t.getComponent(a.a),[r,l]=(0,i.n)(o.value.x,o.value.y,o.value.z,0,0,0);let h=1;((()=>{if(!t.hasComponent(s.a))return!0;const e=t.getComponent(s.a);return(0===e.hit.x||e.hit.x>0&&o.value.x<0||e.hit.x<0&&o.value.x>0)&&(0===e.hit.y||e.hit.y>0&&o.value.y<0||e.hit.y<0&&o.value.y>0)&&(0===e.hit.z||e.hit.z>0&&o.value.z<0||e.hit.z<0&&o.value.z>0)})()||o.forceAir)&&(h=o.airDrift);const[c,u,p]=(0,i.r)(r,l,0,0,h*e),d=c*o.drift.x,g=u*o.drift.y,m=p*o.drift.z;0!==o.value.x&&(o.value.x>0?(o.value.x-=d,o.value.x<0&&(o.value.x=0)):(o.value.x+=-d,o.value.x>0&&(o.value.x=0))),0!==o.value.y&&(o.value.y>0?(o.value.y-=g,o.value.y<0&&(o.value.y=0)):(o.value.y+=-g,o.value.y>0&&(o.value.y=0))),0!==o.value.z&&(o.value.z>0?(o.value.z-=m,o.value.z<0&&(o.value.z=0)):(o.value.z+=-m,o.value.z>0&&(o.value.z=0)))}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>r});var a=n(75),i=n(154),o=n(0),s=n(4);class r extends s.a{constructor(){super(a.a,i.a)}offset(e,t,n){const s=t.getComponent(a.a),r=t.getComponent(i.a);if(r.init||(r.position.x=s.position.x,r.position.y=s.position.y,r.position.z=s.position.z,r.scale=s.scale,r.rotate=s.rotate,r.init=!0,r.initTime=performance.now()),s.position.x=(0,o.x)(s.position.x,r.position.x,r.speed*e),s.position.y=(0,o.x)(s.position.y,r.position.y,r.speed*e),s.position.z=(0,o.x)(s.position.z,r.position.z,r.speed*e),s.scale=(0,o.x)(s.scale,r.scale,r.speed*e),r.isRotateCenter){const t=n.getCamera(),a=(0,o.m)(-s.position.y,s.position.x,0,0)*(1+(1-(t?t.hudFov:1))/2);s.rotate=(0,o.x)(s.rotate,a+r.rotate,r.speed*e)}else s.rotate=(0,o.x)(s.rotate,r.rotate,r.speed*e)}}},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>ne});n(1),n(2),n(7),n(14),n(18),n(181);var i=n(0),o=n(9),s=n(10),r=n(31),l=n(4),h=n(64),c=n(33),u=n(13),p=n(6),d=n(48),g=n(65),m=n(49),f=n(51),y=n(93),v=n(125),w=n(57),b=n(27),x=n(50),M=n(39),E=n(97),_=n(52),C=n(41),T=n(185),S=n(90),k=n(108),O=n(24),A=n(155),L=n(8),P=n(122),I=n(66),N=n(153),R=n(59),W=n(34),z=n(107),D=n(40),F=n(26),U=n(44),H=n(69),B=n(53),G=n(81),Y=n(47),V=n(54),j=n(316),K=n(123),X=n(5),q=n(127),J=n(109),Z=n(156),$=n(219),Q=n(58),ee=e([b,x,G,Y,X,J,Q]);function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}[b,x,G,Y,X,J,Q]=ee.then?(await ee)():ee;class ne extends l.a{constructor(e,t,n){super(o.b,x.a,p.a,u.a,m.a,w.a,v.a,y.a),te(this,"setting",void 0),te(this,"scenes",void 0),te(this,"controls",void 0),te(this,"keys",{}),te(this,"presss",{}),te(this,"toggles",{}),te(this,"releases",{}),te(this,"updateButtons",{}),te(this,"keyWalk",new i.e(0,0)),te(this,"walk",new i.e(0,0)),te(this,"look",new i.e(0,0)),te(this,"oldWalk",new i.e(0,0)),te(this,"oldLook",new i.e(0,0)),te(this,"lookInputType",null),te(this,"isUpdateWalkToKeyboard",!0),te(this,"isAxesUpdateWalkX",!1),te(this,"isAxesUpdateWalkY",!1),te(this,"isAxesUpdateLookX",!1),te(this,"isAxesUpdateLookY",!1),te(this,"isResetLookX",!1),te(this,"isResetLookY",!1),te(this,"isResetWalkX",!1),te(this,"isResetWalkY",!1),te(this,"activeSceneName","none"),this.setting=e,this.scenes=t,this.controls=n,n.initKeyConfig({escape:["keyboard_escape","touchpad_start","gamepad_start"],pause:["gamepad_select"],forward:["keyboard_w","touchpad_up"],back:["keyboard_s","touchpad_down"],left:["keyboard_a","touchpad_left"],right:["keyboard_d","touchpad_right"],jump:["keyboard_space","touchpad_b","gamepad_a"],cluch:["keyboard_control","touchpad_a","gamepad_b"],sprint:["keyboard_shift","gamepad_ls","touchpad_cross_double"],use:["keyboard_f","gamepad_x","touchpad_a"],"lean-left":["keyboard_q"],"lean-right":["keyboard_e"],"auto-lean":["keyboard_alt","gamepad_lb"],"weapon-wheel-right":["gamepad_rb","touchpad_r"],"weapon-wheel-left":["keyboard_tab","touchpad_l"],"fire-left":["mouse_left","gamepad_lt","touchpad_y"],"fire-right":["mouse_right","gamepad_rt","touchpad_x"],"next-weapon":["mouse_wheel_up"],"prev-weapon":["mouse_wheel_down"],"weapon-1":["keyboard_1"],"weapon-2":["keyboard_2"],"weapon-3":["keyboard_3"],"weapon-4":["keyboard_4"],"weapon-5":["keyboard_5"],"weapon-6":["keyboard_6"],"weapon-7":["keyboard_7"],"weapon-8":["keyboard_8"]}),(0,P.c)("keyconfig"),n.axes(((e,a,i)=>{var o;if(!(0,S.b)()&&t.getActiveSceneName()===this.activeSceneName&&null!==(o=t.getScene(this.activeSceneName))&&void 0!==o&&o.hasRun()){const t=performance.now();switch(e){case"z":this.keys["auto-lean"]=0===a&&0===i?0:t,i*=-1;case"x":this.isAxesUpdateWalkX?(this.walk.x=Math.abs(this.walk.x)>Math.abs(a)?this.walk.x:-a,this.oldWalk.x=Math.abs(this.oldWalk.x)<Math.abs(a)?this.oldWalk.x:-a,this.isResetWalkX=0===a):0===a?(this.walk.x=0,this.oldWalk.x=0):(this.walk.x=-a,this.oldWalk.x=-a,this.isAxesUpdateWalkX=!0),this.isAxesUpdateWalkY?(this.walk.y=Math.abs(this.walk.y)>Math.abs(i)?this.walk.y:i,this.oldWalk.y=Math.abs(this.oldWalk.y)<Math.abs(i)?this.oldWalk.y:i,this.isResetWalkY=0===i):0===i?(this.walk.y=0,this.oldWalk.y=0):(this.walk.y=i,this.oldWalk.y=i,this.isAxesUpdateWalkY=!0);break;case"y":this.lookInputType=n.getInputType(),this.isAxesUpdateLookX?(this.look.x=Math.abs(this.look.x)>Math.abs(a)?this.look.x:a,this.oldLook.x=Math.abs(this.oldLook.x)<Math.abs(a)?this.oldLook.x:a,"gamepad"===this.lookInputType?this.isResetLookX=0===a:this.isResetLookX=!0):0===a?(this.look.x=0,this.oldLook.x=0):(this.look.x=a,this.oldLook.x=a,this.isAxesUpdateLookX=!0),this.isAxesUpdateLookY?(this.look.y=Math.abs(this.look.y)>Math.abs(i)?this.look.y:i,this.oldLook.y=Math.abs(this.oldLook.y)<Math.abs(i)?this.oldLook.y:i,"gamepad"===this.lookInputType?this.isResetLookY=0===i:this.isResetLookY=!0):0===i?(this.look.y=0,this.oldLook.y=0):(this.look.y=i,this.oldLook.y=i,this.isAxesUpdateLookY=!0)}}else this.walk.x=0,this.walk.y=0,this.look.x=0,this.look.y=0,this.oldWalk.x=0,this.oldWalk.y=0,this.oldLook.x=0,this.oldLook.y=0})),n.press(((e,n)=>{var a;const i=performance.now();if(!(0,S.b)()&&t.getActiveSceneName()===this.activeSceneName&&null!==(a=t.getScene(this.activeSceneName))&&void 0!==a&&a.hasRun()){if(-1!==e.indexOf("gamepad_")||-1!==e.indexOf("touchpad_")||(0,z.b)()){let a=!1;this.updateButtons[e]?this.releases[e]||n||(this.releases[e]=!0):(this.toggles[e]!==n&&(a=!0),this.enablePresss(e,n,a,t,i),this.toggles[e]=n,this.updateButtons[e]=!0)}}else{for(const e in this.keys)this.keys[e]=0;for(const e in this.presss)this.presss[e]=0;for(const e in this.releases)this.enablePresss(e,!1,!1,t,i),delete this.releases[e];for(const e in this.updateButtons)delete this.updateButtons[e]}}))}enablePresss(e,t,n,a,i){"keyboard_enter"!==e&&"touchpad_a"!==e&&"gamepad_a"!==e&&"mouse_left"!==e||(this.keys.next=t?i:0),"touchpad_b"!==e&&"gamepad_b"!==e&&"mouse_right"!==e||(this.keys.cancel=t?i:0);const o=this.controls;switch("touchpad"!==o.getInputType()&&o.hasKey("use",e)&&(this.keys["use-cancel"]=t?i:0),!0){case o.hasKey("escape",e):this.keys.escape=t?i:0;break;case o.hasKey("pause",e):(0,A.a)()&&n&&t&&(this.keys.pause=t?i:0);break;case o.hasKey("forward",e):this.keys.forward=t?i:0,this.keyWalk.y=t?1:this.keys.back?-1:1===this.keyWalk.y?0:this.keyWalk.y,this.isUpdateWalkToKeyboard=!0;break;case o.hasKey("back",e):this.keys.back=t?i:0,this.keyWalk.y=t?-1:this.keys.forward?1:-1===this.keyWalk.y?0:this.keyWalk.y,this.isUpdateWalkToKeyboard=!0;break;case o.hasKey("left",e):this.keys.left=t?i:0,this.keyWalk.x=t?1:this.keys.right>0?-1:1===this.keyWalk.x?0:this.keyWalk.x,this.isUpdateWalkToKeyboard=!0;break;case o.hasKey("right",e):this.keys.right=t?i:0,this.keyWalk.x=t?-1:this.keys.left>0?1:-1===this.keyWalk.x?0:this.keyWalk.x,this.isUpdateWalkToKeyboard=!0;break;case o.hasKey("jump",e):this.keys.jump=t?i:0;break;case o.hasKey("cluch",e):this.setting.hasToggleCluch()?(t&&n&&(this.keys.cluch=this.keys.cluch?0:i),n&&t&&(this.keys.coil=this.keys.coil?0:i),n&&t&&(this.keys.sliding=this.keys.sliding?0:i)):(this.keys.cluch=t?i:0,this.keys.coil=t?i:0,this.keys.sliding=t?i:0),this.keys.release=t?i:0;break;case o.hasKey("sprint",e):this.setting.hasToggleSprint()?t&&n&&(this.keys.sprint=this.keys.sprint?0:i):this.keys.sprint=t?i:0,"touchpad_cross_double"===e&&(this.keys.sprint_touch=t?i:0),this.keys.sliding_cancel=t?i:0,this.keys.pressTacticalSprint=t?i:0,this.keys.tacticalSprint=t?i:this.keys.tacticalSprint;break;case o.hasKey("use",e):this.keys.use=t?i:0;break;case o.hasKey("lean-left",e):this.keys["lean-left"]=t?i:0;break;case o.hasKey("lean-right",e):this.keys["lean-right"]=t?i:0;break;case o.hasKey("auto-lean",e):this.keys["auto-lean"]=t?i:0;break;case o.hasKey("weapon-wheel",e):this.keys["menu-right"]="keyboard"!==this.controls.getInputType()?i:0,this.keys["menu-left"]="keyboard"===this.controls.getInputType()?i:0,this.keys.menu=t?i:0;break;case o.hasKey("weapon-wheel-right",e):this.keys["menu-right"]=i,this.keys["menu-left"]=0,this.keys.menu=t?i:0;break;case o.hasKey("weapon-wheel-left",e):this.keys["menu-right"]=0,this.keys["menu-left"]=i,this.keys.menu=t?i:0;break;case o.hasKey("fire-left",e):this.keys["fire-left"]=t?i:0,this.keys.secondary=t?i:0;break;case o.hasKey("fire-right",e):this.keys["fire-right"]=t?i:0,this.keys.primary=t?i:0;break;case o.hasKey("next-weapon",e):this.keys["next-weapon"]=t?i:0;break;case o.hasKey("prev-weapon",e):this.keys["prev-weapon"]=t?i:0;break;case o.hasKey("weapon-1",e):this.keys["weapon-1"]=t?i:0;break;case o.hasKey("weapon-2",e):this.keys["weapon-2"]=t?i:0;break;case o.hasKey("weapon-3",e):this.keys["weapon-3"]=t?i:0;break;case o.hasKey("weapon-4",e):this.keys["weapon-4"]=t?i:0;break;case o.hasKey("weapon-5",e):this.keys["weapon-5"]=t?i:0;break;case o.hasKey("weapon-6",e):this.keys["weapon-6"]=t?i:0}}clearControls(){this.controls.clear();for(const e in this.keys)this.keys[e]=0;this.keyWalk.x=0,this.keyWalk.y=0,this.updateWalk()}updateWalk(){const e=Math.min((0,i.o)(this.keyWalk.x,this.keyWalk.y,0,0),1),t=(0,i.m)(this.keyWalk.x,this.keyWalk.y,0,0),n=Math.cos(t)*e,a=Math.sin(t)*e;this.isAxesUpdateWalkX?(this.walk.x=Math.abs(this.walk.x)>Math.abs(n)?this.walk.x:-n,this.oldWalk.x=Math.abs(this.oldWalk.x)<Math.abs(n)?this.oldWalk.x:-n):0===n?(this.walk.x=0,this.oldWalk.x=0):(this.walk.x=n,this.oldWalk.x=n,this.isAxesUpdateWalkX=!0),this.isAxesUpdateWalkY?(this.walk.y=Math.abs(this.walk.y)>Math.abs(a)?this.walk.y:a,this.oldWalk.y=Math.abs(this.oldWalk.y)<Math.abs(a)?this.oldWalk.y:a):0===a?(this.walk.y=0,this.oldWalk.y=0):(this.walk.y=a,this.oldWalk.y=a,this.isAxesUpdateWalkX=!0)}fadeSound(e,t){const n=performance.now();let a=0;a=n-t>Y.f?Math.min(1,(n-t-Y.f)/500):0,e.getSoundManager().setVolume(1-a)}createWeaponMenuExec(e){return(t,n,a,i)=>{if(!n.hasComponent(x.a))return;const o=n.getComponent(x.a);if(null!==(0,M.c)(n,e,null)){const t=o.oldWeapon.left,n=o.oldWeapon.right;if("fire-right"!==i&&"fire-left"!==i)switch(!0){case this.keys["menu-right"]>0:"hand"===e?o.left=e:o.right=e,o.isFireRight=!1,o.toggleFireRight=!1;break;case this.keys["menu-left"]>0:"hand"===e?o.right=e:o.left=e,o.isFireLeft=!1,o.toggleFireLeft=!1}else"fire-right"===i&&(o.right=e),"fire-left"===i&&(o.left=e);o.left!==t||o.right!==n?(o.left!==t?o.standPrevWeapon.left=t:o.standPrevWeapon.left=o.left,o.right!==n?o.standPrevWeapon.right=n:o.standPrevWeapon.right=o.right,o.isPrevSet=!0):o.isPrevSet=!1}}}createHodeWeaponWheelMenu(e,t,n,a,i){const{position:s,direction:r}=t,l=t.getComponent(o.b);return new G.c(a,e,!1,(()=>!0),(()=>""),(()=>{const e=i.spawn(s.x,s.y,s.z,r.x,n);null!==e&&e.hasComponent(q.a)&&(e.getComponent(q.a).override=!0),n.createSound("./asset/sound/menu/buy.mp3",null,"player-buy").play(),l.isSelectHandWeapon=!0}))}additional(e,t,n){var a,l;const S=performance.now(),{position:A,direction:P}=t,W=t.getComponent(o.b),z=t.getComponent(x.a),D=t.getComponent(u.a),F=t.getComponent(w.a),U=t.getComponent(v.a),H=t.getComponent(y.a);W.init||(this.clearControls(),W.init=!0);const B=n.getCamera(),K=n.getControlManager();for(const e in this.keys)W.keys[e]=this.keys[e];for(const e in this.presss)W.presss[e]=this.presss[e];-1===W.startTime&&(W.startTime=S),this.keys.pause!==this.presss.pause&&(W.isPause=!W.isPause),this.activeSceneName=n.getName(),W.pickMessage=null,W.isZoomAnimation=!1,(0,O.a)(W.helpMessages);let q=!1;(0,M.e)(t,"combo")>=t.getComponent(E.a).start&&(q=!0);const $=z.rightWeapon.data.grip||z.leftWeapon.data.grip?(!!z.rightWeapon.data.grip||z.rightWeapon.isAmmo)&&(!!z.leftWeapon.data.grip||z.leftWeapon.isAmmo):z.rightWeapon.isAmmo||z.leftWeapon.isAmmo,ee="hookshot"===(0,M.c)(t,z.left,null)&&z.leftWeapon.bullets.length>0,te="hookshot"===(0,M.c)(t,z.right,null)&&z.rightWeapon.bullets.length>0,ne=(ee||te)&&![...z.leftWeapon.bullets,...z.rightWeapon.bullets].some((e=>{if(e.hasLive()&&e.hasComponent(N.a)){const i=e.getComponent(N.a).bullet;var t,n,a;if(null!==i)if(null!==(t=i.getComponent(R.a))&&void 0!==t&&t.hit){if(null!==(a=i.getComponent(I.a))&&void 0!==a&&a.isPull)return!0}else if(null!==(n=e.getComponent(R.a))&&void 0!==n&&n.hit)return!0}return!1})),ae=(ee||te)&&[...z.leftWeapon.bullets,...z.rightWeapon.bullets].some((e=>{if(e.hasLive()&&e.hasComponent(N.a)){var t,n;const a=e.getComponent(N.a).bullet;return null!==a&&!(null===(t=a.getComponent(R.a))||void 0===t||!t.hit)&&!1==!(null===(n=a.getComponent(I.a))||void 0===n||!n.isPull)}return!1})),ie=!q&&!U.exec&&W.isAir&&D.value.y<-W.airValue;W.isHookShot=ne,W.isHookAccel=ae,W.isPick=!1;const oe=n instanceof b.a&&n.getGameMode()===V.a.HORDE,se=W.time-W.hitWaitStartTime<W.hitWaitTime;if(null!==(a=t.getComponent(G.a))&&void 0!==a&&a.enable&&null!==W.activeEntity){t.getComponent(G.a).lockTime=S,W.isActiveMenuOpen=!0}else W.isActiveMenuOpen&&(this.keys.next=0,this.presss.next=0,this.keys.cancel=0,this.presss.cancel=0,this.keys["fire-right"]=0,this.presss["fire-right"]=0,this.keys["fire-left"]=0,this.presss["fire-left"]=0,this.keys.primary=0,this.presss.primary=0,this.keys.secondary=0,this.presss.secondary=0,W.isActiveMenuOpen=!1);if((0,Q.b)(t,n)&&null===W.activeEntity&&!se){var re,le,he;if(t.hasComponent(r.a)){var ce,ue,pe,de;const e=t.getComponent(r.a);if(D.airDrift=0,null!==(ce=t.getComponent(f.a))&&void 0!==ce&&ce.exec)e.move.x=0,e.move.y=0,e.move.z=1,e.look.x=(0,i.t)((0,i.m)(D.value.x,D.value.z,0,0)),e.look.y=0;else if(null!==(ue=t.getComponent(d.a))&&void 0!==ue&&ue.exec){const n=t.getComponent(d.a);e.move.x=0,e.move.y=0,e.move.z=n.proplusion;const[a,o]=(0,i.n)(n.force.x,n.force.y,n.force.z,0,0,0);e.look.x=(0,i.t)(a),e.look.y=(0,i.t)(o),D.value.x=D.value.x>0?Math.min(n.force.x*n.proplusion*e.speed,D.value.x):Math.max(n.force.x*n.proplusion*e.speed,D.value.x),D.value.y=D.value.y>0?Math.min(n.force.y*n.proplusion*e.speed,D.value.y):Math.max(n.force.y*n.proplusion*e.speed,D.value.y),D.value.z=D.value.z>0?Math.min(n.force.z*n.proplusion*e.speed,D.value.z):Math.max(n.force.z*n.proplusion*e.speed,D.value.z)}else null!==(pe=t.getComponent(c.a))&&void 0!==pe&&pe.exec||!ae&&null!==(de=t.getComponent(_.a))&&void 0!==de&&de.exec||ne?(e.move.x=0,e.move.y=0,e.move.z=0,e.look.x=t.direction.x,e.look.y=0):(e.move.x=this.walk.x,e.move.y=0,e.move.z=this.walk.y,e.look.x=t.direction.x,e.look.y=0)}if(null===W.activeEntity&&(null===(re=t.getComponent(G.a))||void 0===re||!re.enable)&&S-((null===(le=t.getComponent(G.a))||void 0===le?void 0:le.lockTime)||0)>100*((null===(he=t.getComponent(G.a))||void 0===he?void 0:he.lockLockWait)||0)){const t=(0,Q.a)(this.setting,K);W.cmda.x=this.look.x*t/W.axesPar*(0,L.c)(e/n.getSpeed(),0)*(n instanceof b.a&&this.setting.hasInvertX()?-1:1),W.cmda.y=this.look.y*t/W.axesPar*(0,L.c)(e/n.getSpeed(),0)*(n instanceof b.a&&this.setting.hasInvertY()?-1:1)}else{var ge;W.cmda.x=0,W.cmda.y=0,null!==W.activeEntity||null!==(ge=t.getComponent(G.a))&&void 0!==ge&&ge.enable?t.hasComponent(G.a)&&(t.getComponent(G.a).lockTime=S):(this.look.x=0,this.look.y=0)}if(t.hasComponent(C.a)){var me,fe,ye,ve,we;const e=t.getComponent(C.a);ne||((null===(me=t.getComponent(p.a))||void 0===me?void 0:me.hit.y)||0)<0||null!==(fe=t.getComponent(c.a))&&void 0!==fe&&fe.exec||null!==(ye=t.getComponent(d.a))&&void 0!==ye&&ye.exec||null!==(ve=t.getComponent(_.a))&&void 0!==ve&&ve.isGround&&0!==((null===(we=t.getComponent(_.a))||void 0===we?void 0:we.value.x)||0)?e.fall=0:e.fall=1,e.isFall||ne?D.forceAir=!0:D.forceAir=!1}if(t.hasComponent(c.a)&&(t.getComponent(c.a).enable=!0),t.hasComponent(d.a)&&(t.getComponent(d.a).enable=!0),t.hasComponent(G.a)){t.getComponent(G.a).enable=!1}}else{if(oe){const a=t.getComponent(G.a);if(W.isSelectHandWeapon)a.enable=!1,W.hordeStartTime+=e/60;else{a.enable=!0,a.axisType="x",a.themeColor=null;const e=["next"];a.menus.push(this.createHodeWeaponWheelMenu(e,t,n,"punch",J.a.ITEM_PUNCH),this.createHodeWeaponWheelMenu(e,t,n,"slowball",J.a.ITEM_SLOWBALL),this.createHodeWeaponWheelMenu(e,t,n,"monocular",J.a.ITEM_BINOCULARS),this.createHodeWeaponWheelMenu(e,t,n,"energyshield",J.a.ITEM_ENERGYSHIELD),this.createHodeWeaponWheelMenu(e,t,n,"combobooster",J.a.ITEM_COMBOBOOSTER),this.createHodeWeaponWheelMenu(e,t,n,"freezegrenade",J.a.ITEM_FROZEN_GRENADE),this.createHodeWeaponWheelMenu(e,t,n,"hookshot",J.a.ITEM_HOOKSHOT))}}if(t.hasComponent(r.a)){const e=t.getComponent(r.a);e.move.x=0,e.move.y=0,e.move.z=0,e.look.x=0,e.look.y=0}if(W.cmda.x=0,W.cmda.y=0,t.hasComponent(c.a)&&(t.getComponent(c.a).enable=!1),t.hasComponent(d.a)&&(t.getComponent(d.a).enable=!1),t.hasComponent(C.a)){t.getComponent(C.a).fall=1}if(t.hasComponent(C.a)){t.getComponent(C.a).isFall?D.forceAir=!0:D.forceAir=!1}}if((0,Q.b)(t,n)||!W.isSelectHandWeapon){W.axes.x.x=Math.min(1,Math.max(-1,this.walk.x)),W.axes.x.y=Math.min(1,Math.max(-1,this.walk.y)),W.axes.y.x=Math.min(1,Math.max(-1,this.look.x)),W.axes.y.y=Math.min(1,Math.max(-1,this.look.y));let e=1;switch(K.getInputType()){case"keyboard":e=10;break;case"touchpad":e=25}W.bobs.x.x=Math.min(1,Math.max(-1,this.walk.x)),W.bobs.x.y=Math.min(1,Math.max(-1,this.walk.y)),W.bobs.y.x=Math.min(1,Math.max(-1,this.look.x))*e,W.bobs.y.y=Math.min(1,Math.max(-1,this.look.y))*e}else W.axes.x.x=0,W.axes.x.y=0,W.axes.y.x=0,W.axes.y.y=0,W.bobs.x.x=0,W.bobs.x.y=0,W.bobs.y.x=0,W.bobs.y.y=0;const be=(0,i.m)(W.axes.x.x,W.axes.x.y,0,0);z.toggleFireRight=!1,z.toggleFireLeft=!1;const xe=Math.max(Math.abs(W.axes.x.y),Math.abs(W.axes.x.x))>.625;if(null!==W.activeEntity||oe&&!W.isSelectHandWeapon||se||!(0,Q.b)(t,n))se?(z.isHoldRight=this.keys["fire-right"]>0,z.isHoldLeft=this.keys["fire-left"]>0):(z.isFireRight=!1,z.isFireLeft=!1,z.isHoldRight=!1,z.isHoldLeft=!1),W.isSlowMo=!1,W.speed=1,this.keys.jump=0,this.presss.jump=0,this.keys.coil=0,this.presss.coil=0,this.keys.sliding=0,this.presss.sliding=0,this.keys.cluch=0,this.presss.cluch=0,this.keys.sprint=0,this.presss.sprint=0;else{var Me,Ee,_e,Ce,Te,Se,ke,Oe,Ae,Le;if(t.hasComponent(d.a)){const e=t.getComponent(d.a);e.enable=!ne}if(z.isHoldRight=this.keys["fire-right"]>0,z.isHoldLeft=this.keys["fire-left"]>0,this.keys.menu||this.keys["weapon-1"]||this.keys["weapon-2"]||this.keys["weapon-3"]||this.keys["weapon-4"]||this.keys["weapon-5"]||this.keys["weapon-6"]||this.keys["weapon-7"]||this.keys["weapon-8"]||(this.keys["fire-right"]>0&&this.keys["fire-right"]!==this.presss["fire-right"]?(z.isFireRight=!0,z.toggleFireRight=!0):this.keys["fire-right"]||(z.isFireRight=!1),this.keys["fire-left"]>0&&this.keys["fire-left"]!==this.presss["fire-left"]?(z.isFireLeft=!0,z.toggleFireLeft=!0):this.keys["fire-left"]||(z.isFireLeft=!1)),this.keys.menu>0){if(performance.now()-this.keys.menu<this.setting.getWeaponWheelStandTime())z.swapWait=!0,z.isFireRightWait=z.isFireRightWait||this.keys["fire-right"]>0&&this.keys["fire-right"]!==this.presss["fire-right"],z.isFireLeftWait=z.isFireLeftWait||this.keys["fire-left"]>0&&this.keys["fire-left"]!==this.presss["fire-left"];else if(t.hasComponent(G.a)){z.swapWait=!1,z.isFireRightWait=!1,z.isFireLeftWait=!1,W.isMenuOpen||(z.oldWeapon.left=z.left,z.oldWeapon.right=z.right),W.isMenuOpen=!0;const e=t.getComponent(G.a);e.enable=!0,e.axisType="y",e.themeColor=X.r[this.setting.getTheme()].getColor();const n=["fire-right","fire-left"];e.menus.push(new G.c((e=>e?(0,M.f)(t,"hand",""):""===(0,M.f)(t,"hand","")?"":"".concat((0,M.f)(t,"hand",""),"\n\n").concat((0,M.e)(t,"energy",0))),n,!0,(()=>!0),(()=>"".concat((0,M.e)(t,"energy",0))),this.createWeaponMenuExec("hand")),new G.c((e=>e?(0,M.f)(t,"sidearm",""):""===(0,M.f)(t,"sidearm","")?"":"".concat((0,M.f)(t,"sidearm",""),"\n\n").concat((0,M.e)(t,"clip",0)===1/0?"âˆž":(0,M.e)(t,"clip",0))),n,!0,(()=>null!==(0,M.c)(t,"sidearm",null)&&(0,M.e)(t,"clip",0)>0),(()=>"".concat((0,M.e)(t,"clip",0)===1/0?"âˆž":(0,M.e)(t,"clip",0))),this.createWeaponMenuExec("sidearm")),new G.c((e=>e?(0,M.f)(t,"machingun",""):""===(0,M.f)(t,"machingun","")?"":"".concat((0,M.f)(t,"machingun",""),"\n\n").concat((0,M.e)(t,"magazine",0))),n,!0,(()=>null!==(0,M.c)(t,"machingun",null)&&(0,M.e)(t,"magazine",0)>0),(()=>"".concat((0,M.e)(t,"magazine",0))),this.createWeaponMenuExec("machingun")),new G.c((e=>e?(0,M.f)(t,"shotgun",""):""===(0,M.f)(t,"shotgun","")?"":"".concat((0,M.f)(t,"shotgun",""),"\n\n").concat((0,M.e)(t,"shell",0))),n,!0,(()=>null!==(0,M.c)(t,"shotgun",null)&&(0,M.e)(t,"shell",0)>0),(()=>"".concat((0,M.e)(t,"shell",0))),this.createWeaponMenuExec("shotgun")),new G.c((e=>e?(0,M.f)(t,"launcher",""):""===(0,M.f)(t,"launcher","")?"":"".concat((0,M.f)(t,"launcher",""),"\n\n").concat((0,M.e)(t,"rocket",0))),n,!0,(()=>null!==(0,M.c)(t,"launcher",null)&&(0,M.e)(t,"rocket",0)>0),(()=>"".concat((0,M.e)(t,"rocket",0))),this.createWeaponMenuExec("launcher")),new G.c((e=>e?(0,M.f)(t,"plasmagun",""):""===(0,M.f)(t,"plasmagun","")?"":"".concat((0,M.f)(t,"plasmagun",""),"\n\n").concat((0,M.e)(t,"cell",0))),n,!0,(()=>null!==(0,M.c)(t,"plasmagun",null)&&(0,M.e)(t,"cell",0)>0),(()=>"".concat((0,M.e)(t,"cell",0))),this.createWeaponMenuExec("plasmagun")))}}else{W.isMenuOpen=!1;for(let e=0,a=0|Y.t.length;e<a;e=e+1|0){if(0!==e&&null===(0,M.c)(t,Y.t[e],null))continue;const a=Y.t[e];if("string"==typeof(0,M.c)(t,a,null))if(this.keys["weapon-".concat(e+1)])-1===z.changeWait&&(z.standPrevWeapon.left=z.left,z.standPrevWeapon.right=z.right),this.keys["fire-right"]>0&&this.keys["fire-right"]!==this.presss["fire-right"]&&(z.right=a,z.isFireRight=!1,W.isPressChange=!0),this.keys["fire-left"]>0&&this.keys["fire-left"]!==this.presss["fire-right"]&&(z.left=a,z.isFireLeft=!1,W.isPressChange=!0),z.changeWait=performance.now();else if(!this.keys["weapon-".concat(e+1)]&&this.keys["weapon-".concat(e+1)]!==this.presss["weapon-".concat(e+1)]){if(!W.isPressChange)if("keyboard"===n.getControlManager().getInputType())0===e?z.right=a:z.left=a,z.isFireLeft=!1;else 0===e?z.left=a:z.right=a,z.isFireRight=!1;W.isPressChange=!1}}if(z.isPrevSet&&(z.prevWeapon.right=z.standPrevWeapon.right,z.prevWeapon.left=z.standPrevWeapon.left,z.standPrevWeapon.right=z.right,z.standPrevWeapon.left=z.left,z.isPrevSet=!1),z.swapWait){let e=!1,t=!1;if(z.prevWeapon.left!==z.left||z.prevWeapon.right!==z.right){const n=z.left,a=z.right;e=n!==z.prevWeapon.left,t=a!==z.prevWeapon.right,z.left=z.prevWeapon.left,z.right=z.prevWeapon.right,z.prevWeapon.left=n,z.prevWeapon.right=a,z.swapWait=!1}z.isFireLeftWait?(z.isFireLeft=!0,z.toggleFireLeft=!0):e&&(z.isFireLeft=!1),z.isFireRightWait?(z.isFireRight=!0,z.toggleFireRight=!0):t&&(z.isFireRight=!1)}if(z.isFireRightWait=!1,z.isFireLeftWait=!1,"none"!==("keyboard"===this.controls.getInputType()?(0,M.f)(t,z.left,"none"):(0,M.f)(t,z.right,"none"))){const e="keyboard"===this.controls.getInputType()?z.left:z.right;let n=Y.t.indexOf(e);const a=z.right,i=z.left;if(-1!==n&&0!==n){if(this.keys["next-weapon"]&&this.keys["next-weapon"]!==this.presss["next-weapon"])for(;;){n++,n>=Y.t.length&&(n=1);const o=Y.t[n],s=Y.a[n];if(e===o)break;if("none"!==(0,M.f)(t,o,"none")&&("energy"===s||(0,M.e)(t,s,0)>0)){z.prevWeapon.left=i,z.prevWeapon.right=a,"keyboard"===this.controls.getInputType()?z.left=o:z.right=o;break}}if(this.keys["prev-weapon"]&&this.keys["prev-weapon"]!==this.presss["prev-weapon"])for(;;){n--,n<1&&(n=Y.t.length-1);const o=Y.t[n],s=Y.a[n];if(e===o)break;if("none"!==(0,M.f)(t,o,"none")&&("energy"===s||(0,M.e)(t,s,0)>0)){z.prevWeapon.left=i,z.prevWeapon.right=a,"keyboard"===this.controls.getInputType()?z.left=o:z.right=o;break}}}}-1===z.changeWait||this.keys["weapon-1"]||this.keys["weapon-2"]||this.keys["weapon-3"]||this.keys["weapon-4"]||this.keys["weapon-5"]||this.keys["weapon-6"]||z.standPrevWeapon.left===z.left&&z.standPrevWeapon.right===z.right||(z.prevWeapon.left=z.standPrevWeapon.left,z.prevWeapon.right=z.standPrevWeapon.right,z.changeWait=-1)}if(t.hasComponent(h.a)){var Pe,Ie,Ne;const e=t.getComponent(h.a);if(e.can=!1,(!W.isAir||null!==(Pe=t.getComponent(d.a))&&void 0!==Pe&&Pe.exec)&&(W.groundTime=W.time),!(null!==(Ie=t.getComponent(m.a))&&void 0!==Ie&&Ie.block||null!==(Ne=t.getComponent(_.a))&&void 0!==Ne&&Ne.exec)){var Re,We;const[n,a]=(0,i.q)(P.x,W.axes.x.x,W.axes.x.y),o=0===W.axes.x.x&&0===W.axes.x.y?-1:(0,i.m)(n,a,0,0);var ze,De;if(null!==(Re=t.getComponent(c.a))&&void 0!==Re&&Re.exec)t.hasComponent(f.a)&&(t.getComponent(f.a).exec=!1),this.keys.sliding=0,this.presss.sliding=0,!t.getComponent(c.a).climb&&this.keys.release>0&&this.keys.release!==this.presss.release?(t.hasComponent(c.a)&&(t.getComponent(c.a).through=!0),W.wall=!1,e.wallrunWaitTime=0,this.keys.cluch=0,this.presss.cluch=0,this.keys.coil=0,this.presss.coil=0,this.keys.sliding=0,this.presss.sliding=0,t.hasComponent(m.a)&&(t.getComponent(m.a).enableCluch=!1)):null!==(ze=t.getComponent(c.a))&&void 0!==ze&&ze.canJump||null===(De=t.getComponent(c.a))||void 0===De||!De.canClimb?t.getComponent(c.a).canJump&&(this.keys.jump>0&&this.keys.jump!==this.presss.jump?(this.keys.cluch=0,this.presss.cluch=0,this.keys.coil=0,this.presss.coil=0,this.keys.sliding=0,this.presss.sliding=0,t.hasComponent(m.a)&&(t.getComponent(m.a).enableCluch=!1),e.enable=!0,e.exec=!1,e.angle=-1===o?P.x:o,e.isAxes=!1,e.wallrunWaitTime=0,W.jumpBuffer=!0,t.hasComponent(c.a)&&(t.getComponent(c.a).through=!0),t.hasComponent(m.a)&&(t.getComponent(m.a).enableCluch=!1),t.hasComponent(c.a)&&(t.getComponent(c.a).hasJump=!0)):e.can=!0):(((!t.getComponent(c.a).canThroug||this.keys.jump!==this.presss.jump)&&this.keys.jump>0||this.keys.sprint!==this.presss.sprint)&&(t.hasComponent(c.a)&&(t.getComponent(c.a).climb=!0),this.keys.cluch=0,this.presss.cluch=0,this.keys.coil=0,this.presss.coil=0,this.keys.sliding=0,this.presss.sliding=0,t.hasComponent(m.a)&&(t.getComponent(m.a).enableCluch=!1),this.presss.sprint&&(this.keys.sprint=S,this.keys.tacticalSprint=S)),e.wallrunWaitTime=0);else if(null!==(We=t.getComponent(d.a))&&void 0!==We&&We.exec)if((0,M.e)(t,"stamina")>0&&this.keys.jump>0&&this.keys.jump!==this.presss.jump){const n=t.getComponent(d.a);this.keys.cluch=0,this.presss.cluch=0,this.keys.coil=0,this.presss.coil=0,this.keys.sliding=0,this.presss.sliding=0,t.hasComponent(m.a)&&(t.getComponent(m.a).enableCluch=!1);const a=n.direction<-i.d&&n.direction>-i.b-i.d,s=n.direction>i.d&&n.direction<i.b+i.d;W.jumpBuffer=!0,n.through=!0,e.enable=!0,e.exec=!1,e.angle=n.enable?(0,i.u)(P.x)+(s?-i.d:a?i.d:Math.PI):-1!==o?o:P.x,e.force.x=n.enable&&(a||s)?.15:.0025,e.isAxes=!1,e.wallrunWaitTime=n.enable&&(a||s)?.25:.375,t.hasComponent(m.a)&&(t.getComponent(m.a).enableCluch=!1),(0,M.h)(t,"stamina",Math.max(0,(0,M.e)(t,"stamina")-e.wallJumpStaminaValue))}else e.can=!0;else if(ne)this.keys.jump>0&&this.keys.jump!==this.presss.jump?(this.keys.cluch=0,this.presss.cluch=0,this.keys.coil=0,this.presss.coil=0,this.keys.sliding=0,this.presss.sliding=0,t.hasComponent(m.a)&&(t.getComponent(m.a).enableCluch=!1),e.enable=!0,e.exec=!1,e.angle=-1,e.isAxes=!1,e.wallrunWaitTime=0,W.jumpBuffer=!0,t.hasComponent(m.a)&&(t.getComponent(m.a).enableCluch=!1)):e.can=!0;else{var Fe;if(!e.exec&&-1!==W.groundTime&&W.time-W.groundTime<.25&&this.keys.jump>0&&this.keys.jump!==this.presss.jump||!W.isAir&&W.jumpBuffer&&-1!==W.jumpWaitTime&&W.time-W.jumpWaitTime<.25)t.hasComponent(m.a)&&(t.getComponent(m.a).enableCluch=!1),this.keys.cluch=0,this.presss.cluch=0,this.keys.coil=0,this.presss.coil=0,this.keys.sliding=0,this.presss.sliding=0,e.enable=!0,e.exec=!1,e.isAxes=W.axes.x.y>0,e.wallrunWaitTime=0,W.jumpBuffer=!0;else e.can=!0,W.jumpBuffer=W.isAir,this.keys.jump>0&&this.keys.jump!==this.presss.jump?W.jumpWaitTime=W.time:((null===(Fe=t.getComponent(p.a))||void 0===Fe?void 0:Fe.hit.y)||0)>0&&(W.jumpWaitTime=-1)}}}if(t.hasComponent(v.a)){var Ue,He,Be;const e=t.getComponent(v.a);var Ge,Ye,Ve,je,Ke,Xe;if(e.exec&&(-1!==W.respawnTime||!W.isAir&&n.hasBlockScaleVoxel(A.x,A.y-.001,A.z,(null===(Ue=t.getComponent(p.a))||void 0===Ue?void 0:Ue.size.x)||.001,.001)||null!==(He=t.getComponent(c.a))&&void 0!==He&&He.exec||null!==(Be=t.getComponent(d.a))&&void 0!==Be&&Be.exec)){if(e.exec=!1,this.keys.coil=0,this.presss.coil=0,-1===W.respawnTime)if(t.hasComponent(f.a)&&(t.getComponent(f.a).nextDir=e.dir),Math.abs(D.value.x)+Math.abs(D.value.z)>=H.walkSpeed)null!==(Ge=t.getComponent(d.a))&&void 0!==Ge&&Ge.exec||null!==(Ye=t.getComponent(c.a))&&void 0!==Ye&&Ye.exec&&(null===(Ve=t.getComponent(c.a))||void 0===Ve||!Ve.climb)||(t.hasComponent(f.a)&&(t.getComponent(f.a).exec=!0),this.keys.cluch=S,this.keys.sliding=S,t.hasComponent(m.a)&&(t.getComponent(m.a).enableCluch=!1));else this.keys.cluch=S,t.hasComponent(m.a)&&(t.getComponent(m.a).enableCluch=!1)}else null!==(je=t.getComponent(_.a))&&void 0!==je&&je.exec||null!==(Ke=t.getComponent(c.a))&&void 0!==Ke&&Ke.exec||null!==(Xe=t.getComponent(d.a))&&void 0!==Xe&&Xe.exec||!W.isAir||(e.exec=this.keys.coil>0,this.keys.sliding=0,this.presss.sliding=0,this.keys.coil>0&&this.keys.coil!==this.presss.coil&&ne&&W.isAir&&[...z.leftWeapon.bullets,...z.rightWeapon.bullets].forEach((e=>{e.hasComponent(R.a)&&(e.getComponent(R.a).over=!0)}))),t.hasComponent(f.a)&&(t.getComponent(f.a).nextDir=-1)}if(t.hasComponent(f.a)){const e=t.getComponent(f.a);if(e.exec){var qe,Je,Ze,$e,Qe,et,tt;if(F.cluchValue>0||!this.keys.sliding&&this.keys.sliding!==this.presss.sliding||this.keys.sliding_cancel>0&&this.keys.sliding_cancel!==this.presss.sliding_cancel||W.isAir&&!n.hasBlockScaleVoxel(A.x,A.y-.001,A.z,(null===(qe=t.getComponent(p.a))||void 0===qe?void 0:qe.size.x)||.001,.001))e.exec=!1,this.keys.sliding=0,this.presss.sliding=0,t.hasComponent(v.a)&&(t.getComponent(v.a).nextDir=e.dir),!W.isAir||null!==(Je=t.getComponent(h.a))&&void 0!==Je&&Je.exec||null!==(Ze=t.getComponent(c.a))&&void 0!==Ze&&Ze.exec||n.hasBlockScaleVoxel(A.x,A.y-.001,A.z,(null===($e=t.getComponent(p.a).size)||void 0===$e?void 0:$e.x)||.001,.001)||(this.keys.cluch=S,this.presss.cluch=S,this.keys.coil=S,this.presss.coil=S,t.hasComponent(m.a)&&(t.getComponent(m.a).enableCluch=!0)),null!==(Qe=t.getComponent(_.a))&&void 0!==Qe&&Qe.exec||null!==(et=t.getComponent(c.a))&&void 0!==et&&et.exec||null!==(tt=t.getComponent(d.a))&&void 0!==tt&&tt.exec||(H.enableSprint=!0,this.keys.sprint=S,this.presss.sprint=S);else t.hasComponent(v.a)&&(t.getComponent(v.a).nextDir=-1)}else{var nt;const n=t.getComponent(w.a);!H.enableSprint&&!ae||null!==(nt=t.getComponent(m.a))&&void 0!==nt&&nt.block||0!==n.value||!(this.keys.sliding>0)||this.keys.sliding===this.presss.sliding||W.isAir||(e.exec=!0,e.dir=e.nextDir,this.keys.cluch=S,this.presss.cluch=S,this.keys.coil=0,this.presss.coil=0,t.hasComponent(m.a)&&(t.getComponent(m.a).enableCluch=!0))}}const[a,o]=(0,i.q)(P.x,W.axes.x.x,W.axes.x.y),r=(null==t?void 0:t.getComponent(p.a).size.x)||.1;if(t.hasComponent(m.a)){var at,it,ot,st,rt,lt,ht,ct,ut,pt,dt,gt,mt,ft,yt,vt,wt,bt,xt,Mt,Et;const e=t.getComponent(m.a);H.enableSprint||e.block||null!==(at=t.getComponent(c.a))&&void 0!==at&&at.exec&&!t.getComponent(c.a).climb||null!==(it=t.getComponent(_.a))&&void 0!==it&&it.exec||!W.isAir||n.hasBlockScaleVoxel(A.x,A.y-.001,A.z,(null===(ot=t.getComponent(p.a))||void 0===ot?void 0:ot.size.x)||.001,.001)?W.isAir||null!==(st=t.getComponent(_.a))&&void 0!==st&&st.exec||null!==(rt=t.getComponent(d.a))&&void 0!==rt&&rt.exec||null!==(lt=t.getComponent(c.a))&&void 0!==lt&&lt.exec||null!==(ht=t.getComponent(c.a))&&void 0!==ht&&ht.climb&&!n.hasBlockScaleVoxel((null===(ct=t.getComponent(c.a))||void 0===ct?void 0:ct.last.x)||0,(null===(ut=t.getComponent(c.a))||void 0===ut?void 0:ut.last.y)||0,(null===(pt=t.getComponent(c.a))||void 0===pt?void 0:pt.last.z)||0,.001,e.standSizeY)||!n.hasBlockScaleVoxel(A.x+a*r,0|A.y,A.z+o*r,(null===(dt=t.getComponent(p.a))||void 0===dt?void 0:dt.size.x)||.001,e.standSizeY)||n.hasBlockScaleVoxel(A.x+a*r,0|A.y,A.z+o*r,(null===(gt=t.getComponent(p.a))||void 0===gt?void 0:gt.size.x)||.001,e.cluchSizeY)||!n.hasBlockScaleVoxel(A.x+a*r,Math.ceil((0|A.y)+e.standSizeY),A.z+o*r,(null===(mt=t.getComponent(p.a))||void 0===mt?void 0:mt.size.x)||.001,.001)?!e.enableCluch||e.block||null!==(ft=t.getComponent(f.a))&&void 0!==ft&&ft.exec||!(this.keys.sprint!==this.presss.sprint||H.enableSprint&&F.cluchValue<=0)||W.isAir||!n.hasBlockScaleVoxel(A.x,A.y-.001,A.z,(null===(yt=t.getComponent(p.a))||void 0===yt?void 0:yt.size.x)||.001,.001)?this.keys.cluch===this.presss.cluch||W.isAir||!(n.hasBlockScaleVoxel(A.x,A.y-.001,A.z,(null===(vt=t.getComponent(p.a))||void 0===vt?void 0:vt.size.x)||.001,.001)||null!==(wt=t.getComponent(_.a))&&void 0!==wt&&wt.exec)||e.block||"touchpad"===n.getControlManager().getInputType()&&W.isWaitActive||null!==(bt=t.getComponent(d.a))&&void 0!==bt&&bt.exec||null!==(xt=t.getComponent(c.a))&&void 0!==xt&&xt.climb||(e.enableCluch=this.keys.cluch>0,this.keys.cluch||(t.hasComponent(v.a)&&(t.getComponent(v.a).exec=!1),this.keys.coil=0,this.presss.coil=0,this.keys.sliding=0,this.presss.sliding=0)):(e.enableCluch=!1,t.hasComponent(v.a)&&(t.getComponent(v.a).exec=!1),H.enableSprint=!0,this.keys.cluch=0,this.presss.cluch=0,this.keys.coil=0,this.presss.coil=0,this.keys.sliding=0,this.presss.sliding=0,this.keys.sprint=S,this.presss.sprint=S):(e.enableCluch=!0,t.hasComponent(v.a)&&(t.getComponent(v.a).exec=!1),this.keys.cluch=S):(e.enableCluch=!1,this.keys.cluch=0,this.presss.cluch=0),null!==(Mt=t.getComponent(c.a))&&void 0!==Mt&&Mt.exec||null!==(Et=t.getComponent(c.a))&&void 0!==Et&&Et.climb?(e.enableCluch=!1,this.keys.cluch=0,this.presss.cluch=0,this.keys.coil=0,this.presss.coil=0,this.keys.sliding=0,this.presss.sliding=0,t.hasComponent(m.a)&&(t.getComponent(m.a).enableCluch=!1)):!this.keys.cluch&&e.block&&(e.enableCluch=!0,this.keys.cluch=S)}if(t.hasComponent(y.a)){var _t,Ct,Tt,St,kt,Ot;const e=t.getComponent(y.a);null!==(_t=t.getComponent(_.a))&&void 0!==_t&&_t.exec&&(this.keys.sprint=0),be<-i.d&&be>3*-i.d||!xe||0!==F.cluchValue||0!==F.standValue||null!==(Ct=t.getComponent(c.a))&&void 0!==Ct&&Ct.exec||null!==(Tt=t.getComponent(c.a))&&void 0!==Tt&&Tt.climb||null!==(St=t.getComponent(h.a))&&void 0!==St&&St.enable||W.isAir?this.keys.pressTacticalSprint||(e.enableSprint=!1,e.enableTacticalSprint=!1,xe||(this.keys.sprint=0,this.keys.tacticalSprint=0)):this.keys.sprint>0&&this.keys.sprint!==this.presss.sprint&&(e.enableSprint=!0),this.keys.pressTacticalSprint||!this.keys.tacticalSprint||be<-i.d&&be>3*-i.d||!xe||!(null!==(kt=t.getComponent(c.a))&&void 0!==kt&&kt.exec&&t.getComponent(c.a).climb||0===F.cluchValue&&0===F.standValue)||null!==(Ot=t.getComponent(h.a))&&void 0!==Ot&&Ot.enable||W.isAir||(e.pressSprint=this.keys.tacticalSprint),!e.enableTacticalSprint&&this.keys.pressTacticalSprint&&-1!==e.pressSprint&&S-e.pressSprint<250?(this.keys.sprint=S,this.keys.tacticalSprint=S,e.pressSprint=-1,e.enableTacticalSprint=!0):e.enableTacticalSprint&&0===(0,M.e)(t,"stamina")&&(e.enableTacticalSprint=!1)}var At;if(!(be<-i.d&&be>3*-i.d)&&xe)!W.isAir||null!==(At=t.getComponent(c.a))&&void 0!==At&&At.exec?(0,j.a)()||!(0,j.b)()||0!==this.walk.x||0!==this.walk.y||this.keys.sprint_touch?this.keys.sprint>0&&xe?H.enableSprint=!0:(H.enableSprint=!1,H.enableTacticalSprint=!1):this.keys.sprint=0:this.keys.sprint>0&&xe&&(H.enableSprint=!0);if(W.isSprint=this.keys.sprint>0,((z.rightWeapon.data.shootType===Y.q.SHIELD||z.rightWeapon.data.shootType===Y.q.SLOW||z.rightWeapon.data.shootType===Y.q.ZOOM)&&z.rightWeapon.isFirePress||(z.leftWeapon.data.shootType===Y.q.SHIELD||z.leftWeapon.data.shootType===Y.q.SLOW||z.leftWeapon.data.shootType===Y.q.ZOOM)&&z.leftWeapon.isFirePress||z.rightWeapon.data.shootType===Y.q.HOOK&&z.rightWeapon.bullets.length>0||z.leftWeapon.data.shootType===Y.q.HOOK&&z.leftWeapon.bullets.length>0||z.rightWeapon.time>0&&z.rightWeapon.time<z.rightWeapon.data.fireSpeed||z.leftWeapon.time>0&&z.leftWeapon.time<z.leftWeapon.data.fireSpeed||null!==(Me=t.getComponent(f.a))&&void 0!==Me&&Me.exec)&&(H.enableSprint=!1,H.enableTacticalSprint=!1),-1!==W.respawnTime||null!==(Ee=t.getComponent(c.a))&&void 0!==Ee&&Ee.exec||null!==(_e=t.getComponent(_.a))&&void 0!==_e&&_e.exec||null===(Ce=t.getComponent(C.a))||void 0===Ce||!Ce.isFall){var Lt;if((null===(Lt=t.getComponent(c.a))||void 0===Lt||!Lt.exec)&&W.isAir&&B.hasComponent(g.a)){const e=B.getComponent(g.a),a=(0,k.b)(t),i=(0,L.e)(-W.airForce/W.airValue*(1-a));if(e.swais.push(new T.a(.25,1,.025*i,.5,0)),A.y>.999){const e=new s.a("player-landing-sound");e.position.x=A.x,e.position.y=A.y,e.position.z=A.z,n.createSound("./asset/sound/player/landing.mp3",e,"player-landing").setVolume(1+1.5*i).play()}W.landingTime=W.time,W.landingForce=i}W.isAir=!1}else(null!==(Te=t.getComponent(d.a))&&void 0!==Te&&Te.exec||null!==(Se=t.getComponent(C.a))&&void 0!==Se&&Se.isFall)&&(W.isAir=!0,W.landingTime=-1);W.isAir?0!==D.value.y&&(W.airForce=D.value.y):W.airForce=0;let l=0;if(null!==(ke=t.getComponent(d.a))&&void 0!==ke&&ke.exec){const e=t.getComponent(d.a);l=Math.sin(e.direction)*(.1*Math.PI)*(1-e.value)}if(null!==(Oe=t.getComponent(c.a))&&void 0!==Oe&&Oe.climb)t.direction.z=(0,i.x)(t.direction.z,.125,.25*e);else if(null!==(Ae=t.getComponent(f.a))&&void 0!==Ae&&Ae.exec){const n=-.125-Math.min(i.b,Math.max(-i.b,i.b*Math.sin((0,i.j)(P.x,t.getComponent(f.a).dir))))*(Math.PI/8)*(1-t.getComponent(f.a).value),a=Math.sin(Math.min(1,t.getComponent(f.a).value/.25)*i.d);t.direction.z=(0,i.x)(t.direction.z,n*a,.25*e)}else{var Pt;t.direction.z=(0,i.x)(t.direction.z,l+(-(null===(Pt=t.getComponent(_.a))||void 0===Pt?void 0:Pt.value.x)||0)*Math.PI*.125,.25*e)}W.isSlowMo=W.readySlowMo&&$&&!H.enableSprint&&this.setting.hasSSSSlowMo()&&(0,M.e)(t,"combo")>=(0,M.d)(t,"combo"),W.speed=null!==(Le=t.getComponent(G.a))&&void 0!==Le&&Le.enable?.1:W.isSlowMo?.375:1}if(B.getNames().some((e=>"camera"===e))){var It;const e=!(null===(It=t.getComponent(G.a))||void 0===It||!It.enable);K.hasStick()!==e&&(K.changeStick("y",e),this.look.x=0,this.look.y=0)}-1!==W.respawnTime&&(this.keys.sprint=0,this.presss.sprint=0,H.enableSprint=!1);let Nt="still";if(-1!==W.deathTime)Nt="death";else if(W.goleTime>=0)Nt="gole";else{const e=-1!==z.rightWeapon.time?z.rightWeapon.time:z.rightWeapon.data.fireSpeed,n=-1!==z.leftWeapon.time?z.leftWeapon.time:z.leftWeapon.data.fireSpeed,a=(0,L.c)(Math.min(1,1-Math.min(1,e/z.rightWeapon.data.fireSpeed)),0),i=(0,L.c)(Math.min(1,1-Math.min(1,n/z.leftWeapon.data.fireSpeed)),0);var Rt,Wt,zt,Dt,Ft;if((0===a||1===a||z.rightWeapon.chargePar>0||0===i||1===i||z.leftWeapon.chargePar>0)&&(z.leftWeapon.data.shootType!==Y.q.HOOK||0===z.leftWeapon.bullets.length)&&(z.rightWeapon.data.shootType!==Y.q.HOOK||0===z.rightWeapon.bullets.length))null!==(Rt=t.getComponent(c.a))&&void 0!==Rt&&Rt.exec?Nt="grab":U.exec?Nt="coil":ie?Nt="air":null!==(Wt=t.getComponent(f.a))&&void 0!==Wt&&Wt.exec?Nt="sliding":null!==(zt=t.getComponent(d.a))&&void 0!==zt&&zt.exec?Nt="wallrun":q||z.rightWeapon.isFireStart||z.leftWeapon.isFireStart||!(null!==(Dt=t.getComponent(h.a))&&void 0!==Dt&&Dt.enable||W.isAir)?null!==(Ft=t.getComponent(m.a))&&void 0!==Ft&&Ft.enableCluch?Nt="cluch":xe&&H.enableSprint&&0===F.cameraValue&&$&&(!W.isAir||z.leftWeapon.data.grip&&!z.leftWeapon.data.release&&z.rightWeapon.data.grip&&!z.rightWeapon.data.release)&&W.time-z.leftWeapon.fireStartTime>Math.max(.5,z.leftWeapon.data.fireSpeed)&&W.time-z.rightWeapon.fireStartTime>Math.max(.5,z.rightWeapon.data.fireSpeed)&&(Nt="sprint"):Nt="jump"}W.state=Nt,W.readySlowMo=!1,n instanceof b.a&&(-1!==W.goleTime&&this.fadeSound(n,W.goleTime),-1!==W.deathTime&&this.fadeSound(n,W.deathTime),-1!==W.intermissionTime&&n.getSoundManager().setVolume(0),-1===W.goleTime&&-1===W.deathTime&&-1===W.intermissionTime&&n.getSoundManager().setVolume(1)),W.isStartCombo=q,n instanceof b.a&&(null===(l=W.activeEntity)||void 0===l||!l.hasComponent(Z.a))&&(-1===W.deathTime||S-t.getComponent(o.b).deathTime<(n.getGameMode()===V.a.HORDE&&this.setting.hasCheckPoint()&&!this.setting.hasPermaDeath()?1e3*Y.n:Y.f))&&(W.time+=(0,L.c)(e/60,0),W.hordeStartTime>Y.o&&-1===W.goleTime&&(0,M.h)(t,"hordetime",Math.max(0,(0,M.e)(t,"hordetime",0)-e/60)))}physical(e,t,n){const a=t.getComponent(o.b);if(t.hasComponent(h.a)){const e=t.getComponent(h.a);t.hasComponent(r.a)&&(t.getComponent(r.a).force=1-(e.enable?-1!==e.wallrunWaitTime?1-(0,L.e)((a.time-e.time)/e.wallrunWaitTime):1:0))}}offset(e,t,n){var a,r,l,h;const g=performance.now(),{position:m,direction:y}=t,w=t.getComponent(o.b),E=t.getComponent(u.a),_=n.getControlManager(),C=(0,K.c)(),T=(0,z.b)(),k=this.keys.escape>0&&this.keys.escape!==this.presss.escape,O=!C&&C!==w.isFullscreen,A=!T&&T!==w.isPointerLock;!(0,S.b)()&&-1===w.exitID&&(k||O||A)&&(clearTimeout(w.exitID),w.exitID=setTimeout((()=>{const e=_.getInputType();if(!(0,S.b)()&&("gamepad"===e||"touchpad"===e?k:(0,W.a)()&&k||O||"keyboard"===e&&A)){const e=n.getSceneManager();n instanceof b.a&&n.hasPreview()?e.activeScene("editor"):e.activeScene("title")}w.exitID=-1}),100)),w.isFullscreen=C,w.isPointerLock=T;const[P,G]=(0,i.y)(w.cmda.x,w.cmda.y,y.z);if(y.x=y.x+P,y.y+=G,y.y=Math.max(-i.b,Math.min((0,L.b)(i.b,i.b/3,(null===(a=t.getComponent(f.a))||void 0===a?void 0:a.par)||0),y.y)),null===w.activeEntity&&t.hasComponent(d.a)&&t.hasComponent(p.a)){const n=t.getComponent(d.a),a=t.getComponent(p.a),o=Math.abs(n.direction);if(n.exec&&o>i.d&&o<i.b+i.d&&(n.direction>i.d&&n.direction<i.b+i.d?w.cmda.x<=0:w.cmda.x>=0)&&(0===a.hit.x||0===a.hit.z)){let t=(0,i.u)(y.x);y.x>Math.PI+i.b&&t<i.b&&(t=i.a),0!==n.side&&(n.side>0?(0,i.j)(t,y.x)<0:(0,i.j)(t,y.x)>0)&&(y.x=(0,i.w)(y.x,t,.1*e))}}if(y.x=(0,i.t)(y.x),y.y=Math.max(-i.b,Math.min(i.b,y.y)),n instanceof b.a&&!w.isPressNext&&(-1!==w.goleTime&&g-w.goleTime>=Y.f||-1!==w.deathTime&&g-w.deathTime>=(n.getGameMode()===V.a.HORDE&&this.setting.hasCheckPoint()&&!this.setting.hasPermaDeath()?Y.n*Y.f:Y.f)||-1!==w.intermissionTime&&g-w.intermissionTime>=n.getEndIntermissionTime())&&this.keys.next&&this.keys.next!==this.presss.next){const e=n.getGameMode()===V.a.HORDE;if(w.isPressNext=!0,-1!==w.intermissionTime)n.clear(!0),n.deleteSave(),n.getSceneManager().activeScene("title");else if(-1!==w.goleTime)e?(n.clear(!0),n.getSceneManager().activeScene("title")):n.getGameMode()===V.a.TUTORIAL?n.loadLevel("e1m1"):n.hasPreview()?n.getSceneManager().activeScene("editor"):(w.loading=!0,w.goleTime=-1,n.nextLevel(w.secret,this.setting.hasPistolStart()).catch((()=>{w.intermissionTime=g,w.isPressNext=!1})).finally((()=>{this.clearControls(),w.loading=!1})));else if(-1!==w.deathTime)if(n.getGameMode()===V.a.TUTORIAL)n.loadLevel("tutorial");else if(this.setting.hasPermaDeath())n.clear(),n.deleteSave(),n.getSceneManager().activeScene("title");else if(e&&!this.setting.hasCheckPoint())n.loadLevel("horde".concat(n.getEpisodeNumber()));else{const e=n.getCheckPoint();if(null!==e){const a=n.getGameMode()===V.a.CAMPAING;if(a&&(0,M.h)(t,"score",0),(0,M.h)(t,"combo",0),(0,M.h)(t,"gauge",0),(0,M.h)(t,"health",100),(0,M.h)(t,"stamina",(0,M.d)(t,"stamina")),null===e)return;w.isPressNext=!1,w.deathTime=-1,t.hasComponent(D.a)&&(t.getComponent(D.a).isDeath=!1),a&&(0,M.h)(t,"energy",(0,M.d)(t,"energy")),null!==(0,M.c)(t,"machingun",null)&&(0,M.h)(t,"magazine",Math.max((0,M.e)(t,"magagine",0),Math.floor((0,M.d)(t,"magazine")/2))),null!==(0,M.c)(t,"shotgun",null)&&(0,M.h)(t,"shell",Math.max((0,M.e)(t,"shell",0),Math.floor((0,M.d)(t,"shell")/2))),a&&null!==(0,M.c)(t,"launcher",null)&&(0,M.h)(t,"rocket",Math.max((0,M.e)(t,"rocket",0),Math.floor((0,M.d)(t,"rocket")/2))),a&&null!==(0,M.c)(t,"plasmagun",null)&&(0,M.h)(t,"cell",Math.max((0,M.e)(t,"cell",0),Math.floor((0,M.d)(t,"cell")/2))),n.setActorPosition(t,e.position.x,e.position.y+.01,e.position.z),y.x=e.direction.x,y.y=e.direction.y,y.z=0;const i=n.getCamera();if(i.hasComponent(U.a)){i.getComponent(U.a).position.y=1.5}if(i.hasComponent(H.a)){const e=i.getComponent(H.a);e.position.x=0,e.position.y=0,e.position.z=0,e.init=!1}if(t.hasComponent(p.a)){const e=t.getComponent(p.a);e.enable=!0,e.size.y=1.75}if(t.hasComponent(F.a)){t.getComponent(F.a).enable=!0}a&&(n.resetMap(),n.getEntitys().forEach((e=>{if(e.hasComponent(B.a)&&(e.getComponent(B.a).see=!1),a&&e instanceof s.a&&!e.hasComponent(o.b)&&e.hasComponent($.a)){const t=e.getComponent($.a);n.setActorPosition(e,t.point.x,t.point.y,t.point.z)}}))),this.clearControls()}else n.continueLevel()}}if(w.isAir&&(null===(r=t.getComponent(d.a))||void 0===r||!r.exec)&&(null===(l=t.getComponent(c.a))||void 0===l||!l.exec)&&-1!==w.oldDirX){const[e,t]=(0,i.q)(y.x-w.oldDirX,-E.value.z,E.value.x),n=Math.max(0,w.axes.x.y);E.value.x+=(e-E.value.x)*n,E.value.z+=(t-E.value.z)*n}w.oldDirX=y.x;const[j,X,q]=n.getWorldSize(),J=(null===(h=t.getComponent(p.a))||void 0===h?void 0:h.size)||new i.e(0,0);m.x=m.x<0?0+J.x/2:m.x,m.x=m.x>j-1-J.x/2?j-1-J.x/2:m.x,m.y=m.y<0?0:m.y,m.y=m.y>X-1-J.y?X-1-J.y:m.y,m.z=m.z<0?0+J.x/2:m.z,m.z=m.z>q-1-J.x/2?q-1-J.x/2:m.z,this.isUpdateWalkToKeyboard&&(this.updateWalk(),this.isUpdateWalkToKeyboard=!1),w.cmda.x=0,w.cmda.y=0;const Z=w.time-w.time%.5;(0,Q.b)(t,n)&&w.healthReduceInterval!==Z&&(0,M.e)(t,"health",0)>w.borderHealth&&(0,M.b)(t,"health",-1);const ee=w.time-w.time%.25;if(null===w.activeEntity&&-1===w.respawnTime&&-1===w.deathTime&&-1===w.goleTime&&-1===w.intermissionTime&&w.staminaReduceInterval!==ee&&t.hasComponent(x.a)){const e=t.getComponent(x.a);"energy"===e.rightWeapon.data.ammoType&&e.isFireRight||"energy"===e.leftWeapon.data.ammoType&&e.isFireLeft||!((0,M.e)(t,"energy",0)<(0,M.d)(t,"energy"))||(0,M.b)(t,"energy",1)}if(w.healthReduceInterval=Z,w.staminaReduceInterval=ee,t.hasComponent(x.a)){const e=t.getComponent(x.a),n="hookshot"===(0,M.c)(t,e.left,null)&&e.leftWeapon.bullets.length>0,a="hookshot"===(0,M.c)(t,e.right,null)&&e.rightWeapon.bullets.length>0,i=(n||a)&&![...e.leftWeapon.bullets,...e.rightWeapon.bullets].some((e=>{if(e.hasLive()&&e.hasComponent(N.a)){const i=e.getComponent(N.a).bullet;var t,n,a;if(null!==i)if(null!==(t=i.getComponent(R.a))&&void 0!==t&&t.hit){if(null!==(a=i.getComponent(I.a))&&void 0!==a&&a.isPull)return!0}else if(null!==(n=e.getComponent(R.a))&&void 0!==n&&n.hit)return!0}return!1}));if(-1!==w.respawnTime&&t.hasComponent(v.a)){const n=t.getComponent(v.a);this.keys.coil=0,n.exec=!1,i&&[...e.leftWeapon.bullets,...e.rightWeapon.bullets].forEach((e=>{e.hasComponent(R.a)&&(e.getComponent(R.a).over=!0)}))}}}preended(e){const t=performance.now();this.isAxesUpdateWalkX=!1,this.isAxesUpdateWalkY=!1,this.isAxesUpdateLookX=!1,this.isAxesUpdateLookY=!1;for(const e in this.updateButtons)this.updateButtons[e]=!1;for(const e in this.keys)this.presss[e]=this.keys[e];for(const e in this.releases)this.enablePresss(e,!1,!1,this.scenes,t),delete this.releases[e];for(const e in this.updateButtons)delete this.updateButtons[e];this.walk.x=this.oldWalk.x,this.walk.y=this.oldWalk.y,"gamepad"===this.controls.getInputType()&&(this.look.x=this.oldLook.x,this.look.y=this.oldLook.y),this.isResetWalkX&&(this.walk.x=0,this.oldWalk.x=0,this.isResetWalkX=!1),this.isResetWalkY&&(this.walk.y=0,this.oldWalk.y=0,this.isResetWalkY=!1),this.isResetLookX&&(this.look.x=0,this.oldLook.x=0,this.isResetLookX=!1),this.isResetLookY&&(this.look.y=0,this.oldLook.y=0,this.isResetLookY=!1)}}a()}catch(ae){a(ae)}}))},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>m});n(1),n(2);var i=n(23),o=n(5),s=n(257),r=n(39),l=n(40),h=n(30),c=n(44),u=n(504),p=n(76),d=n(151),g=e([i,o,d]);[i,o,d]=g.then?(await g)():g;class m extends i.a{constructor(e,t,n,a,i,g,m,f,y,v,w,b,x,M,E,_,C,T){let S=arguments.length>18&&void 0!==arguments[18]?arguments[18]:"ammo",k=arguments.length>20&&void 0!==arguments[20]?arguments[20]:null,O=arguments.length>21&&void 0!==arguments[21]?arguments[21]:null,A=arguments.length>22&&void 0!==arguments[22]?arguments[22]:new Array;super("enemy-bullet shot-target enemy-hit-bullet",w,v,M,E,C,T,S,e,t,n,a,i,g,m,f,b,0,y,x,0,!0,((e,t,n,a,i,o,s,r,l,h,c)=>new d.a(e,t,n,a,i,1,null===l,this,l,h,c)),"flash",.75,10,!1,null,[o.h.EFFECT_BULLET_LASER_TRAIL],0,3.75,0,k,O,"hitbox",["enemy-hit-bullet",...A],...Math.random()<.75?[new s.a(.046875*Math.PI,1,!1),new u.a]:[],new r.a({health:{value:1,max:1}}),new l.a(1/0,0,0,{melee:1,ammo:1,ball:1,rocket:1,explode:1}),new h.a(.5,.5),new c.a(0,-.25,0),new p.a(5))}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>l});n(1),n(2);var i=n(23),o=n(5),s=n(151),r=e([i,o,s]);[i,o,s]=r.then?(await r)():r;class l extends i.a{constructor(e,t,n,a,i,r,l,h,c,u,p,d,g,m,f,y,v,w){let b=arguments.length>18&&void 0!==arguments[18]?arguments[18]:"ammo",x=arguments.length>20&&void 0!==arguments[20]?arguments[20]:null,M=arguments.length>21&&void 0!==arguments[21]?arguments[21]:null,E=arguments.length>22&&void 0!==arguments[22]?arguments[22]:new Array;super("enemy-bullet",p,u,m,f,v,w,b,e,t,n,a,i,r,l,h,d,0,c,g,0,!0,((e,t,n,a,i,o,r,l,h,c,u)=>new s.a(e,t,n,a,i,1,null===h,this,h,c,u)),"flash",2.5,10,!1,null,o.d,0,d,d,x,M,"hitbox",["enemy-hit-bullet",...E])}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>l});n(1),n(2);var i=n(23),o=n(5),s=n(151),r=e([i,o,s]);[i,o,s]=r.then?(await r)():r;class l extends i.a{constructor(e,t,n,a,i,r,l,h,c,u,p,d,g,m,f,y,v,w){let b=arguments.length>18&&void 0!==arguments[18]?arguments[18]:"ammo",x=arguments.length>20&&void 0!==arguments[20]?arguments[20]:null,M=arguments.length>21&&void 0!==arguments[21]?arguments[21]:null,E=arguments.length>22&&void 0!==arguments[22]?arguments[22]:new Array;super("enemy-bullet",p,u,m,f,v,w,b,e,t,n,a,i,r,l,h,d,0,c,g,0,!0,((e,t,n,a,i,o,r,l,h,c,u)=>new s.a(e,t,n,a,i,1,null===h,this,h,c,u)),"flash",.75,10,!1,null,[o.h.EFFECT_BULLET_PLASMA_TRAIL],0,1.25,0,x,M,"hitbox",["enemy-hit-bullet",...E])}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>d});n(1),n(2);var i=n(23),o=n(5),s=n(151),r=n(40),l=n(39),h=n(30),c=n(44),u=n(26),p=e([i,o,s]);[i,o,s]=p.then?(await p)():p;class d extends i.a{constructor(e,t,n,a,i,p,d,g,m,f,y,v,w,b,x,M,E,_){let C=arguments.length>18&&void 0!==arguments[18]?arguments[18]:"ammo",T=arguments.length>20&&void 0!==arguments[20]?arguments[20]:null,S=arguments.length>21&&void 0!==arguments[21]?arguments[21]:null,k=arguments.length>22&&void 0!==arguments[22]?arguments[22]:new Array;super("enemy-bullet shot-target enemy-hit-bullet",y,f,b,x,E,_,C,e,t,n,a,i,p,d,g,v,0,m,w,0,!0,((e,t,n,a,i,o,r,l,h,c,u)=>new s.a(e,t,n,a,i,1,null===h,this,h,c,u)),"none",.375,5,!1,o.h.EFFECT_BULLET_MAGINC_MISSILE_TRAIL,[],2.5,0,0,T,S,"hitbox",["enemy-hit-bullet",...k],new l.a({health:{value:1,max:1}}),new r.a(1/0,0,0,{melee:1,ammo:1,ball:1,rocket:1,explode:1}),new h.a(.75,.75),new u.a(.75,.75,["player","enemy","object","item","player-bullet"]),new c.a(0,-.375,0))}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>u});var i=n(505),o=n(258),s=n(39),r=n(503),l=n(5),h=n(328),c=e([l]);l=(c.then?(await c)():c)[0];class u extends h.a{constructor(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super("shot-target helmet",e,0,1.125,0,.75*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),.625*t,{melee:1,ammo:1,ball:1,plasma:1,rocket:1,explode:0},new o.a,new s.a({health:{value:1,max:1}}),new r.a(l.h.ENEMY_GUY_HELMET_STILL,2*t),new i.a(!0,!1,!0,.125))}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>W});var i=n(31),o=n(26),s=n(13),r=n(30),l=n(41),h=n(44),c=n(6),u=n(10),p=n(57),d=n(125),g=n(97),m=n(40),f=n(49),y=n(33),v=n(39),w=n(64),b=n(52),x=n(506),M=n(9),E=n(220),_=n(342),C=n(51),T=n(93),S=n(259),k=n(48),O=n(50),A=n(81),L=n(47),P=n(0),I=n(54),N=n(343),R=e([O,A,L]);[O,A,L]=R.then?(await R)():R;class W extends u.a{constructor(e,t,n,a){let R=arguments.length>4&&void 0!==arguments[4]?arguments[4]:I.a.CAMPAING;super("player",new M.b(!1,.25,100),new _.a(new u.a("fall-respawn-point")),new N.a(.75,.625),new k.a(.15,3),new y.a(1.5,.25,.25),new b.a(1),new w.a(.15,.2,.25),new T.a(.1,.05,.2,.275,2),new f.a(1.75,.75,.25),new C.a(1,.0625,.2,"object","enemy"),new d.a(.25,.25),new p.a(.25),new S.a,new v.a({health:{value:100,max:200},armor:{value:0,max:100},meat:{value:0,max:1/0},useshoppoint:{value:0,max:1/0},stamina:{value:1,max:1},energy:{value:100,max:100},clip:{value:1/0,max:1/0},magazine:{value:0,max:150},shell:{value:0,max:30},rocket:{value:0,max:10},cell:{value:0,max:100},combo:{value:0,max:L.c.length},gauge:{value:0,max:1},score:{value:0,max:1/0},sumscore:{value:0,max:1/0},hordetime:{value:60,max:1/0},"key-red":{value:0,max:1},"key-blue":{value:0,max:2},"key-yellow":{value:0,max:3},hand:{value:R===I.a.TUTORIAL?null:"punch"},sidearm:{value:null},machingun:{value:null},shotgun:{value:null},launcher:{value:null},plasmagun:{value:null}}),new O.a("hand","hand"),new m.a(5,5,50,{magic:1,missile:1,slash:1,flame:1,corrode:1,explode:1}),new E.a,new g.a(1,7,3.5,1),new x.a,new A.a(.175),new i.a(.1),new s.a(.025,0,.025,0),new r.a(.75,1.75,!1),new o.a(.75,1.75,[],!1),new c.a(.75,1.75),new l.a(1,1,0),new h.a(0,0,0)),this.position.x=e,this.position.y=t,this.position.z=n,this.direction.x=(a+1e-4)%P.a,this.direction.y=1e-4}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>l});n(1),n(2);var i=n(23),o=n(5),s=n(124),r=e([i,o,s]);[i,o,s]=r.then?(await r)():r;class l extends i.a{constructor(e,t,n,a,i,r,l,h,c,u,p,d,g,m,f,y,v,w){let b=arguments.length>18&&void 0!==arguments[18]?arguments[18]:"ammo",x=arguments.length>20&&void 0!==arguments[20]?arguments[20]:null,M=arguments.length>21&&void 0!==arguments[21]?arguments[21]:null,E=arguments.length>22&&void 0!==arguments[22]?arguments[22]:new Array;super("enemy-bullet",p,u,m,f,v,w,b,e,t,n,a,i,r,l,h,d,0,c,g,.1,!0,((e,t,n,a,i,o,r,l,h,c,u)=>new s.b(e,t,n,a,i,5,0,0,48,"explode",this,h,c,u)),"flash",5,10,!0,o.h.EFFECT_BULLET_PLASMA_TRAIL,o.d,3*d,.4*d,0*d,x,M,"hitbox",["player-hit-bullet","enemy-hit-bullet","enemy",...E])}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>c});n(1),n(2);var i=n(23),o=n(5),s=n(96),r=n(76),l=n(126),h=e([i,o]);[i,o]=h.then?(await h)():h;class c extends i.a{constructor(e,t,n,a,i,h,c,u,p,d,g,m,f,y,v,w,b,x){let M=arguments.length>18&&void 0!==arguments[18]?arguments[18]:"ammo",E=arguments.length>20&&void 0!==arguments[20]?arguments[20]:null,_=arguments.length>21&&void 0!==arguments[21]?arguments[21]:null,C=arguments.length>22&&void 0!==arguments[22]?arguments[22]:new Array;super("enemy-bullet flame",g,d,y,v,b,x,M,e,t,n,a,i,h,c,u,m,Math.random()*Math.PI,p,f,.01,!0,((e,t,n,a,i,o,s,r,l,h,c)=>null),"flash",0,0,!1,o.h.EFFECT_FLAME1,[],.5,0,0,E,_,"hitbox",["enemy-hit-bullet","player-hit-bullet",...C],new s.a([o.h.EFFECT_FLAME1,o.h.EFFECT_FLAME2,o.h.EFFECT_FLAME3,o.h.EFFECT_FLAME4,o.h.EFFECT_FLAME5],.5,!1),new r.a(.5),new l.a(.5,2.5))}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>u});n(1),n(2);var i=n(5),o=n(505),s=n(75),r=n(503),l=n(504),h=n(10),c=e([i]);i=(c.then?(await c)():c)[0];class u extends h.a{constructor(e,t){for(var n=arguments.length,a=new Array(n>2?n-2:0),h=2;h<n;h++)a[h-2]=arguments[h];var c,u,p;super(e,new s.a(0,0,.0375,1,0,!0),new r.a(i.h.NONE,1,0,!1,!1),new o.a(!0,!0,!0,0),new l.a(t),...a),p=!1,(u="isVisible")in(c=this)?Object.defineProperty(c,u,{value:p,enumerable:!0,configurable:!0,writable:!0}):c[u]=p}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>x});n(7),n(14),n(121);var i=n(154),o=n(4),s=n(186),r=n(10),l=n(0),h=n(504),c=n(70),u=n(6),p=n(48),d=n(9),g=n(57),m=n(33),f=n(31),y=n(8),v=n(81),w=n(52),b=e([v]);v=(b.then?(await b)():b)[0];class x extends o.a{constructor(){super(s.a,i.a,h.a)}additional(e,t,n){var a;const o=t.getComponent(h.a).value;if(!(o instanceof c.a&&null!=o&&o.hasComponent(h.a)))return;const b=o.getComponent(h.a).value;if(null==b||!b.hasComponent(d.b))return;const x=b.getComponent(d.b),M=t.getComponent(s.a);let E=!0,_=0,C=0,T=0,S=0;if(b instanceof r.a&&b.hasComponent(u.a)){var k,O;const{position:e}=b,t=b.getComponent(u.a);n.hasBlockScaleVoxel(e.x,e.y-.001,e.z,t.size.x,.001)||null!==(k=b.getComponent(p.a))&&void 0!==k&&k.exec||(E=!1),null!==(O=b.getComponent(m.a))&&void 0!==O&&O.exec&&(E=!1)}let A=0,L=0,P=0,I=0;if(!(null!==((null===(a=b.getComponent(d.b))||void 0===a?void 0:a.activeEntity)||null)||b.hasComponent(v.a)&&"gamepad"===n.getControlManager().getInputType()&&"x"===b.getComponent(v.a).axisType&&b.getComponent(v.a).enable)){var N,R,W;if(null===(N=b.getComponent(w.a))||void 0===N||!N.exec)if(b.hasComponent(f.a)){const e=b.getComponent(f.a);A=0===e.move.x?x.bobs.x.x:e.move.x,L=0===e.move.z?x.bobs.x.y:e.move.z}else A=x.bobs.x.x,L=x.bobs.x.y;P=Math.min(1,Math.max(-1,null!==(R=b.getComponent(v.a))&&void 0!==R&&R.enable?0:x.bobs.y.x)),I=Math.min(1,Math.max(-1,null!==(W=b.getComponent(v.a))&&void 0!==W&&W.enable?0:x.bobs.y.y))}const z=t.getComponent(i.a);if(E){var D,F;const t=null!==(D=b.getComponent(p.a))&&void 0!==D&&D.exec?1:Math.min(1,Math.abs(A)+Math.abs(L));0===t||0!==((null===(F=b.getComponent(g.a))||void 0===F?void 0:F.value)||0)?M.time=0:M.enable&&(M.time+=(0,y.c)(e/60*t*M.speed,0));const n=(M.time+M.add)%1;let a=0,i=0;const o=M.invert?Math.sin:Math.cos,s=M.invert?Math.cos:Math.sin,r=Math.ceil(t);M.hard?(a=Math.min(1,2*Math.max(-1,o(n*l.a)))*r*(M.moveFix?Math.max(.5,Math.abs(A)):.5),i=2*(1-Math.min(1,Math.max(-1,Math.abs(o(n*l.a)))))*r*(M.moveFix?Math.max(.5,Math.abs(L)):1)):(a=Math.min(1,Math.max(-1,o(n*l.a)))*r*(M.moveFix?Math.max(.5,Math.abs(A)):1),i=(1-Math.min(1,Math.max(-1,o(n*(4*Math.PI)))))*r*(M.moveFix?Math.max(.5,Math.abs(L)):1));const h=0!==r?s((1-n)*l.a):0,c=-A,u=-L,d=M.moveFix?P:0,m=M.moveFix?I:0;isNaN(a)||(_+=a*M.x+c*M.slide+d*M.mrotate),isNaN(i)||(C+=i*M.y+.05*u+m*M.mrotate,S+=.1*u),isNaN(h)||(T=z.isRotateCenter?0:h*M.rotate+-A*M.mrotate)}M.swais.slice().forEach((t=>{if(t.time<=t.tick){const n=(0,y.c)(Math.min(1,t.time/t.tick),0),a=(1-Math.sin(n*l.b))**t.reduce,i=Math.sin(n%t.par/t.par*Math.PI),o=(i<.5?i/.5:1-(i-.5)/.5)*a,s=(0,y.c)((o-a/2.5)/.5*t.scale,0);T+=Math.PI*s,t.time+=(0,y.c)(e/60,0)}else M.swais.splice(M.swais.indexOf(t),1)}));const U=!z.init||z.initTime!==M.initTime;M.initTime=z.initTime,(U||-1===M.old.position.x||z.position.x-M.move.position.x!==M.old.position.x)&&(M.old.position.x=z.position.x),(U||-1===M.old.position.y||z.position.y-M.move.position.y!==M.old.position.y)&&(M.old.position.y=z.position.y),(U||-1===M.old.rotate||z.rotate-M.move.rotate!==M.old.rotate)&&(M.old.rotate=z.rotate),(U||-1===M.old.scale||z.scale-M.move.scale!==M.old.scale)&&(M.old.scale=z.scale);const H=.375;U||(z.position.x=(0,l.x)(z.position.x,M.old.position.x+_,H),z.position.y=(0,l.x)(z.position.y,M.old.position.y+C,H),z.rotate=(0,l.x)(z.rotate,M.old.rotate+T,H),z.scale=(0,l.x)(z.scale,M.old.scale+S,H)),M.move.position.x=z.position.x-M.old.position.x,M.move.position.y=z.position.y-M.old.position.y,M.move.rotate=z.rotate-M.old.rotate,M.move.scale=z.scale-M.old.scale}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>v});n(7),n(1),n(2);var i=n(13),o=n(64),s=n(0),r=n(93),l=n(31),h=n(41),c=n(50),u=n(48),p=n(33),d=n(9),g=n(6),m=n(39),f=n(67),y=e([c]);c=(y.then?(await y)():y)[0];class v extends f.a{constructor(){super(o.a,d.b,l.a,i.a,r.a)}additional(e,t,n){const a=t.getComponent(o.a),r=t.getComponent(i.a);if(t.hasComponent(h.a)){var f,y,v,w;const n=t.getComponent(h.a);null!==(f=t.getComponent(o.a))&&void 0!==f&&f.exec&&0!==((null===(y=t.getComponent(i.a))||void 0===y?void 0:y.value.y)||0)&&0!==((null===(v=t.getComponent(g.a))||void 0===v?void 0:v.hit.y)||0)&&Math.abs((null===(w=t.getComponent(i.a))||void 0===w?void 0:w.value.y)||0)<=.05?n.gravity=.5:n.gravity=(0,s.x)(n.value,1,.25*e)}if(a.enable){var b,x,M,E;const e=t.getComponent(c.a);var _;if(a.exec)(-1!==((null===(b=t.getComponent(d.b))||void 0===b?void 0:b.respawnTime)||-1)||null===(x=t.getComponent(d.b))||void 0===x||!x.isAir||null!==(M=t.getComponent(u.a))&&void 0!==M&&M.exec||null!==(E=t.getComponent(p.a))&&void 0!==E&&E.exec||"hookshot"===(0,m.c)(t,e.right,null)&&e.rightWeapon.bullets.length>0||"hookshot"===(0,m.c)(t,e.left,null)&&e.leftWeapon.bullets.length>0)&&(a.enable=!1,a.exec=!1,a.time=-1);else if(a.exec=!0,a.time=(null===(_=t.getComponent(d.b))||void 0===_?void 0:_.time)||0,r.value.y=a.force.y,-1!==a.angle){const e=t.getComponent(l.a),[n,i]=(0,s.q)(a.angle,0,Math.max(e.speed,a.force.x)*e.force);r.value.x=n,r.value.z=i,a.angle=-1}}}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>O});n(1),n(2),n(7);var i=n(0),o=n(10),s=n(32),r=n(33),l=n(6),h=n(13),c=n(9),u=n(65),p=n(185),d=n(49),g=n(189),m=n(105),f=n(56),y=n(93),v=n(52),w=n(51),b=n(5),x=n(64),M=n(44),E=n(8),_=n(31),C=n(67),T=n(58),S=n(500),k=e([s,b,T]);[s,b,T]=k.then?(await k)():k;class O extends C.a{constructor(){super(r.a,c.b,l.a)}move(e,t,n){const{position:a}=t,o=t.getComponent(r.a);o.time+=(0,E.c)(e/60,0);const s=(0,E.c)((0,E.e)(o.time/n),0);if(s>=1)a.x=o.end.x,a.y=o.end.y,a.z=o.end.z;else{const e=(0,i.p)(o.end.x,o.end.y,o.end.z,o.start.x,o.start.y,o.start.z),[t,n]=(0,i.n)(o.end.x,o.end.y,o.end.z,o.start.x,o.start.y,o.start.z),[r,l,h]=(0,i.r)(t,n,0,0,e*s);a.x=o.start.x+r,a.y=o.start.y+l,a.z=o.start.z+h}return s}cancel(e,t){const n=e.getComponent(r.a),a=e.getComponent(l.a),i=e.getComponent(c.b);n.climb||(i.grabTime=i.time),n.value=0,n.exec=!1,n.press=!1,n.flip=null,n.climb=!1,n.blockPositionTop=-1,n.through=!1,a.enable=!0}additional(e,t,n){const{position:a}=t,d=t.getComponent(r.a),v=t.getComponent(c.b),w=Math.max(...n.getWorldSize());if(d.exec&&!d.through&&!d.press&&d.climb){const e=d.last.x,t=d.last.y,n=d.last.z;d.start.x=a.x,d.start.y=a.y,d.start.z=a.z,d.end.x=e,d.end.y=t,d.end.z=n,d.time=0,d.press=!0}if(d.exec&&!d.through&&t.hasComponent(h.a)){const e=t.getComponent(h.a);e.value.x=0,e.value.y=0,e.value.z=0}if(d.move=!1,!d.exec||d.press||d.through||d.standJump||-1===d.blockPositionTop)d.canMove=!1;else if(d.canMove=!0,Math.abs(v.axes.x.x)>.75){const a=-v.axes.x.x;if(0!==a){var x;const o=t.getComponent(l.a);let r=!1;const h=d.end.x,c=d.end.y,u=d.end.z;let p=d.angle,v=d.end.x,E=d.end.z,_=d.last.x,C=d.last.z;if(p===i.d)r=!0,a>0?(p=0,v=d.grabPosition.x-o.size.x/2,E=d.grabPosition.z+.001,_=v+o.size.x,C=E):a<0&&(p=i.b,v=d.grabPosition.x+.001,E=d.grabPosition.z-o.size.x/2,_=v,C=E+o.size.x);else if(p===3*i.d)r=!0,a>0?(p=i.b,v=d.grabPosition.x+1-.001,E=d.grabPosition.z-o.size.x/2,_=v,C=E+o.size.x):a<0&&(p=Math.PI,v=d.grabPosition.x+1+o.size.x/2,E=d.grabPosition.z+.001,_=v-o.size.x,C=E);else if(p===5*i.d)r=!0,a>0?(p=Math.PI,v=d.grabPosition.x+1-.001+o.size.x/2,E=d.grabPosition.z+1-.001,_=v-o.size.x,C=E):a<0&&(p=3*i.b,v=d.grabPosition.x+1-.001,E=d.grabPosition.z+1+o.size.x/2,_=v,C=E-o.size.x);else if(p===7*i.d)r=!0,a>0?(p=3*i.b,v=d.grabPosition.x+.001,E=d.grabPosition.z+1-.001+o.size.x/2,_=v,C=E-o.size.x):a<0&&(p=0,v=d.grabPosition.x-o.size.x/2,E=d.grabPosition.z+1-.001,_=v+o.size.x,C=E);else{var M;const l=(null===(M=t.getComponent(y.a))||void 0===M?void 0:M.cluchSpeed)||0;0===p?C=E+=l*a*e:p===i.b?_=v-=l*a*e:p===2*i.b?C=E-=l*a*e:p===3*i.b&&(_=v+=l*a*e);const h=(0,f.b)(_,C,o.size.x,w);for(let e=0,t=0|h.length;e<t;e=e+2|0){const t=h[e],a=h[e+1];if((0,s.b)(n.getVoxel(t,d.blockPositionTop,a),b.u))continue;const[i,,r]=(0,m.c)(t,d.blockPositionTop,a,_,d.blockPositionTop,C,o.size.x+.001,.001,((e,t,a)=>!(0,s.b)(n.getVoxel(e,t,a),b.u)));0===p||p===Math.PI?(C+=r,E=r>0?Math.max(E,C-o.size.x/2):Math.min(E,C+o.size.x/2)):(_+=i,v=i>0?Math.max(v,_-o.size.x/2):Math.min(v,_+o.size.x/2))}let c=!1,u=0,g=0;const x=(0,f.b)(v,E,o.size.x,w);for(let e=0,t=0|x.length;e<t;e=e+2|0){const t=x[e],a=x[e+1];for(let e=0|Math.max(0,Math.ceil(o.size.y)-1),i=Math.ceil(o.size.y);e<i;e=e+1|0){const i=d.end.y+e;if((0,s.b)(n.getVoxel(t,i,a),b.u))continue;const[r,,l]=(0,m.c)(t,i,a,v,d.end.y,E,o.size.x+.001,o.size.y,((e,t,a)=>!(0,s.b)(n.getVoxel(e,t,a),b.u)));0===p||p===Math.PI?(C+=l,E+=l,g+=l,0!==l&&(c=!0)):(_+=r,v+=r,u+=r,0!==r&&(c=!0))}}!c||0===u&&0===g?n.hasHitScanVoxel(p,0,v,d.blockPositionTop-.5,E,o.size.x/2+.5)||(0===p?(r=!0,a>0?(p=3*i.b,v=d.grabPosition.x+.001,E=d.grabPosition.z+1+o.size.x/2,_=v,C=E-o.size.x):a<0&&(p=i.b,v=d.grabPosition.x+.001,E=d.grabPosition.z-o.size.x/2,_=v,C=E+o.size.x)):p===i.b?(r=!0,a>0?(p=0,v=d.grabPosition.x-o.size.x/2,E=d.grabPosition.z+.001,_=v+o.size.x,C=E):a<0&&(p=Math.PI,v=d.grabPosition.x+1+o.size.x/2,E=d.grabPosition.z+.001,_=v-o.size.x,C=E)):p===Math.PI?(r=!0,a>0?(p=i.b,v=d.grabPosition.x+1-.001,E=d.grabPosition.z-o.size.x/2,_=v,C=E+o.size.x):a<0&&(p=3*i.b,v=d.grabPosition.x+1-.001,E=d.grabPosition.z+1+o.size.x/2,_=v,C=E-o.size.x)):p===3*i.b&&(r=!0,a>0?(p=Math.PI,v=d.grabPosition.x+1+o.size.x/2,E=d.grabPosition.z+1-.001,_=v-o.size.x,C=E):a<0&&(p=0,v=d.grabPosition.x-o.size.x/2,E=d.grabPosition.z+1-.001,_=v+o.size.x,C=E))):0===p?g>0?(p=3*i.b,_=v,C=E-o.size.x):g<0&&(p=i.b,_=v,C=E+o.size.x):p===i.b?u>0?(p=Math.PI,_=v-o.size.x,C=E):u<0&&(p=0,_=v+o.size.x,C=E):p===2*i.b?g>0?(p=3*i.b,_=v,C=E-o.size.x):g<0&&(p=i.b,_=v,C=E+o.size.x):p===3*i.b&&(u>0?(p=Math.PI,_=v-o.size.x,C=E):u<0&&(p=0,_=v+o.size.x,C=E))}const T=(null===(x=n.getCamera().getComponent(g.a))||void 0===x?void 0:x.standY)||.5;n.hasBlockScaleVoxel(v,d.blockPositionTop,E,.001,.001)||n.hasBlockScaleVoxel(v,d.blockPositionTop-T,E,.001,T)||n.hasBlockScaleVoxel(_,d.blockPositionTop+.5,C,.001,.001)||!n.hasBlockScaleVoxel(_,d.blockPositionTop-T,C,.001,T)||(d.end.x===v&&d.end.z===E||(d.move=!0),d.angle=p,d.end.x=v,d.end.z=E,d.last.x=_,d.last.z=C,r&&(d.time=0,d.start.x=h,d.start.y=c,d.start.z=u))}d.grabPosition.x=Math.floor(d.last.x),d.grabPosition.y=Math.floor(d.blockPositionTop-.999),d.grabPosition.z=Math.floor(d.last.z)}if(d.exec)if(d.press)d.value=.5+.5*this.move(e,t,d.grabSpeed);else{const{direction:a}=t;d.value=.5*this.move(e,t,d.clumbSpeed);const s=(0,i.j)(d.angle,a.x),r=s/Math.abs(s);if(Math.abs(s)>i.b&&null!==d.flip&&d.flip!==r){const e=n.getCamera();if(e.hasComponent(u.a)){e.getComponent(u.a).swais.push(new p.a(.5,1,.05+.05*(t.hasComponent(h.a)?(0,E.e)(-t.getComponent(h.a).value.y/v.airValue):0),2,0))}const a=new o.a("player-grab-flip-sound"),[s,r]=(0,i.q)(d.angle,0,.375);a.position.x=e.position.x+s,a.position.y=e.position.y,a.position.z=e.position.z+r,n.createSound("./asset/sound/player/grab.mp3",a,"player-grab").play()}d.flip=r}(d.value>=1||!(0,T.b)(t,n)||-1!==d.grabPosition.x&&-1!==d.grabPosition.y&&-1!==d.grabPosition.z&&!n.hasBlockScaleVoxel(.5+(0|d.grabPosition.x),.5+(0|d.grabPosition.y),.5+(0|d.grabPosition.z),1,1))&&(this.cancel(t,n),d.grabPosition.x=-1,d.grabPosition.y=-1,d.grabPosition.z=-1)}offset(e,t,n){var a,y,C,T;const{position:k,direction:O}=t,A=t.getComponent(r.a),L=t.getComponent(c.b),P=t.getComponent(l.a),I=k.x,N=k.y,R=k.z,W=-1===A.oldPosition.x?k.x:A.oldPosition.x,z=-1===A.oldPosition.y?k.y:A.oldPosition.y,D=-1===A.oldPosition.z?k.z:A.oldPosition.z,[F,U,H]=(0,i.A)(k.x,k.y,k.z,W,z,D),B=t.hasComponent(d.a)?new i.e(t.getComponent(d.a).standSizeY,t.getComponent(d.a).cluchSizeY):new i.e(0,0),G=Math.max(...n.getWorldSize());if(A.through)return this.cancel(t,n);const Y=0!==P.hit.x||0!==P.hit.z||n.hasBlockScaleVoxel(k.x,k.y,k.z,P.size.x+.1,P.size.y);if(A.enable&&!A.exec&&!A.through&&(0!==F||0!==U||0!==H)&&(null===(a=t.getComponent(d.a))||void 0===a||!a.enableCluch)&&(null===(y=t.getComponent(w.a))||void 0===y||!y.exec)&&(null===(C=t.getComponent(v.a))||void 0===C||!C.exec)&&(L.isAir||!t.hasComponent(_.a)||0!==t.getComponent(_.a).move.x||0!==t.getComponent(_.a).move.z)&&(L.isHookShot||L.isAir||Y&&(Y!==A.oldHit||0!==L.axes.x.x||0!==L.axes.x.y))&&this.hasHitCamera(n)){const[e,a]=(0,i.q)(O.x,L.axes.x.x,L.axes.x.y),r=0===L.axes.x.x&&0===L.axes.x.y?O.x:(0,i.m)(e,a,0,0),[l,c]=(0,i.q)(r,0,P.size.x),d=Math.min((0,i.p)(F,U,H,0,0,0),n.getWorldDistance()),y=Math.max(1e-6,Math.min(d,P.size.x/4,P.size.y/4,.5)),[v,w]=(0,i.n)(F,U,H,0,0,0),[x,_,C]=(0,i.r)(v,w,0,0,1),T=n.getCamera();let S=0;for(;;){k.x=W+S*x,k.y=z+S*_,k.z=D+S*C;let e=k.x+l,a=k.z+c;const v=!n.hasBlockScaleVoxel(e,Math.floor(k.y+B.x),a,.001,.001),w=!n.hasBlockScaleVoxel(e,Math.floor(k.y+B.y),a,.001,.001),O=k.y+P.size.y;if(v||w){let l=-1,c=-1,d=-1;for(let t=B.x;t>0&&([l,c,d,,]=n.hitScanVoxel(0,i.b,e,k.y+t,a,t),!(-1!==c&&c>=k.y&&c<=O&&(0,s.b)(n.getVoxel(l,c,d),b.u)));t-=B.x/5)l=-1,c=-1,d=-1;const y=c,v=(0,i.m)(.5+(0|l),.5+(0|d),k.x,k.z),w=t.hasComponent(h.a)?(0,i.m)(t.getComponent(h.a).value.x,t.getComponent(h.a).value.z,0,0):-1;if(-1!==l&&-1!==c&&-1!==d&&((0!==L.axes.x.x||0!==L.axes.x.y)&&(0,i.h)(r,v)<i.b||(0,i.h)(w,v)<i.b)&&!n.hasBlockScaleVoxel(k.x,y,k.z,.001,B.y)){const v=y,w=(0,f.b)(e,a,P.size.x,G);for(let t=0,i=0|w.length;t<i;t=t+2|0){const i=w[t],o=w[t+1];if((0,s.b)(n.getVoxel(i,v,o),b.u))continue;const[r,,l]=(0,m.c)(i,v,o,e,v,a,P.size.x,.001,((e,t,a)=>!(0,s.b)(n.getVoxel(e,t,a),b.u)));e+=r,a+=l}if(l=Math.floor(l),c=Math.floor(c-.999),d=Math.floor(d),(!n.hasBlockScaleVoxel(e,v,a,P.size.x,B.x)||!n.hasBlockScaleVoxel(e,v,a,P.size.x,B.y))&&(-1===A.grabPosition.x||-1===A.grabPosition.y||-1===A.grabPosition.z||Math.abs(A.grabPosition.x-l)>1||Math.abs(A.grabPosition.y-c)>1||Math.abs(A.grabPosition.z-d)>1)){const v=!n.hasBlockScaleVoxel(k.x,y-B.x,k.z,.001,B.x),w=!n.hasBlockScaleVoxel(k.x,y-B.y,k.z,.001,B.y);if(v||w){var V;const w=(0,i.u)(r);let x=w===Math.PI?l+1+P.size.x/2:0===w?l-P.size.x/2:k.x,_=w===3*i.b?d+1+P.size.x/2:w===i.b?d-P.size.x/2:k.z;const C=y-((null===(V=T.getComponent(M.a))||void 0===V?void 0:V.position.y)||.5),S=(0,f.b)(x,_,P.size.x,G);for(let e=0,t=0|S.length;e<t;e=e+2|0){const t=S[e],a=S[e+1];if((0,s.b)(n.getVoxel(t,y-1,a),b.u))continue;const[i,,o]=(0,m.c)(t,y-1,a,x,C,_,P.size.x,P.size.y,((e,t,a)=>!(0,s.b)(n.getVoxel(e,t,a),b.u)));x+=i,_+=o}const O=T.getComponent(g.a).cluchY||.5,I=T.getComponent(g.a).standY||.5,[N,R]=(0,i.n)(e,y+.001,a,x,y+.001,_),W=(0,i.p)(e,y+.001,a,x,y+.001,_);if(!n.hasBlockScaleVoxel(x,y-O,_,.001,O)&&!n.hasBlockScaleVoxel(e,y+.5,a,.001,.001)&&n.hasBlockScaleVoxel(e,y-I,a,.001,I)&&!n.hasHitScanVoxel(N,R,x,y+.001,_,W)){var j;if(A.start.x=k.x,A.start.y=k.y,A.start.z=k.z,A.end.y=C,n.hasBlockScaleVoxel(e,C,_,P.size.x,P.size.y)?n.hasBlockScaleVoxel(x,C,a,P.size.x,P.size.y)?(A.end.x=x,A.end.z=_):(A.end.x=x,A.end.z=a):(A.end.x=e,A.end.z=_),A.last.x=e,A.last.y=y,A.last.z=a,A.angle=n.hasBlockScaleVoxel(l+.5-Math.sign(l+.5-k.x),y-.5,d+.5,.001,.001)||n.hasBlockScaleVoxel(l+.5,y-.5,d+.5-Math.sign(d+.5-k.z)+.5,.001,.001)?(0,i.u)((0,i.m)(l+.5,d+.5,x,_)):(0,i.v)((0,i.m)(l+.5,d+.5,x,_)),A.blockPositionTop=y,A.time=0,A.exec=!0,A.grabPosition.x=l,A.grabPosition.y=c,A.grabPosition.z=d,v&&n.hasBlockScaleVoxel(A.last.x,A.last.y,A.last.z,P.size.x,B.x)?A.climb=!1:A.climb=v&&!n.hasBlockScaleVoxel(k.x,k.y,k.z,P.size.x,P.size.y)||y-k.y<=Math.ceil(B.x/2),A.climb){const e=new o.a("player-climb-sound"),[t,a]=(0,i.q)(A.angle,0,.375);e.position.x=T.position.x+t,e.position.y=T.position.y,e.position.z=T.position.z+a,n.createSound("./asset/sound/player/climb.mp3",e,"player-climb").play()}else{var K;const e=new o.a("player-grab-sound"),[a,s]=(0,i.q)(A.angle,0,.375);e.position.x=T.position.x+a,e.position.y=T.position.y,e.position.z=T.position.z+s;const r=(null===(K=t.getComponent(h.a))||void 0===K?void 0:K.value)||new i.f;if(n.createSound("./asset/sound/player/grab.mp3",e,"player-grab").setVolume(.25+Math.max(Math.abs(r.x),Math.abs(r.y),Math.abs(r.z))/.1*.75).play(),T.hasComponent(u.a)){T.getComponent(u.a).swais.push(new p.a(.5,1,.05+.05*((0,E.e)(-t.getComponent(h.a).value.y/L.airValue)||0),2,0))}}const s=(null===(j=t.getComponent(h.a))||void 0===j?void 0:j.value)||new i.f;s.x=0,s.y=0,s.z=0;break}}}}}if(S>=d)break;S=Math.min(d,(0,E.c)(S+y,d,1e5,Math.ceil))}k.x=I,k.y=N,k.z=R}if(A.exec&&!A.climb){const{direction:e}=n.getCamera(),{position:a}=t,[o,s]=(0,i.q)(A.angle,0,1),r=!n.hasHitScanVoxelBold(e.x,0,a.x,a.y+P.size.y/2,a.z,.75*P.size.x,1.01),l=(0,i.j)(e.y,0)<-i.d&&!n.hasBlockScaleVoxel(A.last.x,0|A.last.y,A.last.z,.001,B.y)&&n.hasBlockScaleVoxel(A.last.x,0|A.last.y,A.last.z,.001,B.x)&&!n.hasBlockScaleVoxel(A.last.x,Math.ceil((0|A.last.y)+B.y)+1,A.last.z,.001,B.y)&&!n.hasBlockScaleVoxel(a.x,.5+(0|A.last.y),a.z,.99*P.size.x,B.x),[h,c]=(0,i.q)(t.direction.x,L.axes.x.x,L.axes.x.y),u=(0!==L.axes.x.x||0!==L.axes.x.y)&&(0,i.h)((0,i.m)(h,c,0,0),A.angle)<i.d,p=!n.hasBlockScaleVoxel(.5+(0|A.last.x),.5+(0|A.last.y),.5+(0|A.last.z),.001,.001)&&(!n.hasBlockScaleVoxel(.5+(0|A.last.x),0|A.last.y,.5+(0|A.last.z),P.size.x,B.x)||!n.hasBlockScaleVoxel(.5+(0|A.last.x),0|A.last.y,.5+(0|A.last.z),P.size.x,B.y)&&(()=>{const e={},t=[{x:0|A.last.x,y:0|A.last.y,z:0|A.last.z}];for(e[(0,S.d)(t[0].x,t[0].y,t[0].z)]=!0;t.length>0;){const a=t.shift()||null;if(null===a)break;for(let i=0,o=0|f.h.length;i<o;i=i+1|0){const[o,s,r]=f.h[i],l=o+a.x|0,h=s+a.y|0,c=r+a.z|0,u=(0,S.d)(l,h,c);if(!e.hasOwnProperty(u))if(e[u]=!0,n.hasBlockScaleVoxel(l+.5,h+.5,c+.5,.01,.01)){const e=n.getVoxel(l+.5,h+.5,c+.5);let t=!1;if(t=s<0?t||b.c.some((t=>e.top===t)):t||b.c.some((t=>e.bottom===t)),t=0!==o?o<0?t||b.c.some((t=>e.back===t)):t||b.c.some((t=>e.front===t)):r<0?t||b.c.some((t=>e.right===t)):t||b.c.some((t=>e.left===t)),t)return!0}else if(n.hasBlockScaleVoxel(l+.5,h+.5-1,c+.5,.01,.01)){if(!n.hasBlockScaleVoxel(l+.5,0|h,c+.5,.01,B.x))return!0;t.push({x:l,y:h,z:c})}}}return!1})());A.standJump=r||l,A.canJump=(!p||!u)&&r||l,A.canClimb=p&&(!A.canJump||u),A.canThroug=!n.hasBlockScaleVoxel(.5+(0|A.last.x),.5+(0|A.last.y),.5+(0|A.last.z),.001,.001)&&n.hasBlockScaleVoxel(.5+(0|A.last.x),0|A.last.y,.5+(0|A.last.z),P.size.x,B.x)&&!n.hasBlockScaleVoxel(.5+(0|A.last.x),0|A.last.y,.5+(0|A.last.z),P.size.x,B.y)&&!n.hasBlockScaleVoxel(.5+(0|A.last.x)+o,.5+(0|A.last.y),.5+(0|A.last.z)+s,.001,.001)&&!A.canJump}else A.canJump=!1,A.canClimb=!1;A.exec&&(P.enable=!1),A.exec||L.isAir||null!==(T=t.getComponent(x.a))&&void 0!==T&&T.exec||(A.grabPosition.x=-1,A.grabPosition.y=-1,A.grabPosition.z=-1),A.oldHit=Y,A.oldPosition.x=k.x,A.oldPosition.y=k.y,A.oldPosition.z=k.z}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>X});n(7),n(1),n(2);var i=n(33),o=n(75),s=n(188),r=n(0),l=n(503),h=n(64),c=n(154),u=n(186),p=n(13),d=n(48),g=n(331),m=n(31),f=n(50),y=n(57),v=n(9),w=n(39),b=n(97),x=n(146),M=n(52),E=n(49),_=n(93),C=n(504),T=n(5),S=n(108),k=n(8),O=n(51),A=n(47),L=n(185),P=n(65),I=n(40),N=e([f,x,T,A]);function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W(e,t,n,a,i){const o=a.data.isOutOfAmmoLower&&!a.isAmmo&&0===a.bullets.length;if(!n){if(a.isCanShoot){if(t>0&&t<1||!o&&a.activeHold)return a.isChargeAttack?a.data.chargeFireMaterial:a.data.fireMaterial;if(e>0&&e<1)return a.data.cockingMaterial}if(o)return a.data.emptyMaterial;if(a.isChargeEnable)return a.data.chargeMaterial;if(a.isChargeStart)return a.data.chargeWaitMaterial}return i}function z(e,t){return"sprint"===e&&(t.rightWeapon.data.grip&&!t.leftWeapon.data.grip&&t.rightWeapon.chargePar>0||t.leftWeapon.data.grip&&!t.rightWeapon.data.grip&&t.leftWeapon.chargePar>0)}[f,x,T,A]=N.then?(await N)():N;class D{constructor(){R(this,"name","still")}stopSound(e,t,n,a){if(a||n!==A.e.SPIN){var i,o,s;if(e.hasSound("player-chain-".concat(t.inverse?"left":"right","-start")))null===(i=e.getSound("player-chain-".concat(t.inverse?"left":"right","-start")))||void 0===i||i.stop();if(e.hasSound("player-chain-".concat(t.inverse?"left":"right","-loop")))null===(o=e.getSound("player-chain-".concat(t.inverse?"left":"right","-loop")))||void 0===o||o.stop();if(e.hasSound("player-chain-".concat(t.inverse?"left":"right","-end")))null===(s=e.getSound("player-chain-".concat(t.inverse?"left":"right","-end")))||void 0===s||s.stop()}var r;(a||n!==A.e.BOOSTER)&&(e.hasSound("player-combobooster-".concat(t.inverse?"left":"right","-loop"))&&(null===(r=e.getSound("player-combobooster-".concat(t.inverse?"left":"right","-loop")))||void 0===r||r.stop()))}update(e,t,n,a,p){var d,g,m,C,S,I,N,R,D,F;const U=n.getComponent(f.a),H=t.getComponent(s.a),B=t.getComponent(o.a),G=t.getComponent(c.a),Y=t.getComponent(u.a),V=t.getComponent(l.a),j=n.getComponent(v.b),K=n.getComponent(E.a),X=H.inverse?U.leftWeapon:U.rightWeapon;if(n.hasComponent(_.a)){const e=n.getComponent(_.a),t=e.isSprint;H.sprintStartTime=e.isTacticalSprint?-1:H.enableSprint!==t?H.time:H.sprintStartTime,H.enableSprint=t}let q=0;if(n.hasComponent(w.a)&&n.hasComponent(b.a)){const e=n.getComponent(w.a),t=n.getComponent(b.a);e.value.hasOwnProperty("combo")&&(q=Math.max(0,Math.min(1,((0,w.e)(n,"combo")-t.start)/(t.max-t.start))))}const J=a.getCamera();Y.hard=!0,Y.blockX=0,Y.speed=(null===(d=J.getComponent(P.a))||void 0===d?void 0:d.speed)||1.5,Y.mrotate=r.b*(.1-.05*q),Y.slide=.25-.175*q,Y.x=.125-.075*q,Y.y=.125-.075*q,Y.rotate=0,Y.invert=!0,Y.moveFix=!0,G.rotate=0,G.scale=1+.375*K.value,G.position.y=-.5-1*(0===X.chargePar?1-(0,k.e)((j.time-j.grabTime)/.1):0)+-.125*K.value;const Z="grab"===p&&(null===(g=n.getComponent(i.a))||void 0===g?void 0:g.exec)&&!(null!==(m=n.getComponent(i.a))&&void 0!==m&&m.climb),$="grab"===p&&!(null!==(C=n.getComponent(i.a))&&void 0!==C&&C.exec)&&(null===(S=n.getComponent(i.a))||void 0===S?void 0:S.climb),Q="grab"===p&&(null===(I=n.getComponent(i.a))||void 0===I?void 0:I.canJump),ee=!(null!==(N=n.getComponent(i.a))&&void 0!==N&&N.exec)&&((U.rightWeapon.data.grip||U.leftWeapon.data.grip?(!!U.rightWeapon.data.grip||U.rightWeapon.isAmmo)&&(!!U.leftWeapon.data.grip||U.leftWeapon.isAmmo):U.rightWeapon.isAmmo||U.leftWeapon.isAmmo)||X.bullets.length>0);var te;Z||ee||!(null!==(R=n.getComponent(_.a))&&void 0!==R&&R.enableSprint||null!==(D=n.getComponent(_.a))&&void 0!==D&&D.enableTacticalSprint)||null!==(F=n.getComponent(O.a))&&void 0!==F&&F.exec||(Y.speed=(null===(te=J.getComponent(P.a))||void 0===te?void 0:te.speed)||1.75,Y.slide=.5-.25*q,Y.x=.5-.25*q,Y.y=.5-.25*q);const[ne,ae,ie,oe,se,re]=(0,x.b)(n,t),le=(U.leftWeapon.data.shootType!==A.q.SHIELD||U.rightWeapon.data.shootType!==A.q.SHIELD)&&(U.leftWeapon.data.shootType===A.q.SHIELD&&U.leftWeapon.isFirePress)!==(U.rightWeapon.data.shootType===A.q.SHIELD&&U.rightWeapon.isFirePress),he=z(p,U),ce=H.muzzleFlash;if(U.isRightChange&&(ce.isVisible=!1),se>0&&se<1){if(!ce.isVisible){if(ce.hasComponent(l.a)){const e=X.data.muzzleFlashMaterials;let t=0;do{t=Math.floor(e.length*Math.random())}while(e.length>1&&t===X.muzzleFlashIndex);X.muzzleFlashIndex=t,ce.getComponent(l.a).material=e[t]}if(ce.hasComponent(o.a)){const e=ce.getComponent(o.a);e.position.x=B.position.x,e.position.y=B.position.y,e.position.z=B.position.z,e.rotate=B.rotate,e.scale=B.scale}}ce.isVisible=!0}else ce.hasComponent(l.a)&&(ce.getComponent(l.a).material=T.h.NONE),ce.isVisible=!1;let ue=0;H.inverse&&U.leftWeapon.data.flip?V.flip.x=!0:V.flip.x=!1,ue=X.chargePar;let pe=W(oe,se,he,X,X.data.stillMaterial);const de=U.isLeftChange&&(H.inverse?0!==U.leftChangeTime&&j.time-U.leftChangeTime<.5:"hand"===U.right&&U.rightWeapon.data.grip&&U.left!==U.right),ge=U.isRightChange&&(H.inverse?"hand"===U.left&&U.leftWeapon.data.grip&&U.left!==U.right:0!==U.rightChangeTime&&j.time-U.rightChangeTime<.5);if(Z&&!Q||!(he||ne||le||Z&&Q)){if(H.inverse){var me,fe;if(Y.add=.25,G.position.x=(U.leftWeapon.data.grip?.375:.25)+.125*K.value,de&&!(null!==(me=n.getComponent(_.a))&&void 0!==me&&me.enableSprint||null!==(fe=n.getComponent(_.a))&&void 0!==fe&&fe.enableTacticalSprint)&&(!Z||$)){if(B.position.x=G.position.x=.75+.125*K.value,B.position.y=G.position.y=-.125*K.value-1.5,U.leftWeapon.data.changeAnimationType===A.b.ROLL)B.position.y=G.position.y+=.25,B.rotate=G.rotate=.5*r.a,B.scale=G.scale=2;G.position.y=-.125*K.value-.5,U.leftBob=!1}switch(p){case"still":case"sliding":case"jump":case"grab":case"wallrun":if(n.hasComponent(y.a)){const e=n.getComponent(y.a),t=!U.leftWeapon.data.isOutOfAmmoLower||U.leftWeapon.isAmmo||U.leftWeapon.bullets.length>0,a=Math.max(e.cameraValue,t?0:1);G.position.y-=.5*a,G.position.x+=.25*a,G.scale+=.5*a}}G.isRotateCenter=!!U.leftWeapon.data.isRotateCenter}else{if(Y.add=0,G.position.x=(U.rightWeapon.data.grip?-.375:-.25)+-.125*K.value,ge&&(!t.hasComponent(_.a)||!n.getComponent(_.a).enableSprint&&!n.getComponent(_.a).enableTacticalSprint)&&(!Z||$)){if(B.position.x=G.position.x=-.125*K.value-.75,B.position.y=G.position.y=-.125*K.value-1.5,U.rightWeapon.data.changeAnimationType===A.b.ROLL)B.position.y=G.position.y+=.25,B.rotate=G.rotate=.5*-r.a,B.scale=G.scale=2;G.position.y=-.125*K.value-.5,U.rightBob=!1}switch(p){case"still":case"sliding":case"jump":case"grab":case"wallrun":if(n.hasComponent(y.a)){const e=n.getComponent(y.a),t=!U.rightWeapon.data.isOutOfAmmoLower||U.rightWeapon.isAmmo||U.rightWeapon.bullets.length>0,a=Math.max(e.cameraValue,t?0:1);G.position.y-=.5*a,G.position.x-=.25*a,G.scale+=.5*a}}G.isRotateCenter=!!U.rightWeapon.data.isRotateCenter}if(n.hasComponent(M.a)){const e=n.getComponent(M.a);G.position.x-=-.075*e.value.x}}else{if(Y.add=0,de&&(!U.leftWeapon.data.grip&&U.rightWeapon.data.grip||H.inverse&&U.leftWeapon.data.shootType!==A.q.SHIELD)&&(!Z||$))switch(B.position.x=G.position.x=.75+.25*K.value,B.position.y=G.position.y=-.125*K.value-1.5,U.leftWeapon.data.changeAnimationType){case A.b.DEFAULT:B.rotate=G.rotate=.25*r.a;break;case A.b.FLOAT:H.inverse?B.rotate=G.rotate=.25*r.a:(B.position.y=G.position.y+=.25,B.position.x=G.position.x=-.25);break;case A.b.ROLL:H.inverse?(B.position.y=G.position.y+=.25,B.rotate=G.rotate=.5*r.a,B.scale=G.scale=2):B.rotate=G.rotate=.25*r.a}else G.position.x=0;if(ge&&(U.leftWeapon.data.grip&&!U.rightWeapon.data.grip||!H.inverse&&U.rightWeapon.data.shootType!==A.q.SHIELD)&&(!Z||$))switch(B.position.x=G.position.x=-.25*K.value-.75,B.position.y=G.position.y=-.125*K.value-1.5,U.rightWeapon.data.changeAnimationType){case A.b.DEFAULT:B.rotate=G.rotate=.25*-r.a;break;case A.b.FLOAT:H.inverse?(B.position.y=G.position.y+=.25,B.position.x=G.position.x=.25):B.rotate=G.rotate=.25*-r.a;break;case A.b.ROLL:H.inverse?B.rotate=G.rotate=.25*-r.a:(B.position.y=G.position.y+=.25,B.rotate=G.rotate=.5*-r.a,B.scale=G.scale=2)}else G.position.x=0;if(H.inverse?(B.position.z=G.position.z=U.leftWeapon.data.grip||U.leftWeapon.data.shootType===A.q.SHIELD?.025:.005,G.isRotateCenter=!0):(B.position.z=G.position.z=U.rightWeapon.data.grip||U.rightWeapon.data.shootType===A.q.SHIELD?.025:.005,G.isRotateCenter=!0),!U.leftWeapon.data.grip&&U.rightWeapon.data.grip)switch(p){case"still":case"sliding":case"jump":case"wallrun":if(n.hasComponent(y.a)){const e=n.getComponent(y.a),t=!U.leftWeapon.data.isOutOfAmmoLower||U.leftWeapon.isAmmo||U.leftWeapon.bullets.length>0,a=oe>0&&oe<1||U.rightWeapon.chargePar>0?0:Math.max(e.cameraValue,t?0:1);G.position.y-=.25*a,G.scale+=.5*a,G.rotate+=.25*Math.PI*a}}else if(U.leftWeapon.data.grip&&!U.rightWeapon.data.grip)switch(p){case"still":case"sliding":case"jump":case"wallrun":if(n.hasComponent(y.a)){const e=n.getComponent(y.a),t=!U.rightWeapon.data.isOutOfAmmoLower||U.rightWeapon.isAmmo||U.rightWeapon.bullets.length>0,a=oe>0&&oe<1||U.leftWeapon.chargePar>0?0:Math.max(e.cameraValue,t?0:1);G.position.y-=.25*a,G.scale+=.5*a,G.rotate-=.25*Math.PI*a}}if(n.hasComponent(M.a)){const e=n.getComponent(M.a);G.position.x-=-.175*e.value.x}}if("grab"!==p&&"sliding"!==p&&"sprint"!==p)if(-1!==j.landingTime){const e=j.landingTime;G.scale-=.25*(1-Math.min(1,(j.time-e)/.5))*(-(0,r.j)(0,n.direction.y)/r.b),G.position.y-=.1*(1-Math.min(1,(j.time-e)/.5))*((0,r.j)(0,n.direction.y)/r.b),ne||le||(G.position.x-=.1*(1-Math.min(1,(j.time-e)/.5))*((0,r.j)(0,n.direction.y)/r.b)*(H.inverse?-1:1));const t=(0,r.h)(0,n.direction.y)/r.b;G.position.y-=j.landingForce/1.5*.5*(t<0?3:1)*(1-Math.min(1,(j.time-e)/.5))*(1-t)}else if(n.hasComponent(h.a)){const e=n.getComponent(h.a);if(-1!==e.time){const{time:t}=e;G.scale-=.125*(1-Math.min(1,(j.time-t)/.5))*(-(0,r.j)(0,n.direction.y)/r.b),G.position.y-=.05*(1-Math.min(1,(j.time-t)/.5))*((0,r.j)(0,n.direction.y)/r.b),ne||le||(G.position.x-=.05*(1-Math.min(1,(j.time-t)/.5))*((0,r.j)(0,n.direction.y)/r.b)*(H.inverse?-1:1));const a=(0,r.h)(0,n.direction.y)/r.b;G.position.y-=.25*(a<0?3:1)*(1-Math.min(1,(j.time-t)/.5))*(1-a)}}if((H.inverse?0!==U.leftWeapon.bullets.length:0!==U.rightWeapon.bullets.length)||(H.inverse?0!==U.leftWeapon.chargePar||!U.leftWeapon.data.grip||U.rightWeapon.data.isHave||U.leftWeapon.isFireStart:0!==U.rightWeapon.chargePar||!U.rightWeapon.data.grip||U.leftWeapon.data.isHave||U.rightWeapon.isFireStart)||(G.position.y-=1),U.isCanShoot&&!he)if("sprint"!==p&&((H.inverse?U.leftWeapon.activeHold:U.rightWeapon.activeHold)||oe>0&&oe<1))switch(H.fireTime=H.time,ie){case A.e.PUNCH:{G.isRotateCenter=!1;const e=Math.sin(oe*Math.PI);if(G.position.y=-.625*(1-e)-.125,G.scale-=.25*(1-e),H.inverse?(G.position.x=.5-.375*e,G.rotate+=Math.PI/16-r.b*(1-e)):(G.position.x=.375*e-.5,G.rotate-=Math.PI/16-r.b*(1-e)),n.hasComponent(M.a)){const t=n.getComponent(M.a);G.position.x-=-.075*t.value.x*e}B.position.x=G.position.x,B.position.y=G.position.y,B.rotate=G.rotate,H.inverse?V.material=U.leftWeapon.isChargeAttack?U.leftWeapon.data.chargeFireMaterial:U.leftWeapon.data.fireMaterial:V.material=U.rightWeapon.isChargeAttack?U.rightWeapon.data.chargeFireMaterial:U.rightWeapon.data.fireMaterial;break}case A.e.SHATTER:{G.isRotateCenter=!1;const e=Math.min(1,4*oe);if(G.position.y=-.625*(1-e)-.125,G.scale-=.25*(1-e),H.inverse?(G.position.x=.5-.375*e,G.rotate+=Math.PI/16-r.b*(1-e)):(G.position.x=.375*e-.5,G.rotate-=Math.PI/16-r.b*(1-e)),n.hasComponent(M.a)){const t=n.getComponent(M.a);G.position.x-=-.075*t.value.x*e}B.position.x=G.position.x,B.position.y=G.position.y,B.rotate=G.rotate,H.inverse?V.material=U.leftWeapon.isChargeAttack?U.leftWeapon.data.chargeFireMaterial:U.leftWeapon.data.fireMaterial:V.material=U.rightWeapon.isChargeAttack?U.rightWeapon.data.chargeFireMaterial:U.rightWeapon.data.fireMaterial;break}case A.e.GRENADE_SHORT:{G.isRotateCenter=!1;const e=Math.min(1,4*oe);if(G.position.y=-.125*(1-e)-.25,G.scale=.75,H.inverse?(G.position.x=.25*e,G.rotate=-Math.PI/8):(G.position.x=-.25*e,G.rotate=Math.PI/8),n.hasComponent(M.a)){const t=n.getComponent(M.a);G.position.x-=-.075*t.value.x*e}B.position.x=G.position.x,B.position.y=G.position.y,B.rotate=G.rotate,H.inverse?V.material=e<.5?U.leftWeapon.data.cockingMaterial:U.leftWeapon.data.fireMaterial:V.material=e<.5?U.rightWeapon.data.cockingMaterial:U.rightWeapon.data.fireMaterial;break}case A.e.GRENADE_LONG:{G.isRotateCenter=!1;const e=Math.min(1,4*oe);if(G.position.y=-.1825*(1-e)-.125,G.scale=.75,H.inverse?(G.position.x=.25*e,G.rotate=-Math.PI/8):(G.position.x=-.25*e,G.rotate=Math.PI/8),n.hasComponent(M.a)){const t=n.getComponent(M.a);G.position.x-=-.075*t.value.x*e}B.position.x=G.position.x,B.position.y=G.position.y,B.rotate=G.rotate,H.inverse?V.material=e<.5?U.leftWeapon.data.cockingMaterial:U.leftWeapon.data.fireMaterial:V.material=e<.5?U.rightWeapon.data.cockingMaterial:U.rightWeapon.data.fireMaterial;break}case A.e.PULL:{const e=Math.sin(oe*r.b);G.position.y-=.5*e,G.scale+=.75*e,H.inverse?G.position.x+=.25*e:G.position.x-=.25*e;break}case A.e.HOLD:H.inverse?V.material=U.leftWeapon.data.fireMaterial:V.material=U.rightWeapon.data.fireMaterial;break;case A.e.SHIELD:H.inverse?V.material=(0,w.e)(n,U.leftWeapon.data.ammoType||"none")>0?U.leftWeapon.data.fireMaterial:U.leftWeapon.data.cockingMaterial:V.material=(0,w.e)(n,U.rightWeapon.data.ammoType||"none")>0?U.rightWeapon.data.fireMaterial:U.rightWeapon.data.cockingMaterial;break;case A.e.BOOSTER:if(G.isRotateCenter=!1,oe<.425)H.isFireAnimation||(H.isFireAnimation=!0,B.position.y=-1.5,H.inverse?(B.position.x=.25,B.rotate=-.5*Math.PI):(B.position.x=-.25,B.rotate=.5*Math.PI)),G.position.y+=.25,H.inverse?G.position.x=.25:G.position.x=-.25,H.inverse?V.material=U.leftWeapon.data.stillMaterial:V.material=U.rightWeapon.data.stillMaterial;else if(oe<.75){a.hasSound("player-combobooster-".concat(H.inverse?"left":"right","-fire"))||(a.createSound("./asset/sound/weapon/combobooster-fire.mp3",null,"player-combobooster-".concat(H.inverse?"left":"right","-fire")).setVolume(5).play(!0),Y.swais.push(new L.a(.25,1,.75,1,0)));const e=Math.min(1,(oe-.425)/.25);var ye;if(a.hasSound("player-combobooster-".concat(H.inverse?"left":"right","-loop")))null===(ye=a.getSound("player-combobooster-".concat(H.inverse?"left":"right","-loop")))||void 0===ye||ye.setVolume(e);else a.createSound("./asset/sound/weapon/combobooster-loop.mp3",null,"player-combobooster-".concat(H.inverse?"left":"right","-loop")).setVolume(e).play(!0);G.position.y+=.25,H.inverse?G.position.x=.25:G.position.x=-.25,H.inverse?V.material=U.leftWeapon.data.fireMaterial:V.material=U.rightWeapon.data.fireMaterial}else if(oe<.9)G.position.y+=.25,H.inverse?G.position.x=.25:G.position.x=-.25,H.inverse?V.material=U.leftWeapon.data.fireMaterial:V.material=U.rightWeapon.data.fireMaterial;else{const e=Math.min(1,(oe-.9)/.1);G.position.x+=.25*("right"===ae?-1:1)+1.5*("right"===ae?1:-1)*e,G.position.y+=.25+-1.75*e,G.rotate+=(.25*r.b+.125*r.b*e)*("right"===ae?-1:1),G.scale+=.5+.5*e,H.inverse?V.material=U.leftWeapon.data.fireMaterial:V.material=U.rightWeapon.data.fireMaterial}break;case A.e.HOOK:H.inverse?V.material=U.leftWeapon.data.fireMaterial:V.material=U.rightWeapon.data.fireMaterial;break;case A.e.RECOIL:{let e=W(oe,se,he,U.leftWeapon,pe),t=W(oe,se,he,U.rightWeapon,pe);H.inverse?V.material="right"===ae&&U.leftWeapon.data.grip?U.leftWeapon.data.gripMaterial:e:V.material="left"===ae&&U.rightWeapon.data.grip?U.rightWeapon.data.gripMaterial:t;let a=Math.sin(oe*Math.PI),i=!1;(ne&&("right"===ae&&t===U.rightWeapon.data.cockingMaterial||"left"===ae&&e===U.leftWeapon.data.cockingMaterial)||V.material===(H.inverse?U.leftWeapon.data.cockingMaterial:U.rightWeapon.data.cockingMaterial))&&!H.isFireAnimation&&(H.isFireAnimation=!0,a=1,i=!0),oe<.5&&!H.isFireAnimation&&(a=0);const o=.125,s=B.position.x,r=B.position.y,l=G.position.x,h=G.position.y;if(G.position.y-=o*a,G.scale+=2.5*o*a,ne||le?!U.leftWeapon.data.grip&&U.rightWeapon.data.grip?(G.position.x+=.125*o*a,G.rotate+=o*Math.PI*.25*a):U.leftWeapon.data.grip&&!U.rightWeapon.data.grip&&(G.position.x-=.125*o*a,G.rotate-=o*Math.PI*.25*a):H.inverse?(G.position.x+=o*a,G.rotate+=o*Math.PI*.25*a):(G.position.x-=o*a,G.rotate-=o*Math.PI*.25*a),n.hasComponent(M.a)){const e=n.getComponent(M.a);G.position.x-=e.value.x*o*-.25*a}i&&(B.position.x=s+(G.position.x-l),B.position.y=r+(G.position.y-h));break}case A.e.CANNON:{G.isRotateCenter=!1;let e=W(oe,se,he,U.leftWeapon,pe),t=W(oe,se,he,U.rightWeapon,pe);H.inverse?V.material="right"===ae&&U.leftWeapon.data.grip?U.leftWeapon.data.gripMaterial:e:V.material="left"===ae&&U.rightWeapon.data.grip?U.rightWeapon.data.gripMaterial:t;let a=Math.min(1,Math.sin(oe*Math.PI)),i=!1;(ne&&("right"===ae&&t===U.rightWeapon.data.cockingMaterial||"left"===ae&&e===U.leftWeapon.data.cockingMaterial)||V.material===(H.inverse?U.leftWeapon.data.cockingMaterial:U.rightWeapon.data.cockingMaterial))&&!H.isFireAnimation&&(H.isFireAnimation=!0,a=1,i=!0),oe<.5&&!H.isFireAnimation&&(a=0),H.isFireAnimation||(a=ne&&("right"===ae&&t===U.rightWeapon.data.cockingMaterial||"left"===ae&&e===U.leftWeapon.data.cockingMaterial)||V.material===(H.inverse?U.leftWeapon.data.cockingMaterial:U.rightWeapon.data.cockingMaterial)?1:0);const o=.25,s=B.position.x,r=B.position.y,l=G.position.x,h=G.position.y;if(G.position.y-=2*o*a,G.scale+=4*o*a,ne||le?!U.leftWeapon.data.grip&&U.rightWeapon.data.grip||U.leftWeapon.data.shootType!==A.q.SHIELD&&U.rightWeapon.data.shootType===A.q.SHIELD?(G.position.x+=.5*o*a,G.rotate-=.175*Math.PI*a):(U.leftWeapon.data.grip&&!U.rightWeapon.data.grip||U.leftWeapon.data.shootType===A.q.SHIELD&&U.rightWeapon.data.shootType!==A.q.SHIELD)&&(G.position.x-=.5*o*a,G.rotate+=.175*Math.PI*a):H.inverse?(G.position.x+=o*a,G.rotate-=.175*Math.PI*a):(G.position.x-=o*a,G.rotate+=.175*Math.PI*a),n.hasComponent(M.a)){const e=n.getComponent(M.a);G.position.x-=e.value.x*o*-.25*a}i&&(B.position.x=s+(G.position.x-l),B.position.y=r+(G.position.y-h));break}case A.e.SPIN:{var ve,we;if(a.hasSound("player-chain-".concat(H.inverse?"left":"right","-start")))null===(ve=a.getSound("player-chain-".concat(H.inverse?"left":"right","-start")))||void 0===ve||ve.stop();if(a.hasSound("player-chain-".concat(H.inverse?"left":"right","-end")))null===(we=a.getSound("player-chain-".concat(H.inverse?"left":"right","-end")))||void 0===we||we.stop();a.hasSound("player-chain-".concat(H.inverse?"left":"right","-loop"))||a.createSound("./asset/sound/weapon/chainshotgun-loop.mp3",null,"player-chain-".concat(H.inverse?"left":"right","-loop")).setVolume(5).play(!0);let e,t=W(oe,se,he,U.leftWeapon,pe),i=W(oe,se,he,U.rightWeapon,pe);if(e=H.inverse?U.leftWeapon.data.grip?U.leftWeapon.data.gripMaterial:t:U.rightWeapon.data.grip?U.rightWeapon.data.gripMaterial:i,H.inverse?e===U.leftWeapon.data.cockingMaterial:e===U.rightWeapon.data.cockingMaterial){const t=.1,n=H.time%t>t/2;e=H.inverse?n?U.leftWeapon.data.stillMaterial:U.leftWeapon.data.cockingMaterial:n?U.rightWeapon.data.stillMaterial:U.rightWeapon.data.cockingMaterial}V.material=e;let o=Math.sin(oe*Math.PI),s=!1;(ne&&("right"===ae&&i===U.rightWeapon.data.cockingMaterial||"left"===ae&&t===U.leftWeapon.data.cockingMaterial)||V.material===(H.inverse?U.leftWeapon.data.cockingMaterial:U.rightWeapon.data.cockingMaterial))&&!H.isFireAnimation&&(H.isFireAnimation=!0,o=1,s=!0),oe<.5&&!H.isFireAnimation&&(o=0),H.spinPar=1,H.spinTime=H.time;const r=.125,l=B.position.x,h=B.position.y,c=G.position.x,u=G.position.y;if(G.position.y-=r*o,G.scale+=2*r*o,ne||le?!U.leftWeapon.data.grip&&U.rightWeapon.data.grip?(G.position.x+=.5*r*o,G.rotate+=r*Math.PI*.25*o):U.leftWeapon.data.grip&&!U.rightWeapon.data.grip&&(G.position.x-=.5*r*o,G.rotate-=r*Math.PI*.25*o):H.inverse?(G.position.x+=.5*r*o,G.rotate-=r*Math.PI*.125*o):(G.position.x-=.5*r*o,G.rotate+=r*Math.PI*.125*o),n.hasComponent(M.a)){const e=n.getComponent(M.a);G.position.x-=e.value.x*r*-.25*o}s&&(B.position.x=l+(G.position.x-c),B.position.y=h+(G.position.y-u));break}case A.e.LAUNCHER:if(oe<.425){var be;if(a.hasSound("player-cock"))null===(be=a.getSound("player-cock"))||void 0===be||be.stop();let e=W(oe,se,he,U.leftWeapon,pe),t=W(oe,se,he,U.rightWeapon,pe);H.inverse?V.material="right"===ae&&U.leftWeapon.data.grip?U.leftWeapon.data.gripMaterial:e:V.material="left"===ae&&U.rightWeapon.data.grip?U.rightWeapon.data.gripMaterial:t;const i=oe/.425;let o=Math.sin(i*Math.PI),s=!1;(ne&&("right"===ae&&t===U.rightWeapon.data.cockingMaterial||"left"===ae&&e===U.leftWeapon.data.cockingMaterial)||V.material===(H.inverse?U.leftWeapon.data.cockingMaterial:U.rightWeapon.data.cockingMaterial))&&!H.isFireAnimation&&(H.isFireAnimation=!0,o=1,s=!0),oe<.5&&!H.isFireAnimation&&(o=0);const r=B.position.x,l=B.position.y,h=G.position.x,c=G.position.y,u=.25;if(G.position.y-=u*o,G.scale+=2*u*o,ne||le){const e=.125;!U.leftWeapon.data.grip&&U.rightWeapon.data.grip?(G.position.x+=.5*e*o,G.rotate+=e*Math.PI*.25*o):U.leftWeapon.data.grip&&!U.rightWeapon.data.grip&&(G.position.x-=.5*e*o,G.rotate-=e*Math.PI*.25*o)}else{const e=.25;H.inverse?(G.position.x+=.5*e*o,G.rotate-=e*Math.PI*.125*o):(G.position.x-=.5*e*o,G.rotate+=e*Math.PI*.125*o)}if(n.hasComponent(M.a)){const e=n.getComponent(M.a);G.position.x-=e.value.x*u*-.25*o}s&&(B.position.x=r+(G.position.x-h),B.position.y=l+(G.position.y-c))}else if(oe<.625){var xe;if(a.hasSound("player-cock"))null===(xe=a.getSound("player-cock"))||void 0===xe||xe.stop();H.inverse?V.material=U.leftWeapon.data.grip?U.leftWeapon.data.gripMaterial:U.leftWeapon.data.cockingMaterial:V.material=U.rightWeapon.data.grip?U.rightWeapon.data.gripMaterial:U.rightWeapon.data.cockingMaterial}else a.hasSound("player-cock")||a.createSound("./asset/sound/weapon/launcher-pump.mp3",null,"player-cock").play(),H.inverse?V.material=U.leftWeapon.data.grip?U.leftWeapon.data.gripMaterial:U.leftWeapon.data.cockingMaterial:V.material=U.rightWeapon.data.grip?U.rightWeapon.data.gripMaterial:U.rightWeapon.data.cockingMaterial;break;case A.e.ARROW:if(oe<.425){var Me;if(a.hasSound("player-cock"))null===(Me=a.getSound("player-cock"))||void 0===Me||Me.stop();let e=U.leftWeapon.data.fireMaterial,t=U.rightWeapon.data.fireMaterial;H.inverse?V.material="right"===ae&&U.leftWeapon.data.grip?U.leftWeapon.data.gripMaterial:e:V.material="left"===ae&&U.rightWeapon.data.grip?U.rightWeapon.data.gripMaterial:t;const i=oe/.425;let o=Math.sin(i*Math.PI),s=!1;(ne&&("right"===ae&&t===U.rightWeapon.data.cockingMaterial||"left"===ae&&e===U.leftWeapon.data.cockingMaterial)||V.material===(H.inverse?U.leftWeapon.data.cockingMaterial:U.rightWeapon.data.cockingMaterial))&&!H.isFireAnimation&&(H.isFireAnimation=!0,o=1,s=!0),oe<.5&&!H.isFireAnimation&&(o=0);const r=.125,l=B.position.x,h=B.position.y,c=G.position.x,u=G.position.y;if(G.isRotateCenter=!1,G.position.y-=r*o,G.scale+=2*r*o,n.hasComponent(M.a)){const e=n.getComponent(M.a);G.position.x-=e.value.x*r*-.25*o}s&&(B.position.x=l+(G.position.x-c),B.position.y=h+(G.position.y-u))}else if(oe<.625){const e=.125,t=-.0625,n=.1*Math.PI;var Ee;if(a.hasSound("player-cock"))null===(Ee=a.getSound("player-cock"))||void 0===Ee||Ee.stop();G.isRotateCenter=!1,G.position.y+=e,G.position.x+=t*("right"===ae?1:-1),G.rotate+=n*("right"===ae?1:-1),H.inverse?V.material=U.leftWeapon.data.grip?U.leftWeapon.data.gripMaterial:U.leftWeapon.data.fireMaterial:V.material=U.rightWeapon.data.grip?U.rightWeapon.data.gripMaterial:U.rightWeapon.data.fireMaterial}else{a.hasSound("player-cock")||a.createSound("./asset/sound/weapon/launcher-pump.mp3",null,"player-cock").play();const e=Math.min(1,1.5*Math.sin(Math.min(1,(oe-.625)/.375)*r.b)),t=.375;if(G.position.y-=t*e,G.scale+=2*t*e,ne||le){const t=.25;!U.leftWeapon.data.grip&&U.rightWeapon.data.grip?(G.position.x+=.5*t*e,G.rotate+=t*Math.PI*.25*e):U.leftWeapon.data.grip&&!U.rightWeapon.data.grip&&(G.position.x-=.5*t*e,G.rotate-=t*Math.PI*.25*e)}else H.inverse?(G.position.x+=.5*t*e,G.rotate-=t*Math.PI*.125*e):(G.position.x-=.5*t*e,G.rotate+=t*Math.PI*.125*e);if(n.hasComponent(M.a)){const t=n.getComponent(M.a);G.position.x-=-.25*t.value.x*e}H.inverse?V.material=U.leftWeapon.data.grip?U.leftWeapon.data.gripMaterial:U.leftWeapon.data.stillMaterial:V.material=U.rightWeapon.data.grip?U.rightWeapon.data.gripMaterial:U.rightWeapon.data.stillMaterial}se<1&&(H.inverse?V.material=U.leftWeapon.data.grip?U.leftWeapon.data.gripMaterial:U.leftWeapon.data.fireMaterial:V.material=U.rightWeapon.data.grip?U.rightWeapon.data.gripMaterial:U.rightWeapon.data.cockingMaterial);break;case A.e.HEAVYCANNON:if(oe<.425){var _e;if(a.hasSound("player-cock"))null===(_e=a.getSound("player-cock"))||void 0===_e||_e.stop();let e=W(oe,se,he,U.leftWeapon,pe),t=W(oe,se,he,U.rightWeapon,pe);H.inverse?V.material="right"===ae&&U.leftWeapon.data.grip?U.leftWeapon.data.gripMaterial:e:V.material="left"===ae&&U.rightWeapon.data.grip?U.rightWeapon.data.gripMaterial:t;const i=oe/.425;let o=Math.sin(i*Math.PI),s=!1;(ne&&("right"===ae&&t===U.rightWeapon.data.cockingMaterial||"left"===ae&&e===U.leftWeapon.data.cockingMaterial)||V.material===(H.inverse?U.leftWeapon.data.cockingMaterial:U.rightWeapon.data.cockingMaterial))&&!H.isFireAnimation&&(H.isFireAnimation=!0,o=1,s=!0),oe<.5&&!H.isFireAnimation&&(o=0);const r=.25,l=B.position.x,h=B.position.y,c=G.position.x,u=G.position.y;if(G.position.y-=r*o,G.scale+=2*r*o,ne||le?!U.leftWeapon.data.grip&&U.rightWeapon.data.grip?(G.position.x+=.5*r*o,G.rotate+=r*Math.PI*.25*o):U.leftWeapon.data.grip&&!U.rightWeapon.data.grip&&(G.position.x-=.5*r*o,G.rotate-=r*Math.PI*.25*o):H.inverse?(G.position.x+=.5*r*o,G.rotate-=r*Math.PI*.125*o):(G.position.x-=.5*r*o,G.rotate+=r*Math.PI*.125*o),n.hasComponent(M.a)){const e=n.getComponent(M.a);G.position.x-=e.value.x*r*-.25*o}s&&(B.position.x=l+(G.position.x-c),B.position.y=h+(G.position.y-u))}else if(oe<.625){var Ce;if(a.hasSound("player-cock"))null===(Ce=a.getSound("player-cock"))||void 0===Ce||Ce.stop();H.inverse?V.material=U.leftWeapon.data.grip?U.leftWeapon.data.gripMaterial:U.leftWeapon.data.cockingMaterial:V.material=U.rightWeapon.data.grip?U.rightWeapon.data.gripMaterial:U.rightWeapon.data.cockingMaterial}else a.hasSound("player-cock")||a.createSound("./asset/sound/weapon/heavycannon-pump.mp3",null,"player-cock").play(),H.inverse?V.material=U.leftWeapon.data.grip?U.leftWeapon.data.gripMaterial:U.leftWeapon.data.cockingMaterial:V.material=U.rightWeapon.data.grip?U.rightWeapon.data.gripMaterial:U.rightWeapon.data.cockingMaterial;se<1&&(H.inverse?V.material=U.leftWeapon.data.grip?U.leftWeapon.data.gripMaterial:U.leftWeapon.data.fireMaterial:V.material=U.rightWeapon.data.grip?U.rightWeapon.data.gripMaterial:U.rightWeapon.data.fireMaterial);break;case A.e.PUMP:if(oe<.425){var Te;if(a.hasSound("player-cock"))null===(Te=a.getSound("player-cock"))||void 0===Te||Te.stop();let e=W(oe,se,he,U.leftWeapon,pe),t=W(oe,se,he,U.rightWeapon,pe);H.inverse?V.material="right"===ae&&U.leftWeapon.data.grip?U.leftWeapon.data.gripMaterial:e:V.material="left"===ae&&U.rightWeapon.data.grip?U.rightWeapon.data.gripMaterial:t;const i=oe/.425;let o=Math.sin(i*Math.PI),s=!1;(ne&&("right"===ae&&t===U.rightWeapon.data.cockingMaterial||"left"===ae&&e===U.leftWeapon.data.cockingMaterial)||V.material===(H.inverse?U.leftWeapon.data.cockingMaterial:U.rightWeapon.data.cockingMaterial))&&!H.isFireAnimation&&(H.isFireAnimation=!0,o=1,s=!0),oe<.5&&!H.isFireAnimation&&(o=0);const r=.125,l=-.0625,h=.1*Math.PI,c=B.position.x,u=B.position.y,p=G.position.x,d=G.position.y;if(G.isRotateCenter=!1,G.position.y+=r*o,G.position.x+=l*("right"===ae?1:-1)*o,G.rotate+=h*("right"===ae?1:-1)*o,G.scale+=2*r*o,n.hasComponent(M.a)){const e=n.getComponent(M.a);G.position.x-=e.value.x*r*-.25*o}H.inverse?V.material=U.leftWeapon.data.grip?U.leftWeapon.data.gripMaterial:U.leftWeapon.data.stillMaterial:V.material=U.rightWeapon.data.grip?U.rightWeapon.data.gripMaterial:U.rightWeapon.data.stillMaterial,s&&(B.position.x=c+(G.position.x-p),B.position.y=u+(G.position.y-d))}else if(oe<.625){const e=.125,t=-.0625,n=.1*Math.PI;var Se;if(a.hasSound("player-cock"))null===(Se=a.getSound("player-cock"))||void 0===Se||Se.stop();G.isRotateCenter=!1,G.position.y+=e,G.position.x+=t*("right"===ae?1:-1),G.rotate+=n*("right"===ae?1:-1),H.inverse?V.material=U.leftWeapon.data.grip?U.leftWeapon.data.gripMaterial:U.leftWeapon.data.stillMaterial:V.material=U.rightWeapon.data.grip?U.rightWeapon.data.gripMaterial:U.rightWeapon.data.stillMaterial}else{a.hasSound("player-cock")||a.createSound("./asset/sound/weapon/shotgun-pump.mp3",null,"player-cock").play();const e=Math.min(1,1.5*Math.sin(Math.min(1,(oe-.625)/.375)*r.b)),t=.375;if(G.position.y-=t*e,G.scale+=2*t*e,ne||le){const t=.25;!U.leftWeapon.data.grip&&U.rightWeapon.data.grip?(G.position.x+=.5*t*e,G.rotate+=t*Math.PI*.25*e):U.leftWeapon.data.grip&&!U.rightWeapon.data.grip&&(G.position.x-=.5*t*e,G.rotate-=t*Math.PI*.25*e)}else H.inverse?(G.position.x+=.5*t*e,G.rotate-=t*Math.PI*.125*e):(G.position.x-=.5*t*e,G.rotate+=t*Math.PI*.125*e);if(n.hasComponent(M.a)){const t=n.getComponent(M.a);G.position.x-=-.25*t.value.x*e}H.inverse?V.material=U.leftWeapon.data.grip?U.leftWeapon.data.gripMaterial:U.leftWeapon.data.cockingMaterial:V.material=U.rightWeapon.data.grip?U.rightWeapon.data.gripMaterial:U.rightWeapon.data.cockingMaterial}se<1&&(H.inverse?V.material=U.leftWeapon.data.grip?U.leftWeapon.data.gripMaterial:U.leftWeapon.data.fireMaterial:V.material=U.rightWeapon.data.grip?U.rightWeapon.data.gripMaterial:U.rightWeapon.data.fireMaterial)}else{let e=pe;switch(ie){case A.e.PUNCH:case A.e.SHATTER:case A.e.GRENADE_SHORT:case A.e.GRENADE_LONG:if(G.position.y-=.5*ue,ne||le||(H.inverse?G.position.x+=.25*ue:G.position.x-=.25*ue),(U.leftWeapon.isChargeEnable||U.rightWeapon.isChargeEnable)&&(H.inverse?V.material=U.leftWeapon.data.chargeMaterial:V.material=U.rightWeapon.data.chargeMaterial,U.leftWeapon.isChargeEnable&&H.inverse||U.rightWeapon.isChargeEnable&&!H.inverse)){const e=.05+.075*(H.inverse?U.leftWeapon.chargePar:U.rightWeapon.chargePar);G.position.x+=Math.sin(j.time%.075/.075*r.b)*e,G.position.y+=Math.cos(j.time%.1/.1*r.b)*e}break;case A.e.SPIN:if(re>0)if(H.inverse?U.leftWeapon.isChargeEnable:U.rightWeapon.isChargeEnable){var ke,Oe;if(a.hasSound("player-chain-".concat(H.inverse?"left":"right","-loop")))null===(ke=a.getSound("player-chain-".concat(H.inverse?"left":"right","-loop")))||void 0===ke||ke.stop();if(a.hasSound("player-chain-".concat(H.inverse?"left":"right","-end")))null===(Oe=a.getSound("player-chain-".concat(H.inverse?"left":"right","-end")))||void 0===Oe||Oe.stop();a.hasSound("player-chain-".concat(H.inverse?"left":"right","-start"))||a.createSound("./asset/sound/weapon/chainshotgun-start.mp3",null,"player-chain-".concat(H.inverse?"left":"right","-start")).setVolume(5).play();const t=.25-.15*re,n=H.time%1%t>t/2;e=H.inverse?n?U.leftWeapon.data.cockingMaterial:U.leftWeapon.data.stillMaterial:n?U.rightWeapon.data.cockingMaterial:U.rightWeapon.data.stillMaterial,H.spinPar=re,H.spinTime=H.time}else{var Ae;if(a.hasSound("player-chain-".concat(H.inverse?"left":"right","-start")))null===(Ae=a.getSound("player-chain-".concat(H.inverse?"left":"right","-start")))||void 0===Ae||Ae.stop();a.hasSound("player-chain-".concat(H.inverse?"left":"right","-end"))||a.createSound("./asset/sound/weapon/chainshotgun-end.mp3",null,"player-chain-".concat(H.inverse?"left":"right","-end")).setVolume(5).play(!0);const t=H.inverse?U.leftWeapon.data.chargeTime:U.rightWeapon.data.chargeTime,n=Math.min(1,(H.time-H.spinTime)/(2*t));let i=0;H.time-H.spinTime<H.spinPar*t*2&&(i=.1+.15*n);const o=H.time%1%i>i/2;e=H.inverse?o?U.leftWeapon.data.cockingMaterial:U.leftWeapon.data.stillMaterial:o?U.rightWeapon.data.cockingMaterial:U.rightWeapon.data.stillMaterial}break;case A.e.BOOSTER:var Le;if(a.hasSound("player-combobooster-".concat(H.inverse?"left":"right","-loop")))null===(Le=a.getSound("player-combobooster-".concat(H.inverse?"left":"right","-loop")))||void 0===Le||Le.stop()}ne||le?H.inverse?V.material=U.leftWeapon.data.grip?U.leftWeapon.data.gripMaterial:e:V.material=U.rightWeapon.data.grip?U.rightWeapon.data.gripMaterial:e:(H.inverse,V.material=e)}(H.inverse?-1===U.leftWeapon.time:-1===U.rightWeapon.time)?this.stopSound(a,H,ie,!0):this.stopSound(a,H,ie,!1),"still"===p&&U.left===U.right&&(H.inverse?U.leftWeapon.data.isNeverLower:U.rightWeapon.data.isNeverLower)&&(G.position.y-=1.5),H.inverse&&U.leftWeapon&&U.leftWeapon.data.shootType===A.q.HOOK&&U.leftWeapon.bullets.length>0?V.material=U.leftWeapon.data.cockingMaterial:!H.inverse&&U.rightWeapon&&U.rightWeapon.data.shootType===A.q.HOOK&&U.rightWeapon.bullets.length>0&&(V.material=U.rightWeapon.data.cockingMaterial),H.time+=(0,k.c)(e/60,0)}}class F{constructor(){R(this,"name","gole")}update(e,t,n,a,i){var o;const s=t.getComponent(l.a),r=t.getComponent(c.a),h=n.getComponent(v.b),u=performance.now();null!==(o=n.getComponent(I.a))&&void 0!==o&&o.isDeath?s.material=T.h.NONE:r.position.y-=(u-h.goleTime)/500*.5}}class U{constructor(){R(this,"name","jump")}update(e,t,n,a,i){const o=n.getComponent(f.a),d=t.getComponent(s.a),g=t.getComponent(c.a),m=t.getComponent(u.a),y=t.getComponent(l.a),[,,,v,w]=(0,x.b)(n,t),b=z(i,o);if(o.leftWeapon.data.grip&&o.rightWeapon.data.grip){var M;let e=!1;if(m.hard=!1,m.blockX=.5,m.speed=0,null!==(M=n.getComponent(h.a))&&void 0!==M&&M.exec){var E,_;const t=1-Math.max(0,Math.min(1,(0,k.c)(((null===(E=n.getComponent(p.a))||void 0===E?void 0:E.value.y)||0)/((null===(_=n.getComponent(h.a))||void 0===_?void 0:_.force.y)||0),0)));o.leftWeapon.isFireStart||o.rightWeapon.isFireStart||(o.rightWeapon.data.grip?(g.isRotateCenter=!1,d.inverse?(g.rotate=0,g.scale=1,g.position.x=.25,g.position.y=-1.5,(d.inverse?o.leftWeapon.activeHold:o.rightWeapon.activeHold)||v>0&&v<1?y.material=W(v,w,b,o.leftWeapon,o.leftWeapon.data.jumpMaterial):y.material=o.leftWeapon.data.jumpMaterial):(g.position.x=-.875,g.position.y=-1.25,g.rotate=r.b-r.b*t,g.scale=1.5-.625*t,g.position.x+=.75*t,g.position.y+=1*t,(d.inverse?o.leftWeapon.activeHold:o.rightWeapon.activeHold)||v>0&&v<1?y.material=W(v,w,b,o.rightWeapon,o.rightWeapon.data.jumpMaterial):y.material=o.rightWeapon.data.jumpMaterial)):o.leftWeapon.data.grip?(g.isRotateCenter=!1,d.inverse?(g.position.x=.875,g.position.y=-1.25,g.rotate=-r.b+r.b*t,g.scale=1.5-.625*t,g.position.x-=.75*t,g.position.y+=1*t,(d.inverse?o.leftWeapon.activeHold:o.rightWeapon.activeHold)||v>0&&v<1?y.material=W(v,w,b,o.leftWeapon,o.leftWeapon.data.jumpMaterial):y.material=o.leftWeapon.data.jumpMaterial):(g.rotate=0,g.scale=1,g.position.x=-.25,g.position.y=-1.5,(d.inverse?o.leftWeapon.activeHold:o.rightWeapon.activeHold)||v>0&&v<1?y.material=W(v,w,b,o.rightWeapon,o.rightWeapon.data.jumpMaterial):y.material=o.rightWeapon.data.jumpMaterial)):o.rightWeapon.data.grip?(g.isRotateCenter=!1,d.inverse?(g.rotate=0,g.scale=1,g.position.x=.25,g.position.y=-1.5,(d.inverse?o.leftWeapon.activeHold:o.rightWeapon.activeHold)||v>0&&v<1?y.material=W(v,w,b,o.leftWeapon,o.leftWeapon.data.jumpMaterial):y.material=o.leftWeapon.data.jumpMaterial):(g.position.x=-.875,g.position.y=-1.25,g.rotate=-r.b+r.d*t,g.scale=1.5-.625*t,g.position.x+=.75*t,g.position.y+=1*t,(d.inverse?o.leftWeapon.activeHold:o.rightWeapon.activeHold)||v>0&&v<1?y.material=W(v,w,b,o.rightWeapon,o.rightWeapon.data.jumpMaterial):y.material=o.rightWeapon.data.jumpMaterial)):(g.rotate=0,g.scale=1,g.position.x=.25,g.position.y=-1.5)),e=!0}e||(g.position.y=-1.5)}}}class H{constructor(){R(this,"name","air")}update(e,t,n,a,i){const o=n.getComponent(f.a),h=t.getComponent(s.a),d=t.getComponent(c.a),g=t.getComponent(u.a),m=t.getComponent(l.a),[,,,y,v]=(0,x.b)(n,t),w=z(i,o);if(!((0,S.b)(n)>0)){var b;g.hard=!1,g.blockX=.5,g.speed=0,d.isRotateCenter=!1;const e=(null===(b=n.getComponent(p.a))||void 0===b?void 0:b.value.y)||0;if((0,k.c)(Math.min(1,(Math.abs(e)-.25)/.125),0)<=0)d.position.y=-1.5;else{const e=Math.sin(h.time%.5/.5*r.a),t=Math.cos(h.time%.5/.5*r.a),n=Math.sin(h.time%.5/.5*r.a+r.b),a=-Math.cos(h.time%.5/.5*r.a+r.b),i=Math.sin((1-h.time%.5)/.5*r.a),s=Math.cos((1-h.time%.5)/.5*r.a),l=Math.sin((1-h.time%.5)/.5*r.a+r.b),c=-Math.cos((1-h.time%.5)/.5*r.a+r.b);o.leftWeapon.isFireStart||o.rightWeapon.isFireStart?h.inverse?d.position.x=.5:d.position.x=-.5:h.inverse?(d.position.x=.5,d.position.y=-.75):(d.position.x=-.5,d.position.y=-.75),h.inverse?(d.rotate=.1-.5*Math.sin(h.time%.5/.25*r.a)+(o.rightWeapon.data.grip?0:.375),d.scale=1+(l+1)/2*.25):(d.rotate=.1-.5*Math.sin(h.time%.5/.25*r.a)+(o.rightWeapon.data.grip?0:-.35),d.scale=1+(e+1)/2*.25),h.inverse?(d.position.x-=1*e+.1*t,d.position.y+=.75*n+.05*a,m.material=W(y,v,w,o.leftWeapon,o.leftWeapon.data.airMaterial)):(d.position.x-=1*-i+.1*-s,d.position.y+=.75*-l+.05*-c,m.material=W(y,v,w,o.rightWeapon,o.rightWeapon.data.airMaterial))}}}}class B{constructor(){R(this,"name","sprint")}update(e,t,n,a,i){var o,h,d;const g=n.getComponent(f.a),{direction:m}=a.getCamera(),y=t.getComponent(s.a),v=t.getComponent(c.a),w=t.getComponent(u.a),b=t.getComponent(l.a),[,,,M,E]=(0,x.b)(n,t),C=z(i,g),S=Math.sin(w.time%3/3*r.a),k=Math.cos(w.time%3/3*r.a),O=!(null===(o=n.getComponent(_.a))||void 0===o||!o.enableTacticalSprint),L=Math.sin(w.time%1/1*r.a),P=Math.cos(w.time%1/1*r.a),I=Math.sin((1-w.time%1/1)*r.a),N=Math.cos((1-w.time%1/1)*r.a),R=(null===(h=n.getComponent(p.a))||void 0===h?void 0:h.value)||new r.f(0,0,0),D=-Math.min(1,Math.max(-1,(0,r.j)((0,r.m)(R.x,R.z,0,0),m.x)/r.b)),F=m.y/r.b;switch(w.hard=!0,w.blockX=.5,w.slide=.375,w.speed=null!==(d=n.getComponent(_.a))&&void 0!==d&&d.enableTacticalSprint?2:1.75,w.invert=!1,!!g.leftWeapon.data.grip!=!!g.rightWeapon.data.grip?O?g.leftWeapon.data.tacticalSprintType||g.rightWeapon.data.tacticalSprintType||A.s.RUNNING:g.leftWeapon.data.sprintType||g.rightWeapon.data.sprintType||A.s.RUNNING:O?A.s.ALL_RUNNING:A.s.RUNNING){case A.s.RUNNING:var U,H;if(y.inverse)v.position.x=.5+.5*D-.5*L,v.position.y=-1.325-.25*Math.abs(D)+.375*F+1*L,v.scale=1.5+.5*I,v.rotate=.375*-D-.75*P+(g.leftWeapon.data.isRotateCenter?.75:0),b.material=W(M,E,C,g.leftWeapon,0===((null===(U=n.getComponent(p.a))||void 0===U?void 0:U.value.y)||0)?g.leftWeapon.data.sprintMaterial:g.leftWeapon.data.jumpMaterial);else v.position.x=.5*D-.5+.5*I,v.position.y=-1.325-.25*Math.abs(D)+.375*F+1*I,v.scale=1.5+.5*L,v.rotate=.375*-D-.75*N+(g.rightWeapon.data.isRotateCenter?-.75:0),b.material=W(M,E,C,g.rightWeapon,0===((null===(H=n.getComponent(p.a))||void 0===H?void 0:H.value.y)||0)?g.rightWeapon.data.sprintMaterial:g.rightWeapon.data.jumpMaterial);break;case A.s.ALL_RUNNING:var B,G;if(y.inverse)v.position.x=.5+.5*D-.5*L,v.position.y=-1.875-.25*Math.abs(D)+.375*F+1.5*L,v.scale=1.5+.5*I,v.rotate=g.leftWeapon.data.isRotateCenter?.75:0,b.material=W(M,E,C,g.leftWeapon,0===((null===(B=n.getComponent(p.a))||void 0===B?void 0:B.value.y)||0)?g.leftWeapon.data.sprintMaterial:g.leftWeapon.data.jumpMaterial);else v.position.x=.5*D-.5+.5*I,v.position.y=-1.875-.25*Math.abs(D)+.375*F+1.5*I,v.scale=1.5+.5*L,v.rotate=g.rightWeapon.data.isRotateCenter?-.75:0,b.material=W(M,E,C,g.rightWeapon,0===((null===(G=n.getComponent(p.a))||void 0===G?void 0:G.value.y)||0)?g.rightWeapon.data.sprintMaterial:g.rightWeapon.data.jumpMaterial);break;case A.s.ONEHAND_LIGHT:var Y,V;if(y.inverse)g.leftWeapon.data.grip?(v.position.x=.5+.5*D-.5*L,v.position.y=-1.325-.25*Math.abs(D)+.375*F+1*L,v.scale=1.5+.5*I,v.rotate=.375*-D-.75*P+(g.leftWeapon.data.isRotateCenter?.75:0)):(w.y=-.375,w.x=.125,w.rotate=-.25*Math.PI,w.moveFix=!1,v.position.x=.25+.5*D,v.position.y=-.375,v.rotate=.25+.5*-D,v.position.x+=.0375*L),b.material=W(M,E,C,g.leftWeapon,0===((null===(Y=n.getComponent(p.a))||void 0===Y?void 0:Y.value.y)||0)?g.leftWeapon.data.sprintMaterial:g.leftWeapon.data.jumpMaterial);else g.rightWeapon.data.grip?(v.position.x=.5*D-.5+.5*I,v.position.y=-1.325-.25*Math.abs(D)+.375*F+1*I,v.scale=1.5+.5*L,v.rotate=.375*-D-.75*N+(g.rightWeapon.data.isRotateCenter?-.75:0)):(w.y=-.375,w.x=.125,w.rotate=-.25*Math.PI,w.moveFix=!1,v.position.x=.5*D-.25,v.position.y=-.375,v.rotate=.5*-D-.25,v.position.x+=.0375*I),b.material=W(M,E,C,g.rightWeapon,0===((null===(V=n.getComponent(p.a))||void 0===V?void 0:V.value.y)||0)?g.rightWeapon.data.sprintMaterial:g.rightWeapon.data.jumpMaterial);break;case A.s.ONEHAND_MIDIUM:var j,K;if(y.inverse)g.leftWeapon.data.grip?(v.position.x=.5+.5*D-.5*L,v.position.y=-1.325-.25*Math.abs(D)+.375*F+1*L,v.scale=1.5+.5*I,v.rotate=.375*-D-.75*P+(g.leftWeapon.data.isRotateCenter?.75:0)):(w.y=-.5,w.x=.125,w.rotate=-.25*Math.PI,w.moveFix=!1,v.position.x=.5+.5*D,v.position.y=-.625,v.scale=1.75,v.rotate=0,v.position.x+=.0375*L),b.material=W(M,E,C,g.leftWeapon,0===((null===(j=n.getComponent(p.a))||void 0===j?void 0:j.value.y)||0)?g.leftWeapon.data.sprintMaterial:g.leftWeapon.data.jumpMaterial);else g.rightWeapon.data.grip?(v.position.x=.5*D-.5+.5*I,v.position.y=-1.325-.25*Math.abs(D)+.375*F+1*I,v.scale=1.5+.5*L,v.rotate=.375*-D-.75*N+(g.rightWeapon.data.isRotateCenter?-.75:0)):(w.y=-.5,w.x=.125,w.rotate=-.25*Math.PI,w.moveFix=!1,v.position.x=.5*D-.5,v.position.y=-.625,v.scale=1.75,v.rotate=0,v.position.x+=.0375*I),b.material=W(M,E,C,g.rightWeapon,0===((null===(K=n.getComponent(p.a))||void 0===K?void 0:K.value.y)||0)?g.rightWeapon.data.sprintMaterial:g.rightWeapon.data.jumpMaterial);break;case A.s.ONEHAND_HAVY:var X,q;if(y.inverse)g.leftWeapon.data.grip?(v.position.x=.5+.5*D-.5*L,v.position.y=-1.325-.25*Math.abs(D)+.375*F+1*L,v.scale=1.5+.5*I,v.rotate=.375*-D-.75*P+(g.leftWeapon.data.isRotateCenter?.75:0)):(w.y=-.5,w.x=.125,w.rotate=-.25*Math.PI,w.moveFix=!1,v.position.x=.5+.5*D,v.position.y=-.875,v.scale=1.75,v.rotate=0,v.position.x+=.0375*L),b.material=W(M,E,C,g.leftWeapon,0===((null===(X=n.getComponent(p.a))||void 0===X?void 0:X.value.y)||0)?g.leftWeapon.data.sprintMaterial:g.leftWeapon.data.jumpMaterial);else g.rightWeapon.data.grip?(v.position.x=.5*D-.5+.5*I,v.position.y=-1.325-.25*Math.abs(D)+.375*F+1*I,v.scale=1.5+.5*L,v.rotate=.375*-D-.75*N+(g.rightWeapon.data.isRotateCenter?-.75:0)):(w.y=-.5,w.x=.125,w.rotate=-.25*Math.PI,w.moveFix=!1,v.position.x=.5*D-.5,v.position.y=-.875,v.scale=1.75,v.rotate=0,v.position.x+=.0375*I),b.material=W(M,E,C,g.rightWeapon,0===((null===(q=n.getComponent(p.a))||void 0===q?void 0:q.value.y)||0)?g.rightWeapon.data.sprintMaterial:g.rightWeapon.data.jumpMaterial);break;case A.s.TWOHAND_LIGHT:var J,Z;if(w.mrotate=0,w.slide=0,w.y=-.375,w.x=.125,w.rotate=.25*Math.PI,w.moveFix=!1,v.position.x+=.125*S,y.inverse)if(g.leftWeapon.data.grip)w.y=-.5,w.x=.125,w.rotate=-.25*Math.PI,v.position.x=.5*D-.5,v.position.y=-.75,v.scale=1.75,v.rotate=.375*-D-.125,b.material=W(M,E,C,g.leftWeapon,g.leftWeapon.data.grip?g.rightWeapon.data.isHave||M<1||g.leftWeapon.bullets.length>0?g.leftWeapon.data.gripMaterial:T.h.NONE:g.leftWeapon.data.stillMaterial);else w.y=-.5,w.x=.125,w.rotate=-.25*Math.PI,v.position.x=.5+.5*D,v.position.y=-.375,v.scale=1.75,v.rotate=.125+.25*-D,b.material=W(M,E,C,g.leftWeapon,0===((null===(J=n.getComponent(p.a))||void 0===J?void 0:J.value.y)||0)?g.leftWeapon.data.sprintMaterial:g.leftWeapon.data.jumpMaterial);else if(g.rightWeapon.data.grip)w.y=-.5,w.x=.125,w.rotate=-.25*Math.PI,v.position.x=.5+.5*D,v.position.y=-.75,v.scale=1.75,v.rotate=.125+.375*-D,b.material=W(M,E,C,g.rightWeapon,g.rightWeapon.data.grip?g.leftWeapon.data.isHave||M<1||g.rightWeapon.bullets.length>0?g.rightWeapon.data.gripMaterial:T.h.NONE:g.rightWeapon.data.stillMaterial);else w.y=-.5,w.x=.125,w.rotate=-.25*Math.PI,v.position.x=.5*D-.5,v.position.y=-.375,v.scale=1.75,v.rotate=.25*-D-.125,b.material=W(M,E,C,g.rightWeapon,0===((null===(Z=n.getComponent(p.a))||void 0===Z?void 0:Z.value.y)||0)?g.rightWeapon.data.sprintMaterial:g.rightWeapon.data.jumpMaterial);v.position.x+=.075*S;break;case A.s.TWOHAND_MIDIUM:var $,Q;if(w.mrotate=0,w.slide=0,w.y=-.375,w.x=.125,w.rotate=.25*Math.PI,w.moveFix=!1,v.position.x+=.125*S,y.inverse)if(g.leftWeapon.data.grip)w.y=-.5,w.x=.125,w.rotate=-.25*Math.PI,v.position.x=.5*D-.5,v.position.y=-.75,v.scale=1.75,v.rotate=.375*-D-.125,b.material=W(M,E,C,g.leftWeapon,g.leftWeapon.data.grip?g.rightWeapon.data.isHave||M<1||g.leftWeapon.bullets.length>0?g.leftWeapon.data.gripMaterial:T.h.NONE:g.leftWeapon.data.stillMaterial);else w.y=-.5,w.x=.125,w.rotate=-.25*Math.PI,v.position.x=.5+.5*D,v.position.y=-.75,v.scale=1.75,v.rotate=0,b.material=W(M,E,C,g.leftWeapon,0===((null===($=n.getComponent(p.a))||void 0===$?void 0:$.value.y)||0)?g.leftWeapon.data.sprintMaterial:g.leftWeapon.data.jumpMaterial);else if(g.rightWeapon.data.grip)w.y=-.5,w.x=.125,w.rotate=-.25*Math.PI,v.position.x=.5+.5*D,v.position.y=-.75,v.scale=1.75,v.rotate=.125+.375*-D,b.material=W(M,E,C,g.rightWeapon,g.rightWeapon.data.grip?g.leftWeapon.data.isHave||M<1||g.rightWeapon.bullets.length>0?g.rightWeapon.data.gripMaterial:T.h.NONE:g.rightWeapon.data.stillMaterial);else w.y=-.5,w.x=.125,w.rotate=-.25*Math.PI,v.position.x=.5*D-.5,v.position.y=-.75,v.scale=1.75,v.rotate=0,b.material=W(M,E,C,g.rightWeapon,0===((null===(Q=n.getComponent(p.a))||void 0===Q?void 0:Q.value.y)||0)?g.rightWeapon.data.sprintMaterial:g.rightWeapon.data.jumpMaterial);v.position.x+=.075*S;break;case A.s.TWOHAND_HAVY:w.mrotate=0,w.slide=0,w.y=-.375,w.x=.125,w.rotate=.125*Math.PI,w.add=0,w.moveFix=!1,v.scale+=.75,v.position.y=.2*F-.75,v.position.x+=.1*S,y.inverse?g.leftWeapon.data.grip?(v.rotate=-Math.PI/3,b.material=W(M,E,C,g.leftWeapon,g.leftWeapon.data.grip?g.rightWeapon.data.isHave||M<1||g.leftWeapon.bullets.length>0?g.leftWeapon.data.gripMaterial:T.h.NONE:g.leftWeapon.data.stillMaterial)):(v.rotate=Math.PI/3,b.material=W(M,E,C,g.leftWeapon,b.material)):g.rightWeapon.data.grip?(v.rotate=Math.PI/3,b.material=W(M,E,C,g.rightWeapon,g.rightWeapon.data.grip?g.leftWeapon.data.isHave||M<1||g.rightWeapon.bullets.length>0?g.rightWeapon.data.gripMaterial:T.h.NONE:g.rightWeapon.data.stillMaterial)):(v.rotate=-Math.PI/3,b.material=W(M,E,C,g.rightWeapon,b.material));break;case A.s.TACTICAL_LIGHT:var ee,te;if(w.mrotate=0,w.y=-.5,w.add=0,w.moveFix=!1,v.position.x+=.075*k,v.position.y=.2*F-.6,y.inverse)if(g.leftWeapon.data.grip)w.x=-.5,w.rotate=-Math.PI/6,v.rotate=-r.d,b.material=W(M,E,C,g.leftWeapon,g.leftWeapon.data.grip?g.leftWeapon.data.gripMaterial:b.material);else w.x=.5,w.rotate=Math.PI/6,v.rotate=r.d,b.material=W(M,E,C,g.leftWeapon,0===((null===(ee=n.getComponent(p.a))||void 0===ee?void 0:ee.value.y)||0)?g.leftWeapon.data.sprintMaterial:g.leftWeapon.data.jumpMaterial);else if(g.rightWeapon.data.grip)w.x=.5,w.rotate=Math.PI/6,v.rotate=r.d,b.material=W(M,E,C,g.rightWeapon,g.rightWeapon.data.grip?g.leftWeapon.data.isHave||M<1||g.rightWeapon.bullets.length>0?g.rightWeapon.data.gripMaterial:T.h.NONE:g.rightWeapon.data.stillMaterial);else w.x=-.5,w.rotate=-Math.PI/6,v.rotate=-r.d,b.material=W(M,E,C,g.rightWeapon,0===((null===(te=n.getComponent(p.a))||void 0===te?void 0:te.value.y)||0)?g.rightWeapon.data.sprintMaterial:g.rightWeapon.data.jumpMaterial);break;case A.s.TACTICAL_MIDIUM:var ne,ae;if(w.mrotate=0,w.y=-.5,w.add=0,w.moveFix=!1,v.position.x+=.075*k,v.position.y=.2*F-.4,y.inverse)if(g.leftWeapon.data.grip)w.x=-.5,w.rotate=-Math.PI/6,v.rotate=-r.d,b.material=W(M,E,C,g.leftWeapon,g.leftWeapon.data.grip?g.leftWeapon.data.gripMaterial:b.material);else w.x=.5,w.rotate=Math.PI/6,v.rotate=r.d,b.material=W(M,E,C,g.leftWeapon,0===((null===(ne=n.getComponent(p.a))||void 0===ne?void 0:ne.value.y)||0)?g.leftWeapon.data.sprintMaterial:g.leftWeapon.data.jumpMaterial);else if(g.rightWeapon.data.grip)w.x=.5,w.rotate=Math.PI/6,v.rotate=r.d,b.material=W(M,E,C,g.rightWeapon,g.rightWeapon.data.grip?g.leftWeapon.data.isHave||M<1||g.rightWeapon.bullets.length>0?g.rightWeapon.data.gripMaterial:T.h.NONE:g.rightWeapon.data.stillMaterial);else w.x=-.5,w.rotate=-Math.PI/6,v.rotate=-r.d,b.material=W(M,E,C,g.rightWeapon,0===((null===(ae=n.getComponent(p.a))||void 0===ae?void 0:ae.value.y)||0)?g.rightWeapon.data.sprintMaterial:g.rightWeapon.data.jumpMaterial);break;case A.s.TACTICAL_HAVY:w.mrotate=0,w.y=-.5,w.x=.25,w.rotate=0,w.slide=0,w.add=0,w.moveFix=!1,v.scale+=.125,v.position.x+=.1*k,v.position.y=.2*F-.625,y.inverse?g.leftWeapon.data.grip?(v.rotate=-r.d,b.material=W(M,E,C,g.leftWeapon,g.leftWeapon.data.grip?g.rightWeapon.data.isHave||M<1||g.leftWeapon.bullets.length>0?g.leftWeapon.data.gripMaterial:T.h.NONE:g.leftWeapon.data.stillMaterial)):(v.rotate=r.d,b.material=W(M,E,C,g.leftWeapon,b.material)):g.rightWeapon.data.grip?(v.rotate=r.d,b.material=W(M,E,C,g.rightWeapon,g.rightWeapon.data.grip?g.leftWeapon.data.isHave||M<1||g.rightWeapon.bullets.length>0?g.rightWeapon.data.gripMaterial:T.h.NONE:g.rightWeapon.data.stillMaterial)):(v.rotate=-r.d,b.material=W(M,E,C,g.rightWeapon,b.material))}if(-1!==y.sprintStartTime){const e=Math.max(0,1-(y.time-y.sprintStartTime-.25)/.5);v.position.y-=.375*e,v.scale+=.25*e}v.isRotateCenter=!1}}class G{constructor(){R(this,"name","sliding")}update(e,t,n,a,i){const o=n.getComponent(f.a),h=t.getComponent(s.a),p=t.getComponent(c.a),d=t.getComponent(u.a),g=t.getComponent(l.a),[m,,,y,v]=(0,x.b)(n,t),w=z(i,o),b=(o.leftWeapon.data.shootType!==A.q.SHIELD||o.rightWeapon.data.shootType!==A.q.SHIELD)&&(o.leftWeapon.data.shootType===A.q.SHIELD&&o.leftWeapon.isFireStart)!==(o.rightWeapon.data.shootType===A.q.SHIELD&&o.rightWeapon.isFireStart);d.hard=!0,d.blockX=0,d.speed=3;const M=n.getComponent(O.a);p.position.x-=Math.min(r.b,Math.max(-r.b,r.b*Math.sin((0,r.j)(n.direction.x,M.dir))))*(Math.PI/16)*(1-M.value);let E=M.value;if(!m&&!b){const e=(0,r.j)(n.direction.x,M.dir),t=Math.abs(e/r.b);E=e>0?h.inverse?M.value:M.value-.15*t:h.inverse?M.value-.15*t:M.value}const _=Math.sin(Math.min(1,E/.25)*Math.PI),C=Math.sin(Math.min(1,(E-.25)/.25)*Math.PI);p.position.y+=.1*_-.15*C,!!o.leftWeapon.data.grip==!!o.rightWeapon.data.grip&&((h.inverse?o.leftWeapon.activeHold:o.rightWeapon.activeHold)||y>0&&y<1||h.inverse||(h.inverse?o.rightWeapon.activeHold:o.leftWeapon.activeHold)||(p.position.y+=-.15),h.inverse?g.material=W(y,v,w,o.leftWeapon,o.leftWeapon.data.slidingMaterial):g.material=W(y,v,w,o.rightWeapon,o.rightWeapon.data.slidingMaterial))}}class Y{constructor(){R(this,"name","coil")}update(e,t,n,a,i){const r=n.getComponent(f.a);if("hand"===r.right&&"hand"===r.left&&!r.rightWeapon.isFireStart&&!r.leftWeapon.isFireStart){const e=t.getComponent(s.a),n=t.getComponent(o.a),a=t.getComponent(c.a),h=t.getComponent(u.a),p=t.getComponent(l.a);z(i,r);h.hard=!0,h.blockX=0,h.speed=0,h.mrotate=0,h.slide=0,a.rotate=0,a.scale=1,a.isRotateCenter=!1,e.inverse?(n.position.y=a.position.y=-1.5,p.material=r.leftWeapon.data.coilMaterial):(n.position.y=a.position.y=-1.5,p.material=r.rightWeapon.data.coilMaterial)}}}class V{constructor(){R(this,"name","grab")}update(e,t,n,a,o){const h=n.getComponent(f.a),p=t.getComponent(s.a),d=t.getComponent(u.a),g=t.getComponent(c.a),m=t.getComponent(l.a),y=n.getComponent(i.a),[,,,v,w]=(0,x.b)(n,t),b=z(o,h);if(d.hard=!1,d.blockX=.5,d.speed=0,y.climb){const e=-1!==h.rightWeapon.time?h.rightWeapon.time:h.rightWeapon.data.fireSpeed,t=-1!==h.leftWeapon.time?h.leftWeapon.time:h.leftWeapon.data.fireSpeed,n=(0,k.c)(Math.min(1,1-Math.min(1,e/h.rightWeapon.data.fireSpeed)),0),a=(0,k.c)(Math.min(1,1-Math.min(1,t/h.leftWeapon.data.fireSpeed)),0);(p.inverse?!h.leftWeapon.data.grip||0!==a&&1!==a:!h.rightWeapon.data.grip||0!==n&&1!==n)||(g.position.y=-1.5,m.material=p.inverse?W(v,w,b,h.leftWeapon,h.leftWeapon.data.grabMaterial):W(v,w,b,h.rightWeapon,h.rightWeapon.data.grabMaterial))}else{const{direction:e}=n,a=t.getComponent(s.a),i=(0,r.j)(y.angle,e.x);((a.inverse?i<0:i>0)||!y.canJump||y.canClimb||y.canThroug)&&(g.position.y=-1.5),a.inverse&&(m.flip.x=!0),a.inverse?m.material=W(v,w,b,h.leftWeapon,h.leftWeapon.data.grabMaterial):m.material=W(v,w,b,h.rightWeapon,h.rightWeapon.data.grabMaterial)}}}class j{constructor(){R(this,"name","wallrun")}update(e,t,n,a,o){var h,g;const v=n.getComponent(f.a),{direction:w}=a.getCamera(),b=t.getComponent(s.a),M=t.getComponent(c.a),E=t.getComponent(u.a),_=t.getComponent(l.a),C=n.getComponent(d.a),T=n.getComponent(m.a),S=n.getComponent(y.a),k=Math.sin(E.time%.5/.5*r.a),O=Math.cos(E.time%.5/.5*r.a),A=Math.sin((1-E.time%.5/.5)*r.a),L=Math.cos((1-E.time%.5/.5)*r.a),I=(null===(h=n.getComponent(p.a))||void 0===h?void 0:h.value)||new r.f(0,0,0),N=-Math.min(1,Math.max(-1,(0,r.j)((0,r.m)(I.x,I.z,0,0),w.x)/r.b)),R=w.y/r.b,[,,,D,F]=(0,x.b)(n,t),U=z(o,v),H=a.getCamera();if(E.hard=!1,E.blockX=.5,E.speed=(null===(g=H.getComponent(P.a))||void 0===g?void 0:g.speed)||1.75,S.value>0&&(M.position.y-=1.5),v.leftWeapon.data.grip&&v.rightWeapon.data.grip)M.isRotateCenter=!1,T.move.z>0?b.inverse?(1===C.side?(M.position.x=(v.leftWeapon.data.grip?.325:.5)+.5*N-.375*k,M.position.y=-1.375-.25*Math.abs(N)+.375*R+1*k,M.scale=1.5+.5*A,M.rotate=.5*-N-1*O+(v.leftWeapon.data.grip?0:.375),M.isRotateCenter=!!v.leftWeapon.data.isRotateCenter):(M.rotate=v.leftWeapon.data.grip?0:.375,M.scale=1,M.position.x=.25,M.position.y=-1.5),(b.inverse?v.leftWeapon.activeHold:v.rightWeapon.activeHold)||D>0&&D<1?_.material=W(D,F,U,v.leftWeapon,v.leftWeapon.data.wallrunMaterial):_.material=v.leftWeapon.data.wallrunMaterial):(-1===C.side?(M.position.x=(v.rightWeapon.data.grip?-.325:-.5)+.5*N+.375*A,M.position.y=-1.2875-.25*Math.abs(N)+.375*R+1*A,M.scale=1.5+.5*k,M.rotate=.5*-N-1*L+(v.rightWeapon.data.grip?0:-.375),M.isRotateCenter=!!v.rightWeapon.data.isRotateCenter):(M.rotate=v.rightWeapon.data.grip?0:.375,M.scale=1,M.position.x=-.25,M.position.y=-1.5),(b.inverse?v.leftWeapon.activeHold:v.rightWeapon.activeHold)||D>0&&D<1?_.material=W(D,F,U,v.rightWeapon,v.rightWeapon.data.wallrunMaterial):_.material=v.rightWeapon.data.wallrunMaterial):(b.inverse?v.leftWeapon.activeHold:v.rightWeapon.activeHold)||D>0&&D<1?b.inverse?_.material=W(D,F,U,v.leftWeapon,v.leftWeapon.data.jumpMaterial):_.material=W(D,F,U,v.rightWeapon,v.rightWeapon.data.jumpMaterial):b.inverse?_.material=v.leftWeapon.data.jumpMaterial:_.material=v.rightWeapon.data.jumpMaterial;else{var B;const e=!(null!==(B=n.getComponent(i.a))&&void 0!==B&&B.exec)&&(b.inverse&&!v.leftWeapon.data.grip?v.leftWeapon.isAmmo||v.leftWeapon.bullets.length>0:v.rightWeapon.isAmmo||v.rightWeapon.bullets.length>0);T.move.z>0&&(b.inverse&&!v.leftWeapon.data.grip||!b.inverse&&!v.rightWeapon.data.grip)?M.isRotateCenter=e:(M.isRotateCenter=!1,e&&(M.position.y-=1.5))}}}class K{constructor(){R(this,"name","death")}update(e,t,n,a,i){t.getComponent(l.a).material=T.h.NONE}}class X extends g.a{constructor(){super(s.a,u.a,c.a,o.a,l.a),this.addAnimations(new D,new F,new U,new H,new B,new G,new Y,new V,new j,new K)}offset(e,t,n){const a=n.getCamera();var i;if(null!==a&&a!==((null===(i=t.getComponent(C.a))||void 0===i?void 0:i.value)||null)){t.getComponent(l.a).material=T.h.NONE}}}a()}catch(q){a(q)}}))},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>E});n(7),n(1),n(2),n(14),n(121);var i=n(221),o=n(65),s=n(256),r=n(504),l=n(9),h=n(10),c=n(6),u=n(69),p=n(48),d=n(33),g=n(51),m=n(31),f=n(81),y=n(24),v=n(0),w=n(8),b=n(49),x=n(52),M=e([f]);f=(M.then?(await M)():M)[0];class E extends i.a{constructor(e){var t,n,a;super(o.a,s.a,u.a,r.a),a=void 0,(n="setting")in(t=this)?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,this.setting=e}additional(e,t,n){var a,i,s;const M=t.getComponent(r.a).value;if(null==M||!M.hasComponent(l.b))return;const E=t.getComponent(o.a),_=M.getComponent(l.b);let C=!0,T=0,S=0,k=0,O=0;var A;M instanceof h.a&&(null!==(A=M.getComponent(d.a))&&void 0!==A&&A.exec?M.getComponent(d.a).move||(C=!1):_.isAir&&(C=!1));let L=0,P=0,I=0,N=0;if(!(null!==(a=M.getComponent(x.a))&&void 0!==a&&a.exec||null!==((null===(i=M.getComponent(l.b))||void 0===i?void 0:i.activeEntity)||null)||M.hasComponent(f.a)&&"gamepad"===n.getControlManager().getInputType()&&"x"===M.getComponent(f.a).axisType&&M.getComponent(f.a).enable)){var R,W;if(M.hasComponent(m.a)){const e=M.getComponent(m.a);L=0===e.move.x?_.bobs.x.x:e.move.x,P=0===e.move.z?_.bobs.x.y:e.move.z}else L=_.bobs.x.x,P=_.bobs.x.y;I=Math.min(1,Math.max(-1,1e3*(null!==(R=M.getComponent(f.a))&&void 0!==R&&R.enable?0:_.bobs.y.x))),N=Math.min(1,Math.max(-1,null!==(W=M.getComponent(f.a))&&void 0!==W&&W.enable?0:_.bobs.y.y))}const z=null!==(s=M.getComponent(p.a))&&void 0!==s&&s.exec?1:Math.min(1,Math.abs(L)+Math.abs(P)),D=this.setting.hasBob();if(0===L&&0===P||!C)E.oldTime=0;else{var F;0===z?(E.time=0,E.oldTime=0):E.time+=(0,w.c)(e/60*z*E.speed,0);const a=E.time%1;if(M instanceof h.a&&(null===(F=M.getComponent(g.a))||void 0===F||!F.exec)){const e=E.time%.5;if(e<E.oldTime){var U,H,B,G;const e=new h.a("foot-sound"),[a,i]=(0,v.q)((0,v.m)(L,P,null!==(U=M.getComponent(d.a))&&void 0!==U&&U.exec?.11625:(null===(H=M.getComponent(c.a))||void 0===H?void 0:H.size.x)/4||0,0),1,0),[o,s]=(0,v.q)(t.direction.x,a,i),r=E.time%1;e.position.x=M.position.x+(r<=.5?o:-o),e.position.z=M.position.z+(r<=.5?s:-s),e.position.y=null!==(B=M.getComponent(d.a))&&void 0!==B&&B.exec?t.position.y:M.position.y,n.createSound("./asset/sound/player/step-".concat(1+(4*Math.random()|0),".mp3"),e,"player-foot-step").setVolume(null!==(G=t.getComponent(b.a))&&void 0!==G&&G.enableCluch?.1:.5).play()}E.oldTime=e}if(D){let e=0,t=0;const n=Math.ceil(z);E.hard?(e=Math.min(1,Math.max(-1,2*Math.cos(a*v.a)))*n*(E.moveFix?Math.max(.5,Math.abs(L)):.5),t=2*(1-Math.min(1,Math.max(-1,Math.abs(Math.cos(a*v.a)))))*n*(E.moveFix?Math.max(.5,Math.abs(P)):1)):(e=Math.min(1,Math.max(-1,Math.cos(a*v.a)))*n*(E.moveFix?Math.max(.5,Math.abs(L)):1),t=(1-Math.min(1,Math.max(-1,Math.cos(a*(4*Math.PI)))))*n*(E.moveFix?Math.max(.5,Math.abs(P)):1));const i=E.moveFix?I:0;isNaN(e)||(T+=e*E.scale.x*Math.abs(P),k+=e*E.rotate*(L/Math.abs(L)||1)),isNaN(t)||(S+=t*E.scale.y),k+=Math.min(.175,Math.max(-.175,i+.075*L))*E.slide}}D?E.swais.slice().forEach((t=>{if(t.time<=t.tick){const n=(0,w.c)(Math.min(1,t.time/t.tick),0),a=(1-Math.sin(n*v.b))**t.reduce,i=Math.sin(n%t.par/t.par*Math.PI),o=(i<.5?i/.5:1-(i-.5)/.5)*a,s=(0,w.c)((o-a/2.5)/.5,0);k+=Math.PI*s*t.scale,O+=s*t.fov,t.time+=(0,w.c)(e/60,0)}else E.swais.splice(E.swais.indexOf(t),1)})):(0,y.a)(E.swais);const Y=t.getComponent(u.a),V=!Y.init||Y.initTime!==E.initTime;E.initTime=Y.initTime,(V||-1===E.old.position.x||Y.position.x-E.move.position.x!==E.old.position.x)&&(E.old.position.x=Y.position.x),(V||-1===E.old.position.y||Y.position.y-E.move.position.y!==E.old.position.y)&&(E.old.position.y=Y.position.y),(V||-1===E.old.position.z||Y.position.z-E.move.position.z!==E.old.position.z)&&(E.old.position.z=Y.position.z),(V||-1===E.old.rotate||M.direction.z-E.move.rotate!==E.old.rotate)&&(E.old.rotate=M.direction.z),(V||-1===E.old.fov||t.fov-E.move.fov!==E.old.fov)&&(E.old.fov=t.fov);const j=.25*n.getSpeed();V||(Y.position.x=(0,v.x)(Y.position.x,E.old.position.x+T,j),Y.position.y=(0,v.x)(Y.position.y,E.old.position.y+S,j),Y.position.z=(0,v.x)(Y.position.z,E.old.position.z+0,j),M.direction.z=(0,v.x)(M.direction.z,E.old.rotate+k,j),t.fov=(0,v.x)(t.fov,E.old.fov+O,j)),E.move.position.x=Y.position.x-E.old.position.x,E.move.position.y=Y.position.y-E.old.position.y,E.move.position.z=Y.position.z-E.old.position.z,E.move.rotate=M.direction.z-E.old.rotate,E.move.fov=t.fov-E.old.fov}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>_});n(1),n(2),n(7);var i=n(93),o=n(4),s=n(9),r=n(0),l=n(6),h=n(33),c=n(31),u=n(49),p=n(51),d=n(13),g=n(48),m=n(57),f=n(39),y=n(97),v=n(108),w=n(50),b=n(153),x=n(59),M=n(66),E=e([w]);w=(E.then?(await E)():E)[0];class _ extends o.a{constructor(){super(i.a,s.b,d.a,c.a,l.a,u.a,m.a,i.a)}slidingFilter(e){return Math.sin(e*r.b)**5}additional(e,t,n){var a;const o=t.getComponent(d.a),s=t.getComponent(c.a),l=t.getComponent(u.a),E=t.getComponent(m.a),_=t.getComponent(i.a);let C=0,T=0;if(t.hasComponent(f.a)&&t.hasComponent(y.a)){const e=(0,v.b)(t);C=(_.sprintSpeed-_.walkSpeed)*e,T=(_.walkSpeed-_.cluchSpeed)*e}const S=_.walkSpeed+C,k=_.cluchSpeed+T,O=_.sprintSpeed,A=_.tacticalSprintSpeed;let L=s.speed,P=.25;s.limit=!0;let I=!1;if(t.hasComponent(w.a)){const e=t.getComponent(w.a),n="hookshot"===(0,f.c)(t,e.left,null)&&e.leftWeapon.bullets.length>0,a="hookshot"===(0,f.c)(t,e.right,null)&&e.rightWeapon.bullets.length>0;I=(n||a)&&![...e.leftWeapon.bullets,...e.rightWeapon.bullets].some((e=>{if(e.hasLive()&&e.hasComponent(b.a)){const i=e.getComponent(b.a).bullet;var t,n,a;if(null!==i)if(null!==(t=i.getComponent(x.a))&&void 0!==t&&t.hit){if(null!==(a=i.getComponent(M.a))&&void 0!==a&&a.isPull)return!0}else if(null!==(n=e.getComponent(x.a))&&void 0!==n&&n.hit)return!0}return!1}))}let N=!1,R=!1;if(null!==(a=t.getComponent(g.a))&&void 0!==a&&a.exec)L=t.getComponent(g.a).walkSpeed,P=.125;else if(0===o.value.y){var W,z;if(null!==(W=t.getComponent(p.a))&&void 0!==W&&W.exec){const e=t.getComponent(p.a);L=(.25+.75*(1-this.slidingFilter(e.value)))*e.nowSpeed,P=.125}else null!==(z=t.getComponent(h.a))&&void 0!==z&&z.exec?(L=S,P=.125):l.enableCluch?L=k:_.enableTacticalSprint?(L=0===E.value?A:S,P=.05,R=!0,N=!0):_.enableSprint?(L=0===E.value?O:S,P=.05,N=!0):L=S}else I&&(L=S);_.isSprint=N,_.isTacticalSprint=R,s.speed=(0,r.x)(s.speed,L,P*e)}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>M});n(1),n(2),n(7);var i=n(48),o=n(0),s=n(10),r=n(6),l=n(13),h=n(33),c=n(31),u=n(49),p=n(9),d=n(52),g=n(8),m=n(39),f=n(66),y=n(50),v=n(153),w=n(67),b=n(58),x=e([y,b]);[y,b]=x.then?(await x)():x;class M extends w.a{constructor(){super(i.a,p.b,c.a,r.a,u.a)}checkEdge(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;const{position:l}=e,h=e.getComponent(r.a),c=(0,o.u)(n),u=(0,o.v)(n);let p=!0,d=!0;for(let e=0,n=6;e<n;e=e+1|0){const[n,a,i,,]=t.hitScanVoxel(c,0,l.x,l.y+(0,g.c)(h.size.y/5*e,0),l.z,h.size.x/2+.1);-1!==n&&-1!==a&&-1!==i?d=!1:p=!1}return(i?!p:p||d)?(null!==s&&(s.hit=!1,d||(s.hit=!0)),!1):(null!==s&&(s.position.x=l.x,s.position.y=l.y,s.position.z=l.z,s.direction=(0,o.u)(a),s.wallAngle4=c,s.wallAngle8=u,s.hit=!0),!0)}cancel(e,t){const n=t.getComponent(i.a);n.exec=!1,n.through=!1,n.side=0,n.force.x=0,n.force.y=0,n.force.z=0,n.direction=0,n.value=0}offset(e,t,n){var a,w,x,M,E,_,C;const{position:T,direction:S}=t,k=t.getComponent(i.a),O=t.getComponent(u.a),A=t.getComponent(r.a),L=t.getComponent(p.b),P=t.getComponent(c.a),I=T.x,N=T.y,R=T.z,W=I-(-1===k.oldPosition.x?T.x:k.oldPosition.x),z=N-(-1===k.oldPosition.y?T.y:k.oldPosition.y),D=R-(-1===k.oldPosition.z?T.z:k.oldPosition.z),[F]=0!==W||0!==z||0!==D?(0,o.n)(W,z,D,0,0,0):[-1,-1],[U,H]=(0,o.q)(S.x,L.axes.x.x,L.axes.x.y),B=0!==L.axes.x.x||0!==L.axes.x.y?(0,o.m)(U,H,0,0):-1,G=0!==((null===(a=t.getComponent(l.a))||void 0===a?void 0:a.value.x)||0)||0!==((null===(w=t.getComponent(l.a))||void 0===w?void 0:w.value.z)||0)?(0,o.m)((null===(x=t.getComponent(l.a))||void 0===x?void 0:x.value.x)||0,(null===(M=t.getComponent(l.a))||void 0===M?void 0:M.value.z)||0,0,0):-1;let Y=!1,V=!1,j=-1;if(k.exec){var K;const e=(0,m.e)(t,"stamina")/(0,m.d)(t,"stamina");let a=k.side;switch(!0){case this.checkEdge(t,n,(0,o.u)(S.x),S.x,!0,k.start):a=0,V=!0,j=k.start.direction;break;case this.checkEdge(t,n,(0,o.u)(S.x+o.b),S.x,!0,k.start):a=1,j=k.start.direction,V=!0;break;case this.checkEdge(t,n,(0,o.u)(S.x-o.b),S.x,!0,k.start):a=-1,j=k.start.direction,V=!0}k.side=a,k.proplusion=Math.max(0,Math.min(1,Math.max(1,(0,o.h)(k.start.wallAngle4,t.direction.x)/o.b)-.75*(1-(0,o.h)(k.start.wallAngle4,t.direction.x)/o.b))),k.direction=(0,o.j)(k.start.wallAngle4,S.x),k.value=e;const i=Math.min(1,Math.max(-1,(0,o.j)(k.start.wallAngle4,S.x)/o.b)),r=(0,g.e)((1-Math.abs(i)-.25)/.75),l=i*(0===k.start.wallAngle4||k.start.wallAngle4===3*o.b?-1:1),c=0===k.start.direction?S.x>Math.PI?o.a:0:(0,o.t)(k.start.wallAngle4+o.b*(k.side>0?-1:1));let u=!1;if(!Y&&t.hasComponent(y.a)){const e=t.getComponent(y.a),n="hookshot"===(0,m.c)(t,e.left,null)&&e.leftWeapon.bullets.length>0,a="hookshot"===(0,m.c)(t,e.right,null)&&e.rightWeapon.bullets.length>0;u=(n||a)&&![...e.leftWeapon.bullets,...e.rightWeapon.bullets].some((e=>{if(e.hasLive()&&e.hasComponent(v.a)){var t;const n=e.getComponent(v.a);if(null!==(t=n.bullet)&&void 0!==t&&t.hasComponent(f.a))return n.bullet.getComponent(f.a).isPull}return!0}))}if(null!==(K=t.getComponent(h.a))&&void 0!==K&&K.exec&&(k.start.wallAngle4=-1,k.start.wallAngle8=-1),!L.isAir||u||k.through||!(0,b.b)(t,n)||(0,m.e)(t,"stamina")<=0||0===L.axes.x.x&&0===L.axes.x.y||A.hit.y>0||0!==a&&this.checkEdge(t,n,(0,o.u)(P.look.x),P.look.x,!1,k.start)||!this.checkEdge(t,n,k.start.wallAngle4)||!V&&(-1!==B&&(0,o.j)(t.direction.x,B)>3*o.d&&Math.abs(L.axes.x.x)+Math.abs(L.axes.x.y)>.5||(0,o.j)(S.x,k.start.wallAngle4)>3.75*o.d))this.cancel(n,t);else{let e=0,a=0,i=0;if(n.hasSound("player-wallrun")){var X;const e=new s.a("player-wallrun-sound"),[a,i]=(0,o.q)(k.start.wallAngle4,0,.375);e.position.x=t.position.x+a,e.position.y=t.position.y,e.position.z=t.position.z+i,null===(X=n.getSound("player-wallrun"))||void 0===X||X.setTarget(e)}(0===k.side||(0,o.h)(c,S.x)>o.d)&&(a=r),0===k.start.wallAngle4||k.start.wallAngle4===Math.PI?(e=0,i=l):(e=l,i=0),k.force.x=e,k.force.y=a,k.force.z=i}}else L.isAir&&-1!==A.hit.angle.x||(k.lock=!1);if(!k.exec&&k.enable&&this.hasHitCamera(n)&&(0,m.e)(t,"stamina")>0&&L.axes.x.y>0&&!O.enableCluch&&(null===(E=t.getComponent(h.a))||void 0===E||!E.exec)&&(null===(_=t.getComponent(h.a))||void 0===_||!_.through)&&(null===(C=t.getComponent(d.a))||void 0===C||!C.exec)&&(V||-1!==A.hit.angle.x&&(0,o.h)(A.hit.angle.x,S.x)<3*o.d||!(-1===B||(0,o.j)(t.direction.x,B)>3*o.d&&Math.abs(L.axes.x.x)+Math.abs(L.axes.x.y)>.5)||(0,o.h)(A.hit.angle.x,G)<3*o.d||(0,o.h)(A.hit.angle.x,F)<3*o.d)&&0===A.hit.y&&L.isAir){let e=0,a=!0;if(k.start.hit=!1,!0===(-1!==A.hit.angle.x&&this.checkEdge(t,n,A.hit.angle.x,S.x,!0,k.start))){const t=(0,o.j)(S.x,k.start.wallAngle4);e=t>=o.d?-1:t<=-o.d?1:0}else if(V&&this.checkEdge(t,n,j,S.x,!0,k.start)){const t=(0,o.j)(S.x,k.start.wallAngle4);e=t>=o.d?-1:t<=-o.d?1:0}else a=!1;if(a){if(!k.lock){if(k.through=!1,k.exec=!0,k.lock=!0,k.side=e,k.value=0,Y=!0,t.hasComponent(l.a)){const e=t.getComponent(l.a);e.value.x=0,e.value.y=0,e.value.z=0}if(!n.hasSound("player-wallrun")){const e=new s.a("player-wallrun-sound"),[a,i]=(0,o.q)(k.start.wallAngle4,0,.375);e.position.x=t.position.x+a,e.position.y=t.position.y,e.position.z=t.position.z+i,n.createSound("./asset/sound/player/wallrun.mp3",e,"player-wallrun").play()}}}else k.start.hit&&this.cancel(n,t)}var q;k.exec||n.hasSound("player-wallrun")&&(null===(q=n.getSound("player-wallrun"))||void 0===q||q.stop());k.oldPosition.x=T.x,k.oldPosition.y=T.y,k.oldPosition.z=T.z}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>M});n(7);var i=n(221),o=n(65),s=n(504),r=n(9),l=n(49),h=n(69),c=n(189),u=n(93),p=n(57),d=n(51),g=n(6),m=n(33),f=n(52),y=n(44),v=n(27),w=n(108),b=n(0),x=e([v]);v=(x.then?(await x)():x)[0];class M extends i.a{constructor(){super(o.a,h.a,c.a,s.a)}additional(e,t,n){var a,i,h,x,M,E;const _=t.getComponent(s.a).value;if(null===_)return;const C=t.getComponent(y.a),T=t.getComponent(c.a),S=t.getComponent(o.a),k=n.getCamera(),O=1-(0,w.b)(_);k.fov=n instanceof v.a?n.getFOVToCamera():1,S.hard=!0;let A=0,L=0;var P,I;-1===((null===(a=_.getComponent(r.b))||void 0===a?void 0:a.deathTime)||-1)&&(A=T.standY-(T.standY-T.cluchY)*((null===(P=_.getComponent(l.a))||void 0===P?void 0:P.value)||0));k.direction.y>0&&(L=((null===(I=_.getComponent(g.a))||void 0===I?void 0:I.size.x)||0)/2*(Math.abs(k.direction.y)/b.b)*.9);const N=!(null===(i=_.getComponent(l.a))||void 0===i||!i.enableCluch);if(null!==(h=_.getComponent(m.a))&&void 0!==h&&h.move)S.speed=2,S.scale.x=.5*O,S.scale.y=.25*O,S.rotate=-.025*O;else if(((null===(x=_.getComponent(p.a))||void 0===x?void 0:x.cameraValue)||0)>0||null!==(M=_.getComponent(f.a))&&void 0!==M&&M.exec)S.speed=0,S.scale.x=0,S.scale.y=0,S.rotate=0;else if(null!==(E=_.getComponent(d.a))&&void 0!==E&&E.exec){var R;const e=_.getComponent(d.a),n=1-e.value;L+=-((null===(R=_.getComponent(g.a))||void 0===R?void 0:R.size.y)||0)/2,S.speed=1.5+1.5*n,S.scale.x=(.25+.25*n)*O*Math.sin(2*(0,b.h)(t.direction.x,e.dir)),S.scale.y=(.125+.125*n)*O,S.rotate=-(.0125+.0125*n)*O}else if(_.hasComponent(u.a)){const e=_.getComponent(u.a);S.speed=e.enableSprint&&!N?e.enableTacticalSprint?2.25:2:1.5,S.scale.x=(e.enableSprint&&!N?.5:.25)*O,S.scale.y=(e.enableSprint&&!N?.25:.125)*O,S.rotate=-(e.enableSprint&&!N?.0125:.00625)*O}C.position.y=(0,b.x)(C.position.y,A,.25*e),C.position.z=(0,b.x)(C.position.z,L,.25*e)}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>E});n(7),n(1),n(2);var i=n(13),o=n(49),s=n(6),r=n(0),l=n(51),h=n(33),c=n(48),u=n(125),p=n(57),d=n(30),g=n(26),m=n(50),f=n(9),y=n(52),v=n(41),w=n(67),b=n(8),x=e([m]);m=(x.then?(await x)():x)[0];const M=[[0,0],[1,0],[0,1],[-1,0],[0,-1],[1,1],[1,-1],[-1,1],[-1,-1]];class E extends w.a{constructor(){super(o.a,f.b,s.a,v.a,i.a,p.a,u.a)}additional(e,t,n){var a,w;let{position:x}=t;const E=t.getComponent(o.a),_=t.getComponent(f.b),C=t.getComponent(s.a).size,T=(null===(a=t.getComponent(g.a))||void 0===a?void 0:a.size)||new r.e(0,0),S=(null===(w=t.getComponent(d.a))||void 0===w?void 0:w.size)||new r.e(0,0),k=t.getComponent(u.a);for(let a=0,i=2;a<i;a=a+1|0){var O,A,L,P,I,N;if(1===a&&t.hasComponent(y.a)){const e=t.getComponent(y.a);if(0===e.value.x)break;if(e.exec){if(-1===e.oldPosition.x||-1===e.oldPosition.y||-1===e.oldPosition.z)break;x=new r.f(e.oldPosition.x,e.oldPosition.y,e.oldPosition.z)}else x=new r.f(x.x+e.moveValue.x,x.y+e.moveValue.y,x.z+e.moveValue.z)}if(t.hasComponent(m.a)){const e=t.getComponent(m.a);"hand"===e.right&&"hand"===e.left&&(e.rightWeapon.isFireStart||e.leftWeapon.isFireStart)&&(k.exec=!1)}let i=x.x,o=x.y,d=x.z;if(t.hasComponent(h.a)){const e=t.getComponent(h.a);e.climb&&(i=e.last.x,o=e.last.y,d=e.last.z)}const g=t.getComponent(p.a),f=0===g.cluchValue&&!(null!==(O=t.getComponent(c.a))&&void 0!==O&&O.exec)&&(n.hasBlockScaleVoxel(i,o-.001,d,.999*C.x,.001)||!(null===(A=t.getComponent(y.a))||void 0===A||!A.exec))&&n.hasBlockScaleVoxel(i,o,d,.999*C.x,E.standSizeY-.001)&&!n.hasBlockScaleVoxel(i,o,d,.999*C.x,.999);let v=C.y;if(-1!==_.respawnTime)v=E.standSizeY;else if(null!==(L=t.getComponent(l.a))&&void 0!==L&&L.exec)v=E.cluchSizeY;else if(k.exec){const n=t.getComponent(u.a);v=(0,r.x)(v,n.sizeY,n.stretchSpeed*e)}else if(f)v=E.cluchSizeY;else if(E.enableCluch){var R;v=null!==(R=t.getComponent(y.a))&&void 0!==R&&R.exec?(0,r.x)(v,E.cluchSizeY+(E.standSizeY-E.cluchSizeY)*Math.max(0,t.getComponent(y.a).value.y),E.stretchSpeed*e):(0,r.x)(v,E.cluchSizeY,E.stretchSpeed*e)}else{var W;v=null!==(W=t.getComponent(y.a))&&void 0!==W&&W.exec?(0,r.x)(v,E.standSizeY-(E.standSizeY-E.cluchSizeY)*Math.max(0,-t.getComponent(y.a).value.y),E.stretchSpeed*e):(0,r.x)(v,E.standSizeY,E.stretchSpeed*e)}if((null!==(P=t.getComponent(s.a))&&void 0!==P&&P.enable||!t.getComponent(h.a).exec||n.hasHitScanVoxel(0,-r.b,t.getComponent(h.a).last.x,t.getComponent(h.a).last.y,t.getComponent(h.a).last.z,E.standSizeY))&&n.hasBlockScaleVoxel(i,o+v,d,C.x,.001)){const e=C.x/2*.999;for(let t=0,a=0|M.length;t<a;t=t+1|0){const a=(0,r.m)(M[t][0],M[t][1],0,0),s=Math.cos(a)*e,l=Math.sin(a)*e,[h,c,u]=(0,r.r)(0,-r.b,s,l,0);if(!n.hasBlockScaleVoxel(i+h,o+c+.01,d+u,.01,.01)){const[,,,e]=n.hitScanVoxel(0,-r.b,i+h,o+c,d+u,v);-1!==e&&e<v&&(v=e)}}}E.oldFeet=C.y,C.y=v,T.y=v,S.y=v,E.value=1-(0,b.e)((C.y-E.cluchSizeY)/E.cluchSizeY),null!==(I=t.getComponent(c.a))&&void 0!==I&&I.exec||0!==g.cluchValue||!(n.hasBlockScaleVoxel(i,o-.001,d,C.x,.001)||null!==(N=t.getComponent(y.a))&&void 0!==N&&N.exec)||!n.hasBlockScaleVoxel(i,o,d,C.x,E.standSizeY)||n.hasBlockScaleVoxel(i,o,d,C.x,E.cluchSizeY)?E.block=!1:E.block=!0}const z=t.getComponent(v.a),D=t.getComponent(i.a),F=E.oldFeet;var U,H;z.isFall&&(n.hasBlockScaleVoxel(x.x,x.y+F-C.y,x.z,C.x,Math.max(.001,Math.abs(F-C.y)))?n.hasBlockScaleVoxel(x.x,Math.ceil(x.y+F-C.y),x.z,C.x,Math.max(.001,Math.abs(F-C.y)))||(x.y=Math.ceil(x.y+F-C.y)):(k.exec||null!==(U=t.getComponent(h.a))&&void 0!==U&&U.exec||null!==(H=t.getComponent(c.a))&&void 0!==H&&H.exec&&0!==D.value.y)&&(x.y+=F-C.y))}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.d(t,{a:()=>d});n(7),n(1),n(2),n(14),n(15),n(16);var a=n(51),i=n(10),o=n(6),s=n(0),r=n(13),l=n(31),h=n(40),c=n(63),u=n(8),p=n(67);class d extends p.a{constructor(){super(a.a,l.a,o.a,r.a)}cancel(e){const t=e.getComponent(a.a);t.exec=!1,t.nowSpeed=0}additional(e,t,n){const i=t.getComponent(a.a),o=t.getComponent(l.a);if(i.value>=1&&this.cancel(t),i.exec){const n=t.getComponent(r.a);i.nowSpeed<=0&&(i.nowSpeed=Math.max(i.speed,o.speed)),i.dir=(0,s.t)((0,s.m)(n.value.x,n.value.z,0,0)),i.value+=(0,u.c)(e/60/i.time,0)}else i.value=0,i.nowSpeed=0,i.dir=-1;let h=0;i.value>0&&(h=Math.min(1,i.value/.125)),i.par=h}physical(e,t,n){const{position:l}=t,p=t.getComponent(a.a),d=t.getComponent(o.a),g=l.x,m=l.y,f=l.z,y=-1===p.oldPosition.x?l.x:p.oldPosition.x,v=-1===p.oldPosition.y?l.y:p.oldPosition.y,w=-1===p.oldPosition.z?l.z:p.oldPosition.z;if(p.exec){var b;if(n.hasSound("player-sliding"))null===(b=n.getSound("player-sliding"))||void 0===b||b.setVolume(Math.max(0,.5*(1-p.value)));else n.createSound("./asset/sound/player/sliding.mp3",t,"player-sliding").setVolume(.5).play();if(p.push>0){const[e,a,b]=(0,s.A)(l.x,l.y,l.z,y,v,w),x=d.size.x/2,M=d.size.y/4,[E,_]=(0,s.q)(p.dir,0,x),[C,T]=(0,s.q)(p.dir,x,0);if(0!==e||0!==a||0!==b){const d=t.getComponent(o.a),x=Math.min((0,s.p)(e,a,b,0,0,0),n.getWorldDistance()),S=Math.max(1e-6,Math.min(x,d.size.x/4,d.size.y/4,.5)),[k,O]=(0,s.n)(e,a,b,0,0,0),[A,L,P]=(0,s.r)(k,O,0,0,1);l.x=y,l.y=v,l.z=w;let I=0;for(;;){l.x=y+I*A,l.y=v+I*L,l.z=w+I*P;for(let e=0,a=5;e<a;e=e+1|0){const[,,,a,o]=n.hitScan("collision",p.dir,0,l.x+E,l.y+M*e,l.z+_,.5,[t.getID()]),[,,,d,g]=n.hitScan("collision",p.dir,0,l.x+C,l.y+M*e,l.z+T,.5,[t.getID()]),[,,,m,f]=n.hitScan("collision",p.dir,0,l.x-C,l.y+M*e,l.z-T,.5,[t.getID()]),y=[[o,a],[g,d],[f,m]];let v=!1;y.forEach((e=>{let[n,a]=e,o=0;if(-1!==a&&(o=1-(0,u.e)(a/.5)),o>0&&n&&n instanceof i.a)if(n.hasComponent(r.a)&&n.hasComponent(h.a)&&n.getNames().some((e=>p.targetNames.includes(e)))){const[e,a]=(0,s.n)(n.position.x,n.position.y,n.position.z,l.x,l.y,l.z),[i,o,r]=(0,s.r)(e,.25*-s.d,0,0,p.push*(1-p.value));n.getComponent(h.a).value.push(new c.a(0,"melee",t,e,a,l,i,o,r))}else v=!0})),y.length>0&&v&&this.cancel(t)}if(I>=x)break;I=Math.min(x,(0,u.c)(I+S,x,1e5,Math.ceil))}l.x=g,l.y=m,l.z=f}}}else{var x;if(n.hasSound("player-sliding"))null===(x=n.getSound("player-sliding"))||void 0===x||x.stop()}}offset(e,t,n){const{position:i}=t,o=t.getComponent(a.a);o.oldPosition.x=i.x,o.oldPosition.y=i.y,o.oldPosition.z=i.z}}},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>b});var i=n(331),o=n(344),s=n(154),r=n(503),l=n(0),h=n(51),c=n(75),u=n(125),p=n(5),d=n(504),g=n(50),m=e([p,g]);function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}[p,g]=m.then?(await m)():m;class y{constructor(){f(this,"name","still")}update(e,t,n,a,i){const{direction:o}=n,u=a.getCamera(),d=t.getComponent(c.a),g=t.getComponent(s.a),m=t.getComponent(r.a),f=n.getComponent(h.a);if("coil"!==i)if(g.isRotateCenter=!1,d.isFixRotate=!1,f.par>0){const e=(0,l.j)(o.x,f.dir),t=(0,l.t)(o.y),n=e>Math.PI?e-l.a:e,a=t>Math.PI?t-l.a:t,i=u.fov/u.hudFov;d.rotate=g.rotate=Math.max(-l.d,Math.min(l.d,-n/i)),d.position.x=g.position.x=n/Math.PI/i,d.scale=g.scale=2-.75*f.par,d.position.y=g.position.y=a*i*.5-2.5+1.5*f.par-Math.sin(Math.abs(n/i))}else g.scale=(0,l.x)(g.scale,2,.25*e),g.position.y=(0,l.x)(g.position.y,-4.5,.25*e);d.position.z=.05,m.material=p.h.HUD_FOOT_SLIDING}}class v{constructor(){f(this,"name","coil")}update(e,t,n,a,i){const o=t.getComponent(r.a),h=n.getComponent(g.a),d=t.getComponent(s.a),m=t.getComponent(c.a);if("hand"===h.right&&"hand"===h.left&&(h.rightWeapon.isFireStart||h.leftWeapon.isFireStart))d.isRotateCenter=!1,m.scale=d.scale=2,m.rotate=d.rotate=0,m.position.x=d.position.x=0,m.position.y=d.position.y=-2,o.material=p.h.NONE;else{var f;const{direction:e}=n,t=a.getCamera(),i=(0,l.t)(e.x-((null===(f=n.getComponent(u.a))||void 0===f?void 0:f.dir)||0)),s=i>Math.PI?i-l.a:i;d.isRotateCenter=!1;const r=t.fov/t.hudFov;m.scale=d.scale=1.25,m.rotate=d.rotate=Math.max(-l.d,Math.min(l.d,-s/r)),m.position.x=d.position.x=s/Math.PI/r,d.position.y=-.825-Math.abs(s)/l.b-Math.sin(Math.abs(s))/r,o.material="hand"===h.right&&"hand"===h.left?p.h.HUD_FOOT_COIL_HAND:p.h.HUD_FOOT_COIL_NO_HAND}}}class w{constructor(){f(this,"name","death")}update(e,t,n,a,i){t.getComponent(r.a).material=p.h.NONE}}class b extends i.a{constructor(){super(o.a,c.a,s.a,r.a),this.addAnimations(new y,new v,new w)}offset(e,t,n){const a=n.getCamera();var i;if(null!==a&&a!==((null===(i=t.getComponent(d.a))||void 0===i?void 0:i.value)||null)){t.getComponent(r.a).material=p.h.NONE}}}a()}catch(x){a(x)}}))},(e,t,n)=>{"use strict";n.d(t,{a:()=>u});n(1),n(2);var a=n(4),i=n(57),o=n(6),s=n(0),r=n(49),l=n(9),h=n(52),c=n(8);class u extends a.a{constructor(){super(i.a,l.b,o.a,r.a)}check(e,t,n,a){const{position:r}=e,l=e.getComponent(i.a),h=e.getComponent(o.a);let u=l.length;for(let e=1,i=6;e<i;e=e+1|0){const[i,o,c,,]=t.hitScanVoxel(n,0,r.x,r.y+a/6*e,r.z,h.size.x/2+l.length);-1===i&&-1===o&&-1===c||(u=Math.min(u,Math.max(0,(0,s.o)(i,c,r.x,r.z)-h.size.x/2)))}return 1-(0,c.e)(u/l.length)}offset(e,t,n){const{direction:a}=t,u=t.getComponent(i.a),p=t.getComponent(l.b),d=t.getComponent(o.a),g=t.getComponent(r.a),m=n.getCamera(),[f,y]=(0,s.q)(a.x,p.axes.x.x,p.axes.x.y),v=(0,s.m)(f,y,0,0);if(u.value=this.check(t,n,a.x,d.size.y),u.standValue=this.check(t,n,v,g.standSizeY),u.cluchValue=this.check(t,n,v,g.cluchSizeY),t.hasComponent(h.a)){const e=t.getComponent(h.a);u.leanValue=-1===e.startDir?0:Math.max(this.check(t,n,e.startDir,g.standSizeY),this.check(t,n,e.startDir,g.cluchSizeY))}else u.leanValue=0;const[,,,w]=n.hitScanVoxel(m.direction.x,m.direction.y,m.position.x,m.position.y,m.position.z,d.size.x/2+u.length);u.cameraValue=-1!==w?1-(0,c.e)((w-d.size.x/2)/u.length):0}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>u});n(1),n(2);var a=n(4),i=n(342),o=n(6),s=n(13),r=n(49),l=n(9),h=n(26),c=n(0);class u extends a.a{constructor(){super(i.a,l.b)}additional(e,t,n){const{direction:a}=t,r=t.getComponent(i.a),c=t.getComponent(l.b);if(-1!==c.deathTime&&(c.respawnTime=-1),-1!==c.respawnTime)if(c.time-c.respawnTime>1){if(n.setActorPosition(t,r.point.position.x,r.point.position.y,r.point.position.z),a.x=r.point.direction.x,a.y=r.point.direction.y,a.z=0,t.hasComponent(o.a)){t.getComponent(o.a).enable=!0}if(t.hasComponent(h.a)){t.getComponent(h.a).enable=!0}c.respawnTime=-1}else if(t.hasComponent(s.a)){const e=t.getComponent(s.a);e.value.x=0,e.value.y=0,e.value.z=0}}offset(e,t,n){const{position:a,direction:s}=t,h=t.getComponent(i.a),u=t.getComponent(l.b),p=t.getComponent(o.a),[d,g,m]=n.getWorldSize();var f;(h.init||(h.point.position.x=a.x,h.point.position.y=a.y,h.point.position.z=a.z,h.init=!0),-1===u.respawnTime&&-1===u.deathTime)&&(a.y<=0?u.respawnTime=u.time:a.x>.999&&a.x<d-2.001&&a.y>.999&&a.y<g-2.001&&a.z>.999&&a.z<m-2.001&&n.hasHitScanVoxel(0,c.b,a.x,a.y,a.z,.01)&&!n.hasBlockScaleVoxel(a.x,a.y,a.z,p.size.x,(null===(f=t.getComponent(r.a))||void 0===f?void 0:f.standSizeY)||p.size.y)&&(h.point.position.x=a.x,h.point.position.y=a.y,h.point.position.z=a.z,h.point.direction.x=s.x,h.point.direction.y=s.y))}}},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>T});n(14),n(1),n(2);var i=n(10),o=n(504),s=n(0),r=n(53),l=n(218),h=n(30),c=n(6),u=n(31),p=n(61),d=n(4),g=n(40),m=n(503),f=n(26),y=n(13),v=n(8),w=n(9),b=n(41),x=n(300),M=n(27),E=n(105),_=n(262),C=e([M]);M=(C.then?(await C)():C)[0];class T extends d.a{constructor(e){var t,n,a;super(r.a,g.a,o.a,m.a,u.a,c.a,y.a),a=void 0,(n="setting")in(t=this)?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,this.setting=e}getMaterial(e,t,n){return t.hasOwnProperty(n)?t[n]:e}offset(e,t,n){var a,d;const C=t.getComponent(o.a).value;if(null===C||!(C instanceof i.a))return;const{position:T,direction:S}=t,k=t.getComponent(r.a),O=t.getComponent(g.a),A=t.getComponent(c.a),L=t.getComponent(y.a),P=t.getComponent(m.a),I=t.getComponent(u.a),N=k.painTime>0&&-1===k.painStartTime?O.value.length>0:k.time-k.painStartTime<k.painTime,R=k.blow&&(null!==O.attacker&&-1===k.blowStartTime?Math.abs(L.value.x)>.25||Math.abs(L.value.y)>.25||Math.abs(L.value.z)>.25:k.time-k.blowStartTime<k.blowTime),W=R||N,z=-1!==k.freezeTime&&k.freezeTime>k.time;if(z)k.aimStartTime=-1,k.path=null,I.move.x=0,I.move.y=0,I.move.z=0,I.look.x=0,I.look.y=0,t.hasComponent(p.a)&&(t.getComponent(p.a).enable=!1),P.material=this.getMaterial(k.stillMaterial,k.otherMaterials,"freeze");else{var D,F,U,H,B;if(k.freezeTime=-1,t.hasComponent(f.a)){t.getComponent(f.a).targets.forEach((e=>{if(!e.hasComponent(r.a)||!e.hasComponent(g.a))return;const t=e.getComponent(g.a);O.attacker=O.attacker||t.attacker}))}const a=n.getCamera(),i=(null===(D=t.getComponent(l.a))||void 0===D?void 0:D.shootPoint)||new s.e(0,A.size.y/4),o=(null===(F=C.getComponent(h.a))||void 0===F?void 0:F.size)||new s.e(0,0),u=(0,s.m)(C.position.x,C.position.z,T.x,T.z),[d,m]=(0,s.q)(u,i.x,0),y=i.y,b=A.size.y/2+y,L=o.y/4*3,N=T.x+d,z=T.y+b,G=T.z+m,Y=T.x+k.seePosition.x*A.size.x/2,V=T.y+A.size.y/2+k.seePosition.y*A.size.y/2,j=T.z+k.seePosition.z*A.size.x/2,K=C.position.x,X=C.position.y+L,q=C.position.z,J=(0,s.p)(K,X,q,N,z,G),Z=(0,s.m)(K,q,N,G),[$,Q]=(0,s.q)(Z,(null===(U=C.getComponent(c.a))||void 0===U?void 0:U.size.x)||0,0),[ee,te]=(0,s.n)(K,X,q,N,z,G),[ne,ae]=(0,s.n)(K+$,X,q+Q,N,z,G),[ie,oe]=(0,s.n)(K-$,X,q-Q,N,z,G),se=n instanceof M.a?n.getPlayer():null;let re=!1;if((null===se||!se.hasComponent(w.b)||(-1===se.getComponent(w.b).goleTime||se.getComponent(w.b).goleTime<1e3)&&(-1===se.getComponent(w.b).deathTime||se.getComponent(w.b).deathTime<1e3))&&(re=!n.hasHitScanVoxel(ee,te,Y,V,j,J)||!n.hasHitScanVoxel(ne,ae,Y,V,j,J)||!n.hasHitScanVoxel(ie,oe,Y,V,j,J)),k.isSee=re,re){if(k.see||(k.see=!0,this.setting.hasEnemyVoice()&&k.findVoices.length>0&&n.createSound(k.findVoices[k.findVoices.length*Math.random()|0],t,"enemy-voice-".concat(t.getID())).setVolume(10).play()),C.hasComponent(w.b)){const e=C.getComponent(w.b),t=n.getCamera(),[a,i]=(0,s.n)(N,z,G,t.position.x,t.position.y,t.position.z),[o,r]=(0,s.i)(a,i,t.direction.x,t.direction.y);e.readySlowMo=e.readySlowMo||o<Math.PI/3&&r<Math.PI/3}const[a,i]=(0,s.k)(ee,te,S.x,S.y);S.x+=(0,v.c)(a*Math.min(1,k.angleForce*e),0),S.y+=(0,v.c)(i*Math.min(1,k.angleForce*e),0)}else S.x=(0,v.c)(ee,S.x),S.y=(0,v.c)(te,S.y);const le=(null===(H=t.getComponent(p.a))||void 0===H?void 0:H.attackType)||"none",he=T.x,ce=T.y,ue=T.z,[pe,de,ge]=(0,s.r)(t.direction.x,t.direction.y,((null===(B=t.getComponent(c.a))||void 0===B?void 0:B.size.x)||.1)/2,0,0),[me,fe]=(0,s.n)(K,X,q,N,z,G),[ye,ve]=(0,s.n)(K,X,q,N+pe,z+de,G+ge),[we,be]=(0,s.n)(K,X,q,N-pe,z+de,G-ge);if(!re||W||!k.air&&k.isAir||"melee"===le&&J>=k.attackRangeMax?k.aimStartTime=-1:-1!==k.aimStartTime||"none"===le||("shoot"===le||"shoot-range"===le?n.hasHitScanVoxel(me,fe,N,z,G,J)||n.hasHitScanVoxel(ye,ve,N+pe,z+de,G+ge,J)||n.hasHitScanVoxel(we,be,N-pe,z+de,G-ge,J):"melee"===le&&!n.hitScanBold("hitbox",ee,te,N,z,G,A.size.x,J,[t.getID(),C.getID()]))||(k.aimStartTime=k.time),k.see){if(k.isBlow||k.isDown)I.move.x=0,I.move.y=0,I.move.z=0;else{if(I.speed>0&&!this.hasWaitAsync(t)&&k.time>k.nextFindTime){const e=k.time,o=new x.b(k.air),r=n.getMap();this.beginAsync(t,n.findPath(o,he,ce,ue,((e,a)=>{var i;let o=e.x-e.stepX,l=e.y-e.stepY,h=e.z-e.stepZ;if((0|o)==(0|he)&&(0|l)==(0|ce)&&(0|h)==(0|ue)&&(o=he,l=ce,h=he),r.get(0,e.x,e.y,e.z)>0&&n.hasBlockScaleVoxel(e.x,0|e.y,e.z,A.size.x,A.size.y)||!k.air&&(r.get(0,e.x,(0|e.y)-1,e.z)<=0||!n.hasBlockScaleVoxel(e.x,(0|e.y)-1,e.z,A.size.x,.001))||(k.air?(0!==e.stepX&&0!==e.stepZ||0!==e.stepY&&(0!==e.stepX||0!==e.stepZ))&&n.hasBlockScaleVoxel(o+e.stepX/2,(0|l)+e.stepY/2,h-e.stepZ/2,A.size.x,A.size.y):0!==e.stepX&&0!==e.stepZ&&n.hasBlockScaleVoxel(o+e.stepX/2,0|l,h-e.stepZ/2,A.size.x,A.size.y)))a.block=!0;else if(n.hasBlockScale("collision",e.x,e.y,e.z,A.size.x,A.size.y,[t.getID(),C.getID(),...k.filters,...(null===(i=t.getComponent(f.a))||void 0===i?void 0:i.filter)||[]])){var c;const[i,r]=(0,s.n)(e.stepX,e.stepY,e.stepZ,0,0,0),[u,p,d,,g]=n.hitScanBold("collision",i,r,o,(0|l)+b,h,Math.min(A.size.x,A.size.y),(0,s.p)(e.x,e.y,e.z,e.x-e.stepX,e.y-e.stepY,e.z-e.stepZ),[t.getID(),C.getID(),...k.filters,...(null===(c=t.getComponent(f.a))||void 0===c?void 0:c.filter)||[]]);-1!==u&&-1!==p&&-1!==d&&(a.block=!0,null===g&&(a.label="".concat(e.stepX,",").concat(e.stepY,",").concat(e.stepZ)))}}),(e=>{var t,a;const i=(0,s.p)(K,X,q,e.x,(0|e.y)+b,e.z),[o,r]=(0,s.n)(K,X,q,e.x,(0|e.y)+b,e.z);let l,h,u,p,d,g,m,f;return"shoot"===le||"shoot-range"===le||"always"===le?([l,,h]=(0,s.r)(o,r,.75,0,0),[u,p]=(0,s.n)(K,X,q,e.x,(0|e.y)+b,e.z),[d,g]=(0,s.n)(K,X,q,e.x+l,(0|e.y)+b,e.z+h),[m,f]=(0,s.n)(K,X,q,e.x-l,(0|e.y)+b,e.z-h)):([l,,h]=(0,s.r)(o,r,A.size.x/2,0,0),[u,p]=(0,s.n)(K,X,q,e.x,(0|e.y)+b,e.z),[d,g]=(0,s.n)(K+l,X,q+h,e.x+l,(0|e.y)+b,e.z+h),[m,f]=(0,s.n)(K-l,X,q-h,e.x-l,(0|e.y)+b,e.z-h)),!n.hasHitScanVoxel(u,p,e.x,(0|e.y)+b,e.z,i)&&!n.hasHitScanVoxel(d,g,e.x+l,(0|e.y)+b,e.z+h,i)&&!n.hasHitScanVoxel(m,f,e.x-l,(0|e.y)+b,e.z-h,i)&&!(0,E.e)(e.x,e.y,e.z,A.size.x,A.size.y,C.position.x,C.position.y,C.position.z,(null===(t=C.getComponent(c.a))||void 0===t?void 0:t.size.x)||0,(null===(a=C.getComponent(c.a))||void 0===a?void 0:a.size.y)||0)&&(i<=k.attackRangeMax&&i>=k.attackRangeMin||("shoot"===le||"always"===le?i>=k.attackRangeMin:i<=k.attackRangeMax))&&((0|e.x)==(0|he)&&(0|e.y)==(0|ce)&&(0|e.z)==(0|ue)||!!k.air||(0,s.h)(C.direction.x,(0,s.m)(K,q,e.x,e.z))<s.b||"shoot"!==le&&"always"!==le||i>=k.attackRangeMax)&&0===n.getEntitysOfRange("range",e.x,e.y,e.z,1,1).filter((e=>e.hasComponent(_.a))).length}),(e=>{if("shoot"===le){const a=(0,s.p)(K,X,q,e.x,(0|e.y)+b,e.z),[i,o]=(0,s.n)(K,X,q,e.x,(0|e.y)+b,e.z);if(a<=k.attackRangeMin||!k.air&&("shoot"===le&&(0,s.h)(C.direction.x,(0,s.m)(K,q,e.x,e.z))>Math.PI/1.5)&&(()=>{var r;const[l,h,u]=(0,s.r)(i,o,((null===(r=t.getComponent(c.a))||void 0===r?void 0:r.size.x)||.1)/2,0,0),[p,d]=(0,s.n)(K,X,q,e.x,(0|e.y)+b,e.z),[g,m]=(0,s.n)(K,X,q,e.x+l,(0|e.y)+b+h,e.z+u),[f,y]=(0,s.n)(K,X,q,e.x-l,(0|e.y)+b+h,e.z-u);return!n.hasHitScanVoxel(p,d,e.x,(0|e.y)+b,e.z,a)&&!n.hasHitScanVoxel(g,m,e.x+l,(0|e.y)+b+h,e.z+u,a)&&!n.hasHitScanVoxel(f,y,e.x-l,(0|e.y)+b+h,e.z-u,a)}))return(0,s.p)(he,ce,ue,K,X,X)+e.cost}return e.getCost(K,X,q)}),(()=>k.see&&k.time-e<1&&C.hasLive()&&t.hasLive()),(()=>{const e=(0,s.m)(C.position.x,C.position.z,T.x,T.z),[t,o]=(0,s.q)(e,i.x,0),r=i.y,l=A.size.y/2+r,h=T.x+t,c=T.y+l,u=T.z+o,p=n.getWorldDistance();return Math.min(0,(0,s.p)(a.position.x,a.position.y,a.position.z,h,c,u)/p)+(k.isSee?0:1)}))).then((()=>{k.path=o,k.hide=!1,k.nextFindTime=k.time+k.findInterval+k.findIntervalRandom*Math.random()}),(e=>{const l=k.time;this.beginAsync(t,n.findPath(o,T.x,T.y,T.z,((e,a)=>{var i;const[o,l]=(0,s.n)(e.stepX,e.stepY,e.stepZ,0,0,0);a.block=r.get(0,e.x,e.y,e.z)>0&&n.hasBlockScaleVoxel(e.x,0|e.y,e.z,A.size.x,A.size.y)||!k.air&&(r.get(0,e.x,(0|e.y)-1,e.z)<=0||!n.hasBlockScaleVoxel(e.x,(0|e.y)-1,e.z,A.size.x,.001))||n.hasBlockScale("collision",e.x,e.y,e.z,A.size.x,A.size.y)||n.hasHitScanBold("collision",o,l,e.x,(0|e.y)+b,e.z,A.size.x,(0,s.p)(0,0,0,1,1,1),[t.getID(),C.getID(),...k.filters,...(null===(i=t.getComponent(f.a))||void 0===i?void 0:i.filter)||[]])}),(e=>{const t=(0,s.p)(K,X,q,e.x,(0|e.y)+b,e.z),[a,i]=(0,s.n)(K,X,q,e.x,(0|e.y)+b,e.z),[o,r]=(0,s.q)(a,A.size.x/2,0);return n.hasHitScanVoxel(a,i,e.x+o,0|e.y,e.z+r,t)&&n.hasHitScanVoxel(a,i,e.x-o,0|e.y,e.z-r,t)&&n.hasHitScanVoxel(a,i,e.x+o,(0|e.y)+b,e.z+r,t)&&n.hasHitScanVoxel(a,i,e.x-o,(0|e.y)+b,e.z-r,t)&&0===n.getEntitysOfRange("range",e.x,e.y,e.z,1,1).filter((e=>e.hasComponent(_.a))).length}),(e=>(0,s.p)(C.position.x,C.position.y,C.position.z,e.x,e.y,e.z)<k.attackRangeMin?1/0:e.getCost(K,X,q)*((0,s.h)(C.direction.x,(0,s.m)(K,q,e.x,e.z))<s.b?2:1)),(()=>C.hasLive()&&t.hasLive()&&k.time-l<1),(()=>{const e=(0,s.m)(C.position.x,C.position.z,T.x,T.z),[t,o]=(0,s.q)(e,i.x,0),r=i.y,l=A.size.y/2+r,h=T.x+t,c=T.y+l,u=T.z+o,p=n.getWorldDistance();return Math.min(0,(0,s.p)(a.position.x,a.position.y,a.position.z,h,c,u)/p)+1+(k.isSee?0:1)}))).then((()=>{k.path=o,k.hide=!0,k.nextFindTime=k.time+k.findInterval+k.findIntervalRandom*Math.random()}))}))}if(I.look.x=0,I.move.z=0,k.air){const[e,t]=(0,s.n)(K,X,q,T.x,T.y,T.z);I.look.x=e,I.look.y=t}else I.look.x=(0,s.m)(K,q,T.x,T.z),I.look.y=0;if(k.see&&!W&&null!==k.path&&k.path.stack.length>0&&(!k.isAimWait||-1===k.aimStartTime||k.time-k.aimStartTime>k.aimTime)&&(k.air||n.hasBlockScaleVoxel(T.x,T.y-.001,T.z,A.size.x,.001))){let e=k.path.stack[0],t=k.path.stack[1],n=k.path.stack[2];for(;k.path.stack.length>3&&(0|e)<=T.x&&1+(0|e)>=T.x&&(0|t)<=T.y&&1+(0|t)>=T.y&&(0|n)<=T.z&&1+(0|n)>=T.z;)k.path.stack.shift(),k.path.stack.shift(),k.path.stack.shift(),e=k.path.stack[0],t=k.path.stack[1],n=k.path.stack[2];if(k.air){const[a,i]=(0,s.n)(e,t,n,T.x,T.y,T.z);I.look.x=a,I.look.y=i,I.move.z=Math.min(1,(0,s.p)(e,0|t,n,T.x,T.y,T.z))}else I.look.x=(0,s.m)(e,n,T.x,T.z),I.look.y=0,I.move.z=Math.min(1,(0,s.p)(e,0|t,n,T.x,T.y,T.z))}else I.move.z=0}if(t.hasComponent(p.a)){const e=t.getComponent(p.a),[n,a]=(0,s.n)(C.position.x,C.position.y,C.position.z,T.x,T.y,T.z),[i,o]=(0,s.i)(n,a,S.x,S.y);-1!==k.aimStartTime&&k.time-k.aimStartTime>k.aimTime&&("always"===le||k.attackRadius>i&&k.attackRadius>o)?e.enable=!0:e.enable=!1}}else k.path=null,I.move.x=0,I.move.y=0,I.move.z=0,I.look.x=0,I.look.y=0,t.hasComponent(p.a)&&(t.getComponent(p.a).enable=!1);R?k.isBlow?P.material=this.getMaterial(k.stillMaterial,k.otherMaterials,"blow"):k.isDown&&(P.material=this.getMaterial(k.stillMaterial,k.otherMaterials,"down")):-1!==k.painStartTime?P.material=this.getMaterial(k.stillMaterial,k.otherMaterials,"pain"):-1!==k.aimStartTime&&(k.time-k.aimStartTime)/k.aimTime>.5?P.material=this.getMaterial(k.stillMaterial,k.otherMaterials,"aim"):P.material=k.stillMaterial,k.angleRight.x=S.x+(ne-ee),k.angleRight.y=S.y+(ne-te),k.angleLeft.x=S.x-(ee-ie),k.angleLeft.y=S.y-(te-oe)}if(!z&&W&&(R?-1===k.blowStartTime&&(this.setting.hasEnemyVoice()&&k.painVoices.length>0&&n.createSound(k.painVoices[k.painVoices.length*Math.random()|0],t,"enemy-voice-".concat(t.getID())).setVolume(10).play(),k.blowStartTime=k.time,P.flip.x=Math.random()>.5):-1===k.painStartTime&&(this.setting.hasEnemyVoice()&&k.painVoices.length>0&&n.createSound(k.painVoices[k.painVoices.length*Math.random()|0],t,"enemy-voice-".concat(t.getID())).setVolume(10).play(),k.painStartTime=k.time,P.flip.x=Math.random()>.5)),W||(k.blowStartTime=-1,k.painStartTime=-1,P.flip.x=!1),!k.air&&0!==((null===(a=t.getComponent(y.a))||void 0===a?void 0:a.value.y)||0)&&((null===(d=t.getComponent(c.a))||void 0===d?void 0:d.hit.y)||0)>=0?k.isAir=!0:k.isAir=!1,t.hasComponent(b.a)){const e=t.getComponent(b.a);O.value.some((e=>"hook"===e.type))?e.fall=0:e.fall=1}if(k.isAir||W||0!==O.value.length||(O.attacker=null),k.isBlow=!1,k.isDown=!1,z||-1!==k.blowStartTime&&(Math.abs(L.value.x)>.1||Math.abs(L.value.y)>.1||Math.abs(L.value.z)>.1?(k.isBlow=!0,k.blowStartTime=k.time):k.isDown=!0),t.hasComponent(h.a)){const e=t.getComponent(h.a).size;if(!z&&k.isDown){if(e.y!==k.blowHeight){const e=k.stillHeight/k.blowHeight;t.hasComponent(c.a)&&(t.getComponent(c.a).size.y*=e),t.hasComponent(f.a)&&(t.getComponent(f.a).size.y*=e)}e.y=k.blowHeight}else{if(e.y!==k.stillHeight){const e=k.blowHeight/k.stillHeight;t.hasComponent(c.a)&&(t.getComponent(c.a).size.y*=e),t.hasComponent(f.a)&&(t.getComponent(f.a).size.y*=e)}e.y=k.stillHeight}}k.time+=(0,v.c)(e/60,0)}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>k});n(1),n(2),n(121),n(14);var i=n(4),o=n(147),s=n(10),r=n(32),l=n(59),h=n(0),c=n(436),u=n(40),p=n(63),d=n(13),g=n(6),m=n(39),f=n(66),y=n(146),v=n(26),w=n(184),b=n(68),x=n(5),M=e([o,r,y,x]);function E(e,t,n,a,i){let o=t.position.x,s=t.position.y,h=t.position.z;if(t.hasComponent(l.a)){const e=t.getComponent(l.a);o=e.hitPosition.x,s=e.hitPosition.y,h=e.hitPosition.z}if(!(0,r.b)(e.getVoxel(o,s,h),x.u))switch(!0){case n>0:Math.floor(o);break;case n<0:Math.ceil(o);break;case a>0:Math.floor(s);break;case a<0:Math.ceil(s);break;case i>0:Math.floor(h);break;case i<0:Math.ceil(h)}return[o,s,h]}function _(e,t,n,a,i,s,r,c){var u,p,d,m,f,y;if(!c.hasComponent(o.a))return null;const[b,x,M]=E(r,c,a,i,s),_=c.getComponent(o.a),C=c.getComponent(l.a),T=Math.max((null===(u=c.getComponent(w.a))||void 0===u?void 0:u.size)||0,(null===(p=c.getComponent(l.a))||void 0===p?void 0:p.size)||0,(null===(d=c.getComponent(v.a))||void 0===d?void 0:d.size.x)||0,(null===(m=c.getComponent(v.a))||void 0===m?void 0:m.size.y)||0,(null===(f=c.getComponent(g.a))||void 0===f?void 0:f.size.x)||0,(null===(y=c.getComponent(g.a))||void 0===y?void 0:y.size.y)||0),[S,k,O]=(0,h.r)(e,t,0,0,T),A=Math.abs(t)<h.d,L=!A;return e=A?0!==a?(0,h.t)(Math.PI-e):h.a-(0,h.t)(e):e,t=L?-t:t,_.getSpark(b-S,x-k,M-O,e,t,n,_.damageType,_.force,C.target,C.attacker,C.filter)}function C(e,t,n,a,i,s,r,c,u,p){var d,m;if(!c.hasComponent(o.a))return null;const[f,y,v]=E(r,c,a,i,s),w=c.getComponent(o.a),[b,x,M]=(0,h.r)(e,t,0,0,.1),[_,C]=(0,h.n)(u.position.x,u.position.y+((null===(d=u.getComponent(g.a))||void 0===d?void 0:d.size.y)||0)/2,u.position.z,f+b,y+x,v+M),T=Math.abs(C)<h.d,S=!T;return e=T?0!==a?(0,h.t)(Math.PI-e):h.a-(0,h.t)(e):e,t=S?-t:t,w.getSpark(f-b,y-x,v-M,_,C,n,w.damageType,w.force,u,p,(null===(m=c.getComponent(l.a))||void 0===m?void 0:m.filter)||[])}function T(e,t,n,a,i,s,r,c,u){var p,d;if(!c.hasComponent(o.a))return null;const[m,f,y]=E(r,c,a,i,s),v=c.getComponent(o.a);let w=!1,b=!1;if(c.hasComponent(g.a)){const e=c.getComponent(g.a);w=0!==e.hit.x||0!==e.hit.z,b=0!==e.hit.y}else w=Math.abs(t)<h.d,b=!w;return e=w?0!==a?(0,h.t)(Math.PI-e):h.a-(0,h.t)(e):e,t=b?-t:t,v.getSpark(m,f,y,e,t,n,v.damageType,v.force,(null===(p=c.getComponent(l.a))||void 0===p?void 0:p.target)||null,u,(null===(d=c.getComponent(l.a))||void 0===d?void 0:d.filter)||[])}function S(e,t,n,a,i){const o=t.direction.x,s=t.direction.y;let r=0,h=0,c=0;const[,,,,u]=e.hitScanVoxel(o,s,t.position.x,t.position.y,t.position.z,1/0);switch(u){case 1:r=-1;break;case 0:r=1;break;case 3:h=-1;break;case 2:h=1;break;case 5:c=-1;break;case 4:c=1}return null!==a?C(t.direction.x,t.direction.y,n,r,h,c,e,t,a,i):t.hasComponent(l.a)?_(t.direction.x,t.direction.y,n,r,h,c,e,t):T(t.direction.x,t.direction.y,n,r,h,c,e,t,i)}[o,r,y,x]=M.then?(await M)():M;class k extends i.a{constructor(){super(o.a)}physical(e,t,n){const{position:a,direction:i}=t,s=t.getComponent(o.a);let r=!1;if(t.hasComponent(l.a)){const e=t.getComponent(l.a);let{target:i}=e;const o=null!==e.target?e.target.position:e.hitPosition,d=null!==e.target?s.fixPosition:new h.f(0,0,0);if(e.hit&&!e.over&&s.isDeath){let a=0;if(null!==i){var c,y;const[t,n]=(0,h.n)(i.position.x,i.position.y+((null===(c=i.getComponent(g.a))||void 0===c?void 0:c.size.y)||0)/2,i.position.z,e.hitPosition.x,e.hitPosition.y,e.hitPosition.z),o=(0,m.e)(i,s.damageType,1);if(((null===(y=i.getComponent(u.a))||void 0===y?void 0:y.value.reduce(((e,t)=>e+t.value),0))||0)>=o)e.hit=!1,e.over=!1,e.originPosition.x=e.hitPosition.x,e.originPosition.y=e.hitPosition.y,e.originPosition.z=e.hitPosition.z,e.hitPosition.x=-1,e.hitPosition.y=-1,e.hitPosition.z=-1,e.target=null,r=!0;else if(i.hasComponent(u.a)&&!s.init){var v;let o=0,r=0,l=0;e.hit&&([o,r,l]=(0,h.r)(e.originDirection.x,e.originDirection.y,0,s.force/2,s.force)),a=s.damage*Math.max(1,Math.floor(1+Math.random()*s.random)),i.getComponent(u.a).value.push(new p.a(a,s.damageType,e.attacker,t,n,(null===(v=e.attacker)||void 0===v?void 0:v.position)||new h.f(e.start.x,e.start.y,e.start.z),o,r,l)),s.init||null!==i&&(s.fixPosition.x=e.hitPosition.x-i.position.x,s.fixPosition.y=e.hitPosition.y-i.position.y,s.fixPosition.z=e.hitPosition.z-i.position.z),s.init=!0}}if(e.hit&&!e.over){const o=S(n,t,a,i,e.attacker);null!==o&&n.addEntitys(o)}}e.hit&&(null!==e.target&&"chain"===s.trailType?(a.x=o.x+d.x,a.y=o.y+d.y,a.z=o.z+d.z):(a.x=e.hitPosition.x,a.y=e.hitPosition.y,a.z=e.hitPosition.z)),r||t.hasComponent(f.a)||!e.hit&&!e.over||!s.isRemove||t.remove()}if(t.hasComponent(d.a)){const[e,n]=(0,h.n)(t.getComponent(d.a).value.x,t.getComponent(d.a).value.y,t.getComponent(d.a).value.z,0,0,0);i.x=e,i.y=n}}offset(e,t,n){const{position:a}=t,i=t.getComponent(o.a);if(t.hasComponent(v.a)){const e=t.getComponent(v.a);e.targets.forEach((e=>{var o;if(!(e instanceof s.a))return;const r=(0,m.e)(e,i.damageType,1);let l=null,c=0;if(((null===(o=e.getComponent(u.a))||void 0===o?void 0:o.value.reduce(((e,t)=>e+t.value),0))||0)<r&&e.hasComponent(u.a)){var d,f;let n=0,o=0,s=0;if(t.hasComponent(w.a)){const e=t.getComponent(w.a);[n,o,s]=(0,h.r)(e.originDirection.x,e.originDirection.y,0,i.force/2,i.force),l=e.attacker}const[r,m]=(0,h.n)(e.position.x,e.position.y+((null===(d=e.getComponent(g.a))||void 0===d?void 0:d.size.y)||0)/2,e.position.z,a.x,a.y,a.z);c=i.damage*Math.max(1,Math.floor(1+Math.random()*i.random)),e.getComponent(u.a).value.push(new p.a(c,i.damageType,l,r,m,(null===(f=l)||void 0===f?void 0:f.position)||new h.f(a.x,a.y,a.z),n,o,s))}const y=S(n,t,c,e,l);null!==y&&n.addEntitys(y)})),e.targets.length>0&&!t.hasComponent(f.a)&&i.isRemove&&t.remove()}if(t.hasComponent(g.a)){const e=t.getComponent(g.a);if(0!==e.hit.x||0!==e.hit.y||0!==e.hit.z){var r,c;const e=S(n,t,0,null,(null===(r=t.getComponent(l.a))||void 0===r?void 0:r.attacker)||(null===(c=t.getComponent(w.a))||void 0===c?void 0:c.attacker)||null);null!==e&&n.addEntitys(e),!t.hasComponent(f.a)&&i.isRemove&&t.remove()}}}rendering(e,t){const{position:n,direction:a}=e,i=e.getComponent(o.a);if(e.hasComponent(l.a)){const o=e.getComponent(l.a);if(!o.hit&&!o.over&&i.images.length>0&&"flash"===i.trailType)if(e.hasComponent(b.a)){const[o,r,l]=(0,h.r)(a.x,a.y,0,0,i.trailLength),u=0|i.effectCount,p=e.getComponent(b.a).value;for(;p.length>u;){const e=p.pop();e&&e.hasLive()&&e.remove()}for(let e=0;e<u;e=e+1|0){const a=e/(u-1);if(p.length<=e){const s=i.startScale+(i.endScale-i.startScale)*a;s>0&&t.addEntitys(p[e]=new c.a(n.x-o*a,n.y-r*a,n.z-l*a,s,i.isTrailRotateRandom?Math.PI*Math.random():0,i.images[(i.images.length-1)*a|0]))}const h=p[e];h&&h instanceof s.a&&h.hasLive()&&(h.position.x=n.x-o*a,h.position.y=n.y-r*a,h.position.z=n.z-l*a)}}if("chain"===i.trailType)if(null!==o.attacker&&e.hasComponent(b.a)){var r;const a=t.getCamera(),[l,,,,,]=(0,y.b)(o.attacker),u=(i.invert?.045:-.045)/a.fov,p=-.125,d=(null===(r=o.attacker.getComponent(g.a))||void 0===r?void 0:r.size.x)/2||0,[m,f,v]=(0,h.r)(a.direction.x,a.direction.y,l?0:u,p,d),w=(0,h.p)(a.position.x+m,a.position.y+f,a.position.z+v,n.x,n.y,n.z),[x,M]=(0,h.n)(n.x,n.y,n.z,a.position.x+m,a.position.y+f,a.position.z+v),E=w/.25|0,_=e.getComponent(b.a).value;for(;_.length>E;){const e=_.pop();e&&e.hasLive()&&e.remove()}for(let e=0;e<E;e=e+1|0){const n=e/(E-1),[o,r,l]=(0,h.r)(x,M,0,0,w*(e/(E-1)));if(_.length<=e){const s=i.startScale+(i.endScale-i.startScale)*n;s>0&&t.addEntitys(_[e]=new c.a(a.position.x+m+o,a.position.y+f+r,a.position.z+v+l,s,i.isTrailRotateRandom?Math.PI*Math.random():0,i.images[(i.images.length-1)*n|0]))}const u=_[e];u&&u instanceof s.a&&u.hasLive()&&(u.position.x=a.position.x+m+o,u.position.y=a.position.y+f+r,u.position.z=a.position.z+v+l)}}}}}a()}catch(O){a(O)}}))},(e,t,n)=>{"use strict";n.d(t,{a:()=>s});var a=n(10),i=n(503),o=n(505);class s extends a.a{constructor(e,t,n,a,s,r){super("bullet-trail",new i.a(r,a,s),new o.a(!0,!0,!0)),this.position.x=e,this.position.y=t,this.position.z=n}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>l,b:()=>h});n(1),n(2);var a=n(4),i=n(59),o=n(10),s=n(0),r=n(184);class l extends a.a{constructor(){super(r.a)}offset(e,t,n){const{position:a}=t,[i,o,s]=n.getWorldSize();(a.x<0||a.x>i||a.y<0||a.y>o||a.z<0||a.z>s)&&t.remove()}}class h extends a.a{constructor(){super(i.a)}offset(e,t,n){const{position:a,direction:r}=t,l=t.getComponent(i.a);let h=-1,c=-1,u=-1,p=1/0,d=null;l.size<=0?[h,c,u,p,d]=n.hitScan(l.tree,l.originDirection.x,l.originDirection.y,l.originPosition.x,l.originPosition.y,l.originPosition.z,p,[...l.attacker?[l.attacker.getID()]:[],...l.filter]):[h,c,u,p,d]=l.findTarget?n.hitScanBoldFind(l.tree,l.originDirection.x,l.originDirection.y,l.originPosition.x,l.originPosition.y,l.originPosition.z,l.size,p,[...l.attacker?[l.attacker.getID()]:[],...l.filter]):n.hitScanBold(l.tree,l.originDirection.x,l.originDirection.y,l.originPosition.x,l.originPosition.y,l.originPosition.z,l.size,p,[...l.attacker?[l.attacker.getID()]:[],...l.filter]);const[g,m,f]=n.getWorldSize(),[y,v,w]=(0,s.r)(l.originDirection.x,l.originDirection.y,0,0,Math.min(l.speed*e,n.getWorldDistance()));if(l.hit||l.over)l.originPosition.x=h-y,l.originPosition.y=c-v,l.originPosition.z=u-w;else{const[t,i]=(0,s.n)(h,c,u,a.x,a.y,a.z),[p,b,x]=(0,s.r)(t,i,0,0,Math.min(l.speed*e,n.getWorldDistance()));if((l.behind?(0,s.p)(l.originPosition.x,l.originPosition.y,l.originPosition.z,l.start.x,l.start.y,l.start.z):(0,s.p)(a.x,a.y,a.z,l.start.x,l.start.y,l.start.z))<l.distance&&l.originPosition.x>0&&l.originPosition.x<g&&l.originPosition.y>0&&l.originPosition.y<m&&l.originPosition.z>0&&l.originPosition.z<f){let e=0,n=0;if(l.behind){const t=l.originPosition.x,a=l.originPosition.y,i=l.originPosition.z,o=l.originPosition.x+y,r=l.originPosition.y+v,p=l.originPosition.z+w;e=(0,s.p)(t,a,i,h,c,u),n=(0,s.p)(t,a,i,o,r,p)}else{const t=a.x+p,i=a.y+b,o=a.z+x;e=(0,s.p)(a.x,a.y,a.z,h,c,u),n=(0,s.p)(a.x,a.y,a.z,t,i,o)}r.x=t,r.y=i,e<n&&(l.hit=!0,l.hitTime=l.time,l.hitPosition.x=h,l.hitPosition.y=c,l.hitPosition.z=u,l.target=d&&d instanceof o.a?d:null,a.x=h,a.y=c,a.z=u,((0,s.p)(h,c,u,l.start.x,l.start.y,l.start.z)>l.distance||h<=0||h>=g-.001||c<=0||c>=m-.001||u<=0||u>=f-.001)&&(l.over=!0))}else l.over=!0;l.hit&&l.over||(a.x+=p,a.y+=b,a.z+=x,l.originPosition.x+=y,l.originPosition.y+=v,l.originPosition.z+=w)}l.time+=e/60}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>p});n(1),n(2),n(7);var a=n(4),i=n(218),o=n(10),s=n(504),r=n(0),l=n(30),h=n(6),c=n(53),u=n(8);class p extends a.a{constructor(){super(i.a,s.a,c.a)}offset(e,t,n){var a;const p=t.getComponent(s.a).value;if(null===p||!(p instanceof o.a))return;const d=performance.now(),{position:g,direction:m}=t,f=t.getComponent(i.a),y=t.getComponent(h.a),v=t.getComponent(c.a),w=(0,r.m)(p.position.x,p.position.z,g.x,g.z),[b,x,M]=(0,r.r)(w,0,f.shootPoint.x,f.shootPoint.y,0),E=y.size.y/2+x,_=((null===(a=p.getComponent(l.a))||void 0===a?void 0:a.size.y)||0)/2,C=g.x+b,T=g.y+E,S=g.z+M,k=p.position.x,O=p.position.y+_,A=p.position.z,L=f.time-f.time%f.fireSpeed;if(f.exec){if(f.burst<f.burstCount){const a=f.burstTime-f.burstTime%f.burstInterval;if(f.burstTick!==a){var P,I;const e=(0,r.p)(k,O,A,C,T,S),i=(0,u.c)(Math.min(1,e/((null===(P=t.getComponent(c.a))||void 0===P?void 0:P.attackRangeMax)||0)),0),o=f.nearBulletSpread+(f.farBulletSpread-f.nearBulletSpread)*i,l=new Array;let h=m.x,p=m.y;n.hasHitScanVoxel(m.x,m.y,C,T,S,e)?n.hasHitScanVoxel(v.angleRight.x,v.angleRight.y,C,T,S,e)?n.hasHitScanVoxel(v.angleLeft.x,v.angleLeft.y,C,T,S,e)||(h=v.angleLeft.x,p=v.angleLeft.y):(h=v.angleRight.x,p=v.angleRight.y):(h=m.x,p=m.y);for(let e=0,n=0|f.bulletCount;e<n;e=e+1|0){const e=new f.bulletType(C,T,S,C,T,S,h+Math.cos(Math.random()*r.a)*o,p+Math.cos(Math.random()*r.a)*o,f.bulletSpeed,!1,1/0,f.bulletScale,!1,f.damage,f.random,f.bulletCount,0,!1,f.damageType,null,t,null,["enemy","object",...f.filter]);t.hasComponent(s.a)&&e.hasComponent(s.a)&&(e.getComponent(s.a).value=t.getComponent(s.a).value),l.push(e)}n.addEntitys(...l),n.createSound("./asset/sound/enemy/fire-magic.mp3",t,"fire-enemy-".concat(t.getID())).play(),f.burst=Math.min(f.burstCount,f.burst+1),f.fireStartTime=(null===(I=t.getComponent(c.a))||void 0===I?void 0:I.time)||d,f.burstTick=a}f.burstTime+=(0,u.c)(e/60,0)}f.burst>=f.burstCount&&(f.exec=!1,f.burst=0,f.burstTime=0,f.burstTick=-1)}f.enable&&!f.exec&&(f.fireTick!==L&&(f.fireTick=L,f.exec=!0),f.time+=(0,u.c)(e/60,0))}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>f});n(1),n(2),n(7),n(15),n(16);var a=n(4),i=n(10),o=n(325),s=n(504),r=n(13),l=n(0),h=n(6),c=n(40),u=n(63),p=n(26),d=n(53),g=n(24),m=n(41);class f extends a.a{constructor(){super(o.a,s.a,h.a,p.a,r.a)}additional(e,t,n){var a;const{position:c}=t,u=t.getComponent(o.a),d=t.getComponent(p.a),f=t.getComponent(h.a),y=t.getComponent(s.a).value;if(null===y||!(y instanceof i.a))return;const[v,w]=(0,l.n)(y.position.x,y.position.y+((null===(a=y.getComponent(h.a))||void 0===a?void 0:a.size.y)||0)/2,y.position.z,c.x,c.y,c.z),b=(0,l.p)(y.position.x,y.position.y,y.position.z,c.x,c.y,c.z),[x,M]=(0,l.q)(v,f.size.x/2,0);if(!u.enable||!n.hasBlockScaleVoxel(c.x,c.y-.001,c.z,f.size.x,.001)||n.hasBlockScaleVoxel(c.x,c.y,c.z,f.size.x,Math.ceil(f.size.y))||n.hasHitScan("hitbox",v,w,c.x+x,c.y+f.size.y/2,c.z+M,b,[t.getID(),y.getID(),...u.filter])||n.hasHitScan("hitbox",v,w,c.x-x,c.y+f.size.y/2,c.z-M,b,[t.getID(),y.getID(),...u.filter])?u.exec=!1:u.exec=!0,t.hasComponent(m.a)&&!t.getComponent(m.a).isFall){const e=t.getComponent(r.a);u.air&&(e.value.x=0,e.value.z=0),u.air=!1;const n=d.filter.slice();d.isPush=u.isPush,u.isPush=!1,(0,g.a)(d.filter),d.filter.push(...u.filter),(0,g.a)(u.filter),u.filter.push(...n)}if(u.exec&&!u.air){const e=u.time-u.time%u.fireSpeed;if(u.fireTick!==e){var E;const e=t.getComponent(r.a),a=(0,l.p)(y.position.x,y.position.y+((null===(E=y.getComponent(h.a))||void 0===E?void 0:E.size.y)||0)/2,y.position.z,c.x,c.y,c.z),[i,o,s]=(0,l.r)(v,w,0,a*u.jumpForce.y,a*u.jumpForce.x);i>0?e.value.x=e.value.x<Math.abs(i)?Math.min(Math.abs(i),e.value.x+i):e.value.x:i<0&&(e.value.x=e.value.x>-Math.abs(i)?Math.max(-Math.abs(i),e.value.x+i):e.value.x),o>0?e.value.y=e.value.y<Math.abs(o)?Math.min(Math.abs(o),e.value.y+o):e.value.y:o<0&&(e.value.y=e.value.y>-Math.abs(o)?Math.max(-Math.abs(o),e.value.y+o):e.value.y),s>0?e.value.z=e.value.z<Math.abs(s)?Math.min(Math.abs(s),e.value.z+s):e.value.z:s<0&&(e.value.z=e.value.z>-Math.abs(s)?Math.max(-Math.abs(s),e.value.z+s):e.value.z),u.air=!0;const p=u.filter.slice();u.isPush=d.isPush,d.isPush=!1,(0,g.a)(u.filter),u.filter.push(...d.filter),(0,g.a)(d.filter),d.filter.push(...p),n.createSound("./asset/sound/enemy/fire-melee.mp3",t,"fire-enemy-".concat(t.getID())).play()}u.fireTick=e}u.oldPosition.x=c.x,u.oldPosition.y=c.y,u.oldPosition.z=c.z,u.air||(u.time+=e/60)}offset(e,t,n){var a;const r=performance.now(),{position:g}=t,m=t.getComponent(o.a),f=t.getComponent(p.a),y=t.getComponent(s.a).value;if(null!==y&&y instanceof i.a&&m.air&&y.hasComponent(c.a)&&(f.targets.includes(y)||null!==(a=y.getComponent(p.a))&&void 0!==a&&a.targets.includes(t))){var v,w;const[e,n]=(0,l.n)(y.position.x,y.position.y+((null===(v=y.getComponent(h.a))||void 0===v?void 0:v.size.y)||0)/2,y.position.z,g.x,g.y,g.z);y.getComponent(c.a).value.push(new u.a(m.damage*Math.max(1,Math.floor(1+Math.random()*m.random)),m.damageType,t,e,n,g,0,0,0)),m.air=!1,m.fireStartTime=(null===(w=t.getComponent(d.a))||void 0===w?void 0:w.time)||r}}}},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>M});n(7),n(14),n(15),n(16),n(1),n(2);var i=n(4),o=n(319),s=n(40),r=n(10),l=n(0),h=n(63),c=n(30),u=n(62),p=n(53),d=n(8),g=n(23),m=n(60),f=n(504),y=n(332),v=n(6),w=n(222),b=e([g,y,w]);function x(e){return Math.abs(Math.ceil(e)-e)<.25?Math.ceil(e):Math.abs(Math.floor(e)-e)<.25?Math.floor(e):e}[g,y,w]=b.then?(await b)():b;class M extends i.a{constructor(){super(o.a)}additional(e,t,n){const a=performance.now(),{position:i}=t,b=t.getComponent(o.a),M=b.time-b.time%b.fireSpeed,E=x(i.x),_=x(i.y),C=x(i.z);if(b.exec){const e=new Array,o=t instanceof m.a||t instanceof g.a||t instanceof g.b?t.attacker:t.hasComponent(s.a)?t.getComponent(s.a).attacker:null;n.getEntitysOfRange("hitbox",E,_,C,b.range.x,b.range.y).forEach((g=>{var m,y,v;if(!((g=g.hasComponent(u.a)&&(null===(m=g.getComponent(f.a))||void 0===m?void 0:m.value)||g)instanceof r.a)||g.getNames().some((e=>b.filter.includes(e)))||e.includes(g))return;const[w,x]=(0,l.n)(g.position.x,g.position.y+((null===(y=g.getComponent(c.a))||void 0===y?void 0:y.size.y)||0)/2,g.position.z,E,_,C),M=(0,l.p)(g.position.x,g.position.y+((null===(v=g.getComponent(c.a))||void 0===v?void 0:v.size.y)||0)/2,g.position.z,E,_,C);if(g.hasComponent(s.a)&&!n.hasHitScanVoxel(w,x,E,_,C,M)){var T;const n=g.getComponent(s.a),[r,c,u]=(0,l.r)(w,x,0,0,"freeze"!==b.damageType||g.getNames().some((e=>"player"===e))?b.force:0);n.value.push(new h.a((0,d.b)(b.minDamage,b.damage,1-Math.min(1,M/Math.min(b.range.x,b.range.y)))*(Math.random()*b.random+1|0)|0,b.damageType,o,w,x,new l.f(i.x,i.y,i.z),r,c,u)),e.push(g),b.fireStartTime=(null===(T=t.getComponent(p.a))||void 0===T?void 0:T.time)||a}}));const x=new Array;switch(b.type){case"acid":{const e=l.a*Math.random(),a=-l.d+-l.d*Math.random();for(let n=0,o=30;n<o;n=n+1|0){var T;const[n,o,s]=(0,l.r)(e,a,(Math.random()-.5)/.5,.25+.25*Math.random(),(Math.random()-.5)/.5);x.push(new y.d(i.x,i.y+.5*((null===(T=t.getComponent(v.a))||void 0===T?void 0:T.size.y)||0),i.z,1+2.5*Math.random(),.1*n,.25*o,.1*s))}(0,w.a)(t,n,b.range.x,b.range.y,x,((e,t,n,a)=>new y.b(e,t,n,a,o)));break}case"freeze":(0,w.a)(t,n,b.range.x,b.range.y,x,((e,t,n,a)=>new y.a(e,t,n,a)))}n.addEntitys(...x),b.exec=!1}b.enable&&!b.exec&&(b.fireTick!==M&&(b.fireTick=M,b.exec=!0),b.time+=(0,d.c)(e/60,0))}}a()}catch(E){a(E)}}))},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>v});n(7),n(1),n(2);var i=n(4),o=n(13),s=n(0),r=n(8),l=n(442),h=n(320),c=n(60),u=n(40),p=n(23),d=n(184),g=n(59),m=n(26),f=n(6),y=e([l,p]);[l,p]=y.then?(await y)():y;class v extends i.a{constructor(){super(h.a)}offset(e,t,n){const{position:a}=t,i=t.getComponent(h.a),y=i.time-i.time%i.fireSpeed;if(i.exec){const e=new Array,r=t instanceof c.a||t instanceof p.a||t instanceof p.b?t.attacker:t.hasComponent(u.a)?t.getComponent(u.a).attacker:null;for(let n=0,h=0|i.clusterCount;n<h;n=n+1|0){var v,w,b,x,M,E;const h=Math.max((null===(v=t.getComponent(d.a))||void 0===v?void 0:v.size)||0,(null===(w=t.getComponent(g.a))||void 0===w?void 0:w.size)||0,(null===(b=t.getComponent(m.a))||void 0===b?void 0:b.size.x)||0,(null===(x=t.getComponent(m.a))||void 0===x?void 0:x.size.y)||0,(null===(M=t.getComponent(f.a))||void 0===M?void 0:M.size.x)||0,(null===(E=t.getComponent(f.a))||void 0===E?void 0:E.size.y)||0)/2,[c,u,p]=(0,s.r)(i.direction.x,i.direction.y,0,0,.5),y=new l.a(a.x+c,a.y+u,a.z+p,a.x+c,a.y+u,a.z+p,(0,s.t)(i.direction.x-Math.PI),(0,s.t)(i.direction.y-Math.PI),.25,!1,1/0,h,!1,0,0,1,0,!1,i.damageType,null,r,null,["player-bullet",...null===r?[]:[r.getID()]]),_=y.getComponent(o.a),[C,T]=(0,s.q)(s.a/i.clusterCount*n,0,.0375),[S,k,O]=(0,s.r)(i.direction.x,i.direction.y,C,T,.185);_.value.x=S,_.value.y=k,_.value.z=O,e.push(y)}n.addEntitys(...e),i.exec=!1}i.enable&&!i.exec&&(i.fireTick!==y&&(i.fireTick=y,i.exec=!0),i.time+=(0,r.c)(e/60,0))}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>l});n(1),n(2);var i=n(5),o=n(23),s=n(124),r=e([i,o,s]);[i,o,s]=r.then?(await r)():r;class l extends o.b{constructor(e,t,n,a,o,r,l,h,c,u,p,d,g,m,f,y,v,w){let b=arguments.length>18&&void 0!==arguments[18]?arguments[18]:"ammo",x=arguments.length>20&&void 0!==arguments[20]?arguments[20]:null,M=arguments.length>21&&void 0!==arguments[21]?arguments[21]:null,E=arguments.length>22&&void 0!==arguments[22]?arguments[22]:new Array;super("player-bullet cluster-child",p,u,m,f,v,w,b,e,t,n,a,o,r,l,h,d,0,c,0,.5,!0,((e,t,n,a,i,o,r,l,h,c,u)=>new s.b(e,t,n,a,i,2.5,.5,0,128,"explode",this,h,c,u)),"flash",0,0,!1,i.h.EFFECT_BULLET_GRENADE,[],1,1,1,x,M,"hitbox",["cluster","cluster-child","player-hit-bullet","enemy-hit-bullet",...E],["cluster","cluster-child","player-hit-bullet","enemy-hit-bullet",...E])}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.d(t,{a:()=>d});n(1),n(2),n(15),n(16);var a=n(26),i=n(10),o=n(4),s=n(105),r=n(0),l=n(13),h=n(6),c=n(24),u=n(41),p=n(8);class d extends o.a{constructor(){var e,t,n;super(a.a),e=this,t="targets",n=new WeakMap,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}getTargets(e){return this.targets.has(e)||this.targets.set(e,new Array),this.targets.get(e)||new Array}collectTarget(e,t){for(let n=0,o=0|t.length;n<o;n=n+1|0){const o=t[n],s=e.getEntityOfID(o);if(!(null!==s&&s.hasLive()&&s instanceof i.a))continue;const r=this.getTargets(s),l=s.getComponent(a.a);(0,c.a)(l.targets);for(let n=0,o=0|t.length;n<o;n=n+1|0){const o=t[n],h=e.getEntityOfID(o);if(!(null!==h&&s!==h&&h instanceof i.a&&h.hasLive()))continue;const u=this.getTargets(h),p=h.getComponent(a.a);(0,c.a)(p.targets),r.includes(h)||u.includes(s)||s.getNames().some((e=>p.filter.includes(e)))||h.getNames().some((e=>l.filter.includes(e)))||(r.push(h),u.push(s))}}}prephysical(e,t){const n=t.getTree("collision");if(null===n)return;const a=n.getAppendPoints();for(let e=0,i=0|a.length;e<i;e=e+1|0){const i=a[e],o=n.getCell(i);this.collectTarget(t,o)}}physical(e,t,n){const{position:o}=t,d=t.getComponent(a.a),g=this.getTargets(t),m=o.x,f=o.y,y=o.z,v=-1===d.old.x?m:d.old.x,w=-1===d.old.y?f:d.old.y,b=-1===d.old.z?y:d.old.z,[x,M,E]=(0,r.A)(o.x,o.y,o.z,v,w,b),_=Math.min((0,r.p)(x,M,E,0,0,0),n.getWorldDistance()),[C,T]=(0,r.n)(x,M,E,0,0,0),[S,k,O]=(0,r.r)(C,T,0,0,1);for(let e=0,n=0|g.length;e<n;e=e+1|0){const n=g[e];if(!(t!==n&&n.hasLive()&&n.hasComponent(a.a)&&n instanceof i.a))continue;const c=n.getComponent(a.a);if(d.targets.includes(n)||c.targets.includes(t)||!d.enable||!c.enable)continue;const m=Math.min(_,d.size.x/2,d.size.y/2,c.size.x/2,c.size.y/2,.5);let f=m;for(;;){const e=v+f*S,a=w+f*k,i=b+f*O,{position:g}=n,y=g.x,C=g.y,T=g.z,N=-1===c.old.x?y:c.old.x,R=-1===c.old.y?C:c.old.y,W=-1===c.old.z?T:c.old.z,z=y-N,D=C-R,F=T-W;if(!d.init||!c.init||0!==x||0!==M||0!==E||0!==z||0!==D||0!==F){const p=(0,r.p)(z,D,F,0,0,0),[m,y]=(0,r.n)(z,D,F,0,0,0),[x,M,E]=(0,r.r)(m,y,0,0,1),C=p*(0!==_?f/_:1),T=N+C*x,S=R+C*M,k=W+C*E,[O,U,H,B,G,Y]=(0,s.b)(e,a,i,d.size.x,d.size.y,T,S,k,c.size.x,c.size.y);if(0!==O||0!==U||0!==H||0!==B||0!==G||0!==Y){var A,L,P,I;const s=Math.abs(e-v),r=Math.abs(a-w),p=Math.abs(i-b),m=Math.abs(T-N),f=Math.abs(S-R),y=Math.abs(k-W),x=t.hasComponent(l.a),M=t.hasComponent(l.a),E=t.hasComponent(h.a),_=n.hasComponent(h.a),C=x?t.getComponent(l.a).value.x:0,z=x?t.getComponent(l.a).value.y:0,D=x?t.getComponent(l.a).value.z:0,F=M?n.getComponent(l.a).value.x:0,V=M?n.getComponent(l.a).value.y:0,j=M?n.getComponent(l.a).value.z:0,K=(null===(A=t.getComponent(u.a))||void 0===A?void 0:A.value)||1,X=(null===(L=n.getComponent(u.a))||void 0===L?void 0:L.value)||1,q=(null===(P=t.getComponent(u.a))||void 0===P?void 0:P.flex)||0,J=(null===(I=n.getComponent(u.a))||void 0===I?void 0:I.flex)||0,Z=Math.min(1,X/K),$=Math.min(1,K/X);let Q=!1,ee=!1;o.x=e+O*(0!==m?Math.min(1,0!==s||0!==m?s/m:0):Z),o.z=i+H*(0!==y?Math.min(1,0!==p||0!==y?p/y:0):Z),0===O||E&&(O>0?t.getComponent(h.a).hit.x>0:O<0&&t.getComponent(h.a).hit.x<0)||d.isPush&&c.isPush&&x&&(C>=0&&F<=0||C<=0&&F>=0)&&(t.getComponent(l.a).value.x=C+-C*Math.max(1,Z*q)+F*Z,Q=!0),0===H||E&&(H>0?t.getComponent(h.a).hit.z>0:H<0&&t.getComponent(h.a).hit.z<0)||d.isPush&&c.isPush&&x&&(D>=0&&j<=0||D<=0&&j>=0)&&(t.getComponent(l.a).value.z=D+-D*Math.max(1,Z*q)+j*Z,Q=!0),0!==O||0!==H||0===U||Q||E&&(U>0?t.getComponent(h.a).hit.y>0:U<0&&t.getComponent(h.a).hit.y<0)||(o.y=U*Math.min(1,0!==r||0!==f?r/f:0),d.isPush&&c.isPush&&x&&(z>=0&&V<=0||z<=0&&V>=0)&&(t.getComponent(l.a).value.y=z+-z*Math.max(1,Z*q)+V*Z)),g.x=T+B*(0!==m?Math.min(1,0!==s||0!==m?m/s:0):$),g.z=k+Y*(0!==y?Math.min(1,0!==p||0!==y?y/p:0):$),0===B||_&&(B>0?n.getComponent(h.a).hit.x>0:B<0&&n.getComponent(h.a).hit.x<0)||d.isPush&&c.isPush&&M&&(F>=0&&C<=0||F<=0&&C>=0)&&(n.getComponent(l.a).value.x=F+-F*Math.max(1,$*J)+C*$,ee=!0),0===Y||_&&(Y>0?n.getComponent(h.a).hit.z>0:Y<0&&n.getComponent(h.a).hit.z<0)||d.isPush&&c.isPush&&M&&(j>=0&&D<=0||j<=0&&D>=0)&&(n.getComponent(l.a).value.z=j+-j*Math.max(1,$*J)+D*$,ee=!0),0!==B||0!==Y||0===G||ee||_&&(G>0?n.getComponent(h.a).hit.y>0:G<0&&n.getComponent(h.a).hit.y<0)||(g.y=S+G*Math.min(1,0!==r||0!==f?f/r:0),d.isPush&&c.isPush&&M&&(V>=0&&z<=0||V<=0&&z>=0)&&(n.getComponent(l.a).value.y=V+-V*Math.max(1,$*J)+z*$),ee=!0),d.targets.push(n),c.targets.push(t);break}}if(f>=_)break;if(f=(0,p.a)((0,p.c)(f+m,_,1e5,Math.ceil),0,_),f<=0)break}}d.enable?(d.old.x=o.x,d.old.y=o.y,d.old.z=o.z,d.init=!0):(d.old.x=-1,d.old.y=-1,d.old.z=-1,d.init=!1),(0,c.a)(g)}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>u});n(14),n(15),n(16),n(7),n(175);var a=n(4),i=n(39),o=n(40),s=n(9),r=n(24),l=n(13),h=n(92),c=n(53);class u extends a.a{constructor(e){var t,n,a;super(o.a,i.a),a=void 0,(n="damageTypes")in(t=this)?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,this.damageTypes=e}additional(e,t,n){const a=t.getComponent(o.a);if(t.hasComponent(s.b)){const e=t.getComponent(s.b);(0,h.a)(e.damages).forEach((t=>{e.time-t.time>1&&e.damages.splice(e.damages.indexOf(t),1)}))}for(let e=0,n=0|a.removes.length;e<n;e=e+1|0){const n=a.removes[e];if(t.hasComponent(l.a)&&!t.getNames().some((e=>"no-blow"===e))){const e=t.getComponent(l.a);e.value.x+=n.force.x,e.value.y+=n.force.y,e.value.z+=n.force.z}a.value.splice(a.value.indexOf(n),1)}(0,r.a)(a.removes);let u=0;if(t.hasComponent(s.b)){u=t.getComponent(s.b).time}if(t.hasComponent(c.a)){u=t.getComponent(c.a).time}if(u-a.recoveryStartTime>=a.recoveryWait&&(0,i.e)(t,"health",0)<a.recoveryValue){const e=u-(a.recoveryStartTime+a.recoveryWait),n=Math.floor(e/a.recoveryTime*a.recoveryValue);n>=1&&(a.recoveryStartTime=u-a.recoveryWait),(0,i.h)(t,"health",(0,i.e)(t,"health",0)+n)}}offset(e,t,n){const a=t.getComponent(o.a);if(t.hasComponent(s.b)){const e=t.getComponent(s.b);if(-1!==e.respawnTime||-1!==e.goleTime||-1!==e.intermissionTime)return(0,r.a)(a.value)}for(let e=0,o=0|a.value.length;e<o;e=e+1|0){const o=a.value[e];if(a.removes.includes(o))continue;let r=o.type;o.attacker===t&&(r="default");let l=o.value*(a.multiples.hasOwnProperty(r)?a.multiples[r]:1);isNaN(l)&&(l=0);let h=!1;for(const e in this.damageTypes){if(!e.split("|").some((e=>e===r)))continue;const i=this.damageTypes[e]||null;if(null!==i){i.exec(t,r,o,l)&&(a.attacker=o.attacker);for(const e in i.sounds){if(!e.split("|").some((e=>e===r)))continue;const a=i.sounds[e],o=a[Math.floor(a.length*Math.random())]||null;if(null!==o){n.createSound(o,t.hasComponent(s.b)?null:t,"damage-".concat(t.getID())).play();break}}h=!0;break}}if(!h)for(const e in this.damageTypes){if(!e.split("|").some((e=>"default"===e)))continue;const i=this.damageTypes[e]||null;if(null!==i){i.exec(t,r,o,l)&&(a.attacker=o.attacker);for(const e in i.sounds){if(!e.split("|").some((e=>e===r)))continue;const a=i.sounds[e],o=a[Math.floor(a.length*Math.random())]||null;if(null!==o){n.createSound(o,t.hasComponent(s.b)?null:t,"damage-".concat(t.getID())).play();break}}}}if(t.hasComponent(s.b)){var i;const e=t.getComponent(s.b);e.damages.push(new s.a((null===(i=o.attacker)||void 0===i?void 0:i.position)||o.position,e.time)),a.recoveryStartTime=e.time}if(t.hasComponent(c.a)){const e=t.getComponent(c.a);a.recoveryStartTime=e.time}a.removes.push(o)}}}},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>L});n(1),n(2),n(15),n(16);var i=n(4),o=n(39),s=n(40),r=n(9),l=n(53),h=n(0),c=n(13),u=n(6),p=n(44),d=n(332),g=n(258),m=n(504),f=n(97),y=n(327),v=n(27),w=n(446),b=n(348),x=n(68),M=n(355),E=n(216),_=n(69),C=n(47),T=n(54),S=n(219),k=n(222),O=n(5),A=e([d,v,w,M,E,C,k,O]);[d,v,w,M,E,C,k,O]=A.then?(await A)():A;class L extends i.a{constructor(e){var t,n,a;super(s.a),a=void 0,(n="setting")in(t=this)?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,this.setting=e}offset(e,t,n){const a=performance.now(),i=n instanceof v.a&&n.getPlayer()||null;if(null===i||!i.hasComponent(r.b))return;const A=i.getComponent(r.b),{position:L}=t,P=t.getComponent(s.a);let I=0;const N=t.getNames();if(!P.isDeath){const e=new Array;if(N.some((e=>"guy-armor"===e))&&(0,o.e)(t,"armor")<=0&&(P.isDeath=!0,t.hasComponent(l.a)))if(N.some((e=>"guy-melee"===e)))(0,o.h)(t,"health",0);else{var R;const s=P.attacker||P.value.find((e=>e.attacker));if(null!==i&&s===i&&-1===(A.goleTime||-1)&&-1===(A.intermissionTime||-1)&&i.hasComponent(f.a)){const e=i.getComponent(f.a);I=Math.min(e.max,(0,o.e)(i,"combo")+1),(0,o.h)(i,"combo",I),A.comboTime=A.time,(0,o.e)(i,"combo",0)>=e.start&&(0,o.h)(i,"gauge",1)}let l=0,c=0;const p=P.value[P.value.length-1]||null;if(null!==p&&(l=p.direction.x,c=p.direction.y),(0,k.b)(i)&&P.attacker===i){const e=C.h;if(i.hasComponent(r.b)){const t=i.getComponent(r.b);t.hordeBonusStartTime=a,t.hordeBonusTimeValue=e,t.hordeBonusType=2}(0,o.h)(i,"hordetime",(0,o.e)(i,"hordetime",0)+e)}e.push(new E.a(L.x,L.y+.5*((null===(R=t.getComponent(u.a))||void 0===R?void 0:R.size.y)||0),L.z),...[M.c,M.b,M.d,M.d,M.a,M.a,M.e,M.e].map((e=>{var n;const[a,i,o]=(0,h.r)(l,c,Math.random()-.5,.5*Math.random(),2*Math.random());return new e(L.x,L.y+.5*((null===(n=t.getComponent(u.a))||void 0===n?void 0:n.size.y)||0),L.z,1,.1*a,.25+.1*i,.1*o)}))),n.createSound("./asset/sound/enemy/death-armor.mp3",t).setVolume(20).play(),t.remove()}if((0,o.e)(t,"health")<=0){P.isDeath=!0;const s=P.attacker||P.value.find((e=>e.attacker));if(t.hasComponent(r.b)){const e=t.getComponent(r.b),i=n.getCamera(),o=P.value[P.value.length-1]||null;let s=t.direction.x-Math.PI;if(null!==o&&(s=o.direction.x),i.hasComponent(p.a)){const e=i.getComponent(p.a);e.position.x=0,e.position.y=.125,e.position.z=0}if(i.hasComponent(_.a)){const e=i.getComponent(_.a);e.position.x=0,e.position.y=0,e.position.z=0,e.init=!1}if(t.hasComponent(u.a)){t.getComponent(u.a).size.y=.25,t.position.y=i.position.y-.125}const[l,d]=(0,h.q)(s,0,.15);if(t.hasComponent(c.a)){const e=t.getComponent(c.a);e.value.x=l,e.value.y=0,e.value.z=d}P.deathAngle=(0,h.j)(s,t.direction.x),n instanceof v.a&&n.getGameMode()===T.a.HORDE&&(!this.setting.hasCheckPoint()||this.setting.hasPermaDeath())?e.goleTime=a:e.deathTime=a}if(t.hasComponent(l.a)){const c=t.getNames(),p=t.getComponent(l.a),g=-1!==p.freezeTime&&p.freezeTime>p.time;if((!(n instanceof v.a)||(n.getGameMode()===T.a.PRACTICE||!c.some((e=>"guy-target"===e))))&&null!==i&&s===i&&i.hasComponent(f.a)){const e=i.getComponent(f.a);if(I=Math.min(e.max,(0,o.e)(i,"combo")+1),(0,o.h)(i,"combo",I),i.hasComponent(r.b)){const e=i.getComponent(r.b);e.comboTime=e.time,e.killTime=performance.now()}(0,o.e)(i,"combo",0)>=e.start&&(0,o.h)(i,"gauge",1)}let m=0,y=0;const b=P.value[P.value.length-1]||null;if(null!==b&&(m=b.direction.x,y=b.direction.y),!c.some((e=>"green-blood"===e))){const a=2+3*Math.random();if(g)(0,k.a)(t,n,a,a,e,((e,t,n,a)=>new d.a(e,t,n,a)));else{for(let n=0,a=10;n<a;n=n+1|0){var W;const[n,a,i]=(0,h.r)(m,y,(Math.random()-.5)/.5,.5*Math.random(),(Math.random()-.5)/.5);e.push(new d.e(L.x,L.y+.5*((null===(W=t.getComponent(u.a))||void 0===W?void 0:W.size.y)||0),L.z,1+1.5*Math.random(),.025*n,.125*Math.random()+.025*a,.025*i))}(0,k.a)(t,n,a,a,e,((e,t,n,a)=>new d.c(e,t,n,a)))}}if(!(n instanceof v.a)||(n.getGameMode()===T.a.PRACTICE||!c.some((e=>"guy-target"===e))))for(let n=0,a=0|I;n<a;n=n+1|0){const[a,i,o]=(0,h.r)(m,y,Math.random()-.5,.5*Math.random(),2*Math.random());var z,D;if(g)e.push(new M.h(L.x,L.y+.5*((null===(z=t.getComponent(u.a))||void 0===z?void 0:z.size.y)||0),L.z,1+1.5*Math.random(),251+7*n,.1*a,.25+.1*i,.1*o));else e.push(new M.f(L.x,L.y+.5*((null===(D=t.getComponent(u.a))||void 0===D?void 0:D.size.y)||0),L.z,1+1.5*Math.random(),251+7*n,.1*a,.25+.1*i,.1*o))}if(c.some((e=>"guy-armor"===e))){if((0,k.b)(i)&&P.attacker===i){const e=C.h;A.hordeBonusStartTime=a,A.hordeBonusTimeValue=e,A.hordeBonusType=2,(0,o.h)(i,"hordetime",(0,o.e)(i,"hordetime",0)+e)}e.push(...[M.c,M.b,M.d,M.d,M.a,M.a,M.e,M.e].map((e=>{var n;const[a,i,o]=(0,h.r)(m,y,Math.random()-.5,.5*Math.random(),2*Math.random());return new e(L.x,L.y+.5*((null===(n=t.getComponent(u.a))||void 0===n?void 0:n.size.y)||0),L.z,1,.1*a,.25+.1*i,.1*o)})))}else n instanceof v.a&&s===i&&n.countKillEnemy();if(c.includes("guy-pistol")||c.includes("guy-shotgun")||c.includes("guy-machingun")){var F;const[n,a,i]=(0,h.r)(m,y,Math.random()-.5,0,2*Math.random());e.push(new M.i(L.x,L.y+.5*((null===(F=t.getComponent(u.a))||void 0===F?void 0:F.size.y)||0),L.z,1,.075*n,.075*a,.075*i))}else if(c.includes("guy-missile")){if((0,k.b)(i)&&P.attacker===i){const e=C.g;A.hordeBonusStartTime=a,A.hordeBonusTimeValue=e,A.hordeBonusType=1,(0,o.h)(i,"hordetime",(0,o.e)(i,"hordetime",0)+e)}e.push(new w.a(L.x,L.y,L.z,L.x,L.y,L.z,0,h.b,0,!1,1/0,.5,!1,0,0,0,0,!1,"explode",null,t,null,[t.getID()]))}g?n.createSound(O.f[Math.floor(O.f.length*Math.random())],t,"splash-".concat(t.getID())).play():(n.createSound(O.q[Math.floor(O.q.length*Math.random())],t,"splash-".concat(t.getID())).play(),this.setting.hasEnemyVoice()&&p.deathVoices.length>0&&n.createSound(p.deathVoices[p.deathVoices.length*Math.random()|0],t,"enemy-voice-".concat(t.getID())).setVolume(10).play()),t.remove()}if(t.hasComponent(x.a)&&t.remove(),t.hasComponent(g.a)){var U;const e=.9,[a,i,o]=(0,h.r)(h.a*Math.random(),-(h.d+h.d*Math.random()),Math.random()-.5,0,2*Math.random());if(n.addEntitys(new M.g(L.x,L.y+.5*((null===(U=t.getComponent(u.a))||void 0===U?void 0:U.size.y)||0),L.z,e,.1*a,.1*i,.1*o)),t.hasComponent(m.a)){const a=t.getComponent(m.a).value;a&&n.addEntitys(new y.a(a,.5*e,.625*e))}t.remove()}}else if(!t.hasComponent(r.b)&&L.y<=0){var H;null!==(H=t.getComponent(o.a))&&void 0!==H&&H.value.hasOwnProperty("health")?(0,o.h)(t,"health",0):t.remove()}if(P.isDeath&&t.hasComponent(b.a)){const n=t.getComponent(b.a);e.push(...n.sparkTypes.map((e=>new e(t.position.x,t.position.y,t.position.z,t.direction.x,t.direction.y,n.size,n.force,n.minDamage,n.maxDamage,n.damageType,null,t,P.attacker,[])))),t.remove()}n.addEntitys(...e)}if(P.isDeath&&t.hasComponent(r.b)&&(0,o.e)(t,"health")<=0){const e=P.deathAngle;let n=0;n=e>0?(e>h.b?h.b-(e-h.b):e)/h.b*-h.b:(e<-h.b?e+h.b+h.b:-e)/h.b*h.b;const a=Math.abs(e);let i=0;i=a>h.b?(a-h.b)/h.b*-h.b:(h.b-a)/h.b*h.b,t.direction.z=(0,h.x)(t.direction.z,n,.25),t.direction.y=(0,h.x)(t.direction.y,i,.25)}if(!t.hasLive()){let e=null;if(t.hasComponent(l.a)){const a=t.getComponent(l.a);null!==a.child&&(e=a.child.spawn(t.position.x,t.position.y,t.position.z,t.direction.x,n))}if(null!==e){if(t.hasComponent(S.a)&&e.hasComponent(S.a)){const n=t.getComponent(S.a),a=e.getComponent(S.a);a.point.x=n.point.x,a.point.y=n.point.y,a.point.z=n.point.z}if(e.hasComponent(l.a)){e.getComponent(l.a).see=!0}(0,o.h)(e,"health",(0,o.e)(t,"health",(0,o.e)(e,"health",0)))}}}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>l});n(1),n(2);var i=n(5),o=n(23),s=n(124),r=e([i,o,s]);[i,o,s]=r.then?(await r)():r;class l extends o.b{constructor(e,t,n,a,o,r,l,h,c,u,p,d,g,m,f,y,v,w){let b=arguments.length>18&&void 0!==arguments[18]?arguments[18]:"ammo",x=arguments.length>20&&void 0!==arguments[20]?arguments[20]:null,M=arguments.length>21&&void 0!==arguments[21]?arguments[21]:null,E=arguments.length>22&&void 0!==arguments[22]?arguments[22]:new Array;super("player-bullet death-bomb",p,u,m,f,v,w,b,e,t,n,a,o,r,l,h,d,0,c,.1,.5,!0,((e,t,n,a,i,o,r,l,h,c,u)=>new s.b(e,t,n,a,i,1,.25,0,128,"explode",this,h,c,u)),"flash",0,0,!1,i.h.EFFECT_BULLET_DEATH_BOMB,[],3,3,3,x,M,"hitbox",["player-hit-bullet","enemy-hit-bullet","player","enemy",...E],["player-hit-bullet","enemy-hit-bullet",...E])}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>z});n(7),n(14),n(1),n(2),n(15),n(16);var i=n(4),o=n(50),s=n(32),r=n(0),l=n(9),h=n(186),c=n(185),u=n(220),p=n(39),d=n(146),g=n(65),m=n(49),f=n(52),y=n(85),v=n(6),w=n(48),b=n(51),x=n(57),M=n(44),E=n(108),_=n(24),C=n(33),T=n(8),S=n(125),k=n(97),O=n(188),A=n(81),L=n(40),P=n(47),I=n(189),N=n(26),R=e([o,s,d,A,P]);function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}[o,s,d,A,P]=R.then?(await R)():R;class z extends i.a{constructor(e){super(o.a,l.b,p.a),W(this,"setting",void 0),W(this,"weapons",{}),W(this,"lazy",new Array),this.setting=e;for(const e in P.u)this.addWeapon(e,P.u[e])}addWeapon(e,t){this.weapons[e]=t}getWeapon(e){return(this.weapons[e]||this.weapons.punch).create()}additional(e,t,n){var a,i,L,R,W;const z=performance.now(),{direction:D}=t,F=t.getComponent(o.a),U=t.getComponent(l.b),H=(0,p.c)(t,F.left,"none"),B=(0,p.c)(t,F.right,"none");F.isLeftChange=H!==F.leftOld,F.isRightChange=B!==F.rightOld,F.isLeftChange&&"string"==typeof H&&(F.leftWeapon=this.getWeapon(H),F.leftChangeTime=U.time),F.isRightChange&&"string"==typeof B&&(F.rightWeapon=this.getWeapon(B),F.rightChangeTime=U.time),"string"==typeof H&&"string"==typeof B&&(F.leftOld=H,F.rightOld=B);const G=n.getCamera(),Y=n.getEntitysOfName("hand-right")[0]||null,V=n.getEntitysOfName("hand-left")[0]||null,j=[[F.rightWeapon,Y,F.isFireRight,F.toggleFireRight,F.isHoldRight,F.isRightChange,!1,-.0625,-.125,.125],[F.leftWeapon,V,F.isFireLeft,F.toggleFireLeft,F.isHoldLeft,F.isLeftChange,!0,.0625,-.125,.125]],K=t.getComponent(f.a);let X=(null==K?void 0:K.oldPosition)||t.position,q=(null==K?void 0:K.startDir)||t.direction.x;-1!==X.x&&-1!==X.y&&-1!==X.z||(X=t.position),-1===q&&(q=t.direction.x);const J=((null===(a=t.getComponent(x.a))||void 0===a?void 0:a.cameraValue)||0)>0;let Z=!1;F.isBlock===J||J||U.isAir||null!==(i=t.getComponent(C.a))&&void 0!==i&&i.climb||null===(L=t.getComponent(f.a))||void 0===L||!L.exec||j.forEach((e=>{var t;let[,n,,,,]=e;null==n||null===(t=n.getComponent(h.a))||void 0===t||t.swais.push(new c.a(.5,.375,1.75,2,0))})),F.isBlock=J,U.axesPar=1;const $=(0,E.b)(t),[Q,,,,,]=(0,d.b)(t),ee=F.leftWeapon.data.shootType===P.q.SHIELD&&F.leftWeapon.isFireStart||F.rightWeapon.data.shootType===P.q.SHIELD&&F.rightWeapon.isFireStart,te=!(null===(R=t.getComponent(C.a))||void 0===R||!R.exec||t.getComponent(C.a).climb),ne=!(null===(W=t.getComponent(A.a))||void 0===W||!W.enable);let ae=!1;if(F.isCanShoot=!te&&"air"!==U.state,this.lazy.push((()=>{var e,a,i,o,s,r,l,h,c,u;F.isAction=ae||!(null===(e=t.getComponent(S.a))||void 0===e||!e.exec)||!(null===(a=t.getComponent(w.a))||void 0===a||!a.exec)||!(null===(i=t.getComponent(b.a))||void 0===i||!i.exec)||((null===(o=t.getComponent(m.a))||void 0===o?void 0:o.value)||0)>.5||null!==X&&-1!==X.x&&-1!==X.y&&-1!==X.z&&(n.hasHitScanVoxel(q,0,X.x,t.position.y+((null===(s=G.getComponent(M.a))||void 0===s?void 0:s.position.y)||0),X.z,((null===(r=t.getComponent(v.a))||void 0===r?void 0:r.size.x)||0)/2+((null===(l=t.getComponent(x.a))||void 0===l?void 0:l.length)||0))||(0!==K.value.x||0!==K.value.y)&&n.hasHitScanVoxel(q,0,X.x,t.position.y+((null===(h=G.getComponent(m.a))||void 0===h?void 0:h.cluchSizeY)||0)/2,X.z,((null===(c=t.getComponent(v.a))||void 0===c?void 0:c.size.x)/2||0)+((null===(u=t.getComponent(x.a))||void 0===u?void 0:u.length)||0)))})),G.hasComponent(I.a)){var ie;const n=G.getComponent(I.a),a=!(null===(ie=t.getComponent(m.a))||void 0===ie||!ie.enableCluch);n.backShock=(0,r.x)(n.backShock,0,.025*e);const i=n.backShock*(.5*(a?.5:1));F.rightWeapon.data.shootType===P.q.ZOOM||F.leftWeapon.data.shootType===P.q.ZOOM?G.zoom=1-i:G.zoom=(0,r.x)(G.zoom,1-i,.1*e)}for(j.forEach((a=>{let[i,o,d,m,v,w,b,x,M,S]=a;if(null===i)return;const A=i.bullets.some((e=>e.hasLive()));if(!A&&i.bullets.length>0&&(i.bullets.forEach((e=>e.remove())),(0,_.a)(i.bullets),i.isFireStart=!1),i.isShootable=!1,i.isCanShoot=F.isCanShoot,i.data.fireSpeed>0){const a=i.data.shootType===P.q.AUTO,_=i.data.shootType===P.q.SLOW||i.data.shootType===P.q.ZOOM||i.data.shootType===P.q.SHIELD,B=i.data.shootType===P.q.SPIN,K=!B&&i.data.chargeTime>0,X=!B&&K&&!U.isWaitActive&&!!U.keys.use&&U.keys.use!==U.presss.use,q=i.chargePar>=1,J=q?i.data.ammoReduceMax:i.data.ammoReduceMin,ie=i.data.shootType===P.q.ZOOM||i.data.shootType===P.q.SHIELD,oe=null===i.data.ammoType||ie||i.data.shootType!==P.q.SPIN&&i.chargePar>0||(0,p.e)(t,i.data.ammoType)>=J,se=(b?F.leftWeapon.data.ammoType===i.data.ammoType&&(0,p.e)(t,F.leftWeapon.data.ammoType||"",0)>=(q?F.leftWeapon.data.ammoReduceMax:F.leftWeapon.data.ammoReduceMin):F.rightWeapon.data.ammoType===i.data.ammoType&&(0,p.e)(t,F.rightWeapon.data.ammoType||"",0)>=(q?F.rightWeapon.data.ammoReduceMax:F.rightWeapon.data.ammoReduceMin))||ie,re=i.burstCount>0&&i.burstCount<(q?i.data.bulletBurstMax:i.data.bulletBurstMin)&&oe;i.isAmmo=oe;const le=(ne&&i.data.shootType!==P.q.SHIELD||-1!==F.changeWait)&&(K||B||_)&&(!v||w)&&!i.data.isEndFire,he=null!==U.activeEntity;if(i.isChargeCancelLock&&(i.chargePar=0,i.chargeLateTime=0,v||(i.isChargeCancelLock=!1)),this.lazy.push((()=>{const t=Math.max(0,Z?0:F.isAction?q?i.data.actionBulletSpreadMax:i.data.actionBulletSpreadMin:(0,T.b)(q?i.data.standBulletSpreadMax:i.data.standBulletSpreadMin,q?i.data.actionBulletSpreadMax:i.data.actionBulletSpreadMin,$));i.spread=(0,r.x)(i.spread,t,.25*e)})),!re&&!a&&!B&&!_&&i.time>i.data.fireSpeed||-1!==U.respawnTime||le||he||(i.isChargeCancelLock||X)&&v)i.time=-1,i.isFireStart=!1,i.isFireWait=!1,i.isHoldFire=!1,i.isWaitWeaponChange=le||he,i.isTouchActiveEntity=he,i.isChargeCancelLock=X&&v||i.isChargeCancelLock,i.noChargeFireTime=-1,i.isChargeStart=!1,i.isChargeEnable=!1,i.burstCount=0,!v&&i.data.chargeTime>0&&(i.chargePar=0,i.chargeLateTime=0),b?F.isFireLeft=!1:F.isFireRight=!1;else{var L,R;let w=!1;if(d||(i.isFirePress=!1,i.isEmpty=!1),-1!==i.time&&(i.time+=(0,T.c)(e/60,0)),!i.isWaitWeaponChange&&!i.isChargeCancelLock){const a=B?0:this.setting.getWeaponChargeStandTime()/1e3;if(!B||v&&oe&&!ne&&!te)if(!i.isChargeCancelLock&&(K||B)&&i.data.chargeTime>0&&v){const o=Math.max(i.chargePar,Math.min(1,(0,T.c)((i.chargeLateTime-a)/(i.data.chargeTime*(1-(0,E.b)(t))),1,100,Math.ceil)));i.chargePar=Math.max(0,Math.min(1,o)),q&&!i.isChargeMax&&n.createSound("./asset/sound/weapon/charge-complete.mp3",null,"player-charge-full".concat(t.getID())).setVolume(2).play(),i.isChargeEnable=i.chargePar>0,i.isChargeMax=q,i.isChargeStart=!0,i.noChargeFireTime=-1===i.noChargeFireTime&&0===o?z:i.noChargeFireTime,i.chargeLateTime=Math.min(i.data.chargeTime+a,i.chargeLateTime+e/60)}else i.isChargeStart&&i.chargeLateTime<i.data.chargeTime+a&&this.lazy.push((()=>{i.noChargeFireLock&&!v&&(i.noChargeFireLock=!1)}));else i.chargeLateTime=Math.max(0,i.chargeLateTime-e/60),i.chargeLateTime<=0&&(i.chargeLateTime=0),i.chargePar=(0,T.c)(Math.max(0,Math.min(1,i.chargeLateTime/i.data.chargeTime)),0,100,Math.ceil),i.isChargeEnable=!1,i.isChargeMax=!1,i.isChargeStart=!1}!i.isWaitWeaponChange&&!i.isTouchActiveEntity||ne||(i.isWaitWeaponChange=!1,i.isTouchActiveEntity=!1,v&&(i.noChargeFireLock=!0));const X=q?i.data.bulletLengthMax:i.data.bulletLengthMin,ie=q?i.data.bulletScaleMax:i.data.bulletScaleMin,le=q?i.data.chargeFindTarget:i.data.normalFindTarget,he=["player-hit-bullet","enemy-hit-bullet",t.getID()],ce=(null===(L=t.getComponent(f.a))||void 0===L?void 0:L.value.x)||0,[ue,pe,de]=(0,r.r)(G.direction.x,G.direction.y,(Q||ee?Math.abs(x)*ce*.5:x+Math.abs(x)*ce*.5)/G.fov,M/G.fov,S/G.fov);let ge=null;const me=!(null!==(R=t.getComponent(C.a))&&void 0!==R&&R.exec&&!t.getComponent(C.a).climb)&&(!(q?i.data.isChargeHitShoot:i.data.isNormalHitShoot)||(()=>{const[e,t,a,,o]=ie>0?le?n.hitScanBoldFind("hitbox",G.direction.x,G.direction.y,G.position.x,G.position.y,G.position.z,ie,X,he):n.hitScanBold("hitbox",G.direction.x,G.direction.y,G.position.x,G.position.y,G.position.z,ie,X,he):n.hitScan("hitbox",G.direction.x,G.direction.y,G.position.x,G.position.y,G.position.z,X,he);switch(ge=o,q?i.data.chargeFindType:i.data.normalFindType){case P.d.ALL:return!(null===ge&&(-1===e||-1===t||-1===a||n instanceof s.a&&n.hasOutOfWorld(e,t,a)));case P.d.VOXEL:return!(null!==ge||-1===e||-1===t||-1===a||n instanceof s.a&&n.hasOutOfWorld(e,t,a));case P.d.ENTITY:return null!==ge}return!1})());i.isShootable=me,i.shootableTarget=ge,F.enable&&me&&i.isCanShoot&&se&&(i.chargePar<.25||i.chargePar>=1)&&(re||!i.isFireStart&&(_?!i.isWaitWeaponChange&&v:K&&(i.isChargeStart||-1!==i.noChargeFireTime&&z-i.noChargeFireTime<i.data.fireSpeed)?!v:(B||a?d:m)&&(B?q:-1===i.time||i.time>=i.data.fireSpeed)))?(-1===i.time&&(i.time=0),re?(i.time>=i.data.burstTime&&(i.time=i.time%i.data.burstTime,F.isCanShoot?w=!0:(i.isFireStart=!1,i.burstCount=0)),i.time>=i.data.waitTime&&(i.time=i.time%i.data.waitTime)):a&&i.time>=i.data.fireSpeed?i.time=i.time%i.data.fireSpeed:i.isFireStart||(i.time=0),i.fireTime=-1,i.fireStartTime=-1,re||i.data.isEndFire?(i.isFireStart=!0,-1===i.fireStartTime&&(i.fireStartTime=U.time)):w=!0,re||(Q?(null!=Y&&Y.hasComponent(O.a)||null!=V&&V.hasComponent(O.a))&&(Y.getComponent(O.a).isFireAnimation=!1,V.getComponent(O.a).isFireAnimation=!1):null!=o&&o.hasComponent(O.a)&&(o.getComponent(O.a).isFireAnimation=!1))):i.isCanShoot&&!oe&&!i.isEmpty&&(i.data.chargeTime>0?i.isHoldFire&&!v:m)?(i.data.isEmptySound&&n.createSound("./asset/sound/weapon/out-of-ammo.mp3",null,"player-fire-".concat((0,y.a)())).play(),i.isEmpty=!0,i.chargePar=0,i.burstCount=0):i.isCanShoot&&!d&&!m&&(B||a&&i.time>=i.data.fireSpeed)?(i.time=i.data.fireSpeed,i.isFireStart=!1,i.burstCount=0):!K||re||v?i.burstCount=0:(i.chargeLateTime=0,i.chargePar=0,i.isChargeEnable=!1,i.isChargeMax=!1,i.isChargeStart=!1),i.data.isEndFire&&i.isFireStart&&i.time>=i.data.fireSpeed&&(F.isCanShoot?w=!0:i.isFireStart=!1),re||i.data.isEndFire||!i.isFireStart||(!(i.time>i.data.waitTime)||i.data.shootType===P.q.HOOK&&A||i.data.shootType!==P.q.AUTO&&i.data.shootType!==P.q.SEMIAUTO&&i.data.shootType!==P.q.ZOOM&&i.data.shootType!==P.q.COMBO&&i.data.shootType!==P.q.SPIN&&i.data.shootType!==P.q.COMBO&&d)&&F.isCanShoot||(i.isFireStart=!1);const fe=i.data.damageMin+(i.data.damageMax-i.data.damageMin)*(q?1:0);if((w||!i.isWaitWeaponChange&&v&&_)&&(!B||q)&&"air"!==U.state&&F.isCanShoot){let e=!1;const a=i.time-i.time%i.data.waitTime,s=.2125;if(i.data.shootType===P.q.SLOW){-1===i.fireStartTime&&(i.fireStartTime=U.time);const e=t.getComponent(k.a),n=(0,p.e)(t,"combo");null!==i.data.ammoType&&i.fireTime!==a&&n<e.max&&(0,p.h)(t,i.data.ammoType,Math.max(0,(0,p.e)(t,i.data.ammoType)-J)),i.fireTime=a;const o=Math.min(1,(U.time-i.fireStartTime)/s);null!==i.data.ammoType&&(0,p.e)(t,i.data.ammoType)-J>=0&&(U.speed=Math.min(U.speed,fe),G.light=Math.max(G.light,i.data.lightForce),G.zoom=1+.5*o),i.isFireStart=!0,i.isFirePress=!0}else if(i.data.shootType===P.q.ZOOM){-1===i.fireStartTime&&(i.fireStartTime=U.time),null!==i.data.ammoType&&i.fireTime!==a&&(0,p.h)(t,i.data.ammoType,Math.max(0,(0,p.e)(t,i.data.ammoType)-J)),i.fireTime=a,null!==i.data.ammoType&&(0,p.e)(t,i.data.ammoType)-J>=0&&(G.light=Math.max(G.light,i.data.lightForce),Z=!0);const e=Math.min(1,(U.time-i.fireStartTime)/s);if(e>.25){const t=Math.max(0,e-.25)/.75;G.zoom=(1+Math.max(0,fe-1))*t/G.fov,U.axesPar=Math.max(1,(1+Math.max(0,fe-1))*t),U.isZoomAnimation=!0,U.zoomAnimationPar=t}else G.zoom=1,U.axesPar=1,U.isZoomAnimation=!1,U.zoomAnimationPar=0;i.isFireStart=!0,i.isFirePress=!0}else if(i.data.shootType===P.q.SHIELD){-1===i.fireStartTime&&(i.fireStartTime=U.time);const e=Math.min(1,(U.time-i.fireStartTime)/s);G.light=Math.max(G.light,i.data.lightForce),G.zoom=1+.5*e,null!==i.data.ammoType&&i.fireTime!==a&&(0,p.h)(t,i.data.ammoType,Math.max(0,(0,p.e)(t,i.data.ammoType)-J)),i.fireTime=a,ae=!0,i.isFireStart=!0,i.isFirePress=!0}else if(i.data.shootType===P.q.COMBO){if(t.hasComponent(k.a)){-1===i.fireStartTime&&(i.fireStartTime=U.time);const e=t.getComponent(k.a),n=Math.min(e.max,(0,p.e)(t,"combo")+fe);if(null!==i.data.ammoType&&(0,p.h)(t,i.data.ammoType,Math.max(0,(0,p.e)(t,i.data.ammoType)-J)),(0,p.h)(t,"combo",n),t.hasComponent(l.b)){const e=t.getComponent(l.b);e.comboTime=e.time}n>0&&(0,p.e)(t,"combo",0)>=e.start&&((0,p.h)(t,"gauge",1),G.light=Math.max(G.light,i.data.lightForce)),ae=!0,i.isFireStart=!0,i.isFirePress=!0,U.pickupTime=z}}else if(!i.isFireStart&&!ne||re){if((!K||(q||!i.noChargeFireLock))&&(i.data.shootType!==P.q.HOOK||!A)){if(-1===i.fireStartTime&&(i.fireStartTime=U.time),e=!0,i.data.shootType!==P.q.HOOK&&null!==i.data.ammoType&&(0,p.h)(t,i.data.ammoType,Math.max(0,(0,p.e)(t,i.data.ammoType)-J)),null!==i.data.fireSound&&(n.createSound(K&&q&&i.data.chargeFireSound||i.data.fireSound,null,"player-fire-".concat((0,y.a)())).play(),i.data.isEmptySound&&n.createSound("./asset/sound/weapon/out-of-ammo.mp3",null,"player-fire-low-ammo".concat((0,y.a)())).setVolume(null!==i.data.ammoType?2*(1-Math.min(1,(0,p.e)(t,i.data.ammoType)/((0,p.d)(t,i.data.ammoType)/4))):0).play()),i.isChargeAttack=q,this.lazy.push((()=>{const e=K&&q?i.data.chargeBulletType:i.data.normalBulletType;if(null===e)return;const a=new Array,o=new Array,s=q?i.data.bulletCountMax:i.data.bulletCountMin,l=Z?1/0:q?i.data.bulletSpeedMax:i.data.bulletSpeedMin,h=q?i.data.bulletLengthMax:i.data.bulletLengthMin;if(i.isChargeMax?i.data.spreadBulletMax:i.data.spreadBulletMin)for(let n=0,a=0|s;n<a;n=n+1|0){const n=G.direction.x+Math.cos(Math.random()*r.a)*i.spread,a=G.direction.y+Math.cos(Math.random()*r.a)*i.spread,c=new e(G.position.x+ue,G.position.y+pe,G.position.z+de,G.position.x,G.position.y,G.position.z,n,a,l,b,h,ie,le,fe,i.data.random,s,q?1:0,Z,q?i.data.damageTypeMax:i.data.damageTypeMin,null,t,i,[t.getID()]);o.push(c)}else{const n=G.direction.x+Math.cos(Math.random()*r.a)*i.spread,a=G.direction.y+Math.cos(Math.random()*r.a)*i.spread;for(let r=0,c=0|s;r<c;r=r+1|0){const r=new e(G.position.x+ue,G.position.y+pe,G.position.z+de,G.position.x,G.position.y,G.position.z,n,a,l,b,h,ie,le,fe,i.data.random,s,q?1:0,Z,q?i.data.damageTypeMax:i.data.damageTypeMin,null,t,i,[t.getID()]);o.push(r)}}n.addEntitys(...o,...a),i.data.shootType===P.q.HOOK&&i.bullets.push(...o),i.burstCount++})),e){if(Q)j.forEach((e=>{let[,t,,,]=e;if(null===t)return;t.getComponent(h.a).swais.push(new c.a(i.data.swaiTime,i.data.swaiPar,i.data.swaiForce,i.data.swaiReduce,0))}));else if(null!==o){o.getComponent(h.a).swais.push(new c.a(i.data.swaiTime,i.data.swaiPar,i.data.swaiForce,i.data.swaiReduce,0))}if(G.hasComponent(g.a)){const e=F.time,n=setInterval((()=>{if(t.hasLive()){if(F.time-e>.1){G.getComponent(g.a).swais.push(new c.a(i.data.bobTime,i.data.bobPar,i.data.bobForce*(1-$),i.data.bobReduce,i.data.bobFov)),clearInterval(n)}}else clearInterval(n)}));if(t.hasComponent(u.a)){const e=t.getComponent(u.a),n=(Math.random()-.5)/.5*.5,a=(F.isAction?q?i.data.actionRecoilForceMax:i.data.actionRecoilForceMin:q?i.data.standRecoilForceMax:i.data.standRecoilForceMin)*(1-$),[o,s]=(0,r.y)(n*a,(.75+.25*(1-Math.abs(n)))*a,.5*D.z);e.value.x+=o,e.value.y+=s,e.force=.5*Math.min(1,Math.max(o,s)/.375),e.startTime=U.time}}if(G.hasComponent(I.a)){var W,H;const e=G.getComponent(I.a),t=((null===(W=ge)||void 0===W||null===(H=W.getComponent(N.a))||void 0===H?void 0:H.size.x)||1)/2;e.backShock=Math.min(t*(1-$),Math.max(-t*(1-$),e.backShock+i.data.backShock*(1-$)))}}G.light=Math.max(G.light,i.data.lightForce),i.isFireStart=!0,i.isFirePress=!0,i.noChargeFireLock=!1}K&&!re&&i.isFireStart&&i.burstCount>0&&(i.chargeLateTime=0,i.chargePar=0),i.noChargeFireLock&&(i.time=-1,i.fireTime=-1,i.fireStartTime=-1,i.noChargeFireTime=-1,i.chargeLateTime=0,i.chargePar=0,i.isFireStart=!1,i.isFirePress=!1,i.isEmpty=!1,i.isFireWait=!1,i.isChargeEnable=!1,i.isChargeMax=!1,i.isChargeStart=!1,i.isHoldFire=!1,i.burstCount=0)}i.data.isEndFire&&(i.isFireStart=!1)}(te&&!d||-1!==U.respawnTime||null!==U.activeEntity)&&(i.chargeLateTime=0,i.chargePar=0),i.isHoldFire=v,i.activeHold=_&&v}}else i.time=-1,i.fireTime=-1,i.fireStartTime=-1,i.noChargeFireTime=0,i.chargeLateTime=0,i.chargePar=0,i.isFireStart=!1,i.isFirePress=!1,i.isEmpty=!1,i.isFireWait=!1,i.isChargeEnable=!1,i.isChargeMax=!1,i.isChargeStart=!1,i.isHoldFire=!1,i.burstCount=0}));this.lazy.length>0;){const e=this.lazy.shift()||null;null!==e&&e()}G.light=(0,r.x)(G.light,0,.25*e),F.time+=(0,T.c)(e/60,0)}offset(e,t,n){const{position:a,direction:i}=t,s=t.getComponent(o.a),l=s.leftWeapon.data.shootType===P.q.SHIELD&&s.leftWeapon.isFireStart||s.rightWeapon.data.shootType===P.q.SHIELD&&s.rightWeapon.isFireStart,h=new Array;if(s.leftWeapon.data.shootType===P.q.SHIELD&&(h.includes(s.leftWeapon.data.ammoType)||h.push(s.leftWeapon.data.ammoType)),s.rightWeapon.data.shootType===P.q.SHIELD&&(h.includes(s.rightWeapon.data.ammoType)||h.push(s.rightWeapon.data.ammoType)),l&&t.hasComponent(L.a)){const e=t.getComponent(L.a);e.value.forEach((n=>{const[o,s]=(0,r.n)(n.position.x,n.position.y,n.position.z,a.x,a.y,a.z),[l,c]=(0,r.i)(i.x,i.y,o,s);if(l>r.b&&c>r.b)return;let u=!1;h.forEach((e=>{const a=(0,p.e)(t,e);n.value<a?((0,p.h)(t,e,a-n.value),u=!0):((0,p.h)(t,e,Math.max(0,a-n.value)),n.value-=a)})),u&&e.removes.push(n)}))}}}a()}catch(D){a(D)}}))},(e,t,n)=>{"use strict";n.d(t,{a:()=>s});var a=n(4),i=n(76),o=n(8);class s extends a.a{constructor(){super(i.a)}offset(e,t,n){const a=t.getComponent(i.a);a.time>a.speed&&t.remove(),a.time+=(0,o.c)(e/60,0)}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>r});var a=n(4),i=n(126),o=n(503),s=n(8);class r extends a.a{constructor(){super(i.a,o.a)}offset(e,t,n){const a=t.getComponent(i.a),r=t.getComponent(o.a);-1===a.startScale&&(a.startScale=r.scale),a.time>a.speed&&(a.loop?a.time%=a.speed:a.time=a.speed);const l=(0,s.c)(a.time/a.speed,0);r.scale=a.startScale+(a.scale-a.startScale)*l,a.time+=(0,s.c)(e/60,0)}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>p});var a=n(4),i=n(13),o=n(351),s=n(6),r=n(152),l=n(503),h=n(76),c=n(126),u=n(24);class p extends a.a{constructor(){var e,t,n;super(o.a,l.a,r.a),n=10,(t="spawn_limit")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}preadditional(e,t){const n=t.getEntitys((e=>e.hasComponent(o.a)));(0,u.c)(n).desc((e=>e.getComponent(o.a).spawnTime));for(let e=this.spawn_limit;e<n.length;e++){const t=n[e];t.hasComponent(h.a)||t.setComponents(new h.a(2),new c.a(2,0))}}offset(e,t,n){var a,h,c;const u=t.getComponent(o.a),p=t.getComponent(l.a),d=t.getComponent(r.a);u.init||(u.rotSpeed=d.speed,u.rot=p.rotate,u.init=!0),0===((null===(a=t.getComponent(i.a))||void 0===a?void 0:a.value.y)||0)&&((null===(h=t.getComponent(s.a))||void 0===h?void 0:h.hit.y)||-1)<0?(d.speed=0,p.rotate=0):0===((null===(c=t.getComponent(s.a))||void 0===c?void 0:c.hit.y)||0)&&(d.speed=u.rotSpeed,p.rotate=u.rot)}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>l});n(217);var a=n(4),i=n(152),o=n(503),s=n(8),r=n(0);class l extends a.a{constructor(){super(i.a,o.a)}offset(e,t,n){const a=t.getComponent(i.a),l=t.getComponent(o.a);if(0===a.speed)return;a.time>=a.speed&&(a.loop?a.time%=a.speed:a.time=a.speed);let h=a.time/a.speed;a.reverse&&(h=1-h),l.rotate=h*r.a,a.time+=(0,s.c)(e/60,0)}}},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>b});var i=n(4),o=n(62),s=n(504),r=n(30),l=n(40),h=n(216),c=n(63),u=n(39),p=n(24),d=n(27),g=n(9),m=n(47),f=n(54),y=n(222),v=n(53),w=e([h,d,m,y]);[h,d,m,y]=w.then?(await w)():w;class b extends i.a{constructor(){super(o.a,l.a,s.a,r.a)}physical(e,t,n){const{position:a}=t,i=t.getComponent(o.a),r=t.getComponent(s.a).value;null!=r&&r.hasComponent(l.a)&&(a.x=r.position.x+i.offset.x,a.y=r.position.y+i.offset.y,a.z=r.position.z+i.offset.z)}offset(e,t,n){const a=performance.now(),{position:i}=t,r=t.getComponent(o.a),w=t.getComponent(l.a),b=t.getComponent(s.a).value;if(null==b||!b.hasComponent(l.a))return;if(!b.hasLive())return t.remove();i.x=b.position.x+r.offset.x,i.y=b.position.y+r.offset.y,i.z=b.position.z+r.offset.z;let x=!1,M=!1;const E=b.getComponent(l.a);for(let e=0,t=0|w.value.length;e<t;e=e+1|0){const t=w.value[e],n=t.type,a=t.value*w.multiples[n];E.value.push(new c.a(a,n,t.attacker,t.direction.x,t.direction.y,t.position,t.force.x,t.force.y,t.force.z)),x=a*w.multiples[n]>=1/0,M=!0}if(t.hasComponent(u.a)||(0,p.a)(w.value),M&&x){var _,C;if(n instanceof d.a&&n.getGameMode()===f.a.HORDE){const e=n.getPlayer();if((0,y.b)(e)){const t=m.j;if(null!=e&&e.hasComponent(g.b)){const n=e.getComponent(g.b);n.hordeBonusStartTime=a,n.hordeBonusTimeValue=t,n.hordeBonusType=0}null!==e&&(0,u.h)(e,"hordetime",(0,u.e)(e,"hordetime",0)+t)}}const e=null===(_=b.getComponent(v.a))||void 0===_?void 0:_.time,t=(null===(C=b.getComponent(v.a))||void 0===C?void 0:C.freezeTime)||-1;(-1===t||t<e)&&(n.addEntitys(new h.b(i.x,i.y,i.z)),n.createSound("./asset/sound/effect/head-shot.mp3",null,"shoot-target-hit-".concat(b.getID())).setVolume(2.5).play())}}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>f});n(1),n(2);var i=n(4),o=n(263),s=n(10),r=n(6),l=n(108),h=n(0),c=n(13),u=n(27),p=n(39),d=n(127),g=n(58),m=e([u,g]);[u,g]=m.then?(await m)():m;class f extends i.a{constructor(){super(o.a,c.a)}offset(e,t,n){var a;const{position:i}=t,m=t.getComponent(o.a);if(!(n instanceof u.a&&t.hasComponent(o.a)&&t.hasComponent(c.a)))return;((null===(a=t.getComponent(r.a))||void 0===a?void 0:a.hit.y)||0)<0&&(m.landing=!0);const f=n instanceof u.a?n.getPlayer():null;let y=!0;if(t.hasComponent(d.a)){const e=t.getComponent(d.a);if(y=e.isOverPick,!y&&null!==f)for(const t in e.items){const n=e.items[t];if("number"==typeof n&&(0,p.d)(f,t)>(0,p.e)(f,t,0)||"string"==typeof n&&null===(0,p.c)(f,t,"")){y=!0;break}}}if(null===f||(0,g.b)(f,n)||(y=!1),i.y<=0&&(y?m.feel=!0:t.remove()),y){if(null!==f&&f instanceof s.a){const e=(0,l.b)(f),n=(0,h.p)(f.position.x,f.position.y,f.position.z,i.x,i.y,i.z);if(m.landing&&n<m.min+(m.max-m.min)*e||m.feel){var v;const e=t.getComponent(c.a),n=(null===(v=f.getComponent(r.a))||void 0===v?void 0:v.size)||new h.e(0,0),[a,o]=(0,h.n)(f.position.x,f.position.y+n.y/2,f.position.z,i.x,i.y,i.z),s=(0,h.p)(f.position.x,f.position.y+n.y/2,f.position.z,i.x,i.y,i.z),[l,u,p]=(0,h.r)(a,o,0,0,Math.min(s,.25));e.value.x=l,e.value.y=u,e.value.z=p,m.feel=!0,t.removeComponent(r.a)}}}else m.feel=!1}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.d(t,{a:()=>l});var a=n(4),i=n(152),o=n(350),s=n(13),r=n(6);class l extends a.a{constructor(){super(o.a,i.a)}offset(e,t,n){var a,l;const h=t.getComponent(o.a);var c;h.init||(h.rotSpeed=(null===(c=t.getComponent(i.a))||void 0===c?void 0:c.speed)||0,h.init=!0);0===((null===(a=t.getComponent(s.a))||void 0===a?void 0:a.value.y)||0)&&((null===(l=t.getComponent(r.a))||void 0===l?void 0:l.hit.y)||-1)<0&&(h.landing=!0);const u=t.getComponent(i.a);h.landing?u.speed=0:u.speed=h.rotSpeed}}},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>h});n(14),n(15),n(16);var i=n(4),o=n(347),s=n(9),r=n(27),l=e([r]);r=(l.then?(await l)():l)[0];class h extends i.a{constructor(){super(o.a)}offset(e,t,n){var a;const i=performance.now(),{position:l}=t,h=t.getComponent(o.a),c=n instanceof r.a?null===(a=n.getPlayer())||void 0===a?void 0:a.getComponent(s.b):null;-1===(null==c?void 0:c.goleTime)&&-1===(null==c?void 0:c.deathTime)&&-1===(null==c?void 0:c.respawnTime)&&n.getEntitysOfRange("collision",l.x,l.y,l.z,1,1).forEach((e=>{if(!e.getNames().includes("player")||!e.hasComponent(s.b))return;const t=e.getComponent(s.b);t.goleTime=i,t.gole=t.time,t.secret=h.secret,n instanceof r.a&&n.addGoleTime(1e3*t.gole)}))}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.d(t,{a:()=>l});var a=n(4),i=n(220),o=n(0),s=n(9),r=n(8);class l extends a.a{constructor(){super(s.b,i.a)}additional(e,t,n){const a=t.getComponent(i.a),l=t.getComponent(s.b);let h=0,c=0,u=0,p=0;u=a.position.x,p=a.position.y;const d=e*a.force;if(a.position.x=(0,o.x)(a.position.x,a.value.x,d),a.position.y=(0,o.x)(a.position.y,a.value.y,d),a.time-a.startTime>.175&&(a.value.x=(0,o.x)(a.value.x,0,.05*e),a.value.y=(0,o.x)(a.value.y,0,.05*e)),a.value.x<0){const e=Math.max(0,-l.cmda.x),t=a.value.x+e;h=Math.min(0,a.value.x-t),a.value.x=Math.min(0,t)}else if(a.value.x>0){const e=Math.min(0,-l.cmda.x),t=a.value.x+e;h=Math.max(0,a.value.x-t),a.value.x=Math.max(0,t)}if(a.value.y>0){const e=a.value.y,t=e+Math.min(0,-l.cmda.y);c=Math.max(0,e-t),a.value.y=Math.max(0,t)}l.cmda.x+=a.old.x-u-h;let g=a.old.y-p-c;if(t.direction.y+Math.min(0,g)<=-o.b&&(a.subY+=Math.min(0,g)),a.subY<0){const e=a.subY+Math.max(0,g),t=a.subY+g;a.subY=Math.min(0,e),g=a.subY<0?0:t}l.cmda.y+=g,a.old.x=u,a.old.y=p,a.time+=(0,r.c)(e/60,0)}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>r});var a=n(4),i=n(96),o=n(503),s=n(8);class r extends a.a{constructor(){super(i.a,o.a)}movable(e,t,n){const a=t.getComponent(i.a),r=t.getComponent(o.a);if(0===a.frames.length)return;a.name!==a.oldName&&(a.time=0),a.time+=(0,s.c)(e/60,0),a.time>=a.speed&&(a.loop?a.time%=a.speed:a.time=a.speed);const l=(0,s.c)(a.time/a.speed,0),h=Math.min(a.frames.length-1,Math.floor(a.frames.length*l));r.material=a.frames[h],a.frame=h,a.oldName=a.name}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>s});var a=n(61),i=n(4),o=n(340);class s extends i.a{constructor(){super(o.a)}offset(e,t,n){const i=t.getComponent(o.a);i.init?t.hasComponent(a.a)&&(t.getComponent(a.a).enable=!1):(t.hasComponent(a.a)&&(t.getComponent(a.a).enable=!0),i.init=!0)}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>u});n(1),n(2);var a=n(4),i=n(257),o=n(59),s=n(504),r=n(0),l=n(30),h=n(44),c=n(9);class u extends a.a{constructor(){super(i.a,o.a,s.a)}offset(e,t,n){const a=t.getComponent(i.a),u=t.getComponent(o.a),p=t.getComponent(s.a).value;if(null!==p){const i=n.getCamera(),o=p.hasComponent(c.b)&&i.hasComponent(h.a)?i.getComponent(h.a).position.y:(p.hasComponent(l.a)?p.getComponent(l.a).size.y:0)/2,[s,d]=(0,r.n)(p.position.x,p.position.y+o,p.position.z,t.position.x,t.position.y,t.position.z),[g,m]=(0,r.k)(s,d,t.direction.x,t.direction.y),f=e*(1e3/60)/35;a.tic+=f;let y=a.tic-a.tic%1;y>3&&(a.tic-=0|a.tic,y=0),(a.forceHoming||y>1&&a.oldTic!==y)&&(u.originDirection.x+=Math.min(a.limit,Math.max(-a.limit,g*a.force)),u.originDirection.y+=Math.min(a.limit,Math.max(-a.limit,m*a.force))),a.oldTic=y,u.originPosition.x=t.position.x,u.originPosition.y=t.position.y,u.originPosition.z=t.position.z}}}},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>O});n(1),n(2),n(15),n(16),n(7);var i=n(4),o=n(66),s=n(59),r=n(32),l=n(13),h=n(0),c=n(147),u=n(50),p=n(33),d=n(44),g=n(64),m=n(62),f=n(504),y=n(39),v=n(41),w=n(9),b=n(40),x=n(63),M=n(26),E=n(48),_=n(8),C=n(6),T=n(23),S=n(5),k=e([r,c,u,T,S]);[r,c,u,T,S]=k.then?(await k)():k;class O extends i.a{constructor(e){var t,n,a;super(o.a,c.a,s.a),a=void 0,(n="setting")in(t=this)?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,this.setting=e}additional(e,t,n){var a,i;const{position:k}=t,O=t.getComponent(o.a),A=t.getComponent(c.a),L=t.getComponent(s.a),P=null!==L.target&&L.target.hasComponent(m.a)&&(null===(a=L.target.getComponent(f.a))||void 0===a?void 0:a.value)||L.target;var I;-1===O.timeStamp&&(O.timeStamp=(null==P||null===(I=P.getComponent(w.b))||void 0===I?void 0:I.time)||0);if(!L.hit&&((null==P||null===(i=P.getComponent(w.b))||void 0===i?void 0:i.time)||0)-O.timeStamp>1&&t.remove(),L.hit&&null!==L.attacker&&null!==P&&P.hasComponent(b.a)){P.getComponent(b.a).value.push(new x.a(A.damage,"hook",L.attacker,0,0,new h.f(0,0,0),0,0,0))}A.isRemove=!1;let N=!1;var R;if(L.over)t.remove(),n.hasSound("hook-bullet-".concat(t.getID()))&&(null===(R=n.getSound("hook-bullet-".concat(t.getID())))||void 0===R||R.stop());else if(L.hit&&null!==L.attacker){var W,z,D,F,U;const a=n.getCamera(),i=(L.attacker.hasComponent(C.a)?Math.max(L.attacker.getComponent(C.a).size.x,L.attacker.getComponent(C.a).size.y):1)+.1,{position:o,direction:s}=n.getCamera(),[c,m]=(0,h.n)(o.x,o.y,o.z,k.x,k.y,k.z),f=(0,h.p)(o.x,o.y,o.z,k.x,k.y,k.z),x=(0,h.p)(o.x,o.y,o.z,L.hitPosition.x,L.hitPosition.y,L.hitPosition.z),I=x/(t instanceof T.a&&null!==t.weapon?(0,_.b)(t.weapon.data.bulletLengthMin,t.weapon.data.bulletLengthMax,t.weapon.chargePar):x),R=n.getEntitysOfRange("collision",k.x,k.y,k.z,i,i).some((e=>e.getNames().some((e=>"player"===e)))),X=null!==P?O.time>=O.pullTime||R&&(null===(W=L.attacker.getComponent(M.a))||void 0===W?void 0:W.targets.includes(P)):R&&L.attacker.hasComponent(C.a)&&(0!==L.attacker.getComponent(C.a).hit.x||0!==L.attacker.getComponent(C.a).hit.y||0!==L.attacker.getComponent(C.a).hit.z);if(-1===O.oldDist&&(O.oldDist=f),O.init||(O.ropeLength=f,O.init=!0),X||null!==(z=L.attacker.getComponent(p.a))&&void 0!==z&&z.exec||null!==(D=L.attacker.getComponent(E.a))&&void 0!==D&&D.exec||null!==(F=L.attacker.getComponent(g.a))&&void 0!==F&&F.enable||null!==L.attacker&&(0===(0,y.e)(L.attacker,"energy",1/0)||L.attacker.hasComponent(u.a)&&null!==L.attacker&&"hookshot"!==(0,y.c)(L.attacker,A.invert?L.attacker.getComponent(u.a).left:L.attacker.getComponent(u.a).right,null))||null!==P&&(!P.hasLive()||null!==(U=P.getComponent(b.a))&&void 0!==U&&U.value.some((e=>"hook"!==e.type)))){var H,B;if(t.remove(),null!=P&&P.hasComponent(l.a)){const e=P.getComponent(l.a);e.value.x=0,e.value.y=0,e.value.z=0}if(X&&null===P&&Math.abs(m)<h.d&&L.attacker.hasComponent(p.a)&&(null===(H=L.attacker.getComponent(g.a))||void 0===H||!H.exec)){var G,Y,V;const e=Math.ceil(k.y)-((null===(G=a.getComponent(d.a))||void 0===G?void 0:G.position.y)||0);(0,r.b)(n.getVoxel(L.attacker.position.x,L.attacker.position.y,L.attacker.position.z),S.u)&&!n.hasBlockScaleVoxel(L.attacker.position.x,e,L.attacker.position.z,(null===(Y=t.getComponent(C.a))||void 0===Y?void 0:Y.size.x)||.001,(null===(V=t.getComponent(C.a))||void 0===V?void 0:V.size.y)||.001)&&(L.attacker.position.y=e)}else if(f<=i&&null!==P&&L.attacker.hasComponent(l.a)){const e=L.attacker.getComponent(l.a);e.value.x=0,e.value.y=Math.max(0,e.value.y),e.value.z=0}if(n.hasSound("hook-bullet-".concat(t.getID())))null===(B=n.getSound("hook-bullet-".concat(t.getID())))||void 0===B||B.stop()}else{N=!0;let a=!1,i=0;if(L.attacker.hasComponent(w.b)){const e=L.attacker.getComponent(w.b);(A.invert?e.keys["fire-left"]:e.keys["fire-right"])>0&&(a=!0,i=performance.now()-(A.invert?e.keys["fire-left"]:e.keys["fire-right"]))}let r=0;const u=(0,_.e)(O.time/(O.pullTime*I));if(null!==P&&(O.isPull||a&&i>this.setting.getWeaponChargeStandTime()&&null!=P&&P.hasComponent(l.a))){var j;const t=Math.abs(Math.cos(u*h.b+h.b)),[n,a]=(0,h.n)(o.x,o.y,o.z,L.hitPosition.x,L.hitPosition.y,L.hitPosition.z),[i,s,c]=(0,h.r)(n,a,0,0,x*t),p=L.hitPosition.x+i,d=L.hitPosition.y+s,g=L.hitPosition.z+c,[m,f]=(0,h.n)(p,d,g,k.x,k.y,k.z),y=(0,h.p)(p,d,g,k.x,k.y,k.z),[w,b,M]=(0,h.r)(m,f,0,0,y*e*((null===(j=P.getComponent(v.a))||void 0===j?void 0:j.value)||1)),E=P.getComponent(l.a);w>0?E.value.x=E.value.x<Math.abs(w)?Math.min(Math.abs(w),E.value.x+w):E.value.x:w<0&&(E.value.x=E.value.x>-Math.abs(w)?Math.max(-Math.abs(w),E.value.x+w):E.value.x),b>0?E.value.y=E.value.y<Math.abs(b)?Math.min(Math.abs(b),E.value.y+b):E.value.y:b<0&&(E.value.y=E.value.y>-Math.abs(b)?Math.max(-Math.abs(b),E.value.y+b):E.value.y),M>0?E.value.z=E.value.z<Math.abs(M)?Math.min(Math.abs(M),E.value.z+M):E.value.z:M<0&&(E.value.z=E.value.z>-Math.abs(M)?Math.max(-Math.abs(M),E.value.z+M):E.value.z),r=y,O.isPull=!0}else if((!a||null===P)&&L.attacker.hasComponent(l.a)){const e=Math.max(0,O.minShrinkForce+(O.maxShrinkForce-O.minShrinkForce)*u),t=-1===O.old.x?k.x:O.old.x,n=-1===O.old.y?k.y:O.old.y,a=-1===O.old.z?k.z:O.old.z,[i,p,d]=(0,h.r)(c,m,0,0,O.length);let[g,y,v]=(0,h.A)(k.x+i,k.y+p,k.z+d,o.x-(t-(k.x+i))*(O.length>O.ropeLength?1:O.bending),o.y-(n-(k.y+p))*(O.length>O.ropeLength?1:O.bending),o.z-(a-(k.z+d))*(O.length>O.ropeLength?1:O.bending));O.old.x=k.x,O.old.y=k.y,O.old.z=k.z,g*=O.spring.x,y*=O.spring.y,v*=O.spring.z;const w=L.attacker.getComponent(l.a),b=g-(w.value.x-g)*O.ropeForce.x,x=y-(w.value.y-y)*O.ropeForce.y,M=v-(w.value.z-v)*O.ropeForce.z,E=Math.max(-Math.abs(o.x-k.x),Math.min(Math.abs(o.x-k.x),b)),_=Math.max(-Math.abs(o.y-k.y),Math.min(Math.abs(o.y-k.y),x)),C=Math.max(-Math.abs(o.z-k.z),Math.min(Math.abs(o.z-k.z),M)),[T,S]=(0,h.i)(s.x,s.y,c,m),A=Math.min(1,Math.max(T/h.b,S/h.b));O.minDistance<f?(w.value.x+=E*e,w.value.y+=_*e,w.value.z+=C*e,r=Math.max(O.minDistance,f-e*(1-A))):r=O.minDistance,O.lookPar=A,O.isPull=!1}const p=O.oldDist-f;var K;if(p<=0){if(n.hasSound("hook-bullet-".concat(t.getID())))null===(K=n.getSound("hook-bullet-".concat(t.getID())))||void 0===K||K.stop()}else n.hasSound("hook-bullet-".concat(t.getID()))||n.createSound("./asset/sound/weapon/hook-bullet.mp3",null,"hook-bullet-".concat(t.getID())).play(!0);const d=Math.max(0,p+O.sub),g=4*d|0;(0,y.h)(L.attacker,"energy",Math.max(0,(0,y.e)(L.attacker,"energy",1/0)-g)),O.sub=d%.25,O.oldDist=f,O.length=r,O.time+=(0,_.c)(e/60,0)}O.oldDist=f}A.isReduceAmmo=N}offset(e,t,n){var a,i;const{position:r}=t,l=t.getComponent(o.a),h=t.getComponent(c.a),u=t.getComponent(s.a),p=null!==(a=u.target)&&void 0!==a&&a.hasComponent(m.a)&&(null===(i=u.target.getComponent(f.a))||void 0===i?void 0:i.value)||u.target;h.isRemove=!1;var d;u.over?(t.remove(),n.hasSound("hook-bullet-".concat(t.getID()))&&(null===(d=n.getSound("hook-bullet-".concat(t.getID())))||void 0===d||d.stop())):u.hit&&null!==u.attacker&&null!==p&&(l.init||(l.fixPosition.x=u.hitPosition.x-p.position.x,l.fixPosition.y=u.hitPosition.y-p.position.y,l.fixPosition.z=u.hitPosition.z-p.position.z),r.x=p.position.x+l.fixPosition.x,r.y=p.position.y+l.fixPosition.y,r.z=p.position.z+l.fixPosition.z);h.isReduceAmmo=!1}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>v});n(1),n(2),n(7);var i=n(4),o=n(32),s=n(9),r=n(5),l=n(39),h=n(0),c=n(6),u=n(259),p=n(57),d=n(226),g=n(58),m=e([o,r,g]);[o,r,g]=m.then?(await m)():m;const f=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]];function y(e,t,n,a,i){const s=a.getVoxel(e,t,n);if(!(0,o.b)(s,r.u)&&i(s)){a.setVoxel(e,t,n,r.u,!0);for(let o=0,s=0|f.length;o<s;o=o+1|0){const[s,r,l]=f[o];y(e+s,t+r,n+l,a,i)}}}class v extends i.a{constructor(){super(s.b,u.a,l.a)}offset(e,t,n){var a,i;const{direction:o,position:m}=n.getCamera(),f=t.getComponent(u.a),v=t.getComponent(s.b),w=t.getComponent(l.a),[b,x,M,,E]=n.hitScan("collision",o.x,o.y,m.x,m.y,m.z,((null===(a=t.getComponent(c.a))||void 0===a?void 0:a.size.x)||0)/2+((null===(i=t.getComponent(p.a))||void 0===i?void 0:i.length)||1),[t.getID()]),_=v.keys.use>0&&v.keys.use!==v.presss.use,C=-1!==b&&-1!==x&&-1!==M&&null===E,T=-1!==b&&-1!==x&&-1!==M&&null!==E;f.exec=!1;let S=-1,k=-1,O=-1,A=null,L=-1;if(C){const[e,a,i]=(0,h.r)(o.x,o.y,0,0,1/256);S=Math.floor(b+e),k=Math.floor(x+a),O=Math.floor(M+i),A=n.getVoxel(S,k,O),(0,r.w)(A)?L=0:(0,r.x)(A)&&w.value.hasOwnProperty("key-red")&&(0,l.e)(t,"key-red")>0?L=1:(0,r.v)(A)&&w.value.hasOwnProperty("key-blue")&&(0,l.e)(t,"key-blue")>0?L=2:(0,r.y)(A)&&w.value.hasOwnProperty("key-yellow")&&(0,l.e)(t,"key-yellow")>0&&(L=3)}const P=-1!==L,I=T&&!(null==E||!E.hasComponent(d.a));if(f.hasDoorMessage=P,v.isWaitActive=P||I,(0,g.b)(t,n)){if(_)if(null!==E&&I)v.activeEntity=E,v.activeEntity.getComponent(d.a).enable=!0;else if(C&&null!==A){let e=!1;switch(L){case 0:y(S,k,O,n,r.w),e=!0;break;case 1:y(S,k,O,n,r.x),e=!0;break;case 2:y(S,k,O,n,r.v),e=!0;break;case 3:y(S,k,O,n,r.y),e=!0}e?(n.createSound("./asset/sound/player/open.mp3",null,"player-door-open").play(),f.exec=!0):n.createSound(r.b[Math.floor(r.b.length*Math.random())],null,"player-door-lock").play()}}else v.activeEntity=null}}a()}catch(w){a(w)}}))},(e,t,n)=>{"use strict";n.d(t,{a:()=>y});n(7),n(1),n(2);var a=n(33),i=n(64),o=n(52),s=n(9),r=n(48),l=n(6),h=n(0),c=n(26),u=n(44),p=n(8),d=n(49),g=n(57),m=n(67),f=n(51);class y extends m.a{constructor(){super(o.a,s.b,l.a,u.a)}movable(e,t,n){var m,y,v,w,b,x,M,E,_,C,T,S,k,O;const{position:A,direction:L}=t,P=t.getComponent(o.a),I=t.getComponent(s.b),N=t.getComponent(l.a),R=t.getComponent(u.a);let W=0,z=0;P.exec=!1,P.can=!1;let D=!1;I.isAir||I.isHookAccel||null!==(m=t.getComponent(i.a))&&void 0!==m&&m.exec||null!==(y=t.getComponent(r.a))&&void 0!==y&&y.exec||null!==(v=t.getComponent(f.a))&&void 0!==v&&v.exec||null!==(w=t.getComponent(a.a))&&void 0!==w&&w.exec||(I.keys["auto-lean"]?(W=-I.axes.x.x,z=I.axes.x.y,P.exec=!0):I.keys["lean-right"]?(W=1,P.exec=!0):I.keys["lean-left"]&&(W=-1,P.exec=!0),D=!0);const F=n.getCamera(),U=-1!==P.oldPosition.x?P.oldPosition.x:A.x,H=-1!==P.oldPosition.y?P.oldPosition.y:A.y,B=-1!==P.oldPosition.z?P.oldPosition.z:A.z;if(P.exec?P.startDir=-1===P.startDir?F.direction.x:P.startDir:P.startDir=-1,t.hasComponent(g.a)&&0===W&&0===z&&(0,h.h)(P.startDir,F.direction.x)<Math.PI/2){const e=t.getComponent(g.a);if(n.hasHitScanVoxel(P.startDir,0,U,H+N.size.y/4,B,e.length+N.size.x/2)){const e=2;let a=0,i=0,o=!1;if(t.hasComponent(d.a)){const e=t.getComponent(d.a);a=e.cluchSizeY,i=e.standSizeY,o=e.enableCluch}if(0===W&&(o?n.hasHitScanVoxel(P.startDir,0,U,H+i/2+i/4,B,e+N.size.x/2)||(z=1):n.hasHitScanVoxel(P.startDir,0,U,H+a/2,B,e+N.size.x/2)||(z=-1)),0===z){const[i,o]=(0,h.q)(P.startDir,P.move.x,0),s=!n.hasHitScanVoxel(P.startDir,0,U-i,t.position.y+a,B-o,e+N.size.x/2),r=!n.hasHitScanVoxel(P.startDir,0,U+i,t.position.y+a,B+o,e+N.size.x/2);if(s&&r){const[t,,a]=n.hitScanVoxel(P.startDir,0,U,F.position.y,B,e+N.size.x/2),[i,,o]=n.hitScanVoxel((0,h.u)(P.startDir),0,t,F.position.y,a,e+N.size.x/2);let s=0;switch((0,h.u)(P.startDir)){case 0:s=o%1;break;case Math.PI:s=1-o%1;break;case h.b:s=1-i%1;break;case 3*h.b:s=i%1}W=s>.5?1:-1}else s!==r&&(s?W=1:r&&(W=-1))}I.keys["auto-lean"]||0===W&&0===z||(W=0,z=0,P.can=D)}}if(P.exec&&0!==W&&(-1===P.oldPosition.x&&-1===P.oldPosition.y&&-1===P.oldPosition.z?(t.position.x+=R.position.x,t.position.z+=R.position.z,R.position.x=0,R.position.z=0,P.oldPosition.x=t.position.x,P.oldPosition.y=t.position.y,P.oldPosition.z=t.position.z,P.diffPosition.x=t.position.x-P.oldPosition.x,P.diffPosition.y=t.position.y-P.oldPosition.y,P.diffPosition.z=t.position.z-P.oldPosition.z):(P.oldPosition.x=t.position.x-P.diffPosition.x,P.oldPosition.y=t.position.y-P.diffPosition.y,P.oldPosition.z=t.position.z-P.diffPosition.z)),P.isGround=-1!==P.oldPosition.x&&-1!==P.oldPosition.y&&-1!==P.oldPosition.z?n.hasBlockScaleVoxel(P.oldPosition.x,P.oldPosition.y-.001,P.oldPosition.z,(null===(b=t.getComponent(l.a))||void 0===b?void 0:b.size.x)||.001,.001):n.hasBlockScaleVoxel(A.x+P.moveValue.x,A.y+P.moveValue.y-.001,A.z+P.moveValue.z,(null===(x=t.getComponent(l.a))||void 0===x?void 0:x.size.x)||.001,.001),P.isHitStand=-1!==P.oldPosition.x&&-1!==P.oldPosition.y&&-1!==P.oldPosition.z?n.hasBlockScaleVoxel(P.oldPosition.x,P.oldPosition.y+((null===(M=t.getComponent(d.a))||void 0===M?void 0:M.standSizeY)||0),P.oldPosition.z,(null===(E=t.getComponent(l.a))||void 0===E?void 0:E.size.x)||.001,.001):n.hasBlockScaleVoxel(A.x+P.moveValue.x,A.y+P.moveValue.y+((null===(_=t.getComponent(d.a))||void 0===_?void 0:_.standSizeY)||0),A.z+P.moveValue.z,(null===(C=t.getComponent(l.a))||void 0===C?void 0:C.size.x)||.001,.001),P.isHitCluch=-1!==P.oldPosition.x&&-1!==P.oldPosition.y&&-1!==P.oldPosition.z?n.hasBlockScaleVoxel(P.oldPosition.x,P.oldPosition.y+((null===(T=t.getComponent(d.a))||void 0===T?void 0:T.cluchSizeY)||0),P.oldPosition.z,(null===(S=t.getComponent(l.a))||void 0===S?void 0:S.size.x)||.001,.001):n.hasBlockScaleVoxel(A.x+P.moveValue.x,A.y+P.moveValue.y+((null===(k=t.getComponent(d.a))||void 0===k?void 0:k.cluchSizeY)||0),A.z+P.moveValue.z,(null===(O=t.getComponent(l.a))||void 0===O?void 0:O.size.x)||.001,.001),P.isGround?0!==P.value.x&&(P.exec=!0):(P.exec=!1,W=0),0===W){-1!==P.oldPosition.x&&-1!==P.oldPosition.z&&(P.moveValue.x=P.oldPosition.x-t.position.x,P.moveValue.z=P.oldPosition.z-t.position.z,P.movePar=Math.abs(P.moveValue.x)+Math.abs(P.moveValue.z),P.oldPosition.x=-1,P.oldPosition.y=-1,P.oldPosition.z=-1);const n=t.position.x,a=t.position.z;t.position.x=(0,h.x)(t.position.x,t.position.x+P.moveValue.x,.25*e),t.position.z=(0,h.x)(t.position.z,t.position.z+P.moveValue.z,.25*e),P.moveValue.x-=t.position.x-n,P.moveValue.z-=t.position.z-a,R.position.x=(0,p.c)(P.moveValue.x,0,100),R.position.z=(0,p.c)(P.moveValue.z,0,100);const i=(0,p.c)(0===P.movePar?0:(Math.abs(R.position.x)+Math.abs(R.position.z))/P.movePar,0);P.value.x=i}else{const a=t.direction.x+h.b*Math.sign(W),i=5;let o=1/0,s=o;for(let e=0,t=i-1|0;e<t;e=e+1|0){const[,,,t]=n.hitScanVoxel(a,0,P.oldPosition.x,P.oldPosition.y+N.size.y/i*(e+1),P.oldPosition.z,N.size.x);-1!==t&&(o=Math.min(o,t),s=Math.max(0,o-N.size.x/2))}const[,,,r,l]=n.hitScanBold("collision",a,0,P.oldPosition.x,P.oldPosition.y+N.size.y/2,P.oldPosition.z,N.size.x,N.size.x/2+Math.abs(W),t.getNames());var G;if(-1!==r&&null!==l)o=r,s=Math.max(0,o-((null===(G=t.getComponent(c.a))||void 0===G?void 0:G.size.x)||0)/2);const u=Math.min(s,P.move.x,Math.abs(W));P.value.x=u/P.move.x*Math.sign(W),t.position.x=(0,h.x)(t.position.x,P.oldPosition.x+Math.cos(a)*u,.25*e),t.position.z=(0,h.x)(t.position.z,P.oldPosition.z+Math.sin(a)*u,.25*e),R.position.x=(0,p.c)(P.oldPosition.x-t.position.x,0,100),R.position.z=(0,p.c)(P.oldPosition.z-t.position.z,0,100),P.diffPosition.x=t.position.x-P.oldPosition.x,P.diffPosition.z=t.position.z-P.oldPosition.z}const Y=z;P.value.y=Y}}},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>p});var i=n(9),o=n(352),s=n(464),r=n(156),l=n(334),h=n(27),c=n(54),u=e([h]);h=(u.then?(await u)():u)[0];class p extends l.a{constructor(){super(o.a)}additional(e,t,n){var a,l,u,p;const d=n instanceof h.a?n.getPlayer():null,g=t.getComponent(o.a),m=n instanceof h.a&&n.getGameMode()===c.a.HORDE;-1!==((null==d||null===(a=d.getComponent(i.b))||void 0===a?void 0:a.goleTime)||-1)||-1!==((null==d||null===(l=d.getComponent(i.b))||void 0===l?void 0:l.deathTime)||-1)||null!=d&&null!==(u=d.getComponent(i.b).activeEntity)&&void 0!==u&&u.hasComponent(r.a)||m&&(null===d||null===(p=d.getComponent(i.b))||void 0===p||!p.isSelectHandWeapon)||(t.direction.y+=((0,s.a)(t.direction.y)?g.daytimeSpeed:g.nightSpeed)*e)}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.d(t,{a:()=>i});var a=n(0);function i(e){const t=function(e){return(0,a.t)(e+3*a.b)}(e);return t<3*a.b+.1*a.b&&t>a.b-.1*a.b}},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>E});n(1),n(2);var i=n(13),o=n(263),s=n(39),r=n(127),l=n(9),h=n(50),c=n(6),u=n(0),p=n(505),d=n(41),g=n(503),m=n(10),f=n(5),y=n(4),v=n(27),w=n(47),b=n(26),x=n(58),M=e([h,f,v,w,x]);[h,f,v,w,x]=M.then?(await M)():M;class E extends y.a{constructor(e){var t,n,a;super(r.a),a=void 0,(n="setting")in(t=this)?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,this.setting=e}offset(e,t,n){const a=performance.now();if(!(n instanceof v.a))return;const y=n.getPlayer();if(!(y instanceof m.a&&null!=y&&y.hasComponent(l.b)&&null!=y&&y.hasComponent(s.a)))return;if(!(0,x.b)(y,n)&&!y.getComponent(l.b).isSelectHandWeapon)return;const M=t.getComponent(r.a);if(M.time>=M.noPickupTime){var E,_;const{position:e}=t,v=(null===(E=y.getComponent(c.a))||void 0===E?void 0:E.size)||new u.f,[x,C]=(0,u.n)(y.position.x,y.position.y+1*v.y,y.position.z,e.x,e.y+.25,e.z),[T,S]=(0,u.n)(y.position.x,y.position.y+.5*v.y,y.position.z,e.x,e.y+.25,e.z),[k,O]=(0,u.n)(y.position.x,y.position.y+0*v.y,y.position.z,e.x,e.y+.25,e.z),A=(0,u.p)(y.position.x,y.position.y+1*v.y,y.position.z,e.x,e.y+.25,e.z),L=(0,u.p)(y.position.x,y.position.y+.5*v.y,y.position.z,e.x,e.y+.25,e.z),P=(0,u.p)(y.position.x,y.position.y+0*v.y,y.position.z,e.x,e.y+.25,e.z),I=n.getPlayer();if(-1===((null==I||null===(_=I.getComponent(l.b))||void 0===_?void 0:_.goleTime)||-1)&&(A<v.x/2+1.25||L<v.x/2+1.25||P<v.x/2+1.25)&&(t.hasComponent(o.a)||!n.hasHitScanVoxel(x,C,e.x,e.y+.25,e.z,A)||!n.hasHitScanVoxel(T,S,e.x,e.y+.25,e.z,L)||!n.hasHitScanVoxel(k,O,e.x,e.y+.25,e.z,P))){const e=y.getComponent(l.b);let o=!1,v=!1;for(const t in M.items){if(0===(0,s.e)(y,"combo")&&"gauge"===t)continue;const a=M.items[t];if("number"==typeof a){const e=(0,s.e)(y,t);if(e>=(0,s.d)(y,t))continue;const n=e+a;if(M.isPartPick)if((0,s.d)(y,t)>=n)(0,s.h)(y,t,n),delete M.items[t];else{const e=n-(0,s.d)(y,t);(0,s.h)(y,t,(0,s.d)(y,t)),M.items[t]=e}else(0,s.d)(y,t)>e&&((0,s.h)(y,t,n),delete M.items[t]);switch(M.isOverPick&&delete M.items[t],v=!0,t){case"health":if(a<10)break}}else if("string"==typeof a){const l=(0,s.c)(y,t,null),x=null===(0,s.c)(y,"sidearm",null)&&null===(0,s.c)(y,"machingun",null)&&null===(0,s.c)(y,"shotgun",null)&&null===(0,s.c)(y,"launcher",null)&&null===(0,s.c)(y,"plasmagun",null),E=!e.isWaitActive&&null===e.activeEntity&&e.keys.use>0&&e.keys.use!==e.presss.use&&l!==a;if(!e.isPick&&E||null===l||M.override||x){if(y.hasComponent(h.a)){const e=y.getComponent(h.a);if(M.override||null===l||"string"!=typeof l){if(x){const a=n.getControlManager().getInputType();"gamepad"===a||"touchpad"===a?e.right=t:e.left=t}}else{(0,s.c)(y,e.right,null)===l&&(e.right=t),(0,s.c)(y,e.left,null)===l&&(e.left=t);const a={};a[t]=l;const o=new m.a("item weapon ".concat(l),new r.a(!1,!0,.5,a,"player-pickup-weapon",f.p),new g.a(w.u[l].itemMaterial,2),new p.a(!0,!1,!0,.5),new i.a(.025,0,.025,0),new c.a(.75,.375),new b.a(.75,.375,["player","enemy"]),new d.a(1)),h=n.getCamera();o.position.x=h.position.x,o.position.y=h.position.y,o.position.z=h.position.z;const v=o.getComponent(i.a),[x,M,E]=(0,u.r)(h.direction.x,h.direction.y,0,0,.1);v.value.x=x,v.value.y=M,v.value.z=E,n.addEntitys(o)}}(0,s.g)(y,t,a),delete M.items[t],v=!0,e.isPick=!0,o=!0}else l===a||e.isPick||(e.pickMessage="press (".concat(n.getControlManager().getKey("use",n.getControlManager().getInputType()),") to change ").concat(a),e.isPick=!0)}o=o||M.override||0===Object.keys(M.items).length}const x=M.pickUpSounds!==f.n&&M.pickUpSounds!==f.k||this.setting.hasEatSound()?M.pickUpSounds:f.m;if(v){const t=x[x.length*Math.random()|0];n.createSound(t,null,M.soundNameSpace).play(),e.pickupTime=a}(M.isPartPick&&M.isOverPick||o)&&t.remove()}}M.time+=e/60}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.d(t,{a:()=>o});var a=n(149),i=n(4);class o extends i.a{constructor(){super(a.a)}offset(e,t,n){const i=t.getComponent(a.a);var o;(i.init||n.hasSound(i.namespace)||(n.createSound(i.sounds[i.sounds.length*Math.random()|0],t,i.namespace).setVolume(i.volume).play(i.loop),i.init=!0),i.unliveStop&&!t.hasLive()&&n.hasSound(i.namespace))&&(null===(o=n.getSound(i.namespace))||void 0===o||o.stop())}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>o});var a=n(352),i=n(145);class o extends i.a{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(e,new a.a(t,n))}}},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>x});n(1),n(2);var i=n(39),o=n(9),s=n(156),r=n(226),l=n(503),h=n(5),c=n(109),u=n(4),p=n(81),d=n(47),g=n(127),m=n(27),f=n(253),y=n(54),v=n(255),w=n(0),b=e([h,c,p,d,m,f]);[h,c,p,d,m,f]=b.then?(await b)():b;class x extends u.a{constructor(){super(s.a,r.a)}createShopWheelMenu(e,t,n,a,o,s,r,l){const{position:h,direction:c}=t;return new p.c(s,e,!1,(()=>!!t.hasComponent(i.a)&&(!(t.getComponent(i.a).value.hasOwnProperty(o)&&"number"==typeof t.getComponent(i.a).value[o].value&&(0,i.e)(t,o)>=(0,i.d)(t,o)||d.t.some((e=>"string"==typeof t.getComponent(i.a).value[e].value&&t.getComponent(i.a).value[e].value===o)))&&(!((0,i.e)(t,"meat")<r)||"low"))),(()=>"".concat((0,v.a)(r,"0",4),"kg")),(()=>{if((0,i.b)(t,"useshoppoint",r),(0,i.e)(t,"meat")>=r){(0,i.b)(t,"meat",-r),(0,i.b)(n,"meat",r);const e=l.spawn(h.x,h.y,h.z,c.x,a);null!=e&&e.hasComponent(g.a)&&(e.getComponent(g.a).override=!0),a.createSound("./asset/sound/menu/buy.mp3",null,"player-buy").play()}}))}cancel(e,t){e.activeEntity=null,t.getComponent(r.a).enable=!1}offset(e,t,n){const a=t.getComponent(s.a),i=t.getComponent(r.a),u=n.getSun(),d=n instanceof m.a&&n.getGameMode()===y.a.CAMPAING&&u.direction.y%w.a<Math.PI-.1*Math.PI;if(t.hasComponent(l.a)){t.getComponent(l.a).material=d?h.h.OBJECT_SHOP_SALE:h.h.OBJECT_SHOP}if(i.enable&&n instanceof m.a){const e=n.getPlayer();if(null!=e&&e.hasComponent(o.b)){var g;const[,,,,i]=(0,f.b)(e),r=e.getComponent(o.b),l=e.getComponent(p.a);if(a.sale=n instanceof m.a&&(n.getGameMode()===y.a.PRACTICE||n.hasPreview())?0:Math.ceil((d?.5:1)*i*100)/100,r.keys.cancel>0&&r.keys.cancel!==r.presss.cancel&&(a.index>0?a.index=0:this.cancel(r,t)),l.enable&&r.keys["use-cancel"]>0&&r.keys["use-cancel"]!==r.presss["use-cancel"]&&(a.index=0,this.cancel(r,t)),null!==(g=r.activeEntity)&&void 0!==g&&g.hasComponent(s.a)){l.enable=!0,l.axisType="x",l.themeColor=null;const i=["next"],o=a.sale;switch(a.index){case 0:l.menus.push(new p.c("exit",i,!1,(()=>!0),(()=>""),(()=>this.cancel(r,t))),new p.c("item",i,!1,(()=>!0),(()=>"open"),(()=>a.index=1)),new p.c("hand",i,!1,(()=>!0),(()=>"open"),(()=>a.index=2)),new p.c("sidearm",i,!1,(()=>!0),(()=>"open"),(()=>a.index=3)),new p.c("magazine",i,!1,(()=>!0),(()=>"open"),(()=>a.index=4)),new p.c("shell",i,!1,(()=>!0),(()=>"open"),(()=>a.index=5)),new p.c("rocket",i,!1,(()=>!0),(()=>"open"),(()=>a.index=6)),new p.c("cell",i,!1,(()=>!0),(()=>"open"),(()=>a.index=7)));break;case 1:l.menus.push(new p.c("back",i,!1,(()=>!0),(()=>""),(()=>a.index=0)),this.createShopWheelMenu(i,e,r.activeEntity,n,"health","health (200)",1e4*o,c.a.ITEM_HEALTH_ELIXIR),this.createShopWheelMenu(i,e,r.activeEntity,n,"armor","armor (100)",25e3*o,c.a.ITEM_ARMOR_ELIXIR),this.createShopWheelMenu(i,e,r.activeEntity,n,"energy","energy (100)",1e4*o,c.a.ITEM_ENERGY_ELIXIR));break;case 2:l.menus.push(new p.c("back",i,!1,(()=>!0),(()=>""),(()=>a.index=0)),this.createShopWheelMenu(i,e,r.activeEntity,n,"punch","punch",1e4*o,c.a.ITEM_PUNCH),this.createShopWheelMenu(i,e,r.activeEntity,n,"slowball","slowball",25e3*o,c.a.ITEM_SLOWBALL),this.createShopWheelMenu(i,e,r.activeEntity,n,"monocular","monocular",5e4*o,c.a.ITEM_BINOCULARS),this.createShopWheelMenu(i,e,r.activeEntity,n,"energyshield","energyshield",75e3*o,c.a.ITEM_ENERGYSHIELD),this.createShopWheelMenu(i,e,r.activeEntity,n,"combobooster","combobooster",1e5*o,c.a.ITEM_COMBOBOOSTER),this.createShopWheelMenu(i,e,r.activeEntity,n,"freezegrenade","freezegrenade",15e4*o,c.a.ITEM_FROZEN_GRENADE),this.createShopWheelMenu(i,e,r.activeEntity,n,"hookshot","hookshot",2e5*o,c.a.ITEM_HOOKSHOT));break;case 3:l.menus.push(new p.c("back",i,!1,(()=>!0),(()=>""),(()=>a.index=0)),this.createShopWheelMenu(i,e,r.activeEntity,n,"pistol","pistol",1e4*o,c.a.ITEM_PISTOL),this.createShopWheelMenu(i,e,r.activeEntity,n,"handcannon","handcannon",5e4*o,c.a.ITEM_HANDCANNON));break;case 4:l.menus.push(new p.c("back",i,!1,(()=>!0),(()=>""),(()=>a.index=0)),this.createShopWheelMenu(i,e,r.activeEntity,n,"magazine","magazine (30)",2500*o,c.a.ITEM_MAGAZINE),this.createShopWheelMenu(i,e,r.activeEntity,n,"machingun","machingun",25e3*o,c.a.ITEM_MACHINGUN),this.createShopWheelMenu(i,e,r.activeEntity,n,"chainshotgun","chainshotgun",5e4*o,c.a.ITEM_CHAINSHOTGUN));break;case 5:l.menus.push(new p.c("back",i,!1,(()=>!0),(()=>""),(()=>a.index=0)),this.createShopWheelMenu(i,e,r.activeEntity,n,"shell","shell (6)",3e3*o,c.a.ITEM_SHELL),this.createShopWheelMenu(i,e,r.activeEntity,n,"shotgun","shotgun",5e4*o,c.a.ITEM_SHOTGUN),this.createShopWheelMenu(i,e,r.activeEntity,n,"heavycannon","heavycannon",75e3*o,c.a.ITEM_HEAVYCANNON));break;case 6:l.menus.push(new p.c("back",i,!1,(()=>!0),(()=>""),(()=>a.index=0)),this.createShopWheelMenu(i,e,r.activeEntity,n,"rocket","rocket (1)",5e3*o,c.a.ITEM_ROCKET),this.createShopWheelMenu(i,e,r.activeEntity,n,"launcher","launcher",75e3*o,c.a.ITEM_LAUNCHER),this.createShopWheelMenu(i,e,r.activeEntity,n,"clusterbow","clusterbow",1e5*o,c.a.ITEM_CLUSTERBOW));break;case 7:l.menus.push(new p.c("back",i,!1,(()=>!0),(()=>""),(()=>a.index=0)),this.createShopWheelMenu(i,e,r.activeEntity,n,"cell","cell (20)",4e3*o,c.a.ITEM_CELL),this.createShopWheelMenu(i,e,r.activeEntity,n,"plasmagun","plasmagun",5e4*o,c.a.ITEM_PLASMAGUN),this.createShopWheelMenu(i,e,r.activeEntity,n,"plasmasmg","plasmasmg",75e3*o,c.a.ITEM_PLASMASMG))}}}}}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>m});n(1),n(2);var i=n(53),o=n(258),s=n(503),r=n(504),l=n(30),h=n(5),c=n(4),u=n(62),p=n(39),d=n(0),g=e([h]);h=(g.then?(await g)():g)[0];class m extends c.a{constructor(){super(o.a,r.a,u.a,s.a)}offset(e,t,n){const a=t.getComponent(r.a).value;if(null!==a)if(!a.hasLive()||(0,p.e)(a,"health")<=0)(0,p.h)(t,"health",0);else{const e=t.getComponent(s.a);if(a.hasComponent(i.a)){var o;const t=a.getComponent(i.a);-1===t.blowStartTime&&-1!==t.painStartTime&&t.time-t.painStartTime<t.painTime?e.material=h.h.ENEMY_GUY_HELMET_PAIN:e.material=h.h.ENEMY_GUY_HELMET_STILL,e.flip.x=!(null===(o=a.getComponent(s.a))||void 0===o||!o.flip.x)}if(a.hasComponent(l.a)){const e=t.getComponent(u.a),i=a.getComponent(l.a),o=n.getCamera(),[s,r]=(0,d.q)(o.direction.x,0,.1);e.offset.x=-s,e.offset.y=i.size.y,e.offset.z=-r}}}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>m});var i=n(261),o=n(8),s=n(10),r=n(4),l=n(41),h=n(0),c=n(5),u=n(503),p=n(505),d=n(68),g=e([c]);c=(g.then?(await g)():g)[0];class m extends r.a{constructor(){super(i.a,d.a)}offset(e,t,n){const a=t.getComponent(i.a),r=t.getComponent(d.a);var g;(null===a.gauge&&(a.gauge=new s.a("spawner-gauge",new u.a(c.h.NONE,1),new p.a(!0,!0,!0)),a.gauge.position.x=t.position.x,a.gauge.position.y=t.position.y+.5,a.gauge.position.z=t.position.z,n.addEntitys(a.gauge),r.value.push(a.gauge)),null!==a.spawn&&a.spawn.hasLive()||(a.time+=(0,o.c)(e/60,0)),null===a.spawn||!a.spawn.hasLive()&&a.time>a.interval)&&(a.spawn=a.spawner.spawn(t.position.x,t.position.y,t.position.z,t.direction.x,n),n.createSound("./asset/sound/item/spawn.mp3",t,"spawn-".concat(t.getID())).play(),a.time=0,a.hoverTime=0,a.oldHoverPositionY=-1,a.isHoverAnimation&&null!==(g=a.spawn)&&void 0!==g&&g.hasComponent(l.a)&&a.spawn.removeComponent(l.a),null!==a.spawn&&r.value.push(a.spawn));let m=null;if(null!==a.spawn&&a.spawn.hasLive()){if(a.isHoverAnimation){const n=1,i=.125;a.hoverTime>=n&&(a.hoverTime%=n);const s=a.hoverTime/n,r=Math.cos(s*h.a)*i;let l=a.oldHoverPositionY;-1===l&&(l=0),null!==a.spawn&&(a.spawn.position.y=t.position.y+.375+l+r),a.oldHoverPositionY=r,a.hoverTime+=(0,o.c)(e/60,0)}m=c.h.NONE}else{const e=[c.h.EFFECT_SPAWNER_GAUGE1,c.h.EFFECT_SPAWNER_GAUGE2,c.h.EFFECT_SPAWNER_GAUGE3,c.h.EFFECT_SPAWNER_GAUGE4,c.h.EFFECT_SPAWNER_GAUGE5,c.h.EFFECT_SPAWNER_GAUGE6,c.h.EFFECT_SPAWNER_GAUGE7,c.h.EFFECT_SPAWNER_GAUGE8,c.h.EFFECT_SPAWNER_GAUGE9,c.h.EFFECT_SPAWNER_GAUGE10,c.h.EFFECT_SPAWNER_GAUGE11,c.h.EFFECT_SPAWNER_GAUGE12,c.h.EFFECT_SPAWNER_GAUGE13,c.h.EFFECT_SPAWNER_GAUGE14,c.h.EFFECT_SPAWNER_GAUGE15,c.h.EFFECT_SPAWNER_GAUGE16];m=e[Math.floor(Math.max(0,Math.min(1,a.time/a.interval))*e.length)]}null!==m&&a.gauge.hasComponent(u.a)&&(a.gauge.getComponent(u.a).material=m)}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>u});var i=n(187),o=n(227),s=n(9),r=n(226),l=n(4),h=n(27),c=e([h]);h=(c.then?(await c)():c)[0];class u extends l.a{constructor(){super(o.a,r.a)}cancel(e,t){t.getComponent(r.a).enable=!1,e.activeEntity=null}offset(e,t,n){if(!(n instanceof h.a))return;const a=n.getPlayer();if(null!=a&&a.hasComponent(s.b)){const e=a.getComponent(s.b);if(e.activeEntity===t){const a=t.getComponent(o.a);if(a.editor!==n.getCamera()){const e=n.getCamera();n.setCamera(a.editor),a.camera=e}if(null!==a.camera&&(a.editor.fov=a.camera.fov,a.editor.zoom=a.camera.zoom),a.editor.hasComponent(i.a)){const o=a.editor.getComponent(i.a);o.exit&&(null!==a.camera&&n.setCamera(a.camera),this.cancel(e,t),o.exit=!1)}}}}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>E});n(1),n(2);var i=n(4),o=n(32),s=n(187),r=n(0),l=n(31),h=n(90),c=n(5),u=n(109),p=n(9),d=n(227),g=n(261),m=n(27),f=n(8),y=n(26),v=n(107),w=n(81),b=n(58),x=e([o,c,u,m,w,b]);function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}[o,c,u,m,w,b]=x.then?(await x)():x;class E extends i.a{constructor(e,t,n){super(s.a,l.a,w.a),M(this,"setting",void 0),M(this,"scenes",void 0),M(this,"controls",void 0),M(this,"keys",{}),M(this,"presss",{}),M(this,"toggles",{}),M(this,"releases",{}),M(this,"updateButtons",{}),M(this,"keyWalk",new r.e(0,0)),M(this,"walk",new r.e(0,0)),M(this,"look",new r.e(0,0)),M(this,"oldWalk",new r.e(0,0)),M(this,"oldLook",new r.e(0,0)),M(this,"lookInputType",null),M(this,"isUpdateWalkToKeyboard",!0),M(this,"isAxesUpdateWalkX",!1),M(this,"isAxesUpdateWalkY",!1),M(this,"isAxesUpdateLookX",!1),M(this,"isAxesUpdateLookY",!1),M(this,"isResetLookX",!1),M(this,"isResetLookY",!1),M(this,"isResetWalkX",!1),M(this,"isResetWalkY",!1),M(this,"lockTime",0),M(this,"activeSceneName","none"),this.setting=e,this.scenes=t,this.controls=n,n.axes(((e,a,i)=>{var o;if(!(0,h.b)()&&t.getActiveSceneName()===this.activeSceneName&&null!==(o=t.getScene(this.activeSceneName))&&void 0!==o&&o.hasRun())switch(e){case"x":this.isAxesUpdateWalkX?(this.walk.x=Math.abs(this.walk.x)>Math.abs(a)?this.walk.x:-a,this.oldWalk.x=Math.abs(this.oldWalk.x)<Math.abs(a)?this.oldWalk.x:-a,this.isResetWalkX=0===a):0===a?(this.walk.x=0,this.oldWalk.x=0):(this.walk.x=-a,this.oldWalk.x=-a,this.isAxesUpdateWalkX=!0),this.isAxesUpdateWalkY?(this.walk.y=Math.abs(this.walk.y)>Math.abs(i)?this.walk.y:i,this.oldWalk.y=Math.abs(this.oldWalk.y)<Math.abs(i)?this.oldWalk.y:i,this.isResetWalkY=0===i):0===i?(this.walk.y=0,this.oldWalk.y=0):(this.walk.y=i,this.oldWalk.y=i,this.isAxesUpdateWalkY=!0);break;case"y":this.lookInputType=n.getInputType(),this.isAxesUpdateLookX?(this.look.x=Math.abs(this.look.x)>Math.abs(a)?this.look.x:a,this.oldLook.x=Math.abs(this.oldLook.x)<Math.abs(a)?this.oldLook.x:a,"gamepad"===this.lookInputType?this.isResetLookX=0===a:this.isResetLookX=!0):0===a?(this.look.x=0,this.oldLook.x=0):(this.look.x=a,this.oldLook.x=a,this.isAxesUpdateLookX=!0),this.isAxesUpdateLookY?(this.look.y=Math.abs(this.look.y)>Math.abs(i)?this.look.y:i,this.oldLook.y=Math.abs(this.oldLook.y)<Math.abs(i)?this.oldLook.y:i,"gamepad"===this.lookInputType?this.isResetLookY=0===i:this.isResetLookY=!0):0===i?(this.look.y=0,this.oldLook.y=0):(this.look.y=i,this.oldLook.y=i,this.isAxesUpdateLookY=!0)}else this.walk.x=0,this.walk.y=0,this.look.x=0,this.look.y=0,this.oldWalk.x=0,this.oldWalk.y=0,this.oldLook.x=0,this.oldLook.y=0})),n.press(((e,n)=>{var a;const i=performance.now();if(!(0,h.b)()&&t.getActiveSceneName()===this.activeSceneName&&null!==(a=t.getScene(this.activeSceneName))&&void 0!==a&&a.hasRun()){if(-1!==e.indexOf("gamepad_")||-1!==e.indexOf("touchpad_")||(0,v.b)()){let a=!1;this.updateButtons[e]?this.releases[e]||n||(this.releases[e]=!0):(this.toggles[e]!==n&&(a=!0),this.enablePresss(e,n,a,t,i),this.toggles[e]=n,this.updateButtons[e]=!0)}}else{for(const e in this.keys)this.keys[e]=0;for(const e in this.presss)this.presss[e]=0;for(const e in this.releases)this.enablePresss(e,!1,!1,t,i),delete this.releases[e];for(const e in this.updateButtons)delete this.updateButtons[e]}}))}enablePresss(e,t,n,a,i){const o=this.controls;switch(!0){case o.hasKey("forward",e):this.keyWalk.y=t?1:1===this.keyWalk.y?0:this.keyWalk.y,this.isUpdateWalkToKeyboard=!0;break;case o.hasKey("back",e):this.keyWalk.y=t?-1:-1===this.keyWalk.y?0:this.keyWalk.y,this.isUpdateWalkToKeyboard=!0;break;case o.hasKey("left",e):this.keyWalk.x=t?1:1===this.keyWalk.x?0:this.keyWalk.x,this.isUpdateWalkToKeyboard=!0;break;case o.hasKey("right",e):this.keyWalk.x=t?-1:-1===this.keyWalk.x?0:this.keyWalk.x,this.isUpdateWalkToKeyboard=!0;break;case o.hasKey("weapon-wheel",e):case o.hasKey("weapon-wheel-right",e):case o.hasKey("weapon-wheel-left",e):this.keys.menu=t?i:0;break;case"touchpad_a"===e:case"gamepad_rt"===e:case"mouse_left"===e:this.keys.primary=t?i:0;break;case"touchpad_b"===e:case"gamepad_lt"===e:case"mouse_right"===e:this.keys.secondary=t?i:0;break;case"touchpad_select"===e:case"gamepad_b"===e:case"touchpad"!==o.getInputType()&&o.hasKey("use",e):this.keys.exit=t?i:0}}updateWalk(){const e=Math.min((0,r.o)(this.keyWalk.x,this.keyWalk.y,0,0),1),t=(0,r.m)(this.keyWalk.x,this.keyWalk.y,0,0),n=Math.cos(t)*e,a=Math.sin(t)*e;this.isAxesUpdateWalkX?(this.walk.x=Math.abs(this.walk.x)>Math.abs(n)?this.walk.x:-n,this.oldWalk.x=Math.abs(this.oldWalk.x)<Math.abs(n)?this.oldWalk.x:-n):0===n?(this.walk.x=0,this.oldWalk.x=0):(this.walk.x=n,this.oldWalk.x=n,this.isAxesUpdateWalkX=!0),this.isAxesUpdateWalkY?(this.walk.y=Math.abs(this.walk.y)>Math.abs(a)?this.walk.y:a,this.oldWalk.y=Math.abs(this.oldWalk.y)<Math.abs(a)?this.oldWalk.y:a):0===a?(this.walk.y=0,this.oldWalk.y=0):(this.walk.y=a,this.oldWalk.y=a,this.isAxesUpdateWalkX=!0)}additional(e,t,n){var a;const i=performance.now();if(!(n instanceof m.a))return!1;const o=t.getComponent(s.a);for(const e in this.keys)o.keys[e]=this.keys[e];for(const e in this.presss)o.presss[e]=this.presss[e];const r=n.getPlayer(),l=n.getCamera(),h=n.getControlManager();if(this.activeSceneName=n.getName(),null!==r&&(null===(a=t.getComponent(w.a))||void 0===a||!a.enable)){var c,u;const a=r.getComponent(p.b).activeEntity;if(null!==a&&a.hasComponent(d.a))for(const e in this.keys)o.keys[e]=this.keys[e];else for(const e in this.keys)o.keys[e]=0;if(!o.openMenu&&i-((null===(c=t.getComponent(w.a))||void 0===c?void 0:c.lockTime)||0)>100*((null===(u=t.getComponent(w.a))||void 0===u?void 0:u.lockLockWait)||0)){const t=(0,b.a)(this.setting,h);o.cmda.x=this.look.x*t/l.zoom*(0,f.c)(e/n.getSpeed(),0)*(this.setting.hasInvertX()?-1:1),o.cmda.y=this.look.y*t/l.zoom*(0,f.c)(e/n.getSpeed(),0)*(this.setting.hasInvertY()?-1:1)}else o.cmda.x=0,o.cmda.y=0,o.openMenu?t.hasComponent(w.a)&&(t.getComponent(w.a).lockTime=i):(this.look.x=0,this.look.y=0)}n.getSoundManager().setVolume(1)}offset(e,t,n){if(!(n instanceof m.a))return!1;const{position:a,direction:i}=t,h=t.getComponent(s.a),f=t.getComponent(l.a),v=n.getPlayer(),b=n.getCamera(),x=n.getControlManager();if(h.openMenu=this.keys.menu>0,f.move.x=0,f.move.z=0,f.look.x=0,f.look.y=0,null!==v&&v.hasComponent(p.b)){const e=v.getComponent(p.b).activeEntity;if(null!==e&&e.hasComponent(d.a)){const e=t.getComponent(w.a);if(b.getNames().some((e=>"editor"===e))){const t=e.enable;x.hasStick()!==t&&(x.changeStick("y",t),this.look.x=0,this.look.y=0)}if(h.axes.x.x=Math.min(1,Math.max(-1,this.walk.x)),h.axes.x.y=Math.min(1,Math.max(-1,this.walk.y)),h.axes.y.x=Math.min(1,Math.max(-1,this.look.x)),h.axes.y.y=Math.min(1,Math.max(-1,this.look.y)),h.openMenu){const t=[];e.enable=!0,e.axisType="y",e.themeColor=c.r[this.setting.getTheme()].getColor(),e.menus.push(new w.c("block",t,!0,(()=>!0),(()=>""),(()=>{h.mode=0,h.voxel=c.t.EDIT_BLOCK})),new w.c("door",t,!0,(()=>!0),(()=>""),(()=>{h.mode=0,h.voxel=c.t.DOOR_DEFAULT})),new w.c("target",t,!0,(()=>!0),(()=>""),(()=>{h.mode=1,h.pawn=u.a.SPAWNER_TARGET})),new w.c("health",t,!0,(()=>!0),(()=>""),(()=>{h.mode=1,h.pawn=u.a.SPAWNER_HEALTH_ELIXER})),new w.c("armor",t,!0,(()=>!0),(()=>""),(()=>{h.mode=1,h.pawn=u.a.SPAWNER_ARMOR_ELIXER})),new w.c("energy",t,!0,(()=>!0),(()=>""),(()=>{h.mode=1,h.pawn=u.a.SPAWNER_ENERGY_ELIXER}))),this.lockTime=performance.now()}else e.enable=!1,-1!==e.value&&performance.now()-this.lockTime<175?(h.cmda.x=0,h.cmda.y=0,this.look.x=0,this.look.y=0):this.keys.menu||(i.x+=h.cmda.x,i.y+=h.cmda.y);t.direction.y=Math.max(-r.b,Math.min(r.b,t.direction.y));const[s,l,p,,d]=n.hitScan("range",i.x,i.y,a.x,a.y,a.z,1/0,[t.getID()]),[m,v,E]=(0,r.r)(i.x,i.y,0,0,1/256);let _=Math.floor(s+m),C=Math.floor(l+v),T=Math.floor(p+E);if(!h.openMenu){switch(h.mode){case 0:if(null!==h.voxel&&(!(n instanceof o.a)||!n.hasOutOfWorld(_,C,T))&&this.keys.primary&&this.keys.primary!==this.presss.primary){const[e,t]=(0,r.n)(s,l,p,Math.floor(_)+.5,Math.floor(C)+.5,Math.floor(T)+.5),[,,,,a]=n.hitScanVoxel(e,t,Math.floor(_)+.5,Math.floor(C)+.5,Math.floor(T)+.5,1/0);switch(a){case 1:_-=1;break;case 0:_+=1;break;case 3:C+=1;break;case 2:C-=1;break;case 5:T-=1;break;case 4:T+=1}if(C<35&&(0,o.b)(n.getVoxel(_,C,T),c.u)&&(!(n instanceof o.a)||!n.hasOutOfWorld(_,C,T)))for(let e=0|C;e>=0;e=e-1|0){if("EDIT_ZONE"===n.getVoxel(_,e,T).bottom){n.setVoxel(_,C,T,h.voxel,!0,!0);break}}}break;case 1:if((!(n instanceof o.a)||!n.hasOutOfWorld(_,C,T))&&this.keys.primary&&this.keys.primary!==this.presss.primary){const[e,t]=(0,r.n)(s,l,p,Math.floor(_)+.5,Math.floor(C)+.5,Math.floor(T)+.5),[,,,,a]=n.hitScanVoxel(e,t,Math.floor(_)+.5,Math.floor(C)+.5,Math.floor(T)+.5,1/0);switch(a){case 1:_-=1;break;case 0:_+=1;break;case 3:C+=1;break;case 2:C-=1;break;case 5:T-=1;break;case 4:T+=1}var M;if((!(n instanceof o.a)||!n.hasOutOfWorld(_,C,T))&&(0,o.b)(n.getVoxel(_,C,T),c.u))if(0===n.getEntitysOfRange("range",_+.5,C,T+.5,1,1).filter((e=>e.hasComponent(y.a))).length)null===(M=h.pawn)||void 0===M||M.spawn(_+.5,C,T+.5,0,n)}}if(this.keys.secondary&&this.keys.secondary!==this.presss.secondary)if((null!==d||n instanceof o.a&&n.hasOutOfWorld(_,C,T)||"EDIT_BLOCK"!==n.getVoxel(_,C,T).bottom)&&"DOOR_DEFAULT"!==n.getVoxel(_,C,T).bottom){if(null!==d){if(d.hasComponent(g.a)){const e=d.getComponent(g.a);null!==e.spawn&&e.spawn.remove()}d.remove()}}else{const[e,t,a]=n.getWorldSize(),i=2*n.getMargin()+1;(e>i||t>i||a>i)&&n.setVoxel(_,C,T,c.u,!0,!0)}}h.keys.exit&&h.keys.exit!==this.presss.exit&&(h.openMenu=!1,h.exit=!0),f.move.x=this.walk.x,f.move.z=this.walk.y,f.look.x=t.direction.x,f.look.y=t.direction.y}else{for(const e in this.keys)this.keys[e]=0;this.keyWalk.x=0,this.keyWalk.y=0,this.updateWalk()}}else h.axes.x.x=0,h.axes.x.y=0,h.axes.y.x=0,h.axes.y.y=0;const[E,_,C]=n.getWorldSize();a.x=Math.min(E-1,Math.max(0,a.x)),a.y=Math.min(_-1,Math.max(0,a.y)),a.z=Math.min(C-1,Math.max(0,a.z)),this.isUpdateWalkToKeyboard&&(this.updateWalk(),this.isUpdateWalkToKeyboard=!1),h.cmda.x=0,h.cmda.y=0}preended(e){const t=performance.now();this.isAxesUpdateWalkX=!1,this.isAxesUpdateWalkY=!1,this.isAxesUpdateLookX=!1,this.isAxesUpdateLookY=!1;for(const e in this.updateButtons)this.updateButtons[e]=!1;for(const e in this.keys)this.presss[e]=this.keys[e];for(const e in this.releases)this.enablePresss(e,!1,!1,this.scenes,t),delete this.releases[e];this.walk.x=this.oldWalk.x,this.walk.y=this.oldWalk.y,"gamepad"===this.controls.getInputType()&&(this.look.x=this.oldLook.x,this.look.y=this.oldLook.y),this.isResetWalkX&&(this.walk.x=0,this.oldWalk.x=0,this.isResetWalkX=!1),this.isResetWalkY&&(this.walk.y=0,this.oldWalk.y=0,this.isResetWalkY=!1),this.isResetLookX&&(this.look.x=0,this.oldLook.x=0,this.isResetLookX=!1),this.isResetLookY&&(this.look.y=0,this.oldLook.y=0,this.isResetLookY=!1)}}a()}catch(_){a(_)}}))},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>u});var i=n(9),o=n(4),s=n(0),r=n(144),l=n(8),h=n(58),c=e([h]);h=(c.then?(await c)():c)[0];class u extends o.a{constructor(){super(i.b)}offset(e,t,n){const a=t.getComponent(i.b);a.isPause||a.loading?(-1===a.oldSpeed&&(a.oldSpeed=n.getSpeed()),n.setSpeed(0),(0,r.f)()):((0,r.a)(),-1!==a.oldSpeed&&n.setSpeed(a.oldSpeed),a.oldSpeed=-1,(0,h.b)(t,n)?n.getSpeed()!==a.speed&&n.setSpeed((0,l.c)((0,s.x)(n.getSpeed(),a.speed,.1*e),0,1e3)):n.setSpeed(1))}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.d(t,{a:()=>l});var a=n(504),i=n(30),o=n(341),s=n(62),r=n(4);class l extends r.a{constructor(){super(o.a,a.a,s.a)}offset(e,t,n){const o=t.getComponent(a.a).value;if(null!==o&&o.hasLive()&&o.hasComponent(i.a)){const e=t.getComponent(s.a),n=o.getComponent(i.a);e.offset.y=n.size.y}}}},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>y});n(1),n(2);var i=n(4),o=n(59),s=n(62),r=n(504),l=n(153),h=n(476),c=n(147),u=n(0),p=n(146),d=n(66),g=n(6),m=n(23),f=e([h,c,p,m]);[h,c,p,m]=f.then?(await f)():f;class y extends i.a{constructor(){super(l.a,c.a,o.a)}offset(e,t,n){var a,i;const{position:f}=t,y=t.getComponent(o.a),v=t.getComponent(c.a),w=t.getComponent(l.a),b=null!==(a=y.target)&&void 0!==a&&a.hasComponent(s.a)&&(null===(i=y.target.getComponent(r.a))||void 0===i?void 0:i.value)||y.target;if(null===b||w.init||(w.fixPosition.x=y.hitPosition.x-b.position.x,w.fixPosition.y=y.hitPosition.y-b.position.y,w.fixPosition.z=y.hitPosition.z-b.position.z,w.init=!0),v.isRemove=!1,y.over||null!==w.bullet&&!w.bullet.hasLive())t.remove(),null!==w.bullet&&(w.bullet.hasComponent(o.a)&&w.bullet.hasComponent(d.a)?w.bullet.getComponent(o.a).over=!0:w.bullet.remove());else if(y.hit&&null!==y.attacker){if(null===w.bullet){var x;const e=n.getCamera(),[a,,,,,]=(0,p.b)(y.attacker),i=(v.invert?.045:-.045)/e.fov,o=-.125,s=(null===(x=y.attacker.getComponent(g.a))||void 0===x?void 0:x.size.x)/2||0,[l,c,d]=(0,u.r)(e.direction.x,e.direction.y,a?0:i,o,s),f=new h.a(e.position.x+l,e.position.y+c,e.position.z+d,e.position.x,e.position.y,e.position.z,e.direction.x,e.direction.y,1,v.invert,1/0,0,!1,0,0,0,0,!1,v.damageType,y.target,y.attacker,t instanceof m.a?t.weapon:null,[y.attacker.getID()]);n.addEntitys(f),f.getComponent(r.a).value=t,w.bullet=f}null!==b&&(f.x=b.position.x+w.fixPosition.x,f.y=b.position.y+w.fixPosition.y,f.z=b.position.z+w.fixPosition.z)}}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>c});n(1),n(2);var i=n(23),o=n(5),s=n(66),r=n(257),l=n(504),h=e([i,o]);[i,o]=h.then?(await h)():h;class c extends i.a{constructor(e,t,n,a,i,h,c,u,p,d,g,m,f,y,v,w,b,x){let M=arguments.length>18&&void 0!==arguments[18]?arguments[18]:"ammo",E=arguments.length>20&&void 0!==arguments[20]?arguments[20]:null,_=arguments.length>21&&void 0!==arguments[21]?arguments[21]:null,C=arguments.length>22&&void 0!==arguments[22]?arguments[22]:new Array;super("player-bullet hook",g,d,y,v,b,x,M,e,t,n,a,i,h,c,u,m,0,p,f,0,!1,((e,t,n,a,i,o,s,r,l,h,c)=>null),"chain",0,0,!1,o.h.EFFECT_BULLET_HOOK_HEAD,[o.h.EFFECT_BULLET_HOOK_CHAIN],1,1,1,E,_,"hitbox",["player-hit-bullet","enemy-hit-bullet",...C],new s.a(0,.005,.005,.005,1e-4,1e-4,1e-4,.25,1,0,1),new r.a(Math.PI,1,!0),new l.a)}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.d(t,{a:()=>o});var a=n(68),i=n(4);class o extends i.a{constructor(){super(a.a)}destructor(e,t){if(e.hasComponent(a.a)){const t=e.getComponent(a.a).value;for(;t.length>0;){const e=t.shift()||null;null!==e&&e.hasLive()&&e.remove()}}}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>s});var a=n(4),i=n(345),o=n(0);class s extends a.a{constructor(){super(i.a)}offset(e,t,n){const{position:a}=t,s=t.getComponent(i.a);s.time>=s.speed&&(s.time%=s.speed);const r=s.time,l=Math.cos(r*o.a)*s.height;let h=s.old;-1===h&&(h=0),a.y=a.y-h+l,s.old=l,s.time+=e/60}}},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>u});n(1),n(2);var i=n(504),o=n(0),s=n(4),r=n(346),l=n(9),h=n(27),c=e([h]);h=(c.then?(await c)():c)[0];class u extends s.a{constructor(){super(r.a,i.a)}offset(e,t,n){const a=t.getComponent(i.a).value;if(null===a)return;const{position:s}=t,{position:c}=a,u=t.getComponent(r.a),p=(0,o.p)(c.x,c.y,c.z,s.x,0|s.y,s.z)<u.range;if(null!==u.sound&&p&&u.isHover!==p&&n.createSound(u.sound,null,"message-".concat(t.getID())).setVolume(u.volume).play(),u.isHover=p,!(n instanceof h.a))return;const d=n.getPlayer();if(null!==d&&d.hasComponent(l.b)){const e=d.getComponent(l.b);p&&e.helpMessages.push(...u.message())}}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.d(t,{a:()=>w});n(1),n(2),n(7),n(14),n(15),n(16);var a=n(4),i=n(10),o=n(323),s=n(0),r=n(26),l=n(30),h=n(40),c=n(63),u=n(51),p=n(13),d=n(9),g=n(33),m=n(48),f=n(62),y=n(60),v=n(8);class w extends a.a{constructor(){super(o.a)}offset(e,t,n){if(t instanceof y.a&&t.target instanceof i.a&&t.attacker instanceof i.a){const[e]=(0,s.n)(t.attacker.position.x,t.attacker.position.y,t.attacker.position.z,t.position.x,t.position.y,t.position.z);let y=t.attacker.position.x,b=t.attacker.position.y,x=t.attacker.position.z;if(null!==t.target){var a,w;const[n,i]=(0,s.q)(e,0,(((null===(a=t.attacker.getComponent(r.a))||void 0===a?void 0:a.size.x)||0)+((null===(w=t.target.getComponent(r.a))||void 0===w?void 0:w.size.x)||0))/2+.5);y=t.target.position.x+n,b=Math.floor(t.target.position.y),x=t.target.position.z+i}if(t.attacker.position.x=y,t.attacker.position.y=b,t.attacker.position.z=x,t.attacker.hasComponent(p.a)){const e=t.attacker.getComponent(p.a);e.value.x=0,e.value.y=0,e.value.z=0}if(t.attacker.hasComponent(g.a)){t.attacker.getComponent(g.a).through=!0}if(t.attacker.hasComponent(m.a)){t.attacker.getComponent(m.a).through=!0}t.attacker.hasComponent(d.b)&&(t.attacker.getComponent(d.b).hitWaitStartTime=t.attacker.getComponent(d.b).time),t.attacker.hasComponent(u.a)&&(t.attacker.getComponent(u.a).exec=!1);const M=new Array,E=t.getComponent(o.a);n.getEntitysOfRange("hitbox",y,b,x,E.range.x,E.range.y).forEach((e=>{var a,o;if(!(e instanceof i.a)||!(t.attacker instanceof i.a)||t.target===e||null===t.attacker||M.includes(e)||e.hasComponent(f.a)||!e.hasComponent(h.a)||e.getNames().some((e=>{var n,a;return(null===(n=t.attacker)||void 0===n?void 0:n.getID())===e||(null===(a=t.target)||void 0===a?void 0:a.getID())===e})))return;const[r,u]=(0,s.n)(e.position.x,e.position.y+((null===(a=e.getComponent(l.a))||void 0===a?void 0:a.size.y)||0)/2,e.position.z,y,b,x),p=(0,s.p)(e.position.x,e.position.y+((null===(o=e.getComponent(l.a))||void 0===o?void 0:o.size.y)||0)/2,e.position.z,y,b,x);if(!n.hasHitScanVoxel(r,u,y,b,x,p)){const n=e.getComponent(h.a),a=1-Math.min(1,p/Math.min(E.range.x,E.range.y)),[i,o,l]=(0,s.r)(t.direction.x,t.direction.y,0,E.force*a/2,E.force*a);n.value.push(new c.a(0|(0,v.b)(E.minDamage,E.maxDamage,a),E.damageType,t.attacker,r,u,t.attacker.position,i,o,l)),M.push(e)}})),t.remove()}}}},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>g});n(14);var i=n(6),o=n(503),s=n(0),r=n(10),l=n(4),h=n(260),c=n(9),u=n(27),p=n(5),d=e([u,p]);[u,p]=d.then?(await d)():d;class g extends l.a{constructor(e){var t,n,a;super(h.a),a=void 0,(n="setting")in(t=this)?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,this.setting=e}offset(e,t,n){if(!(n instanceof u.a))return;const a=n.getPlayer();if(a&&a instanceof r.a&&a.hasComponent(c.b))if(this.setting.hasCheckPoint()){const{position:e}=t,r=t.getComponent(h.a);if(!r.enable){var l,d,g,m,f,y;const c=(0,s.p)(a.position.x,a.position.y+1*((null===(l=a.getComponent(i.a))||void 0===l?void 0:l.size.y)||0),a.position.z,e.x,e.y+.25,e.z),u=(0,s.p)(a.position.x,a.position.y+.5*((null===(d=a.getComponent(i.a))||void 0===d?void 0:d.size.y)||0),a.position.z,e.x,e.y+.25,e.z),v=(0,s.p)(a.position.x,a.position.y+0*((null===(g=a.getComponent(i.a))||void 0===g?void 0:g.size.y)||0),a.position.z,e.x,e.y+.25,e.z),w=r.enable;(c<((null===(m=a.getComponent(i.a))||void 0===m?void 0:m.size.x)||0)/2+1.25||u<((null===(f=a.getComponent(i.a))||void 0===f?void 0:f.size.x)||0)/2+1.25||v<((null===(y=a.getComponent(i.a))||void 0===y?void 0:y.size.x)||0)/2+1.25)&&(n.getEntitys((e=>e.hasComponent(h.a))).forEach((e=>{e.getComponent(h.a).enable=!1})),r.enable=!0,w||n.createSound("./asset/sound/item/checkpoint.mp3",null,"player-checkpoint").play()),t.hasComponent(o.a)&&(t.getComponent(o.a).material=r.enable?p.h.OBJECT_CHECKPOINT_ACTIVE:p.h.OBJECT_CHECKPOINT_DISABLE)}}else t.hasComponent(o.a)&&(t.getComponent(o.a).material=p.h.NONE)}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.d(t,{a:()=>r});var a=n(503),i=n(0),o=n(4),s=n(333);class r extends o.a{constructor(){super(s.a,a.a)}offset(e,t,n){const o=n.getCamera(),r=t.getComponent(s.a),l=t.getComponent(a.a),h=(0,i.j)(r.direction.x,o.direction.x);l.rotate=Math.sin(h)*(i.c/4)}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>m});n(14),n(15),n(16),n(1),n(2);var a=n(30),i=n(6),o=n(126),s=n(76),r=n(24),l=n(0),h=n(10),c=n(4),u=n(349),p=n(40),d=n(63);function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class m extends c.a{constructor(){super(u.a),g(this,"effect_spawn_limit",10),g(this,"damage_spawn_limit",5),g(this,"time",0),g(this,"damageTime",0),g(this,"isDamage",!1)}preadditional(e,t){const n=this.time-this.time%.25;this.isDamage=this.damageTime!==n,this.damageTime=n,this.time+=e/60;const a=t.getEntitys((e=>e.hasComponent(u.a)));(0,r.c)(a).desc((e=>{var t;return(null===(t=e.getComponent(u.a))||void 0===t?void 0:t.spawnTime)||0}));const i=a.filter((e=>{var t;return!(null!==(t=e.getComponent(u.a))&&void 0!==t&&t.isDamage)}));for(let e=this.effect_spawn_limit;e<i.length;e++){const t=i[e];t.hasComponent(s.a)||t.setComponents(new s.a(2),new o.a(2,0))}const l=a.filter((e=>{var t;return!(null===(t=e.getComponent(u.a))||void 0===t||!t.isDamage)}));for(let e=this.damage_spawn_limit;e<l.length;e++){const t=l[e];t.hasComponent(s.a)||t.setComponents(new s.a(2),new o.a(2,0))}}additional(e,t,n){const{position:o}=t,s=t.getComponent(u.a),r=new Array;s.isDamage&&this.isDamage&&n.getEntitysOfRange("hitbox",o.x,o.y,o.z,s.scale,1).forEach((e=>{var t,c,u;if(!(e instanceof h.a)||r.includes(e)||((null===(t=e.getComponent(i.a))||void 0===t?void 0:t.hit.y)||0)>=0)return;const[g,m]=(0,l.n)(e.position.x,e.position.y+((null===(c=e.getComponent(a.a))||void 0===c?void 0:c.size.y)||0)/2,e.position.z,o.x,o.y,o.z),f=(0,l.p)(e.position.x,e.position.y+((null===(u=e.getComponent(a.a))||void 0===u?void 0:u.size.y)||0)/2,e.position.z,o.x,o.y,o.z);if(e.hasComponent(p.a)&&!n.hasHitScanVoxel(g,m,o.x,o.y,o.z,f)){const t=e.getComponent(p.a);0===t.value.length&&t.value.push(new d.a(5,"corrode",s.attacker,g,m,new l.f(o.x,o.y,o.z),0,0,0))}}))}}},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>w});n(15),n(16),n(1),n(2);var i=n(24),o=n(8),s=n(0),r=n(10),l=n(4),h=n(53),c=n(262),u=n(39),p=n(9),d=n(27),g=n(109),m=n(54),f=n(58),y=e([d,g,f]);function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}[d,g,f]=y.then?(await y)():y;class w extends l.a{constructor(e){super(c.a),v(this,"setting",void 0),v(this,"enemySpawnLimit",20),v(this,"extendEnemyReplaceLimit",10),v(this,"normalEnemyTypes",[g.a.ENEMY_GUY_PISTOL,g.a.ENEMY_GUY_SHOTGUN,g.a.ENEMY_GUY_MACHINGUN,g.a.ENEMY_GUY_MELEE]),v(this,"extendEnemyTypes",[g.a.ENEMY_GUY_PISTOL_ARMOR,g.a.ENEMY_GUY_SHOTGUN_ARMOR,g.a.ENEMY_GUY_MACHINGUN_ARMOR,g.a.ENEMY_GUY_MELEE_ARMOR]),v(this,"sniperEnemyTypes",[g.a.ENEMY_GUY_MACHINGUN]),v(this,"extendSniperEnemyTypes",[g.a.ENEMY_GUY_MACHINGUN_ARMOR]),v(this,"skyEnemyTypes",[g.a.ENEMY_GUY_MISSILE]),v(this,"extendSkyEnemyTypes",[g.a.ENEMY_GUY_MISSILE]),this.setting=e}preadditional(e,t){const n=performance.now(),a=t instanceof d.a?t.getPlayer():null;if(!(a&&((0,f.b)(a,t)||t instanceof d.a&&t.hasPreview())))return;const l=t instanceof d.a?t.getMaxKillEnemy():0,g=t instanceof d.a?t.getCountKillEnemy():0;if(t instanceof d.a&&t.getGameMode()===m.a.HORDE){const e=a.getComponent(p.b);if(a.hasComponent(p.b)&&((0,u.e)(a,"hordetime",0)<=0||l<=g||-1!==e.goleTime))return void(-1===e.deathTime&&-1===e.goleTime&&(e.goleTime=n))}const y=(0,o.a)(Math.floor(g/(l/2)*this.enemySpawnLimit),5,this.enemySpawnLimit);let v=t.getEntitys((e=>e.getNames().includes("enemy"))).length;if(y>v){const e=(0,o.e)((g-l/4)/(l/4)*(this.extendEnemyReplaceLimit/this.enemySpawnLimit)),n=(0,o.e)((g-l/3)/(l/3)*(this.extendEnemyReplaceLimit/this.enemySpawnLimit)),a=(0,o.e)((g-l/2)/(l/2)*(this.extendEnemyReplaceLimit/this.enemySpawnLimit)),u=new Array,p=t.getEntitys();for(let e=0,n=0|p.length;e<n;e=e+1|0){const n=p[e];if(!(n instanceof r.a&&n.hasComponent(c.a)))continue;const a=t.getCamera(),i=n.getComponent(c.a),o=i.attachEntitys.slice();for(let e=0,t=0|o.length;e<t;e=e+1|0){const t=o[e];t.hasLive()||i.attachEntitys.splice(i.attachEntitys.indexOf(t),1)}const l=(0,s.p)(a.position.x,a.position.y,a.position.z,n.position.x,n.position.y+.5,n.position.z),[h,d]=(0,s.n)(a.position.x,a.position.y,a.position.z,n.position.x,n.position.y+.5,n.position.z),[g,m,f]=(0,s.r)(h,d,.5,0,0),[y,v]=(0,s.n)(a.position.x+g,a.position.y+m,a.position.z+f,n.position.x,n.position.y+.5,n.position.z),[w,b]=(0,s.n)(a.position.x-g,a.position.y-m,a.position.z-f,n.position.x,n.position.y+.5,n.position.z);l>12.5&&i.attachEntitys.length<i.max&&!t.hasBlockScale("collision",n.position.x,n.position.y,n.position.z,1,1)&&t.hasHitScanVoxel(h,d,n.position.x,n.position.y+.5,n.position.z,l)&&t.hasHitScanVoxel(y,v,n.position.x,n.position.y+.5,n.position.z,l)&&t.hasHitScanVoxel(w,b,n.position.x,n.position.y+.5,n.position.z,l)&&u.push(n)}(0,i.c)(u).asc((e=>e.getComponent(c.a).spawnCount));for(let i=0,s=0|u.length;i<s;i=i+1|0){const s=u[i],r=s.getComponent(c.a),l=(0,o.d)(g)<a;let p=null;switch(r.type){case"sniper":if((0,o.d)(g)>e||g<50)continue;p=(l?this.extendSniperEnemyTypes.shift():this.sniperEnemyTypes.shift())||null;break;case"sky":if((0,o.d)(g)>n||g<50)continue;p=(l?this.extendSkyEnemyTypes.shift():this.skyEnemyTypes.shift())||null;break;default:p=(l?this.extendEnemyTypes.shift():this.normalEnemyTypes.shift())||null}if(null===p)continue;const d=p.spawn(s.position.x,0|s.position.y,s.position.z,s.direction.x,t);switch(null!==d&&r.max>r.attachEntitys.length&&(r.spawnCount++,r.attachEntitys.push(d)),r.type){case"sniper":l?this.extendSniperEnemyTypes.push(p):this.sniperEnemyTypes.push(p);break;case"sky":l?this.extendSkyEnemyTypes.push(p):this.skyEnemyTypes.push(p);break;default:l?this.extendEnemyTypes.push(p):this.normalEnemyTypes.push(p)}if(null!=d&&d.hasComponent(h.a)&&(d.getComponent(h.a).see=!0),v++,y<=v)break}}}}a()}catch(b){a(b)}}))},(e,t,n)=>{"use strict";n.d(t,{a:()=>s});n(1),n(2);var a=n(4),i=n(61),o=n(318);class s extends a.a{constructor(){super(o.a,i.a)}additional(e,t,n){const{position:a}=t,s=t.getComponent(o.a);if(!s.enable&&n.getEntitysOfRange("hitbox",a.x,a.y,a.z,s.range.x,s.range.y,s.filter).length>0){const e=t.getComponent(i.a);s.enable=!0,e.enable=!0,t.setComponents(...s.execAddComponents())}}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>c});n(7),n(1),n(2);var a=n(4),i=n(329),o=n(504),s=n(0),r=n(6),l=n(53),h=n(8);class c extends a.a{constructor(){super(i.a,l.a)}offset(e,t,n){const a=performance.now(),{position:c}=t,u=t.getComponent(i.a),p=t.getComponent(r.a).size.y/2,d=c.x,g=c.y+p,m=c.z,f=u.time-u.time%u.fireSpeed;if(u.exec){var y;const e=new Array,i=0;for(let n=0,a=0|u.brancheCount;n<a;n=n+1|0){const a=u.angleX+s.a/u.brancheCount*n,r=new u.bulletType(d,g,m,d,g,m,a,i,u.bulletSpeed,!1,1/0,u.bulletScale,!1,u.damage,u.random,1,0,!1,u.damageType,null,t,null,["enemy","object",...u.filter]);t.hasComponent(o.a)&&r.hasComponent(o.a)&&(r.getComponent(o.a).value=t.getComponent(o.a).value),e.push(r)}n.addEntitys(...e),n.createSound("./asset/sound/enemy/fire-magic.mp3",t,"fire-enemy-".concat(t.getID())).play(),u.fireStartTime=(null===(y=t.getComponent(l.a))||void 0===y?void 0:y.time)||a,u.angleX+=u.time%u.rollTime/u.rollTime*s.a}u.enable&&!u.exec&&(u.fireTick!==f&&(u.fireTick=f,u.exec=!0),u.time+=(0,h.c)(e/60,0))}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>h});n(7);var a=n(4),i=n(39),o=n(9),s=n(93),r=n(343),l=n(48);class h extends a.a{constructor(){super(r.a)}additional(e,t,n){var a,h,c;const u=t.getComponent(r.a);var p;if(null!==(a=t.getComponent(s.a))&&void 0!==a&&a.enableTacticalSprint)(0,i.h)(t,"stamina",Math.max(0,(0,i.e)(t,"stamina")-e/60/t.getComponent(s.a).tacticalSprintStaminaValue)),u.timeStamp=(null===(p=t.getComponent(o.b))||void 0===p?void 0:p.time)||0;else if(null!==(h=t.getComponent(l.a))&&void 0!==h&&h.exec){var d;(0,i.h)(t,"stamina",Math.max(0,(0,i.e)(t,"stamina")-e/60/t.getComponent(l.a).staminaValue)),u.timeStamp=(null===(d=t.getComponent(o.b))||void 0===d?void 0:d.time)||0}else(-1===u.timeStamp||((null===(c=t.getComponent(o.b))||void 0===c?void 0:c.time)||0)-u.timeStamp>u.waitTime)&&((0,i.h)(t,"stamina",Math.min(1,(0,i.e)(t,"stamina")+e/60/u.recoveryTime)),u.timeStamp=-1)}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>l});n(7);var a=n(0),i=n(13),o=n(67),s=n(125),r=n(9);class l extends o.a{constructor(){super(s.a,i.a)}additional(e,t,n){const o=t.getComponent(s.a),l=t.getComponent(i.a),h=t.getComponent(r.b);o.exec?-1===o.dir&&(o.dir=0===h.axes.x.x&&0===h.axes.x.y?t.direction.x:(0,a.t)((0,a.m)(l.value.x,l.value.z,0,0))):o.dir=-1}}},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>R});n(7),n(15),n(16),n(106),n(18),n(1),n(2),n(14);var i=n(182),o=n(252),s=n(0),r=n(27),l=n(254),h=n(155),c=n(122),u=n(90),p=n(34),d=n(144),g=n(107),m=n(5),f=n(123),y=n(335),v=n(225),w=n(315),b=n(54),x=n(157),M=n(317),E=n(35),_=e([r,l,m,x]);function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}[r,l,m,x]=_.then?(await _)():_;class T{constructor(e){C(this,"value",void 0),this.value=e}getValue(e){return this.value}hasVisible(e){return!0}hasAdjastMouseWheel(){return!1}}class S{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>!0,a=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e=>!1;C(this,"name",void 0),C(this,"value",void 0),C(this,"visible",void 0),C(this,"exec",void 0),C(this,"isAdjastMouseWheel",void 0),this.name=e,this.value=t,this.visible=n,this.exec=i,this.isAdjastMouseWheel=a}hasValue(){return null!==this.value}getName(e){return this.name instanceof Function?this.name(e):this.name}getValue(e){return this.value instanceof Function?this.value(e):this.value}hasVisible(e){return this.visible(e)}hasAdjastMouseWheel(){return this.isAdjastMouseWheel}execute(e,t){return this.exec(e,t)}}let k=!1,O=null,A=null;class L extends S{constructor(e,t,n){super(n,(()=>{var n,a;return k&&O===t?performance.now()%2e3<1e3?"...":"":(null===(n=e[t])||void 0===n||null===(a=n.find((e=>e.includes("keyboard")||e.includes("mouse"))))||void 0===a?void 0:a.replace(/^keyboard_/g,"").replace(/_/g," "))||"none"}),(()=>!0),!1,((e,n)=>0===n&&(k=!0,O=t,A="pc",!0)))}}class P extends S{constructor(e,t,n){super(n,(()=>{var n,a;return k&&O===t?performance.now()%2e3<1e3?"...":"":(null===(n=e[t])||void 0===n||null===(a=n.find((e=>e.includes("gamepad"))))||void 0===a?void 0:a.replace(/^gamepad_/g,""))||"none"}),(()=>!0),!1,((e,n)=>0===n&&(k=!0,O=t,A="gamepad",!0)))}}const I=["keyboard","gamepad"],N=["Wait! Your dad wants you to ride the EVA.","Wait! Do you remember signing a contract to work as a magical girl?","Wait! Do you like Akaiheya?","I might as well go with this (No)!","Are you talking about Kuririn?!","Wait! Would you like to rush into the temp agency headquarters naked?"];class R extends o.a{constructor(e,t,n,a,i,o,c,y,_){var k;let O=arguments.length>9&&void 0!==arguments[9]&&arguments[9],A=arguments.length>10&&void 0!==arguments[10]&&arguments[10];super(e,i,o,c,y,_),k=this,C(this,"setting",void 0),C(this,"keyconfig",void 0),C(this,"hordeLoadout",void 0),C(this,"keys",{}),C(this,"presss",{}),C(this,"toggles",{}),C(this,"releases",{}),C(this,"updateButtons",{}),C(this,"titles",new Array),C(this,"menus",new Array),C(this,"noStacks",new Array),C(this,"walk",new s.e(0,0)),C(this,"look",new s.e(0,0)),C(this,"menuY",-.075),C(this,"menuPoints",[0]),C(this,"loading",!1),C(this,"how_to_play",-1),C(this,"upTime",-1),C(this,"upInterval",-1),C(this,"upID",-1),C(this,"downTime",-1),C(this,"downInterval",-1),C(this,"downID",-1),C(this,"rightTime",-1),C(this,"rightInterval",-1),C(this,"rightID",-1),C(this,"leftTime",-1),C(this,"leftInterval",-1),C(this,"leftID",-1),C(this,"isUpdateButton",!1),C(this,"isFocusAdjastMenu",!1),C(this,"isDemo",!1),C(this,"isInitEarlyAccessInfo",!1),C(this,"isUseVulkan",void 0),C(this,"nowUseVulkan",void 0),this.setting=new x.d(t),this.keyconfig=n,this.hordeLoadout=a,this.isDemo=O,this.isUseVulkan=A,this.nowUseVulkan=A;const I=()=>new S("back",null,(()=>!0),!1,((e,t)=>(0===t&&this.cancelMenu(!0),!0))),R=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>k.cancelMenu(!0);k.pushMenus("",!0,new T(e),new S("No",null,(()=>!0),!1,((e,t)=>0===t&&(n(),!0))),new S("Yes",null,(()=>!0),!1,((e,n)=>0===n&&(t(),!0))))},W=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>k.cancelMenu(!0);k.pushMenus("",!0,new T(e),new S("Yes",null,(()=>!0),!1,((e,n)=>0===n&&(t(),!0))),new S("No",null,(()=>!0),!1,((e,t)=>0===t&&(n(),!0))))},z=(e,t,n)=>new S(e,(()=>"".concat(t()?"on":"off")),(()=>!0),!1,((e,a)=>{if(0!==a)return!1;const i=t();return n(!i),i!==t()})),D=(e,t,n,a,i,o,s)=>new S(e,(()=>i(o())),(()=>!0),!0,((e,i)=>{if(0===i)return!1;const r=o();return i<0?s(Math.max(n,r-t)):i>0&&s(Math.min(a,r+t)),r!==o()})),F=()=>[new S("continue","",(e=>{const t=e.getSceneManager().getScene("game");return null!==t&&t instanceof r.a&&(t.hasSaveData()||t.hasContinue()||t.getGameMode()===b.a.TUTORIAL||t.getGameMode()===b.a.HORDE)}),!1,((e,t)=>{if(0!==t)return!1;const n=e.getSceneManager();this.clearMenuCursor(),n.activeScene("game");const a=n.getScene("game");return null!==a&&a instanceof r.a&&!a.hasContinue()&&a.getGameMode()===b.a.CAMPAING&&a.hasSaveData()&&a.loadGame(),!0})),new S("retry","",(e=>{const t=e.getSceneManager().getScene("game");return null!==t&&t instanceof r.a&&!this.setting.hasPermaDeath()&&(t.hasSaveData()&&t.hasContinue()||t.getGameMode()===b.a.TUTORIAL||t.getGameMode()===b.a.HORDE)}),!1,(async(e,t)=>{if(0!==t)return!1;return R("The game you are playing will disappear. Are you sure?",(async()=>{const t=e.getSceneManager(),n=t.getScene("game");if(this.clearMenuCursor(),null!==n&&n instanceof r.a){switch(t.activeScene("game"),this.loading=!0,n.getGameMode()){case b.a.TUTORIAL:await n.loadLevel("tutorial");break;case b.a.CAMPAING:await n.reloadLevel();break;case b.a.HORDE:await n.loadLevel("horde".concat(n.getEpisodeNumber()))}this.loading=!1}})),!0})),new S("new game","",(()=>!0),!1,((e,t)=>{if(0!==t)return!1;const n=e.getSceneManager(),a=n.getScene("game"),i=async e=>{this.clearMenuCursor(),null!==a&&a instanceof r.a&&(n.activeScene("game"),this.loading=!0,0===e?await a.loadLevel("tutorial"):await a.loadLevel("e".concat(e,"m1")),this.loading=!1)},o=async e=>{null!==a&&a instanceof r.a&&(n.activeScene("game"),this.loading=!0,await a.loadLevel("horde".concat(e)),this.loading=!1),this.clearMenuCursor()},s=()=>{const e=async()=>{const e=O?{1:!!await(0,u.c)("./map/e1m1.json"),2:!1,3:!1,4:!1,5:!1,6:!1}:{1:!!await(0,u.c)("./map/e1m1.json"),2:!!await(0,u.c)("./map/e2m1.json"),3:!(!(0,h.a)()||!await(0,u.c)("./map/e3m1.json")),4:!(!(0,h.a)()||!await(0,u.c)("./map/e4m1.json")),5:!(!(0,h.a)()||!await(0,u.c)("./map/e5m1.json")),6:!(!(0,h.a)()||!await(0,u.c)("./map/e6m1.json"))},t=function(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new S("episode".concat(t),"",(()=>e[t]),!1,((e,a)=>0===a&&(n?W("Do you want to play the tutorial?",(()=>i(0)),(()=>i(1))):i(t),!0)))};this.pushMenus("choice episode",!1,t(1,!0),t(2),t(3),t(4),t(5),t(6),I())},t=async()=>{const e={1:!!await(0,u.c)("./map/horde1.json"),2:!!await(0,u.c)("./map/horde2.json"),3:!!await(0,u.c)("./map/horde3.json"),4:!!await(0,u.c)("./map/horde4.json"),5:!!await(0,u.c)("./map/horde5.json"),6:!!await(0,u.c)("./map/horde6.json")},t=t=>new S("horde ".concat(t),"",(()=>e[t]),!1,(async(e,n)=>0===n&&(await o(t),!0)));return this.pushMenus("choice map",!1,t(1),t(2),t(3),t(4),t(5),t(6),I()),!0};this.hasDemo()?e():this.pushMenus("choice game mode",!1,new S("campaign mode","",(()=>!0),!1,(async(t,n)=>0===n&&(await e(),!0))),new S("horde mode","",(()=>!O),!1,(async(e,n)=>0===n&&(await t(),!0))),new S("intermission test","",(()=>(0,h.a)()),!1,(async(e,t)=>0===t&&(await i(7),!0))),I())};return null!==a&&a instanceof r.a&&(a.hasContinue()||a.hasSaveData())?R("The game you are playing will disappear. Are you sure?",s):s(),!0})),new S("level editor","",(()=>i.hasScene("editor")),!1,((e,t)=>{if(0!==t)return!1;const n=e.getSceneManager(),a=n.getScene("editor");return(async()=>{this.loading=!0,n.activeScene("editor"),null!==a&&a instanceof l.a&&(a.hasLoad()||(a.hasSaveData()?a.load():await a.newMap())),this.loading=!1})(),!0})),new S("practice area (beta)","",(()=>i.hasScene("practice")),!1,((e,t)=>{if(0!==t)return!1;const n=e.getSceneManager(),a=n.getScene("practice");return(async()=>{this.loading=!0,n.activeScene("practice"),null!==a&&a instanceof r.a&&a.getGameMode()!==b.a.PRACTICE&&await a.loadLevel("practice"),this.loading=!1})(),!0})),new S("how to play","",(()=>!0),!1,((e,t)=>0===t&&(this.how_to_play="gamepad"===this.getControlManager().getInputType()?1:0,!0))),new S("option","",(()=>!0),!1,((e,t)=>0===t&&(this.pushMenus("option",!1,new S("general","",(()=>!0),!1,((e,t)=>0===t&&(this.pushMenus("general",!1,D("fov",5,90,160,(e=>"".concat(0|e)),(()=>this.setting.getFOV()),(e=>this.setting.setFOV(e))),z("camera bob",(()=>this.setting.hasBob()),(e=>this.setting.setBob(e))),z("debug tool",(()=>this.setting.hasDebugLog()),(e=>{this.setting.setDebugLog(e),e?(0,d.d)():(0,d.b)()})),I()),!0))),new S("game play","",(()=>!0),!1,((e,t)=>0===t&&(this.pushMenus("game play",!1,z("check point",(()=>this.setting.hasCheckPoint()),(e=>this.setting.setCheckPoint(e))),z("perma death",(()=>this.setting.hasPermaDeath()),(e=>this.setting.setPermaDeath(e))),z("pistol start (campaign only)",(()=>this.setting.hasPistolStart()),(e=>this.setting.setPistolStart(e))),z("SSS kill combo rank slow-mo",(()=>this.setting.hasSSSSlowMo()),(e=>this.setting.setSSSSlowMo(e))),I()),!0))),new S("control","",(()=>!0),!1,((e,t)=>0===t&&(this.pushMenus("control",!1,new S("input option","",(()=>!0),!1,((e,t)=>0===t&&(this.pushMenus("input option",!1,new S("axes option","",(()=>!0),!1,((e,t)=>0===t&&(this.pushMenus("axes option",!1,D("sensibility",5,5,500,(e=>"".concat(0|e)),(()=>this.setting.getSensibility()),(e=>this.setting.setSensibility(e))),z("look invert x",(()=>this.setting.hasInvertX()),(e=>this.setting.setInvertX(e))),z("look invert y",(()=>this.setting.hasInvertY()),(e=>this.setting.setInvertY(e))),I()),!0))),new S("press option","",(()=>!0),!1,((e,t)=>0===t&&(this.pushMenus("press option",!1,z("toggle sprint",(()=>this.setting.hasToggleSprint()),(e=>this.setting.setToggleSprint(e))),z("toggle cluch",(()=>this.setting.hasToggleCluch()),(e=>this.setting.setToggleCluch(e))),I()),!0))),new S("wheel menu option","",(()=>!0),!1,((e,t)=>0===t&&(this.pushMenus("wheel menu option",!1,D("weapon charge stand time",5,70,500,(e=>"".concat(0|e)),(()=>this.setting.getWeaponChargeStandTime()),(e=>this.setting.setWeaponChargeStandTime(e))),D("weapon wheel stand time",5,70,500,(e=>"".concat(0|e)),(()=>this.setting.getWeaponWheelStandTime()),(e=>this.setting.setWeaponWheelStandTime(e))),D("wheel menu inner dead zone",.05,0,1,(e=>"".concat(e)),(()=>this.setting.getWheelInnerDeadzone()),(e=>this.setting.setWheelInnerDeadzone(Math.round(1e3*e)/1e3)))),!0))),new S("joy stick deadzone","",(()=>!0),!1,((e,t)=>0===t&&(this.pushMenus("joy stick deadzone",!1,D("inner left",.05,0,1,(e=>"".concat(e)),(()=>this.setting.getStickInnerDeadzoneX()),(e=>this.setting.setStickInnerDeadzoneX(Math.round(1e3*e)/1e3))),D("outer left",.05,0,1,(e=>"".concat(e)),(()=>this.setting.getStickOuterDeadzoneX()),(e=>this.setting.setStickOuterDeadzoneX(Math.round(1e3*e)/1e3))),D("inner right",.05,0,1,(e=>"".concat(e)),(()=>this.setting.getStickInnerDeadzoneY()),(e=>this.setting.setStickInnerDeadzoneY(Math.round(1e3*e)/1e3))),D("outer right",.05,0,1,(e=>"".concat(e)),(()=>this.setting.getStickOuterDeadzoneY()),(e=>this.setting.setStickOuterDeadzoneY(Math.round(1e3*e)/1e3))),I()),!0)))),!0))),new S("keyboard mouse config","",(()=>!0),!1,((e,t)=>0===t&&(this.pushMenus("keyboard mouse config",!1,new S("movemnet","",(()=>!0),!1,((e,t)=>0===t&&(this.pushMenus("movement",!1,new L(n,"forward","forward"),new L(n,"back","back"),new L(n,"left","left"),new L(n,"right","right"),I()),!0))),new S("move action","",(()=>!0),!1,((e,t)=>0===t&&(this.pushMenus("move action",!1,new L(n,"jump","jump"),new L(n,"cluch","cluch/sliding"),new L(n,"sprint","sprint"),new L(n,"lean-right","lean right"),new L(n,"lean-left","lean left"),new L(n,"auto-lean","auto lean"),I()),!0))),new S("hand action","",(()=>!0),!1,((e,t)=>0===t&&(this.pushMenus("hand action",!1,new L(n,"use","use"),new L(n,"fire-right","fire right"),new L(n,"fire-left","fire left"),I()),!0))),new S("weapon change","",(()=>!0),!1,((e,t)=>0===t&&(this.pushMenus("weapon change",!1,new L(n,"next-weapon","next weapon"),new L(n,"prev-weapon","prev weapon"),new L(n,"weapon-wheel-right","right hand weapon wheel"),new L(n,"weapon-wheel-left","left hand weapon wheel"),I()),!0))),new S("weapon number","",(()=>!0),!1,((e,t)=>0===t&&(this.pushMenus("weapon number",!1,new L(n,"weapon-1","weapon 1"),new L(n,"weapon-2","weapon 2"),new L(n,"weapon-3","weapon 3"),new L(n,"weapon-4","weapon 4"),new L(n,"weapon-5","weapon 5"),new L(n,"weapon-6","weapon 6"),I()),!0))),I()),!0))),new S("gamepad config","",(()=>!0),!1,((e,t)=>0===t&&(this.pushMenus("gamepad config",!1,new S("movemnet","",(()=>!0),!1,((e,t)=>0===t&&(this.pushMenus("movement",!1,new P(n,"forward","forward"),new P(n,"back","back"),new P(n,"left","left"),new P(n,"right","right"),I()),!0))),new S("move action","",(()=>!0),!1,((e,t)=>0===t&&(this.pushMenus("move action",!1,new P(n,"jump","jump"),new P(n,"cluch","cluch/sliding"),new P(n,"sprint","sprint"),new P(n,"lean-right","lean right"),new P(n,"lean-left","lean left"),new P(n,"auto-lean","auto-lean"),I()),!0))),new S("hand action","",(()=>!0),!1,((e,t)=>0===t&&(this.pushMenus("hand action",!1,new P(n,"use","use"),new P(n,"fire-right","fire right"),new P(n,"fire-left","fire left"),I()),!0))),new S("weapon change","",(()=>!0),!1,((e,t)=>0===t&&(this.pushMenus("weapon change",!1,new P(n,"next-weapon","next-weapon"),new P(n,"prev-weapon","prev-weapon"),new P(n,"weapon-wheel","weapon wheel/weapon switch"),new P(n,"weapon-wheel-right","right hand weapon wheel"),new P(n,"weapon-wheel-left","left hand weapon wheel"),I()),!0))),new S("weapon number","",(()=>!0),!1,((e,t)=>0===t&&(this.pushMenus("weapon number",!1,new P(n,"weapon-1","weapon 1"),new P(n,"weapon-2","weapon 2"),new P(n,"weapon-3","weapon 3"),new P(n,"weapon-4","weapon 4"),new P(n,"weapon-5","weapon 5"),new P(n,"weapon-6","weapon 6"),I()),!0))),I()),!0))),I()),!0))),new S("ui","",(()=>!0),!1,((e,t)=>0===t&&(this.pushMenus("ui",!1,z("enable hud",(()=>this.setting.hasHUD()),(e=>this.setting.setHUD(e))),z("display play time (campaign only)",(()=>this.setting.hasDisplayPlayTime()),(e=>this.setting.setDisplayPlayTime(e))),new S("theme",(()=>"".concat(this.setting.getTheme())),(()=>!0),!0,((e,t)=>{if(0===t)return!1;const n=this.setting.getTheme(),a=Object.keys(m.r),i=a.indexOf(n);return i>0&&t<0?this.setting.setTheme(a[i-1]):i<a.length-1&&t>0&&this.setting.setTheme(a[i+1]),n!==this.setting.getTheme()})),I()),!0))),new S("audio","",(()=>!0),!1,((e,t)=>0===t&&(this.pushMenus("audio",!1,D("volume",.05,0,2,(e=>"".concat(Math.round(100*e))),(()=>this.setting.getSoundVolume()),(e=>this.setting.setSoundVolume(e))),z("eat sound",(()=>this.setting.hasEatSound()),(e=>this.setting.setEatSound(e))),z("enemy voice",(()=>this.setting.hasEnemyVoice()),(e=>this.setting.setEnemyVoice(e))),I()),!0))),new S("graphics","",(()=>!0),!1,((e,t)=>0===t&&(this.pushMenus("graphics",!1,new S((()=>"fullscreen".concat((0,p.a)()||(0,f.c)()?"":"/only playing")),(()=>"".concat(((0,p.a)()?this.setting.hasFullscreen():this.setting.hasBrowserFullscreen()||(0,f.c)(!0))?"on":"off")),(()=>!0),!1,((e,t)=>{if(0!==t)return!1;const n=this.setting.hasFullscreen();(0,p.a)()?this.setting.setFullscreen(!this.setting.hasFullscreen()):(0,f.c)()?(0,g.a)():this.setting.setBrowserFullscreen(!this.setting.hasBrowserFullscreen());const a=n!==this.setting.hasFullscreen();return a&&w.c.postMessage({method:"requestresize"}),a})),new S("automatic resolution",(e=>this.setting.hasAutomaticResolution()?"on":"off"),(()=>(0,p.a)()?(0,f.c)():this.setting.hasBrowserFullscreen()||(0,f.c)(!0)),!0,((e,t)=>{if(0!==t)return!1;const n=this.setting.hasAutomaticResolution();this.setting.setAutomaticResolution(!this.setting.hasAutomaticResolution());const a=n!==this.setting.hasAutomaticResolution();return a?(w.c.postMessage({method:"requestresize"}),!0):a})),new S("specified resolution",(e=>{const t=(0,M.c)(this.setting,M.a);return this.setting.hasAutomaticResolution()?"auto":"".concat(t[0],"x").concat(t[1])}),(()=>!this.setting.hasAutomaticResolution()&&((0,p.a)()?(0,f.c)():this.setting.hasBrowserFullscreen()||(0,f.c)(!0))),!0,((e,t)=>{if(0===t)return!1;const n=this.setting.getResolutionIndex();t<0?this.setting.setResolutionIndex(Math.max(0,n-1)):t>0&&this.setting.setResolutionIndex(Math.min(M.a.length-1,n+1));const a=n!==this.setting.getResolutionIndex();return a?(w.c.postMessage({method:"requestresize"}),!0):a})),new S((()=>"use high pixel ratio"),(()=>"".concat(this.setting.hasHighPixelRatio()?"on":"off")),(()=>this.setting.hasAutomaticResolution()),!1,((e,t)=>{if(0!==t)return!1;let n=!1;const a=this.setting.hasHighPixelRatio();return this.setting.setHighPixelRatio(!this.setting.hasHighPixelRatio()),n=a!==this.setting.hasHighPixelRatio(),n&&w.c.postMessage({method:"requestresize"}),n})),D("contrast",.05,0,2,(e=>"".concat(Math.round(100*e))),(()=>this.setting.getContrast()),(e=>this.setting.setContrast(e))),D("brightness",.05,0,2,(e=>"".concat(Math.round(100*e))),(()=>this.setting.getBrightness()),(e=>this.setting.setBrightness(e))),new S("performance","",(()=>!0),!1,((e,t)=>0===t&&(this.pushMenus("performance",!1,new S("framerate",(()=>"".concat(this.setting.getFramerate()===1/0?"unlimit":this.setting.getFramerate())),(()=>(0,p.a)()),!0,((e,t)=>{if(0===t)return!1;let n=this.setting.getFramerateIndex();const a=n;return t<0?(n--,n<0&&(n=0)):t>0&&(n++,n>=v.a.length&&(n=v.a.length-1)),this.setting.setFramerate(n),a!==this.setting.getFramerateIndex()})),z("shadow",(()=>this.setting.hasShadow()),(e=>this.setting.setShadow(e))),z("soft shadow",(()=>this.setting.hasSoftShadow()),(e=>this.setting.setSoftShadow(e))),D("reflection count",1,0,10,(e=>"".concat(0|e)),(()=>this.setting.getReflectionCount()),(e=>this.setting.setReflectionCount(e))),z("roughness",(()=>this.setting.hasRoughness()),(e=>this.setting.setRoughness(e))),D("bloom",.025,0,1,(e=>"".concat(e)),(()=>this.setting.getBloom()),(e=>this.setting.setBloom(Math.round(1e3*e)/1e3))),new S((()=>"use vulkan api"),(()=>"".concat(this.hasUseVulkan()?"on":"off")),(()=>(0,p.a)()),!1,((e,t)=>{if(0!==t)return!1;const n=this.hasUseVulkan();return this.setUseVulkan(!this.hasUseVulkan()),(0,E.d)().postMessage({method:"toggle-vulkan",value:this.hasUseVulkan()}),this.hasConfirmReboot()&&R("A reboot is required for the settings to take effect.\n\nDo you want to reboot?",(()=>(0,E.d)().postMessage({method:"reboot"}))),n!==this.hasUseVulkan()})),I()),!0))),new S("crt filter","",(()=>!0),!1,((e,t)=>0===t&&(this.pushMenus("crt filter",!1,new S("enable",(()=>"".concat(this.setting.hasCRT()?"on":"off")),(()=>!0),!1,((e,t)=>{if(0!==t)return!1;const n=this.setting.hasCRT();return this.setting.setCRTEnable(!n),n!==this.setting.hasCRT()&&w.c.postMessage({method:"requestresize"}),!0})),D("sub pixel",3,3,6,(e=>"".concat(0|e)),(()=>this.setting.getCRTSubPixel()),(e=>this.setting.setCRTSubPixel(e))),D("lens scale",.025,0,1,(e=>"".concat(e)),(()=>this.setting.getCRTLens()),(e=>this.setting.setCRTLens(Math.round(1e3*e)/1e3))),D("deep scale",.025,0,1,(e=>"".concat(e)),(()=>this.setting.getCRTDeep()),(e=>this.setting.setCRTDeep(Math.round(1e3*e)/1e3))),D("edge scale",.025,0,1,(e=>"".concat(e)),(()=>this.setting.getCRTEdge()),(e=>this.setting.setCRTEdge(Math.round(1e3*e)/1e3))),D("shadow vig",.025,0,1,(e=>"".concat(e)),(()=>this.setting.getCRTVig()),(e=>this.setting.setCRTVig(Math.round(1e3*e)/1e3))),z("shadow mask",(()=>this.setting.hasCRTShadowMask()),(e=>this.setting.setCRTShadowMask(e))),D("center fade out",.025,0,1,(e=>"".concat(e)),(()=>this.setting.getCRTCenterFadeOut()),(e=>this.setting.setCRTCenterFadeOut(Math.round(1e3*e)/1e3))),I()),!0))),I()),!0))),I()),!0))),new S("reflesh","",(()=>(0,h.a)()||!(0,p.a)()),!1,((e,t)=>0===t&&(w.b.postMessage({method:"reload"}),!0))),new S("return desktop","",(()=>!(0,h.a)()&&(0,p.a)()),!1,((e,t)=>0===t&&(R(N[N.length*Math.random()|0],(()=>w.b.postMessage({method:"shutdown"}))),!0)))];this.menus.push([new S((()=>performance.now()%2e3<1e3?"PRESS ".concat("gamepad"===this.getControlManager().getInputType()?"a":"mouse left"," TO START"):""),null,(e=>!0),!1,((e,t)=>0===t&&((0,h.a)()||this.hasDemo()||this.isInitEarlyAccessInfo?this.pushMenus("",!1,...F()):this.pushMenus("",!0,new T("This game is an rarly access version."),new T("It has many bugs and unfinished elements."),new T("If you find any bugs, it would be appreciated"),new T("if you could contact us at (ie.shoom88@gmail.com)"),new T("or the steam forums. Thank you for your purchase."),new T(""),new S((()=>"(ok)"),null,(e=>!0),!1,((e,t)=>0===t&&(this.isInitEarlyAccessInfo=!0,this.pushMenus("",!1,...F()),!0)))),!0)))]),y.axes(((e,t,n)=>{var a;if("title"===i.getActiveSceneName()&&null!==(a=i.getScene("title"))&&void 0!==a&&a.hasRun())switch(e){case"x":this.walk.x=-t,this.walk.y=n;break;case"y":this.look.x=t,this.look.y=n}else this.walk.x=0,this.walk.y=0,this.look.x=0,this.look.y=0})),y.press(((e,t)=>{var n;const a=performance.now();if("title"===i.getActiveSceneName()&&null!==(n=i.getActiveScene())&&void 0!==n&&n.hasRun()){let n=!1;if(this.isUpdateButton&&this.updateButtons[e])return void(t||(this.releases[e]=!0));this.toggles[e]!==t&&(n=!0),this.enablePresss(e,t,n,a),this.updateButtons[e]=!0,this.isUpdateButton=!0}else{for(const e in this.keys)this.keys[e]=0;for(const e in this.presss)this.presss[e]=0;for(const e in this.releases)this.enablePresss(e,!1,!1,a),delete this.releases[e];for(const e in this.updateButtons)delete this.updateButtons[e]}})),y.cursor(((e,t)=>{if(this.hasRun()&&-1===this.how_to_play&&!this.loading){const n=1-(this.setting.hasCRT()?this.setting.getCRTDeep()/2:0),a=this.setting.getCRTDeep()*this.setting.getCRTLens(),i=2*(t-.5)/n+(this.setting.hasCRT()?(1-Math.abs(Math.cos(e*s.d)))*(1-Math.abs(t))*a:0);let o=-1,r=0;this.getMenus().forEach(((e,t)=>{if(!(e instanceof S))return void r--;const n=.125*t+.05-.125+this.menuY;i>n&&i<n+.1&&(o=t+r,this.menuPoints[0]!==o&&this.getMenus()[t]instanceof S&&(this.isFocusAdjastMenu=this.getMenus()[t].hasAdjastMouseWheel(),this.createSound("./asset/sound/menu/move.mp3",null,"menu").play()))})),this.menuPoints.length>1&&(this.menuPoints[0]=o)}}))}getFramerate(){return this.setting.getFramerate()}menuUp(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.menuPoints[0];this.menuPoints[0]--;let a=!0;this.menuPoints[0]<0&&(t?this.menuPoints[0]=e.length-1:(this.menuPoints[0]=0,a=!1)),a&&n!==this.menuPoints[0]&&this.createSound("./asset/sound/menu/move.mp3",null,"menu").play()}menuDown(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.menuPoints[0];this.menuPoints[0]++;let a=!0;this.menuPoints[0]>e.length-1&&(t?this.menuPoints[0]=0:(this.menuPoints[0]=e.length-1,a=!1)),a&&n!==this.menuPoints[0]&&this.createSound("./asset/sound/menu/move.mp3",null,"menu").play()}menuRight(){-1!==this.how_to_play?(this.how_to_play++,this.how_to_play>=I.length&&(this.how_to_play=I.length-1)):-1!==this.how_to_play||this.loading||-1===this.menuPoints[0]||this.activeMenu(1)}menuLeft(){-1!==this.how_to_play?(this.how_to_play--,this.how_to_play<0&&(this.how_to_play=0)):-1!==this.how_to_play||this.loading||-1===this.menuPoints[0]||this.activeMenu(-1)}enablePresss(e,t,n,a){const i=this.getTouchMenus();if(k){if(t&&n){if(0!==e.indexOf("keyboard_")&&0!==e.indexOf("mouse_")||"pc"!==A||"keyboard_escape"===e){if(0===e.indexOf("gamepad_")&&"gamepad"===A&&"gamepad_start"!==e&&"gamepad_select"!==e){for(const t in this.keyconfig){const n=this.keyconfig[t];n.includes(e)&&n.splice(n.indexOf(e))}if(null!==O&&this.keyconfig.hasOwnProperty(O)){const t=this.keyconfig[O].filter((e=>!e.includes("gamepad")));t.push(e),this.keyconfig[O]=t}}}else{for(const t in this.keyconfig){const n=this.keyconfig[t];n.includes(e)&&n.splice(n.indexOf(e))}if(null!==O&&this.keyconfig.hasOwnProperty(O)){const t=this.keyconfig[O].filter((e=>!e.includes("keyboard")&&!e.includes("mouse")));t.push(e),this.keyconfig[O]=t}}k=!1,O=null,(0,c.c)("keyconfig")}}else switch(e){case"mouse_left":if(-1!==this.how_to_play&&t&&n){this.how_to_play++,this.how_to_play>=I.length&&(this.how_to_play=0);break}case"touchpad_a":case"gamepad_a":case"keyboard_enter":-1===this.how_to_play&&t&&n&&-1!==this.menuPoints[0]&&this.activeMenu(0);break;case"mouse_right":case"touchpad_b":case"gamepad_b":case"keyboard_escape":t&&n&&(-1!==this.how_to_play?this.how_to_play=-1:-1===this.how_to_play&&this.menus.length>1&&this.cancelMenu(!0));break;case"touchpad_right":case"gamepad_right":case"keyboard_right_arrow":t&&n?(this.menuRight(),this.rightTime=a,this.rightID=setInterval((()=>{const e=performance.now()-this.rightTime;if(this.hasRun()||clearInterval(this.rightID),-1!==this.rightTime&&e>500){const t=e-e%100;t!==this.rightInterval&&this.menuRight(),this.rightInterval=t}}))):(this.rightTime=-1,this.rightInterval=-1,clearInterval(this.rightID));break;case"mouse_wheel_up":t&&n&&this.menuRight();break;case"touchpad_left":case"gamepad_left":case"keyboard_left_arrow":t&&n?(this.menuLeft(),this.leftTime=a,this.leftID=setInterval((()=>{const e=performance.now()-this.leftTime;if(this.hasRun()||clearInterval(this.leftID),-1!==this.leftTime&&e>500){const t=e-e%100;t!==this.leftInterval&&this.menuLeft(),this.leftInterval=t}}))):(this.leftTime=-1,this.leftInterval=-1,clearInterval(this.leftID));break;case"mouse_wheel_down":t&&n&&this.menuLeft();break;case"touchpad_up":case"gamepad_up":case"keyboard_up_arrow":-1===this.how_to_play&&t&&n?(this.menuUp(i),this.upTime=a,this.upID=setInterval((()=>{const e=performance.now()-this.upTime;if(this.hasRun()||clearInterval(this.upID),-1!==this.upTime&&e>500){const t=e-e%100;t!==this.upInterval&&this.menuUp(i,!1),this.upInterval=t}}))):(this.upTime=-1,this.upInterval=-1,clearInterval(this.upID));break;case"touchpad_down":case"gamepad_down":case"keyboard_down_arrow":-1===this.how_to_play&&t&&n?(this.menuDown(i),this.downTime=a,this.downID=setInterval((()=>{const e=performance.now()-this.downTime;if(this.hasRun()||clearInterval(this.downID),-1!==this.downTime&&e>500){const t=e-e%100;t!==this.downInterval&&this.menuDown(i,!1),this.downInterval=t}}))):(this.downTime=-1,this.downInterval=-1,clearInterval(this.downID))}}getMenus(){return(this.menus[0]||[]).filter((e=>e.hasVisible(this)))}getTouchMenus(){return(this.menus[0]||[]).filter((e=>e instanceof S&&e.hasVisible(this)))}pushMenus(e,t){for(;this.noStacks[0]&&this.noStacks.length>0;)this.titles.shift(),this.menus.shift(),this.noStacks.shift(),this.menuPoints.shift();this.titles.unshift(e);for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i];this.menus.unshift(a),this.noStacks.unshift(t),this.menuPoints.unshift(0),this.isFocusAdjastMenu=this.getMenus()[this.menuPoints[0]].hasAdjastMouseWheel()}async activeMenu(e){const t=this.getTouchMenus()[this.menuPoints[0]];if(t instanceof S&&await t.execute(this,e))switch(e){case 0:this.createSound("./asset/sound/menu/press.mp3",null,"menu").play();break;case 1:case-1:this.createSound("./asset/sound/menu/scroll.mp3",null,"menu").play()}}cancelMenu(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.titles.shift(),this.menus.shift(),this.noStacks.shift(),this.menuPoints.shift(),t&&(this.menuPoints[0]=0),e&&this.createSound("./asset/sound/menu/cancel.mp3",null,"menu").play(),this.isFocusAdjastMenu=this.getMenus()[this.menuPoints[0]].hasAdjastMouseWheel()}clearMenuCursor(){for(;this.titles.length>1;)this.titles.shift(),this.menus.shift(),this.noStacks.shift(),this.menuPoints.shift();this.menuPoints[0]=0}hasDemo(){return this.isDemo}hasUseVulkan(){return this.isUseVulkan}setUseVulkan(e){this.isUseVulkan=e}hasConfirmReboot(){return this.isUseVulkan!==this.nowUseVulkan}createTransferUIData(e){if(!e)return[];const t=m.r[this.setting.getTheme()].getColor();if(-1!==this.how_to_play)return[new i.e("background","rgba(0,0,0,0.75)",!0,0,0,0,10,10,0,0),new i.c("howtoplay","./asset/how_to_play_".concat(I[this.how_to_play],".png"),0,0,1,1)];{let e=0;return[new i.e("background","rgba(0,0,0,0.75)",!0,0,0,0,10,10,0,0),new i.c("title",this.hasDemo()?"./asset/title-demo.png":"./asset/title-prod.png",0,-.5,2,2),new i.b("menu-title","./asset/font.png",5,5,m.e,this.titles[0]||"",-.9,-.125+this.menuY,2,1,0,1,[1,1,1]),...this.getMenus().map(((n,a)=>n instanceof S?n.hasValue()?[new i.b("menu-sub-name","./asset/font.png",5,5,m.e,n.getName(this),-.9,.125*a+this.menuY,1,1,0,1,a-e===this.menuPoints[0]?[1,1,1]:t),new i.b("menu-sub-value","./asset/font.png",5,5,m.e,n.getValue(this)||"",.9,.125*a+this.menuY,1,-1,0,1,a-e===this.menuPoints[0]?[1,1,1]:t),"keyboard"===this.getControlManager().getInputType()&&a-e===this.menuPoints[0]&&this.isFocusAdjastMenu?new i.b("font","./asset/font.png",5,5,m.e,"Adjust mouse wheel",.95,.125*a+this.menuY,1,1,0,1,t):null]:new i.b("menu-sub","./asset/font.png",5,5,m.e,n.getName(this),0,.125*a+this.menuY,1,0,0,1,a-e===this.menuPoints[0]?[1,1,1]:t):(e++,new i.b("menu-sub-text","./asset/font.png",5,5,m.e,n.getValue(this)||"",0,.125*a+this.menuY,1,0,0,1,[1,1,1])))),this.menus.length<=1?new i.b("font","./asset/font.png",5,5,m.e,"(c) 2022 latel88",-1,.9,1,1,-1,1,[1,1,1]):null,this.menus.length<=1?new i.b("font","./asset/font.png",5,5,m.e,"ver ".concat(y.a),1,.9,1,-1,-1,1,[1,1,1]):null]}}onupdateend(e){const t=performance.now();this.isUpdateButton=!1;for(const e in this.keys)this.presss[e]=this.keys[e];for(const e in this.releases)this.enablePresss(e,!1,!1,t),delete this.releases[e];for(const e in this.updateButtons)delete this.updateButtons[e];super.onupdateend(e)}async onactive(e){await(0,g.a)(),!(0,p.a)()&&this.setting.hasBrowserFullscreen()&&await(0,f.a)()}}a()}catch(W){a(W)}}))},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>P});n(1),n(2),n(18),n(181),n(14),n(217);var i=n(4),o=n(10),s=n(32),r=n(336),l=n(0),h=n(251),c=n(31),u=n(90),p=n(337),d=n(109),g=n(254),m=n(338),f=n(81),y=n(5),v=n(8),w=n(264),b=n(144),x=n(34),M=n(107),E=n(326),_=n(339),C=n(155),T=n(54),S=n(35),k=n(123),O=(n(56),n(58)),A=e([s,d,g,f,y,_,O]);function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}[s,d,g,f,y,_,O]=A.then?(await A)():A;class P extends i.a{constructor(e,t,n){super(r.a,c.a),L(this,"scenes",void 0),L(this,"controls",void 0),L(this,"keys",{}),L(this,"presss",{}),L(this,"toggles",{}),L(this,"releases",{}),L(this,"updateButtons",{}),L(this,"keyWalk",new l.e(0,0)),L(this,"walk",new l.e(0,0)),L(this,"look",new l.e(0,0)),L(this,"oldWalk",new l.e(0,0)),L(this,"oldLook",new l.e(0,0)),L(this,"lookInputType",null),L(this,"isUpdateWalkToKeyboard",!0),L(this,"isAxesUpdateWalkX",!1),L(this,"isAxesUpdateWalkY",!1),L(this,"isAxesUpdateLookX",!1),L(this,"isAxesUpdateLookY",!1),L(this,"isResetLookX",!1),L(this,"isResetLookY",!1),L(this,"isResetWalkX",!1),L(this,"isResetWalkY",!1),L(this,"lockTime",0),L(this,"activeSceneName","none"),L(this,"isChangeTime",!1),L(this,"isTimeLaps",!1),L(this,"setting",void 0),this.setting=e,this.scenes=t,this.controls=n,n.axes(((e,a,i)=>{var o;if(!(0,u.b)()&&t.getActiveSceneName()===this.activeSceneName&&null!==(o=t.getScene(this.activeSceneName))&&void 0!==o&&o.hasRun())switch(e){case"x":this.isAxesUpdateWalkX?(this.walk.x=Math.abs(this.walk.x)>Math.abs(a)?this.walk.x:-a,this.oldWalk.x=Math.abs(this.oldWalk.x)<Math.abs(a)?this.oldWalk.x:-a,this.isResetWalkX=0===a):0===a?(this.walk.x=0,this.oldWalk.x=0):(this.walk.x=-a,this.oldWalk.x=-a,this.isAxesUpdateWalkX=!0),this.isAxesUpdateWalkY?(this.walk.y=Math.abs(this.walk.y)>Math.abs(i)?this.walk.y:i,this.oldWalk.y=Math.abs(this.oldWalk.y)<Math.abs(i)?this.oldWalk.y:i,this.isResetWalkY=0===i):0===i?(this.walk.y=0,this.oldWalk.y=0):(this.walk.y=i,this.oldWalk.y=i,this.isAxesUpdateWalkY=!0);break;case"y":this.lookInputType=n.getInputType(),this.isAxesUpdateLookX?(this.look.x=Math.abs(this.look.x)>Math.abs(a)?this.look.x:a,this.oldLook.x=Math.abs(this.oldLook.x)<Math.abs(a)?this.oldLook.x:a,"gamepad"===this.lookInputType?this.isResetLookX=0===a:this.isResetLookX=!0):0===a?(this.look.x=0,this.oldLook.x=0):(this.look.x=a,this.oldLook.x=a,this.isAxesUpdateLookX=!0),this.isAxesUpdateLookY?(this.look.y=Math.abs(this.look.y)>Math.abs(i)?this.look.y:i,this.oldLook.y=Math.abs(this.oldLook.y)<Math.abs(i)?this.oldLook.y:i,"gamepad"===this.lookInputType?this.isResetLookY=0===i:this.isResetLookY=!0):0===i?(this.look.y=0,this.oldLook.y=0):(this.look.y=i,this.oldLook.y=i,this.isAxesUpdateLookY=!0)}else this.walk.x=0,this.walk.y=0,this.look.x=0,this.look.y=0,this.oldWalk.x=0,this.oldWalk.y=0,this.oldLook.x=0,this.oldLook.y=0})),n.press(((e,n)=>{var a;const i=performance.now();if(!(0,u.b)()&&t.getActiveSceneName()===this.activeSceneName&&null!==(a=t.getScene(this.activeSceneName))&&void 0!==a&&a.hasRun()){if(-1!==e.indexOf("gamepad_")||-1!==e.indexOf("touchpad_")||(0,M.b)()){let a=!1;this.updateButtons[e]?this.releases[e]||n||(this.releases[e]=!0):(this.toggles[e]!==n&&(a=!0),this.enablePresss(e,n,a,t,i),this.toggles[e]=n,this.updateButtons[e]=!0)}}else{for(const e in this.keys)this.keys[e]=0;for(const e in this.presss)this.presss[e]=0;for(const e in this.releases)this.enablePresss(e,!1,!1,this.scenes,i),delete this.releases[e];for(const e in this.updateButtons)delete this.updateButtons[e]}})),n.editor((async e=>{var a;if("editor"===t.getActiveSceneName()&&null!==(a=t.getActiveScene())&&void 0!==a&&a.hasRun()&&!(0,u.b)()){const a=t.getActiveScene();if(null===a||!(a instanceof g.a))return;const i=async()=>{this.clearControls(),"editor"===t.getActiveSceneName()&&(!(0,x.a)()&&this.setting.hasBrowserFullscreen()&&await(0,k.d)(),"keyboard"===n.getInputType()&&await(0,M.c)(),a.run())};switch(e){case"open":a.stop(),"keyboard"===n.getInputType()&&await(0,M.a)(),a.openMap().finally(i);break;case"save":a.stop(),"keyboard"===n.getInputType()&&await(0,M.a)(),a.saveMap().finally(i);break;case"new":a.newMap(!0);break;case"build":const e=a.getMap();a.stop();const[t,o,s]=e.getSize();for(let e=0;e<t;e=e+1|0)for(let t=0;t<o;t=t+1|0)for(let n=0;n<s;n=n+1|0)this.adjastTile(a,e,t,n,!1);e.requestRefleshDistanceField();const r=setInterval((()=>{e.hasUpdate()||(clearInterval(r),a.run())}));break;case"preview":a.previewMap()}}}))}adjastTile(e,t,n,a,i){}enablePresss(e,t,n,a,i){"keyboard_enter"!==e&&"touchpad_a"!==e&&"gamepad_a"!==e&&"mouse_left"!==e||(this.keys.next=t?i:0),"touchpad_b"!==e&&"gamepad_b"!==e&&"mouse_right"!==e||(this.keys.cancel=t?i:0);const o=this.controls;switch(!0){case o.hasKey("forward",e):this.keyWalk.y=t?1:1===this.keyWalk.y?0:this.keyWalk.y,this.isUpdateWalkToKeyboard=!0;break;case o.hasKey("back",e):this.keyWalk.y=t?-1:-1===this.keyWalk.y?0:this.keyWalk.y,this.isUpdateWalkToKeyboard=!0;break;case o.hasKey("left",e):this.keyWalk.x=t?1:1===this.keyWalk.x?0:this.keyWalk.x,this.isUpdateWalkToKeyboard=!0;break;case o.hasKey("right",e):this.keyWalk.x=t?-1:-1===this.keyWalk.x?0:this.keyWalk.x,this.isUpdateWalkToKeyboard=!0;break;case o.hasKey("weapon-wheel",e):case o.hasKey("weapon-wheel-right",e):case o.hasKey("weapon-wheel-left",e):this.keys.menu=t?i:0;break;case"touchpad_select"===e:case"gamepad_select"===e:this.keys.start=t?i:0;break;case"touchpad_start"===e:case"gamepad_start"===e:case"keyboard_escape"===e:this.keys.escape=t?i:0;break;case"touchpad_a"===e:case"gamepad_rt"===e:case"mouse_left"===e:this.keys.primary=t?i:0;break;case"touchpad_b"===e:case"gamepad_lt"===e:case"mouse_right"===e:this.keys.secondary=t?i:0;break;case"mouse_wheel_up"===e:case"gamepad_left"===e:this.keys.add=t?i:0;break;case"mouse_wheel_down"===e:case"gamepad_right"===e:this.keys.sub=t?i:0}}clearControls(){this.controls.clear();for(const e in this.keys)this.keys[e]=0;this.keyWalk.x=0,this.keyWalk.y=0,this.updateWalk()}updateWalk(){const e=Math.min((0,l.o)(this.keyWalk.x,this.keyWalk.y,0,0),1),t=(0,l.m)(this.keyWalk.x,this.keyWalk.y,0,0),n=Math.cos(t)*e,a=Math.sin(t)*e;this.isAxesUpdateWalkX?(this.walk.x=Math.abs(this.walk.x)>Math.abs(n)?this.walk.x:-n,this.oldWalk.x=Math.abs(this.oldWalk.x)<Math.abs(n)?this.oldWalk.x:-n):0===n?(this.walk.x=0,this.oldWalk.x=0):(this.walk.x=n,this.oldWalk.x=n,this.isAxesUpdateWalkX=!0),this.isAxesUpdateWalkY?(this.walk.y=Math.abs(this.walk.y)>Math.abs(a)?this.walk.y:a,this.oldWalk.y=Math.abs(this.oldWalk.y)<Math.abs(a)?this.oldWalk.y:a):0===a?(this.walk.y=0,this.oldWalk.y=0):(this.walk.y=a,this.oldWalk.y=a,this.isAxesUpdateWalkX=!0)}additional(e,t,n){var a,i;const o=performance.now(),s=t.getComponent(r.a),l=n.getCamera(),h=n.getControlManager();this.activeSceneName=n.getName();for(const e in this.keys)s.keys[e]=this.keys[e];for(const e in this.presss)s.presss[e]=this.presss[e];const u=t.getComponent(c.a);if(!s.openMenu&&performance.now()-((null===(a=t.getComponent(f.a))||void 0===a?void 0:a.lockTime)||0)>100*((null===(i=t.getComponent(f.a))||void 0===i?void 0:i.lockLockWait)||0)){const t=(0,O.a)(this.setting,h);s.cmda.x=this.look.x*t/Math.max(1,l.zoom)*(0,v.c)(e/n.getSpeed(),0)*(n instanceof g.a&&this.setting.hasInvertX()?-1:1),s.cmda.y=this.look.y*t/Math.max(1,l.zoom)*(0,v.c)(e/n.getSpeed(),0)*(n instanceof g.a&&this.setting.hasInvertX()?-1:1)}else s.cmda.x=0,s.cmda.y=0,s.openMenu?t.hasComponent(f.a)&&(t.getComponent(f.a).lockTime=o):(this.look.x=0,this.look.y=0);s.openMenu?(u.move.x=0,u.move.z=0):(u.move.x=this.walk.x,u.move.z=this.walk.y),u.look.x=t.direction.x,u.look.y=t.direction.y,s.axes.x.x=Math.min(1,Math.max(-1,this.walk.x)),s.axes.x.y=Math.min(1,Math.max(-1,this.walk.y)),s.axes.y.x=Math.min(1,Math.max(-1,this.look.x)),s.axes.y.y=Math.min(1,Math.max(-1,this.look.y)),n.getSoundManager().setVolume(1)}offset(e,t,n){const a=performance.now(),i=n.getControlManager(),{position:c,direction:v}=t,O=t.getComponent(r.a);this.setting.hasBrowserFullscreen()&&!(0,k.c)()&&(this.keys.escape=a),this.keys.menu>0&&this.keys.menu!==this.presss.menu&&(O.openMenu=!O.openMenu);const A=(0,k.c)(),L=(0,M.b)(),P=this.keys.escape>0&&this.keys.escape!==this.presss.escape,I="keyboard"===i.getInputType()&&!A&&A!==O.isFullscreen,N=!L&&L!==O.isPointerLock;if((P||I||N)&&((0,S.b)(O.exitID),O.exitID=-1),-1!==O.exitID||(0,u.b)()||(O.exitID=(0,S.e)((async()=>{const e=i.getInputType();if(!(0,u.b)()&&("gamepad"===e||"touchpad"===e?P:(0,x.a)()&&P||I||"keyboard"===e&&N)){const e=n.getSceneManager();n instanceof g.a&&await n.save(),e.activeScene("title")}O.exitID=-1}))),O.isFullscreen=A,O.isPointerLock=L,n instanceof g.a)if(this.keys.start&&a-this.keys.start>250){if(this.keys.start=0,this.presss.start=0,n.newMap(!0))return}else!this.keys.start&&this.presss.start&&this.keys.start!==this.presss.start&&n.previewMap();const[R,W,z]=n.getWorldSize(),[D,F,U,,H]=n.hitScan("range",v.x,v.y,c.x,c.y,c.z,1/0,[t.getID()]),[B,G,Y]=(0,l.r)(v.x,v.y,0,0,1/256);let V=Math.floor(D+B),j=Math.floor(F+G),K=Math.floor(U+Y);if(O.menuMode!==m.a.MOVIE&&(this.isChangeTime=!1,this.isTimeLaps=!1),O.editMode="",O.openMenu?O.isReleaseClick=!1:this.keys.primary||(O.isReleaseClick=!0),!O.openMenu&&O.isReleaseClick){switch(O.menuMode){case m.a.VOXEL:if(O.editMode="voxel",(!(n instanceof s.a)||!n.hasOutOfWorld(V,j,K))&&this.keys.primary&&this.keys.primary!==this.presss.primary){const[ee,te]=(0,l.n)(D,F,U,Math.floor(V)+.5,Math.floor(j)+.5,Math.floor(K)+.5),[,,,,ne]=n.hitScanVoxel(ee,te,Math.floor(V)+.5,Math.floor(j)+.5,Math.floor(K)+.5,1/0);switch(ne){case 1:V-=1;break;case 0:V+=1;break;case 3:j+=1;break;case 2:j-=1;break;case 5:K-=1;break;case 4:K+=1}const ae=O.pallets[O.menuMode];n instanceof s.a&&n.hasOutOfWorld(V,j,K)||!(0,s.b)(n.getVoxel(V,j,K),y.u)||!(ae instanceof h.a)||(n.setVoxel(V,j,K,ae,!0,!0),this.adjastTile(n,V,j,K,!0))}break;case m.a.TEXTURE:O.editMode="texture";const Q=O.pallets[O.menuMode];if(!(n instanceof s.a&&n.hasOutOfWorld(V,j,K)||(0,s.b)(n.getVoxel(V,j,K),y.u)||"string"!=typeof Q)&&this.keys.primary){const[ie,oe]=(0,l.n)(D,F,U,Math.floor(V)+.5,Math.floor(j)+.5,Math.floor(K)+.5),[,,,,se]=n.hitScanVoxel(ie,oe,Math.floor(V)+.5,Math.floor(j)+.5,Math.floor(K)+.5,1/0),re=n.getVoxel(V,j,K);let le=re.front,he=re.back,ce=re.right,ue=re.left,pe=re.top,de=re.bottom;switch(se){case 1:le=Q;break;case 0:he=Q;break;case 3:de=Q;break;case 2:pe=Q;break;case 5:ue=Q;break;case 4:ce=Q}const ge=new h.a(re.position.x,re.position.y,re.position.z,le,he,ce,ue,pe,de,re.flipXFront,re.flipYFront,re.flipXBack,re.flipYBack,re.flipXRight,re.flipYRight,re.flipXLeft,re.flipYLeft,re.flipXTop,re.flipYTop,re.flipXBottom,re.flipYBottom);n.setVoxel(V,j,K,ge,!1,!1)}break;case m.a.PLAYABLE:case m.a.SPAWNER:case m.a.ITEM:case m.a.WEAPON:case m.a.ENEMY:case m.a.TUTORIAL:if(O.editMode="entity",(!(n instanceof s.a)||!n.hasOutOfWorld(V,j,K))&&this.keys.primary&&this.keys.primary!==this.presss.primary){const[me,fe]=(0,l.n)(D,F,U,Math.floor(V)+.5,Math.floor(j)+.5,Math.floor(K)+.5),[,,,,ye]=n.hitScanVoxel(me,fe,Math.floor(V)+.5,Math.floor(j)+.5,Math.floor(K)+.5,1/0);switch(ye){case 1:V-=1;break;case 0:V+=1;break;case 3:j+=1;break;case 2:j-=1;break;case 5:K-=1;break;case 4:K+=1}const ve=O.pallets[O.menuMode];if((!(n instanceof s.a)||!n.hasOutOfWorld(V,j,K))&&(0,s.b)(n.getVoxel(V,j,K),y.u)&&ve instanceof E.a&&0===n.getEntitysOfRange("range",V+.5,j,K+.5,1,1).filter((e=>e instanceof p.a)).length){const we=ve.getLimit();let be=0;n.getEntitys().reverse().filter((e=>e instanceof p.a&&e.pawn===ve&&(be++,be>=we))).forEach((e=>e.remove()));const xe=new p.a("pawn",V,j,K,0,ve);n.addEntitys(xe),ve.hasAngle()&&n.addEntitys(new _.a(xe))}}}if(null!==H&&(n instanceof s.a&&n.hasOutOfWorld(V,j,K)||!(H instanceof o.a)||(this.keys.add&&this.keys.add!==this.presss.add?H.direction.x=(H.direction.x-l.d)%l.a:this.keys.sub&&this.keys.sub!==this.presss.sub&&(H.direction.x=(H.direction.x+l.d)%l.a))),("voxel"===O.editMode||"entity"===O.editMode)&&this.keys.secondary&&this.keys.secondary!==this.presss.secondary&&(null!==H&&(n instanceof s.a&&n.hasOutOfWorld(V,j,K)||H.remove()),!(n instanceof s.a)||!n.hasOutOfWorld(V,j,K))){const Me=2*n.getMargin()+1;(R>Me||W>Me||z>Me)&&(n.setVoxel(V,j,K,y.u,!0,!0),this.adjastTile(n,V,j,K,!1))}}const X=O.openMenu;if(i.hasStick()!==X&&(i.changeStick("y",X),this.look.x=0,this.look.y=0),O.menuMode===m.a.MOVIE?(0,b.f)():(0,b.a)(),O.openMenu){const Ee=t.getComponent(f.a);Ee.enable=!0,Ee.axisType="x",Ee.themeColor=y.r[this.setting.getTheme()].getColor();const _e=["next"];function Ce(){O.menuMode=m.a.TITLE}function Te(){O.openMenu=!1}switch(O.menuMode){case m.a.TITLE:for(const Se in m.a){const ke=m.a[Se];ke===m.a.TITLE||!(0,C.a)()&&ke===m.a.TUTORIAL||Ee.menus.push(new f.c(Se,_e,!1,(()=>!0),(()=>""),(()=>O.menuMode=ke)))}break;case m.a.GAME_MODE:n instanceof g.a&&Ee.menus.push(new f.c("BACK",_e,!1,(()=>!0),(()=>""),(()=>O.menuMode=m.a.TITLE)),...(0,C.a)()?[new f.c("TUTORIAL",_e,!1,(()=>!0),(()=>""),(()=>{n.setGameMode(T.a.TUTORIAL),Ce(),Te()})),new f.c("PRACTICE",_e,!1,(()=>!0),(()=>""),(()=>{n.setGameMode(T.a.PRACTICE),Ce(),Te()}))]:[],new f.c("CAMPAING",_e,!1,(()=>!0),(()=>""),(()=>{n.setGameMode(T.a.CAMPAING),Ce(),Te()})),new f.c("HORDE",_e,!1,(()=>!0),(()=>""),(()=>{n.setGameMode(T.a.HORDE),Ce(),Te()})));break;case m.a.THEME:Ee.menus.push(new f.c("BACK",_e,!1,(()=>!0),(()=>""),(()=>O.menuMode=m.a.TITLE)),new f.c("METAL",_e,!1,(()=>!0),(()=>""),(()=>{n.setTileSet(y.s.METAL),Ce(),Te()})),new f.c("RUINS",_e,!1,(()=>!0),(()=>""),(()=>{n.setTileSet(y.s.RUINS),Ce(),Te()})));break;case m.a.BACKGROUND:Ee.menus.push(new f.c("BACK",_e,!1,(()=>!0),(()=>""),(()=>O.menuMode=m.a.TITLE)),new f.c("GRASS",_e,!1,(()=>!0),(()=>""),(()=>{n.setBackground(y.a.GRASS),Ce(),Te()})),new f.c("DESERT",_e,!1,(()=>!0),(()=>""),(()=>{n.setBackground(y.a.DESERT),Ce(),Te()})),new f.c("SEA",_e,!1,(()=>!0),(()=>""),(()=>{n.setBackground(y.a.SEA),Ce(),Te()})),new f.c("LAVA",_e,!1,(()=>!0),(()=>""),(()=>{n.setBackground(y.a.LAVA),Ce(),Te()})),new f.c("BLOOD",_e,!1,(()=>!0),(()=>""),(()=>{n.setBackground(y.a.BLOOD),Ce(),Te()})),new f.c("SECRET",_e,!1,(()=>!0),(()=>""),(()=>{n.setBackground(y.a.SECRET),Ce(),Te()})));break;case m.a.VOXEL:Ee.menus.push(new f.c("BACK",_e,!1,(()=>!0),(()=>""),(()=>O.menuMode=m.a.TITLE)),new f.c("default",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=y.t.DEFAULT,Te()})),new f.c("door default",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=y.t.DOOR_DEFAULT,Te()})),new f.c("door red",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=y.t.DOOR_RED,Te()})),new f.c("door blue",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=y.t.DOOR_BLUE,Te()})),new f.c("door yellow",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=y.t.DOOR_YELLOW,Te()})),new f.c("edit block",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=y.t.EDIT_BLOCK,Te()})));break;case m.a.TEXTURE:Ee.menus.push(new f.c("BACK",_e,!1,(()=>!0),(()=>""),(()=>O.menuMode=m.a.TITLE)),new f.c("wall",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]="WALL",Te()})),new f.c("floor",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]="FLOOR",Te()})),new f.c("ceil",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]="CEIL",Te()})),new f.c("tile1",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]="TILE1",Te()})),new f.c("tile2",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]="TILE2",Te()})),new f.c("tile3",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]="TILE3",Te()})),new f.c("tile4",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]="TILE4",Te()})),new f.c("grab",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]="GRAB",Te()})),new f.c("assist grab",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]="ASSIST_GRAB",Te()})),new f.c("wallrun",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]="WALLRUN",Te()})),new f.c("door sliding",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]="DOOR_SLIDING",Te()})),new f.c("important",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]="IMPORTANT",Te()})),new f.c("gole",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]="GOLE",Te()})),new f.c("secret",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]="SECRET",Te()})),new f.c("door default",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]="DOOR_DEFAULT",Te()})),new f.c("door red",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]="DOOR_RED",Te()})),new f.c("door blue",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]="DOOR_BLUE",Te()})),new f.c("door yellow",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]="DOOR_YELLOW",Te()})),new f.c("edit zone",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]="EDIT_ZONE",Te()})));break;case m.a.PLAYABLE:Ee.menus.push(new f.c("BACK",_e,!1,(()=>!0),(()=>""),(()=>O.menuMode=m.a.TITLE)),new f.c("start",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.PLAYER,Te()})),new f.c("gole",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.GOLE,Te()})),new f.c("secret",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.SECRET,Te()})),new f.c("shop",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.OBJECT_SHOP,Te()})),new f.c("checkpoint",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.CHECKPOINT,Te()})),new f.c("block editor",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.OBJECT_EDITOR,Te()})),new f.c("drum",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.OBJECT_DRUM,Te()})),new f.c("key red",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.ITEM_KEY_RED,Te()})),new f.c("key blue",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.ITEM_KEY_BLUE,Te()})),new f.c("key yellow",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.ITEM_KEY_YELLOW,Te()})),new f.c("key random",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.ITEM_KEY_RANDOM,Te()})));break;case m.a.SPAWNER:Ee.menus.push(new f.c("BACK",_e,!1,(()=>!0),(()=>""),(()=>O.menuMode=m.a.TITLE)),new f.c("health spawner",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.SPAWNER_HEALTH_ELIXER,Te()})),new f.c("armor spawner",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.SPAWNER_ARMOR_ELIXER,Te()})),new f.c("stamina spawner",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.SPAWNER_ENERGY_ELIXER,Te()})),new f.c("magazine spawner",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.SPAWNER_MAGAZINE,Te()})),new f.c("shell spawner",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.SPAWNER_SHELL,Te()})),new f.c("rocket spawner",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.SPAWNER_ROCKET,Te()})),new f.c("cell spawner",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.SPAWNER_CELL,Te()})),new f.c("target spawner",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.SPAWNER_TARGET,Te()})),new f.c("horde ground",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.HORDE_GROUND_SPAWNER,Te()})),new f.c("horde sniper",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.HORDE_SNIPER_SPAWNER,Te()})),new f.c("horde air",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.HORDE_SKY_SPAWNER,Te()})));break;case m.a.ITEM:Ee.menus.push(new f.c("stim",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.ITEM_MEAT_STIM,Te()})),new f.c("medikit",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.ITEM_MEAT_MEDIKIT,Te()})),new f.c("elixir",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.ITEM_MEAT_ELIXIR,Te()})),new f.c("magazine",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.ITEM_MAGAZINE,Te()})),new f.c("shell",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.ITEM_SHELL,Te()})),new f.c("rocket",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.ITEM_ROCKET,Te()})),new f.c("cell",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.ITEM_CELL,Te()})));break;case m.a.WEAPON:Ee.menus.push(new f.c("BACK",_e,!1,(()=>!0),(()=>""),(()=>O.menuMode=m.a.TITLE)),new f.c("punch",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.ITEM_PUNCH,Te()})),new f.c("slowball",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.ITEM_SLOWBALL,Te()})),new f.c("monocular",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.ITEM_BINOCULARS,Te()})),new f.c("combobooster",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.ITEM_COMBOBOOSTER,Te()})),new f.c("freezegrenade",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.ITEM_FROZEN_GRENADE,Te()})),new f.c("pistol",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.ITEM_PISTOL,Te()})),new f.c("handcannon",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.ITEM_HANDCANNON,Te()})),new f.c("hookshot",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.ITEM_HOOKSHOT,Te()})),new f.c("machingun",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.ITEM_MACHINGUN,Te()})),new f.c("chainshotgun",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.ITEM_CHAINSHOTGUN,Te()})),new f.c("shotgun",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.ITEM_SHOTGUN,Te()})),new f.c("heavycannon",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.ITEM_HEAVYCANNON,Te()})),new f.c("launcher",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.ITEM_LAUNCHER,Te()})),new f.c("clusterbow",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.ITEM_CLUSTERBOW,Te()})),new f.c("plasmagun",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.ITEM_PLASMAGUN,Te()})),new f.c("plasmasmg",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.ITEM_PLASMASMG,Te()})));break;case m.a.ENEMY:Ee.menus.push(new f.c("BACK",_e,!1,(()=>!0),(()=>""),(()=>O.menuMode=m.a.TITLE)),new f.c("melee guy",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.ENEMY_GUY_MELEE,Te()})),new f.c("pistol guy",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.ENEMY_GUY_PISTOL,Te()})),new f.c("shotgun guy",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.ENEMY_GUY_SHOTGUN,Te()})),new f.c("machingun guy",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.ENEMY_GUY_MACHINGUN,Te()})),new f.c("armor pistol guy",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.ENEMY_GUY_PISTOL_ARMOR,Te()})),new f.c("armor shotgun guy",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.ENEMY_GUY_SHOTGUN_ARMOR,Te()})),new f.c("armor machingun guy",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.ENEMY_GUY_MACHINGUN_ARMOR,Te()})),new f.c("armor melee guy",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.ENEMY_GUY_MELEE_ARMOR,Te()})),new f.c("missile guy",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.ENEMY_GUY_MISSILE,Te()})),new f.c("ball drone",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.ENEMY_BALL_DRONE,Te()})),new f.c("ball tank",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.ENEMY_BALL_TANK,Te()})));break;case m.a.TUTORIAL:Ee.menus.push(new f.c("BACK",_e,!1,(()=>!0),(()=>""),(()=>O.menuMode=m.a.TITLE)),new f.c("help 1",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.HELP_1,Te()})),new f.c("help 2",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.HELP_2,Te()})),new f.c("help 3",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.HELP_3,Te()})),new f.c("help 4",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.HELP_4,Te()})),new f.c("help 5",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.HELP_5,Te()})),new f.c("help 6",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.HELP_6,Te()})),new f.c("help 7",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.HELP_7,Te()})),new f.c("help 8",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.HELP_8,Te()})),new f.c("help 9",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.HELP_9,Te()})),new f.c("help 10",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.HELP_10,Te()})),new f.c("help 11",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.HELP_11,Te()})),new f.c("help 12",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.HELP_12,Te()})),new f.c("help 13",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.HELP_13,Te()})),new f.c("help 14",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.HELP_14,Te()})),new f.c("help 15",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.HELP_15,Te()})),new f.c("help 16",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.HELP_16,Te()})),new f.c("help 17",_e,!1,(()=>!0),(()=>""),(()=>{O.pallets[O.menuMode]=d.a.HELP_17,Te()})));break;case m.a.MOVIE:Ee.menus.push(new f.c("BACK",_e,!1,(()=>!0),(()=>""),(()=>O.menuMode=m.a.TITLE)),new f.c("start",_e,!1,(()=>!0),(()=>""),(()=>Te())),new f.c("change time ".concat(this.isChangeTime?"on":"off"),_e,!0,(()=>!0),(()=>""),(()=>{this.isChangeTime=!this.isChangeTime,this.isChangeTime&&(this.isTimeLaps=!1)})),new f.c("time laps ".concat(this.isTimeLaps?"on":"off"),_e,!0,(()=>!0),(()=>""),(()=>{this.isTimeLaps=!this.isTimeLaps,this.isTimeLaps&&(this.isChangeTime=!1)})))}this.keys.cancel>0&&this.keys.cancel!==this.presss.cancel&&(O.menuMode===m.a.TITLE?O.openMenu=!1:Ce()),this.lockTime=performance.now()}else{var q;-1!==((null===(q=t.getComponent(f.a))||void 0===q?void 0:q.value)||-1)&&performance.now()-this.lockTime<175&&(O.cmda.x=0,O.cmda.y=0,this.look.x=0,this.look.y=0)}if(!O.openMenu){const Oe=n.getSun(),Ae=Oe.getComponent(w.a);if(O.menuMode===m.a.MOVIE&&(this.isChangeTime||this.isTimeLaps)){const Le=i.getInputType();if("gamepad"===Le||"touchpad"===Le){const Pe=O.axes.y;(Math.abs(Pe.x)>25e-5||Math.abs(Pe.y)>25e-5)&&(this.isChangeTime&&(Oe.direction.y=(0,l.m)(Pe.x,Pe.y,0,0),Ae.speed=0),this.isTimeLaps&&(Ae.speed=((0,l.m)(-Pe.x,-Pe.y,0,0)-Math.PI)/Math.PI*.01))}else{let Ie=0;this.keys.add&&this.keys.add!==this.presss.add?Ie=1:this.keys.sub&&this.keys.sub!==this.presss.sub&&(Ie=-1),this.isChangeTime&&(Oe.direction.y+=l.a/50*Ie,Ae.speed=0),this.isTimeLaps&&(Ae.speed+=l.a/50*Ie*1e-4),v.x+=O.cmda.x,v.y+=O.cmda.y}}else v.x+=O.cmda.x,v.y+=O.cmda.y}t.direction.y=Math.max(-l.b,Math.min(l.b,t.direction.y));const[J,Z,$]=n.getWorldSize();c.x=Math.min(J-1,Math.max(0,c.x)),c.y=Math.min(Z-1,Math.max(0,c.y)),c.z=Math.min($-1,Math.max(0,c.z)),this.isUpdateWalkToKeyboard&&(this.updateWalk(),this.isUpdateWalkToKeyboard=!1),O.cmda.x=0,O.cmda.y=0}preended(e){const t=performance.now();this.isAxesUpdateWalkX=!1,this.isAxesUpdateWalkY=!1,this.isAxesUpdateLookX=!1,this.isAxesUpdateLookY=!1;for(const e in this.updateButtons)this.updateButtons[e]=!1;for(const e in this.keys)this.presss[e]=this.keys[e];for(const e in this.releases)this.enablePresss(e,!1,!1,this.scenes,t),delete this.releases[e];for(const e in this.updateButtons)delete this.updateButtons[e];this.walk.x=this.oldWalk.x,this.walk.y=this.oldWalk.y,"gamepad"===this.controls.getInputType()&&(this.look.x=this.oldLook.x,this.look.y=this.oldLook.y),this.isResetWalkX&&(this.walk.x=0,this.isResetWalkX=!1),this.isResetWalkY&&(this.walk.y=0,this.isResetWalkY=!1),this.isResetLookX&&(this.look.x=0,this.isResetLookX=!1),this.isResetLookY&&(this.look.y=0,this.isResetLookY=!1)}}a()}catch(I){a(I)}}))},(e,t,n)=>{"use strict";n.d(t,{a:()=>r});n(1),n(2);var a=n(31),i=n(0),o=n(6),s=n(4);class r extends s.a{constructor(){super(a.a)}movable(e,t,n){var s,r,l;const{position:h}=t,c=t.getComponent(a.a);let[u,p,d]=(0,i.r)(c.look.x,c.look.y,c.move.x*c.speed,c.move.y*c.speed,c.move.z*c.speed);u*=e,p*=e,d*=e,0===((null===(s=t.getComponent(o.a))||void 0===s?void 0:s.hit.x)||0)&&(u>0||u<0)&&(h.x+=u),0===((null===(r=t.getComponent(o.a))||void 0===r?void 0:r.hit.y)||0)&&(p>0||p<0)&&(h.y+=p),0===((null===(l=t.getComponent(o.a))||void 0===l?void 0:l.hit.z)||0)&&(d>0||d<0)&&(h.z+=d)}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>s});var a=n(264),i=n(0),o=n(334);class s extends o.a{constructor(){super(a.a)}additional(e,t,n){const o=t.getComponent(a.a);0!==o.speed&&(t.direction.y=(0,i.t)(t.direction.y+o.speed*i.a*e))}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>o});var a=n(264),i=n(145);class o extends i.a{constructor(e){super(e,new a.a)}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>r});var a=n(353),i=n(503),o=n(4),s=n(0);class r extends o.a{constructor(){super(i.a,a.a)}offset(e,t,n){const o=t.getComponent(i.a),r=t.getComponent(a.a).target;t.position.x=r.position.x,t.position.y=r.position.y+.01,t.position.z=r.position.z,o.rotate=r.direction.x-s.b,r.hasLive()||t.remove()}}},(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{a:()=>l});var i=n(354),o=n(254),s=n(221),r=e([o]);o=(r.then?(await r)():r)[0];class l extends s.a{constructor(){super(i.a)}additional(e,t,n){n.getCamera().fov=n instanceof o.a?n.getFOVToCamera():1}}a()}catch(e){a(e)}}))},(e,t,n)=>{"use strict";n.d(t,{a:()=>o});var a=n(0),i=n(22);class o{constructor(){var e,t,n;e=this,t="size",n=new a.e(0,0),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}getSize(){return[this.size.x,this.size.y]}applyData(e){this.size.x=e.size.width,this.size.y=e.size.height}destroy(){new i.a(this,"destroy").trigger()}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>o});n(14),n(7),n(106),n(308),n(180),n(15),n(16);var a=n(22);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o{constructor(e,t){i(this,"axess",new Array),i(this,"presss",new Array),i(this,"cursors",new Array),i(this,"edits",new Array),i(this,"channel",void 0),i(this,"keyconfig",void 0),i(this,"isStick",!1),i(this,"isPointerLockPoint",!1),i(this,"inputType","none"),this.channel=e,this.keyconfig=t,(0,a.b)(this.channel,"message",(e=>{const{data:t}=e;if(t instanceof Object)switch(t.method){case"press":this.firePress(t.name,t.press);break;case"axes":this.fireAxes(t.name,t.x,t.y);break;case"cursor":this.fireCursor(t.x,t.y);break;case"editor":this.fireEditor(t.name);break;case"changedevice":this.inputType!==t.inputType&&this.channel.postMessage({method:"changedevice",inputType:t.inputType}),this.inputType=t.inputType}}))}initKeyConfig(e){for(const t in e)this.keyconfig.hasOwnProperty(t)||(this.keyconfig[t]=e[t])}axes(e){-1===this.axess.indexOf(e)&&this.axess.push(e)}press(e){-1===this.presss.indexOf(e)&&this.presss.push(e)}editor(e){-1===this.edits.indexOf(e)&&this.edits.push(e)}firePress(e,t){this.presss.forEach((n=>n(e,t)))}fireAxes(e,t,n){this.axess.forEach((a=>a(e,t,n)))}fireCursor(e,t){this.cursors.forEach((n=>n(e,t)))}fireEditor(e){this.edits.forEach((t=>t(e)))}cursor(e){-1===this.cursors.indexOf(e)&&this.cursors.push(e)}getInputType(){return this.inputType}getKey(e){var t,n,a,i;let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getInputType();return(null===(t=this.keyconfig[e])||void 0===t||null===(n=t.find((e=>0===e.indexOf(o))))||void 0===n?void 0:n.replace(new RegExp("^".concat(o,"_"),"g"),""))||("keyboard"===o?"mouse ".concat(null===(a=this.keyconfig[e])||void 0===a||null===(i=a.find((e=>0===e.indexOf("mouse"))))||void 0===i?void 0:i.replace(new RegExp("^mouse_","g"),"")):null)}hasKey(e,t){return this.keyconfig.hasOwnProperty(e)&&this.keyconfig[e].includes(t)}hasPointerLockPoint(){return this.isPointerLockPoint}hasStick(){return this.isStick}changeStick(e,t){this.channel.postMessage({method:"stick",name:e,value:t}),this.isStick=t}clear(){this.channel.postMessage({method:"clear"})}destroy(){this.clear(),new a.a(this,"destroy").trigger()}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>s});n(15),n(16);var a=n(22);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;i(this,"id",void 0),i(this,"src",void 0),i(this,"isInit",!1),i(this,"target",void 0),i(this,"isPlay",!1),i(this,"isLoop",!1),i(this,"volume",1),i(this,"speed",1),i(this,"oscillatorType",null),i(this,"vibratoSpeed",0),i(this,"vibratoDepth",0),i(this,"isLive",!0),this.id=e,this.src=t,this.target=n}getID(){return this.id}getSrc(){return this.src}play(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isPlay=!0,this.isLoop=e}pause(){this.isPlay=!1}stop(){this.isLive=!1}getVolume(){return this.volume}getSpeed(){return this.speed}getOscillatorType(){return this.oscillatorType}getVibratoSpeed(){return this.vibratoSpeed}getVibratoDepth(){return this.vibratoDepth}hasLive(){return this.isLive}hasInit(){return this.isInit}hasPlay(){return this.isPlay}hasLoop(){return this.isLoop}setVolume(e){return this.volume=e,this}setSpeed(e){return this.speed=e,this}setTarget(e){return this.target=e,this}setOscillatorType(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sine";return this.oscillatorType=e,this}setVibratoSpeed(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.vibratoSpeed=e,this}setVibratoDepth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.vibratoDepth=e,this}createTransferData(){const e={id:this.getID(),src:this.getSrc(),init:this.hasInit(),target:null===this.target?null:{x:this.target.position.x,y:this.target.position.y,z:this.target.position.z},isPlay:this.hasPlay(),isLoop:this.hasLoop(),volume:this.getVolume(),speed:this.getSpeed(),oscillatorType:this.getOscillatorType(),vibratoSpeed:this.getVibratoSpeed(),vibratoDepth:this.getVibratoDepth()};return this.isInit=!0,e}}class s{constructor(){i(this,"stacks",{}),i(this,"sounds",{}),i(this,"volume",1)}hasSound(e){return this.stacks.hasOwnProperty(e)||this.sounds.hasOwnProperty(e)}getSound(e){return this.stacks[e]||this.sounds[e]||null}getVolume(){return this.volume}setVolume(e){this.volume=e}create(e,t,n){const a=new o(n,e,t);return this.stacks[n]=a,a}createTransferData(e,t,n){const a={};for(const e in this.stacks){const t=this.stacks[e];if(t.hasLive()){if(this.sounds.hasOwnProperty(e)&&this.sounds[e].hasLive()){this.sounds[e].stop();continue}this.sounds[e]=t}delete this.stacks[e]}for(const e in this.sounds){const t=this.sounds[e];t.hasLive()?a[e]=t.createTransferData():delete this.sounds[e]}return{center:{direction:{x:e.x,y:e.y},position:{x:t.x,y:t.y,z:t.z}},volume:this.getVolume(),speed:n.getSpeed(),sounds:a}}applyData(e){const t=e.lives.map((e=>this.sounds[e])).filter((e=>!!e&&e.hasLive()));for(const e in this.sounds){const n=this.sounds[e];t.includes(n)||n.hasLive()&&n.stop()}}clear(){for(const e in this.stacks)delete this.stacks[e];for(const e in this.sounds)this.sounds[e].stop()}destroy(){this.clear(),new a.a(this,"destroy").trigger(this)}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>o});var a=n(22);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o{constructor(){i(this,"assets",{}),i(this,"isUpdate",!0)}getBufferLocation(e,t){const n=this.assets.hasOwnProperty(e)?this.assets[e]:null;if(null===n)return 0;const a=n.locations[t]||null,i=null!==a&&a[0]||null;return null===i?0:i.id}checkUpdate(){const{isUpdate:e}=this;return this.isUpdate=!1,e}applyData(e){this.isUpdate=this.isUpdate||e.isUpdate;for(const t in e.assets)this.assets[t]=e.assets[t]}destroy(){new a.a(this,"destroy").trigger()}}},(e,t,n)=>{"use strict";function a(e){let t=e;return t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),t}function i(e){let t=e;return t&=1023,t=4278190335&(t^t<<16),t=50393103&(t^t<<8),t=51130563&(t^t<<4),t=153391689&(t^t<<2),t}function o(e){let t=e;return t&=153391689,t=51130563&(t^t>>2),t=50393103&(t^t>>4),t=4278190335&(t^t>>8),t=1023&(t^t>>16),t}function s(e){return e}function r(e,t){return a(0|e)|a(0|t)<<1}function l(e,t,n){return i(0|e)|i(0|t)<<1|i(0|n)<<2}function h(e){return[o(e>>0),o(e>>1),o(e>>2)]}n.d(t,{a:()=>h,b:()=>s,c:()=>r,d:()=>l})},(e,t,n)=>{"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{a:()=>i});class i{constructor(e,t,n){a(this,"src",void 0),a(this,"bounding",void 0),a(this,"index",void 0),this.src=e,this.bounding=t,this.index=n}}},(e,t,n)=>{"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{a:()=>i});class i{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;a(this,"color",void 0),a(this,"invert",void 0),this.color=e,this.invert=null===t?[1-e[0],1-e[1],1-e[2]]:t}getColor(){return this.color}getInvertColor(){return this.invert}}},(e,t,n)=>{"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{a:()=>i});class i{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];a(this,"material",void 0),a(this,"scale",void 0),a(this,"rotate",void 0),a(this,"flip",void 0),this.material=e,this.scale=t,this.rotate=n,this.flip={x:i,y:o}}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>a});class a{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;var t,n,a;a=void 0,(n="value")in(t=this)?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,this.value=e}}},(e,t,n)=>{"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{a:()=>i});class i{constructor(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;a(this,"axes",void 0),a(this,"bottom",void 0),this.axes={x:e,y:t,z:n},this.bottom=i}}},(e,t,n)=>{"use strict";n.d(t,{a:()=>a});class a{}}],o={};function s(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={exports:{}};return i[e].call(n.exports,n,n.exports,s),n.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",a=e=>{e&&!e.d&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},s.a=(i,o,s)=>{var r;s&&((r=[]).d=1);var l,h,c,u=new Set,p=i.exports,d=new Promise(((e,t)=>{c=t,h=e}));d[t]=p,d[e]=e=>(r&&e(r),u.forEach(e),d.catch((e=>{}))),i.exports=d,o((i=>{var o;l=(i=>i.map((i=>{if(null!==i&&"object"==typeof i){if(i[e])return i;if(i.then){var o=[];o.d=0,i.then((e=>{s[t]=e,a(o)}),(e=>{s[n]=e,a(o)}));var s={};return s[e]=e=>e(o),s}}var r={};return r[e]=e=>{},r[t]=i,r})))(i);var s=()=>l.map((e=>{if(e[n])throw e[n];return e[t]})),h=new Promise((t=>{(o=()=>t(s)).r=0;var n=e=>e!==r&&!u.has(e)&&(u.add(e),e&&!e.d&&(o.r++,e.push(o)));l.map((t=>t[e](n)))}));return o.r?h:s()}),(e=>(e?c(d[n]=e):h(p),a(r)))),r&&(r.d=0)},s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};s(356)})();