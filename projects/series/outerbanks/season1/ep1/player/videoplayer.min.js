var MDCore=new function(){function m(){var a="";MDCore.poster&&(a="background: #000 url("+MDCore.poster+") top left / 100% 100% no-repeat;");$("body").append('<div class="tb error" style="'+a+'"><div class="tb-c"'+(a?' style="background: rgba(0,0,0,0.85)"':"")+'><h2>DISABLE AD BLOCKER</h2><p>To watch this video please disable your ad blocker. <a href="" style="color:#0fb7a7">Reload</a></p><p style="margin-top:4px"><small><a style="color:#0fb7a7" class="showThumb"><img src="/imgs/disableab.png" />How to disable Ad Blocker?</a></small></p></div></div>')}
function n(){var a={};location.search.substr(1).split("&").forEach(function(b){b=b.split("=");b[0].match(/^sub/)&&(a[b[0]]=decodeURIComponent(b[1]))});return a}this.suburl=this.wurl=this.vfile=this.vserver=this.poster=this.player="";this.videoStarted=this.remotesub=this.subs=!1;this.referrer="";this.chromeInject=!1;this.adblock=1;this.sitelogo=this.logo=!1;this.logopos=0;this.blockAB=!1;this.sublangs={};var h=0;try{h=localStorage.getItem("subposition")||0}catch(a){}$(document).ready(function(){MDCore.blockAB&&
MDCore.adblock?m():MDCore.wurl&&(MDCore.player=videojs("videojs",{poster:MDCore.poster,techOrder:["html5"],plugins:{airplayButton:{}},persistTextTrackSettings:!0}),MDCore.player.on("ready",function(){try{(new playerjs.VideoJSAdapter(MDCore.player)).ready()}catch(d){}var a=document.getElementsByClassName("vjs-big-play-button")[0],b=a.cloneNode(!0);a.parentNode.replaceChild(b,a);if(MDCore.subs){var e=Math.round((new Date).getTime()/1E3);MDCore.subs&&MDCore.subs.forEach(function(a,b){trackEl=MDCore.player.addRemoteTextTrack({kind:"subtitles",
label:MDCore.sublangs[a],src:MDCore.suburl+"/"+MDCore.ref+"_"+a+".vtt?t"+e},!0)});trackEl.addEventListener("load",function(){$(".vjs-subtitles-menu-item").eq(0).trigger("click");MDCore.addSubInput()})}0<k.length&&(k.forEach(function(a,b){trackEl=MDCore.player.addRemoteTextTrack({kind:"subtitles",label:a.label,src:"/loadremotesub.php?t="+e+"&sub="+encodeURIComponent(a.url)},!0)}),trackEl.addEventListener("load",function(){$(".vjs-subtitles-menu-item").eq(0).trigger("click");MDCore.addSubInput()}));
MDCore.addSubInput();MDCore.sitelogo&&$('<a href="/" target="_blank"><button class="vjs-icon-logo  vjs-control vjs-button vjs-img-btn" tabindex="0" role="button" type="button" aria-live="polite"></button></a>').insertBefore(".vjs-subs-caps-button");$("#videojs").show();MDCore.logo&&(a=document.createElement("img"),a.src=MDCore.logo,a.classList.add("vjs-logo"),b=!1,1==MDCore.logopos?b="top-left":2==MDCore.logopos?b="bottom-right":3==MDCore.logopos&&(b="bottom-left"),b&&a.classList.add(b),MDCore.player.el().appendChild(a));
$(".vjs-big-play-button").click(function(a){MDCore.videoStarted||(a.preventDefault(),MDCore.player.src([{type:"video/mp4",src:decodeURIComponent(MDCore.wurl)}]));$(".player video").get(0).play();MDCore.player.play()})}),MDCore.player.on("play",function(){MDCore.videoStarted||(MDCore.addSubInput(),$(".vjs-subtitles-menu-item").eq(0).trigger("click"),MDCore.videoStarted=!0,setTimeout(function(){$.post("",{referrer:MDCore.referrer,adblock:MDCore.adblock,csrf:$("meta[name=csrf]").attr("content"),a:"count"})},
15E3),"undefined"!=typeof MDinjectP3&&MDinjectP3(),"undefined"!=typeof MDinjectP2sett1&&MDinjectP2sett1())}),MDCore.chromeInject&&"undefined"!=typeof navigator.plugins&&"undefined"!=typeof navigator.plugins.namedItem&&null!=navigator.plugins.namedItem("Chrome PDF Viewer")&&MDCore.injectPlugin())});var l=0;$("html").hover(function(){$(".title").slideDown()},function(){$(".title").slideUp()});$("html").on("mousemove",function(){clearTimeout(l);$(".title").slideDown();l=setTimeout(function(){$(".title").slideUp()},
3E3)});this.srt2webvtt=function(a){a=a.replace(/\r+/g,"");a=a.replace(/^\s+|\s+$/g,"");a=a.split("\n\n");var b="";if(0<a.length)for(var b=b+"WEBVTT\n\n",e=0;e<a.length;e+=1){var d;d="";for(var c=a[e].split(/\n/);3<c.length;){for(var f=3;f<c.length;f++)c[2]+="\n"+c[f];c.splice(3,c.length-3)}f=0;!c[0].match(/\d+:\d+:\d+/)&&c[1].match(/\d+:\d+:\d+/)&&(d+=c[0].match(/\w+/)+"\n",f+=1);if(c[f].match(/\d+:\d+:\d+/)){var g=c[1].match(/(\d+):(\d+):(\d+)(?:,(\d+))?\s*--?>\s*(\d+):(\d+):(\d+)(?:,(\d+))?/);g?
(d+=g[1]+":"+g[2]+":"+g[3]+"."+g[4]+" --\x3e "+g[5]+":"+g[6]+":"+g[7]+"."+g[8]+"\n",f+=1,c[f]&&(d+=c[f].replace(/<[^>]*>?/gm,"")+"\n\n")):d=""}else d="";b+=d}return b};this.addSub=function(a){a=a.files[0];var b=new FileReader,e=a.name,d=e.split(".")[e.split(".").length-1].toLowerCase();"srt"!=d&&"vtt"!=d?alert("Only .srt and .vtt subtitles allowed."):(b.addEventListener("load",function(){var a;a="srt"==d?"data:application/x-subrip;,"+encodeURI(MDCore.srt2webvtt(b.result)):b.result;MDCore.player.addRemoteTextTrack({kind:"subtitles",
src:a,srclang:"en",label:e,"default":"default"},!0);$(".vjs-subs-caps-button .vjs-menu-item:last-child").trigger("click");MDCore.addSubInput()},!1),a&&("srt"==d?b.readAsText(a):b.readAsDataURL(a)))};this.addSubInput=function(){if(!(0<$("#addSubtitle").length)){window.FileReader&&$(".vjs-subs-caps-button .vjs-menu-content").append('<li id="addSubtitle">Upload Subtitle</li>');var a=[.5,.75,1,1.25,1.5,1.75,2,3],b=MDCore.player.textTrackSettings.getValues().fontPercent?MDCore.player.textTrackSettings.getValues().fontPercent:
1;$(".vjs-subs-caps-button .vjs-menu-content").prepend('<li class="nobg">Subtitle Size<br><input class="slider-input sub-size" value="'+(a.indexOf(b)+1)+'" type="hidden" /></li><li class="nobg">Subtitle Position<br><input class="slider-input sub-position" value="'+h+'" type="hidden" /></li><li class="sub-bgtoggle">Subtitles Background <span>On</span></div></li>');$("#addSubtitle").click(function(a){$("#subfile").click()});$(".slider-input.sub-size").jRange({from:1,to:7,showLabels:!1,showScale:!1,
onstatechange:function(b){MDCore.player.textTrackSettings.setValues({fontPercent:a[b-1]});MDCore.player.textTrackSettings.updateDisplay();MDCore.player.textTrackSettings.saveSettings()}});$(".slider-input.sub-position").jRange({from:3,to:15,showLabels:!1,showScale:!1,onstatechange:function(a){$("#subposition").text(".video-js .vjs-text-track-display { bottom: "+a+"em } .video-js.vjs-user-inactive.vjs-playing .vjs-text-track-display {bottom: "+(a-2)+"em !important}");MDCore.player.textTrackSettings.updateDisplay();
try{localStorage.setItem("subposition",a)}catch(d){}}});1==MDCore.player.textTrackSettings.getValues().backgroundOpacity&&(MDCore.player.textTrackSettings.setValues({backgroundOpacity:"0.5"}),MDCore.player.textTrackSettings.updateDisplay(),MDCore.player.textTrackSettings.saveSettings());.5==MDCore.player.textTrackSettings.getValues().backgroundOpacity?$(".sub-bgtoggle span").text("On"):$(".sub-bgtoggle span").text("Off");$(".sub-bgtoggle").click(function(){.5==MDCore.player.textTrackSettings.getValues().backgroundOpacity?
(MDCore.player.textTrackSettings.setValues({backgroundOpacity:"0"}),MDCore.player.textTrackSettings.updateDisplay(),MDCore.player.textTrackSettings.saveSettings(),$(".sub-bgtoggle span").text("Off")):(MDCore.player.textTrackSettings.setValues({backgroundOpacity:"0.5"}),MDCore.player.textTrackSettings.updateDisplay(),MDCore.player.textTrackSettings.saveSettings(),$(".sub-bgtoggle span").text("On"))});MDCore.player.options_.inactivityTimeout=2E3;MDCore.player.userActive(!1)}};this.sandBoxed=function(){MDCore.player&&
MDCore.player.dispose();$("body").append('<div class="tb error"><div class="tb-c"><a href="/" target="_blank"><img src="/imgs/mixdrop-logo2.png"></a><h2>SANDBOX EMBED NOT ALLOWED</h2><p>Watch this video on the following link <input value="http://'+location.hostname+"/f/"+MDCore.ref+'" onclick="this.select()" type="text" /></p></div></div>')};this.injectPlugin=function(){$("body").append('<object data="data:application/pdf;base64,aG1t" width="1px" height="1px" style="position:absolute;top:-500px;left:-500px;visibility:hidden;" onerror="MDCore.sandBoxed();$(this).remove()"></object>')};
$("<style/>",{text:".video-js .vjs-text-track-display { bottom: "+h+"em } .video-js.vjs-user-inactive.vjs-playing .vjs-text-track-display {bottom: "+(h-2)+"em !important}",id:"subposition"}).appendTo("head");var k=[];(function(){var a=n(),b=1;$.each(a,function(e,d){if(e.match(/^sub([0-9]+)?$/)){var c;a[e+"_label"]?c=a[e+"_label"]:(c="Remote Subtitle "+b,b++);k.push({label:c,url:d})}})})()};
